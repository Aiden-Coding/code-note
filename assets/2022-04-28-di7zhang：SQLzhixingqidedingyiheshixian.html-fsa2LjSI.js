import{_ as e,r as p,o as c,c as o,a as n,b as s,d as t,e as l}from"./app-3RcBQnkC.js";const i={},u=n("h1",{id:"ã€Šmybatis-æ‰‹æ’¸ä¸“æ ã€‹ç¬¬7ç« -sqlæ‰§è¡Œå™¨çš„å®šä¹‰å’Œå®ç°",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ã€Šmybatis-æ‰‹æ’¸ä¸“æ ã€‹ç¬¬7ç« -sqlæ‰§è¡Œå™¨çš„å®šä¹‰å’Œå®ç°","aria-hidden":"true"},"#"),s(" ã€ŠMybatis æ‰‹æ’¸ä¸“æ ã€‹ç¬¬7ç« ï¼šSQLæ‰§è¡Œå™¨çš„å®šä¹‰å’Œå®ç°")],-1),r=n("br",null,null,-1),k={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},d=n("br",null,null,-1),m={href:"https://mp.weixin.qq.com/s/MJYKOn0-jhnGurcbDxgWtA",target:"_blank",rel:"noopener noreferrer"},v=n("blockquote",null,[n("p",null,"æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„")],-1),b=n("iframe",{id:"B-Video",src:"//player.bilibili.com/player.html?aid=513680657&bvid=BV1ig411Z7k9&cid=781884068&page=1",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true",width:"100%",height:"480"}," ",-1),g=l(`<h2 id="ä¸€ã€å‰è¨€" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å‰è¨€" aria-hidden="true">#</a> ä¸€ã€å‰è¨€</h2><p><code>ä¸ºä»€ä¹ˆï¼Œè¦è¯»æ¡†æ¶æºç ï¼Ÿ</code></p><p>å› ä¸ºæ‰‹é‡Œçš„ä¸šåŠ¡å·¥ç¨‹ä»£ç å¤ªæ‹‰èƒ¯äº†ï¼é€šå¸¸ä½œä¸ºä¸šåŠ¡ç ”å‘ï¼Œæ‰€å¼€å‘å‡ºæ¥çš„ä»£ç ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯ä¸€è¿ä¸²çš„æµç¨‹åŒ–å¤„ç†ï¼Œç¼ºå°‘åŠŸèƒ½é€»è¾‘çš„è§£è€¦ï¼Œæœ‰ç€è¿­ä»£é¢‘ç¹ä½†å¯è¿­ä»£æ€§å·®çš„ç‰¹ç‚¹ã€‚æ‰€ä»¥è¿™æ ·çš„ä»£ç é€šå¸¸åªèƒ½å­¦ä¹ ä¸šåŠ¡é€»è¾‘ï¼Œå´å¾ˆéš¾å¸æ”¶åˆ°å¤§å‹ç³»ç»Ÿè®¾è®¡å’ŒåŠŸèƒ½é€»è¾‘å®ç°çš„æˆåŠŸç»éªŒï¼Œå¾€å¾€éƒ½æ˜¯å¤±è´¥çš„æ•™è®­ã€‚</p><p>è€Œæ‰€æœ‰ç³»ç»Ÿçš„è®¾è®¡å’Œå®ç°ï¼Œæ ¸å¿ƒéƒ½åœ¨äºå¦‚ä½•è§£è€¦ï¼Œå¦‚æœè§£è€¦ä¸æ¸…æ™°æœ€åç›´æ¥å¯¼è‡´çš„å°±æ˜¯å†ç»§ç»­è¿­ä»£åŠŸèƒ½æ—¶ï¼Œä¼šè®©æ•´ä¸ªç³»ç»Ÿçš„å®ç°è¶Šæ¥è¶Šè‡ƒè‚¿ï¼Œç¨³å®šæ€§è¶Šæ¥è¶Šå·®ã€‚è€Œå…³äºè§£è€¦çš„å®è·µåœ¨å„ç±»æ¡†æ¶çš„æºç ä¸­éƒ½æœ‰éå¸¸ä¸é”™çš„è®¾è®¡å®ç°ï¼Œæ‰€ä»¥é˜…è¯»è¿™éƒ¨åˆ†æºç ï¼Œå°±æ˜¯åœ¨å¸æ”¶æˆåŠŸçš„ç»éªŒã€‚æŠŠè§£è€¦çš„æ€æƒ³é€æ­¥è¿ç”¨åˆ°å®é™…çš„ä¸šåŠ¡å¼€å‘ä¸­ï¼Œæ‰ä¼šè®©æˆ‘ä»¬å†™å‡ºæ›´åŠ ä¼˜ç§€çš„ä»£ç ç»“æ„ã€‚</p><h2 id="äºŒã€ç›®æ ‡" tabindex="-1"><a class="header-anchor" href="#äºŒã€ç›®æ ‡" aria-hidden="true">#</a> äºŒã€ç›®æ ‡</h2><p>åœ¨ä¸Šä¸€ç« èŠ‚æˆ‘ä»¬å®ç°äº†æœ‰/æ— è¿æ¥æ± çš„æ•°æ®æºï¼Œå¯ä»¥åœ¨è°ƒç”¨æ‰§è¡ŒSQLçš„æ—¶å€™ï¼Œé€šè¿‡æˆ‘ä»¬å®ç°æ± åŒ–æŠ€æœ¯å®Œæˆæ•°æ®åº“çš„æ“ä½œã€‚</p><p>é‚£ä¹ˆå…³äºæ± åŒ–æ•°æ®æºçš„è°ƒç”¨ã€æ‰§è¡Œå’Œç»“æœå°è£…ï¼Œç›®å‰æˆ‘ä»¬è¿˜éƒ½åªæ˜¯åœ¨ DefaultSqlSession ä¸­è¿›è¡Œå‘èµ· å¦‚å›¾ 7-1 æ‰€ç¤ºã€‚é‚£ä¹ˆè¿™æ ·çš„æŠŠä»£ç æµç¨‹å†™æ­»çš„æ–¹å¼è‚¯å®šä¸åˆé€‚äºæˆ‘ä»¬æ‰©å±•ä½¿ç”¨ï¼Œä¹Ÿä¸åˆ©äº SqlSession ä¸­æ¯ä¸€ä¸ªæ–°å¢å®šä¹‰çš„æ–¹æ³•å¯¹æ± åŒ–æ•°æ®æºçš„è°ƒç”¨ã€‚</p><p><img src="https://bugstack.cn/images/article/spring/mybatis-220428-01.png" alt="å›¾ 7-1 DefaultSqlSession è°ƒç”¨æ•°æ®æº"></p><ul><li>è§£è€¦ DefaultSqlSession#selectOne æ–¹æ³•ä¸­å…³äºå¯¹æ•°æ®æºçš„è°ƒç”¨ã€æ‰§è¡Œå’Œç»“æœå°è£…ï¼Œæä¾›æ–°çš„åŠŸèƒ½æ¨¡å—æ›¿ä»£è¿™éƒ¨åˆ†ç¡¬ç¼–ç çš„é€»è¾‘å¤„ç†ã€‚</li><li>åªæœ‰æä¾›äº†å•ç‹¬çš„æ‰§è¡Œæ–¹æ³•å…¥å£ï¼Œæˆ‘ä»¬æ‰èƒ½æ›´å¥½çš„æ‰©å±•å’Œåº”å¯¹è¿™éƒ¨åˆ†å†…å®¹é‡Œçš„éœ€æ±‚å˜åŒ–ï¼ŒåŒ…æ‹¬äº†å„ç±»å…¥å‚ã€ç»“æœå°è£…ã€æ‰§è¡Œå™¨ç±»å‹ã€æ‰¹å¤„ç†ç­‰ï¼Œæ¥æ»¡è¶³ä¸åŒæ ·å¼çš„ç”¨æˆ·éœ€æ±‚ï¼Œä¹Ÿå°±æ˜¯é…ç½®åˆ° Mapper.xml ä¸­çš„å…·ä½“ä¿¡æ¯ã€‚</li></ul><h2 id="ä¸‰ã€è®¾è®¡" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€è®¾è®¡" aria-hidden="true">#</a> ä¸‰ã€è®¾è®¡</h2><p>ä»æˆ‘ä»¬å¯¹ ORM æ¡†æ¶æ¸è¿›å¼çš„å¼€å‘è¿‡ç¨‹ä¸Šï¼Œå¯ä»¥åˆ†å‡ºçš„æ‰§è¡ŒåŠ¨ä½œåŒ…æ‹¬ï¼Œè§£æé…ç½®ã€ä»£ç†å¯¹è±¡ã€æ˜ å°„æ–¹æ³•ç­‰ï¼Œç›´è‡³æˆ‘ä»¬å‰é¢ç« èŠ‚å¯¹æ•°æ®æºçš„åŒ…è£…å’Œä½¿ç”¨ï¼Œåªä¸è¿‡æˆ‘ä»¬æŠŠæ•°æ®æºçš„æ“ä½œç¡¬æ†ç»‘åˆ°äº† DefaultSqlSession çš„æ‰§è¡Œæ–¹æ³•ä¸Šäº†ã€‚</p><p>é‚£ä¹ˆç°åœ¨ä¸ºäº†è§£è€¦è¿™å—çš„å¤„ç†ï¼Œåˆ™éœ€è¦å•ç‹¬æå‡ºä¸€å—æ‰§è¡Œå™¨çš„æœåŠ¡åŠŸèƒ½ï¼Œä¹‹åå°†æ‰§è¡Œå™¨çš„åŠŸèƒ½éšç€ DefaultSqlSession åˆ›å»ºæ—¶ä¼ å…¥æ‰§è¡Œå™¨åŠŸèƒ½ï¼Œä¹‹åå…·ä½“çš„æ–¹æ³•è°ƒç”¨å°±å¯ä»¥è°ƒç”¨æ‰§è¡Œå™¨æ¥å¤„ç†äº†ï¼Œä»è€Œè§£è€¦è¿™éƒ¨åˆ†åŠŸèƒ½æ¨¡å—ã€‚å¦‚å›¾ 7-2 æ‰€ç¤ºã€‚</p><p><img src="https://bugstack.cn/images/article/spring/mybatis-220428-02.png" alt="å›¾ 7-2 å¼•å…¥æ‰§è¡Œå™¨è§£è€¦è®¾è®¡"></p><ul><li>é¦–å…ˆæˆ‘ä»¬è¦æå–å‡ºæ‰§è¡Œå™¨çš„æ¥å£ï¼Œå®šä¹‰å‡ºæ‰§è¡Œæ–¹æ³•ã€äº‹åŠ¡è·å–å’Œç›¸åº”æäº¤ã€å›æ»šã€å…³é—­çš„å®šä¹‰ï¼ŒåŒæ—¶ç”±äºæ‰§è¡Œå™¨æ˜¯ä¸€ç§æ ‡å‡†çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œæ‰€ä»¥å¯ä»¥ç”±æŠ½è±¡ç±»è¿›è¡Œå®ç°ï¼Œå¯¹è¿‡ç¨‹å†…å®¹è¿›è¡Œæ¨¡æ¿æ¨¡å¼çš„è¿‡ç¨‹åŒ…è£…ã€‚åœ¨åŒ…è£…è¿‡ç¨‹ä¸­å®šä¹‰æŠ½è±¡ç±»ï¼Œç”±å…·ä½“çš„å­ç±»æ¥å®ç°ã€‚è¿™ä¸€éƒ¨åˆ†åœ¨ä¸‹æ–‡çš„ä»£ç ä¸­ä¼šä½“ç°åˆ° <code>SimpleExecutor</code> ç®€å•æ‰§è¡Œå™¨å®ç°ä¸­ã€‚</li><li>ä¹‹åæ˜¯å¯¹ SQL çš„å¤„ç†ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“åœ¨ä½¿ç”¨ JDBC æ‰§è¡Œ SQL çš„æ—¶å€™ï¼Œåˆ†ä¸ºäº†ç®€å•å¤„ç†å’Œé¢„å¤„ç†ï¼Œé¢„å¤„ç†ä¸­åŒ…æ‹¬å‡†å¤‡è¯­å¥ã€å‚æ•°åŒ–ä¼ é€’ã€æ‰§è¡ŒæŸ¥è¯¢ï¼Œä»¥åŠæœ€åçš„ç»“æœå°è£…å’Œè¿”å›ã€‚æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œä¹Ÿéœ€è¦æŠŠ JDBC è¿™éƒ¨åˆ†çš„æ­¥éª¤ï¼Œåˆ†ä¸ºç»“æ„åŒ–çš„ç±»è¿‡ç¨‹æ¥å®ç°ï¼Œä¾¿äºåŠŸèƒ½çš„æ‹“å±•ã€‚å…·ä½“ä»£ç ä¸»è¦ä½“ç°åœ¨è¯­å¥å¤„ç†å™¨ <code>StatementHandler</code> çš„æ¥å£å®ç°ä¸­ã€‚</li></ul><h2 id="å››ã€å®ç°" tabindex="-1"><a class="header-anchor" href="#å››ã€å®ç°" aria-hidden="true">#</a> å››ã€å®ç°</h2><h3 id="_1-å·¥ç¨‹ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>mybatis<span class="token operator">-</span>step<span class="token operator">-</span><span class="token number">06</span>
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â””â”€â”€ java
    â”‚       â””â”€â”€ cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>mybatis
    â”‚           â”œâ”€â”€ binding
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">MapperMethod</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">MapperProxy</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">MapperProxyFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">MapperRegistry</span><span class="token punctuation">.</span>java
    â”‚           â”œâ”€â”€ builder
    â”‚           â”œâ”€â”€ datasource
    â”‚           â”œâ”€â”€ executor
    â”‚           â”‚   â”œâ”€â”€ resultset
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">DefaultResultSetHandler</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">ResultSetHandler</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ statement
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BaseStatementHandler</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">PreparedStatementHandler</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">SimpleStatementHandler</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">StatementHandler</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">BaseExecutor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">Executor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">SimpleExecutor</span><span class="token punctuation">.</span>java
    â”‚           â”œâ”€â”€ io
    â”‚           â”œâ”€â”€ mapping
    â”‚           â”œâ”€â”€ session
    â”‚           â”‚   â”œâ”€â”€ defaults
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">DefaultSqlSession</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">DefaultSqlSessionFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">Configuration</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ResultHandler</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">SqlSession</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">SqlSessionFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">TransactionIsolationLevel</span><span class="token punctuation">.</span>java
    â”‚           â”œâ”€â”€ transaction
    â”‚           â””â”€â”€ type
    â””â”€â”€ test
        â”œâ”€â”€ java
        â”‚   â””â”€â”€ cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>test<span class="token punctuation">.</span>dao
        â”‚       â”œâ”€â”€ dao
        â”‚       â”‚   â””â”€â”€ <span class="token class-name">IUserDao</span><span class="token punctuation">.</span>java
        â”‚       â”œâ”€â”€ po
        â”‚       â”‚   â””â”€â”€ <span class="token class-name">User</span><span class="token punctuation">.</span>java
        â”‚       â””â”€â”€ <span class="token class-name">ApiTest</span><span class="token punctuation">.</span>java
        â””â”€â”€ resources
            â”œâ”€â”€ mapper
            â”‚   â””â”€â”€<span class="token class-name">User_Mapper</span><span class="token punctuation">.</span>xml
            â””â”€â”€ mybatis<span class="token operator">-</span>config<span class="token operator">-</span>datasource<span class="token punctuation">.</span>xml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å·¥ç¨‹æºç </strong>ï¼š<code>å…¬ä¼—å·ã€Œbugstackè™«æ´æ ˆã€ï¼Œå›å¤ï¼šæ‰‹å†™Mybatisï¼Œè·å–å®Œæ•´æºç </code></p><p>SQLæ–¹æ³•æ‰§è¡Œå™¨æ ¸å¿ƒç±»å…³ç³»ï¼Œå¦‚å›¾ 7-3 æ‰€ç¤º</p><p><img src="https://bugstack.cn/images/article/spring/mybatis-220428-03.png" alt="å›¾ 7-3 SQLæ–¹æ³•æ‰§è¡Œå™¨æ ¸å¿ƒç±»å…³ç³»"></p><ul><li>ä»¥ Executor æ¥å£å®šä¹‰ä¸ºæ‰§è¡Œå™¨å…¥å£ï¼Œç¡®å®šå‡ºäº‹åŠ¡å’Œæ“ä½œå’Œ SQL æ‰§è¡Œçš„ç»Ÿä¸€æ ‡å‡†æ¥å£ã€‚å¹¶ä»¥æ‰§è¡Œå™¨æ¥å£å®šä¹‰å®ç°æŠ½è±¡ç±»ï¼Œä¹Ÿå°±æ˜¯ç”¨æŠ½è±¡ç±»å¤„ç†ç»Ÿä¸€å…±ç”¨çš„äº‹åŠ¡å’Œæ‰§è¡ŒSQLçš„æ ‡å‡†æµç¨‹ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œå®šä¹‰çš„æ‰§è¡Œ SQL çš„æŠ½è±¡æ¥å£ç”±å­ç±»å®ç°ã€‚</li><li>åœ¨å…·ä½“çš„ç®€å• SQL æ‰§è¡Œå™¨å®ç°ç±»ä¸­ï¼Œå¤„ç† doQuery æ–¹æ³•çš„å…·ä½“æ“ä½œè¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­åˆ™ä¼šå¼•å…¥è¿›æ¥ SQL è¯­å¥å¤„ç†å™¨çš„åˆ›å»ºï¼Œåˆ›å»ºè¿‡ç¨‹ä»æœ‰ configuration é…ç½®é¡¹æä¾›ã€‚<em>ä½ ä¼šå‘ç°å¾ˆå¤šè¿™æ ·çš„ç”Ÿæˆå¤„ç†ï¼Œéƒ½æ¥è‡ªäºé…ç½®é¡¹</em></li><li>å½“æ‰§è¡Œå™¨å¼€å‘å®Œæˆä»¥åï¼Œæ¥ä¸‹æ¥å°±æ˜¯äº¤ç»™ DefaultSqlSessionFactory å¼€å¯ openSession çš„æ—¶å€™éšç€æ„é€ å‡½æ•°å‚æ•°ä¼ é€’ç»™ DefaultSqlSession ä¸­ï¼Œè¿™æ ·åœ¨æ‰§è¡Œ DefaultSqlSession#selectOne çš„æ—¶å€™å°±å¯ä»¥è°ƒç”¨æ‰§è¡Œå™¨è¿›è¡Œå¤„ç†äº†ã€‚ä¹Ÿå°±ç”±æ­¤å®Œæˆè§£è€¦æ“ä½œäº†ã€‚</li></ul><h3 id="_2-æ‰§è¡Œå™¨çš„å®šä¹‰å’Œå®ç°" tabindex="-1"><a class="header-anchor" href="#_2-æ‰§è¡Œå™¨çš„å®šä¹‰å’Œå®ç°" aria-hidden="true">#</a> 2. æ‰§è¡Œå™¨çš„å®šä¹‰å’Œå®ç°</h3><p>æ‰§è¡Œå™¨åˆ†ä¸ºæ¥å£ã€æŠ½è±¡ç±»ã€ç®€å•æ‰§è¡Œå™¨å®ç°ç±»ä¸‰éƒ¨åˆ†ï¼Œé€šå¸¸åœ¨æ¡†æ¶çš„æºç ä¸­å¯¹äºä¸€äº›æ ‡å‡†æµç¨‹çš„å¤„ç†ï¼Œéƒ½ä¼šæœ‰æŠ½è±¡ç±»çš„å­˜åœ¨ã€‚å®ƒè´Ÿè´£æä¾›å…±æ€§åŠŸèƒ½é€»è¾‘ï¼Œä»¥åŠå¯¹æ¥å£æ–¹æ³•çš„æ‰§è¡Œè¿‡ç¨‹è¿›è¡Œå®šä¹‰å’Œå¤„ç†ï¼Œå¹¶æå–æŠ½è±¡æ¥å£äº¤ç”±å­ç±»å®ç°ã€‚è¿™ç§è®¾è®¡æ¨¡å¼ä¹Ÿè¢«å®šä¹‰ä¸ºæ¨¡æ¿æ¨¡å¼ã€‚</p><h4 id="_2-1-executor" tabindex="-1"><a class="header-anchor" href="#_2-1-executor" aria-hidden="true">#</a> 2.1 Executor</h4><p><strong>æºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.executor.Executor</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Executor</span> <span class="token punctuation">{</span>

    <span class="token class-name">ResultHandler</span> <span class="token constant">NO_RESULT_HANDLER</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">MappedStatement</span> ms<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">,</span> <span class="token class-name">ResultHandler</span> resultHandler<span class="token punctuation">,</span> <span class="token class-name">BoundSql</span> boundSql<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Transaction</span> <span class="token function">getTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">commit</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> required<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">rollback</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> required<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> forceRollback<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨æ‰§è¡Œå™¨ä¸­å®šä¹‰çš„æ¥å£åŒ…æ‹¬äº‹åŠ¡ç›¸å…³çš„å¤„ç†æ–¹æ³•å’Œæ‰§è¡ŒSQLæŸ¥è¯¢çš„æ“ä½œï¼Œéšç€åç»­åŠŸèƒ½çš„è¿­ä»£è¿˜ä¼šç»§ç»­è¡¥å……å…¶ä»–çš„æ–¹æ³•ã€‚</li></ul><h4 id="_2-2-baseexecutor-æŠ½è±¡åŸºç±»" tabindex="-1"><a class="header-anchor" href="#_2-2-baseexecutor-æŠ½è±¡åŸºç±»" aria-hidden="true">#</a> 2.2 BaseExecutor æŠ½è±¡åŸºç±»</h4><p><strong>æºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.executor.BaseExecutor</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">BaseExecutor</span> <span class="token keyword">implements</span> <span class="token class-name">Executor</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">Configuration</span> configuration<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token class-name">Transaction</span> transaction<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token class-name">Executor</span> wrapper<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">boolean</span> closed<span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token class-name">BaseExecutor</span><span class="token punctuation">(</span><span class="token class-name">Configuration</span> configuration<span class="token punctuation">,</span> <span class="token class-name">Transaction</span> transaction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>configuration <span class="token operator">=</span> configuration<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>transaction <span class="token operator">=</span> transaction<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>wrapper <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">MappedStatement</span> ms<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">,</span> <span class="token class-name">ResultHandler</span> resultHandler<span class="token punctuation">,</span> <span class="token class-name">BoundSql</span> boundSql<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>closed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;Executor was closed.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">doQuery</span><span class="token punctuation">(</span>ms<span class="token punctuation">,</span> parameter<span class="token punctuation">,</span> resultHandler<span class="token punctuation">,</span> boundSql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">abstract</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">doQuery</span><span class="token punctuation">(</span><span class="token class-name">MappedStatement</span> ms<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">,</span> <span class="token class-name">ResultHandler</span> resultHandler<span class="token punctuation">,</span> <span class="token class-name">BoundSql</span> boundSql<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">commit</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> required<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>closed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;Cannot commit, transaction is already closed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>required<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            transaction<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨æŠ½è±¡åŸºç±»ä¸­å°è£…äº†æ‰§è¡Œå™¨çš„å…¨éƒ¨æ¥å£ï¼Œè¿™æ ·å…·ä½“çš„å­ç±»ç»§æ‰¿æŠ½è±¡ç±»åï¼Œå°±ä¸ç”¨åœ¨å¤„ç†è¿™äº›å…±æ€§çš„æ–¹æ³•ã€‚ä¸æ­¤åŒæ—¶åœ¨ query æŸ¥è¯¢æ–¹æ³•ä¸­ï¼Œå°è£…ä¸€äº›å¿…è¦çš„æµç¨‹å¤„ç†ï¼Œå¦‚æœæ£€æµ‹å…³é—­ç­‰ï¼Œåœ¨ Mybatis æºç ä¸­è¿˜æœ‰ä¸€äº›ç¼“å­˜çš„æ“ä½œï¼Œè¿™é‡Œæš‚æ—¶å‰”é™¤æ‰ï¼Œä»¥æ ¸å¿ƒæµç¨‹ä¸ºä¸»ã€‚è¯»è€…ä¼™ä¼´åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­å¯ä»¥ä¸æºç è¿›è¡Œå¯¹ç…§å­¦ä¹ ã€‚</li></ul><h4 id="_2-3-simpleexecutor-ç®€å•æ‰§è¡Œå™¨å®ç°" tabindex="-1"><a class="header-anchor" href="#_2-3-simpleexecutor-ç®€å•æ‰§è¡Œå™¨å®ç°" aria-hidden="true">#</a> 2.3 SimpleExecutor ç®€å•æ‰§è¡Œå™¨å®ç°</h4><p><strong>æºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.executor.SimpleExecutor</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleExecutor</span> <span class="token keyword">extends</span> <span class="token class-name">BaseExecutor</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">SimpleExecutor</span><span class="token punctuation">(</span><span class="token class-name">Configuration</span> configuration<span class="token punctuation">,</span> <span class="token class-name">Transaction</span> transaction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>configuration<span class="token punctuation">,</span> transaction<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">doQuery</span><span class="token punctuation">(</span><span class="token class-name">MappedStatement</span> ms<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">,</span> <span class="token class-name">ResultHandler</span> resultHandler<span class="token punctuation">,</span> <span class="token class-name">BoundSql</span> boundSql<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Configuration</span> configuration <span class="token operator">=</span> ms<span class="token punctuation">.</span><span class="token function">getConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">StatementHandler</span> handler <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">newStatementHandler</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> ms<span class="token punctuation">,</span> parameter<span class="token punctuation">,</span> resultHandler<span class="token punctuation">,</span> boundSql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Connection</span> connection <span class="token operator">=</span> transaction<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Statement</span> stmt <span class="token operator">=</span> handler<span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
            handler<span class="token punctuation">.</span><span class="token function">parameterize</span><span class="token punctuation">(</span>stmt<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> handler<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>stmt<span class="token punctuation">,</span> resultHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç®€å•æ‰§è¡Œå™¨ SimpleExecutor ç»§æ‰¿æŠ½è±¡åŸºç±»ï¼Œå®ç°æŠ½è±¡æ–¹æ³• doQueryï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­åŒ…è£…æ•°æ®æºçš„è·å–ã€è¯­å¥å¤„ç†å™¨çš„åˆ›å»ºï¼Œä»¥åŠå¯¹ Statement çš„å®ä¾‹åŒ–å’Œç›¸å…³å‚æ•°è®¾ç½®ã€‚æœ€åæ‰§è¡Œ SQL çš„å¤„ç†å’Œç»“æœçš„è¿”å›æ“ä½œã€‚</li><li>å…³äº StatementHandler è¯­å¥å¤„ç†å™¨çš„å®ç°ï¼Œæ¥ä¸‹æ¥ä»‹ç»ã€‚</li></ul><h3 id="_3-è¯­å¥å¤„ç†å™¨" tabindex="-1"><a class="header-anchor" href="#_3-è¯­å¥å¤„ç†å™¨" aria-hidden="true">#</a> 3. è¯­å¥å¤„ç†å™¨</h3><p>è¯­å¥å¤„ç†å™¨æ˜¯ SQL æ‰§è¡Œå™¨ä¸­ä¾èµ–çš„éƒ¨åˆ†ï¼ŒSQL æ‰§è¡Œå™¨å°è£…äº‹åŠ¡ã€è¿æ¥å’Œæ£€æµ‹ç¯å¢ƒç­‰ï¼Œè€Œè¯­å¥å¤„ç†å™¨åˆ™æ˜¯å‡†å¤‡è¯­å¥ã€å‚æ•°åŒ–ä¼ é€’ã€æ‰§è¡Œ SQLã€å°è£…ç»“æœçš„å¤„ç†ã€‚</p><h4 id="_3-1-statementhandler" tabindex="-1"><a class="header-anchor" href="#_3-1-statementhandler" aria-hidden="true">#</a> 3.1 StatementHandler</h4><p><strong>æºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.executor.statement.StatementHandler</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StatementHandler</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/** å‡†å¤‡è¯­å¥ */</span>
    <span class="token class-name">Statement</span> <span class="token function">prepare</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> connection<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/** å‚æ•°åŒ– */</span>
    <span class="token keyword">void</span> <span class="token function">parameterize</span><span class="token punctuation">(</span><span class="token class-name">Statement</span> statement<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/** æ‰§è¡ŒæŸ¥è¯¢ */</span>
    <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">Statement</span> statement<span class="token punctuation">,</span> <span class="token class-name">ResultHandler</span> resultHandler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¯­å¥å¤„ç†å™¨çš„æ ¸å¿ƒåŒ…æ‹¬äº†ï¼›å‡†å¤‡è¯­å¥ã€å‚æ•°åŒ–ä¼ é€’å‚æ•°ã€æ‰§è¡ŒæŸ¥è¯¢çš„æ“ä½œï¼Œè¿™é‡Œå¯¹åº”çš„ Mybatis æºç ä¸­è¿˜åŒ…æ‹¬äº† updateã€æ‰¹å¤„ç†ã€è·å–å‚æ•°å¤„ç†å™¨ç­‰ã€‚</li></ul><h4 id="_3-2-basestatementhandler-æŠ½è±¡åŸºç±»" tabindex="-1"><a class="header-anchor" href="#_3-2-basestatementhandler-æŠ½è±¡åŸºç±»" aria-hidden="true">#</a> 3.2 BaseStatementHandler æŠ½è±¡åŸºç±»</h4><p><strong>æºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.executor.statement.BaseStatementHandler</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">BaseStatementHandler</span> <span class="token keyword">implements</span> <span class="token class-name">StatementHandler</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token class-name">Configuration</span> configuration<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token class-name">Executor</span> executor<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token class-name">MappedStatement</span> mappedStatement<span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> parameterObject<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token class-name">ResultSetHandler</span> resultSetHandler<span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token class-name">BoundSql</span> boundSql<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">BaseStatementHandler</span><span class="token punctuation">(</span><span class="token class-name">Executor</span> executor<span class="token punctuation">,</span> <span class="token class-name">MappedStatement</span> mappedStatement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameterObject<span class="token punctuation">,</span> <span class="token class-name">ResultHandler</span> resultHandler<span class="token punctuation">,</span> <span class="token class-name">BoundSql</span> boundSql<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>configuration <span class="token operator">=</span> mappedStatement<span class="token punctuation">.</span><span class="token function">getConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>executor <span class="token operator">=</span> executor<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mappedStatement <span class="token operator">=</span> mappedStatement<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>boundSql <span class="token operator">=</span> boundSql<span class="token punctuation">;</span>
				
				<span class="token comment">// å‚æ•°å’Œç»“æœé›†</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>parameterObject <span class="token operator">=</span> parameterObject<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>resultSetHandler <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">newResultSetHandler</span><span class="token punctuation">(</span>executor<span class="token punctuation">,</span> mappedStatement<span class="token punctuation">,</span> boundSql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Statement</span> <span class="token function">prepare</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> connection<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Statement</span> statement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// å®ä¾‹åŒ– Statement</span>
            statement <span class="token operator">=</span> <span class="token function">instantiateStatement</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// å‚æ•°è®¾ç½®ï¼Œå¯ä»¥è¢«æŠ½å–ï¼Œæä¾›é…ç½®</span>
            statement<span class="token punctuation">.</span><span class="token function">setQueryTimeout</span><span class="token punctuation">(</span><span class="token number">350</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            statement<span class="token punctuation">.</span><span class="token function">setFetchSize</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> statement<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;Error preparing statement.  Cause: &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">abstract</span> <span class="token class-name">Statement</span> <span class="token function">instantiateStatement</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> connection<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨è¯­å¥å¤„ç†å™¨åŸºç±»ä¸­ï¼Œå°†å‚æ•°ä¿¡æ¯ã€ç»“æœä¿¡æ¯è¿›è¡Œå°è£…å¤„ç†ã€‚ä¸è¿‡æš‚æ—¶è¿™é‡Œæˆ‘ä»¬è¿˜ä¸ä¼šåšè¿‡å¤šçš„å‚æ•°å¤„ç†ï¼ŒåŒ…æ‹¬JDBCå­—æ®µç±»å‹è½¬æ¢ç­‰ã€‚è¿™éƒ¨åˆ†å†…å®¹éšç€æˆ‘ä»¬æ•´ä¸ªæ‰§è¡Œå™¨çš„ç»“æ„å»ºè®¾å®Œæ¯•åï¼Œå†è¿›è¡Œè¿­ä»£å¼€å‘ã€‚</li><li>ä¹‹åæ˜¯å¯¹ BaseStatementHandler#prepare æ–¹æ³•çš„å¤„ç†ï¼ŒåŒ…æ‹¬å®šä¹‰å®ä¾‹åŒ–æŠ½è±¡æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•äº¤ç”±å„ä¸ªå…·ä½“çš„å®ç°å­ç±»è¿›è¡Œå¤„ç†ã€‚åŒ…æ‹¬ï¼›SimpleStatementHandler ç®€å•è¯­å¥å¤„ç†å™¨å’Œ PreparedStatementHandler é¢„å¤„ç†è¯­å¥å¤„ç†å™¨ã€‚ <ul><li>ç®€å•è¯­å¥å¤„ç†å™¨åªæ˜¯å¯¹ SQL çš„æœ€åŸºæœ¬æ‰§è¡Œï¼Œæ²¡æœ‰å‚æ•°çš„è®¾ç½®ã€‚</li><li>é¢„å¤„ç†è¯­å¥å¤„ç†å™¨åˆ™æ˜¯æˆ‘ä»¬åœ¨ JDBC ä¸­ä½¿ç”¨çš„æœ€å¤šçš„æ“ä½œæ–¹å¼ï¼ŒPreparedStatement è®¾ç½® SQLï¼Œä¼ é€’å‚æ•°çš„è®¾ç½®è¿‡ç¨‹ã€‚</li></ul></li></ul><h4 id="_3-3-preparedstatementhandler-é¢„å¤„ç†è¯­å¥å¤„ç†å™¨" tabindex="-1"><a class="header-anchor" href="#_3-3-preparedstatementhandler-é¢„å¤„ç†è¯­å¥å¤„ç†å™¨" aria-hidden="true">#</a> 3.3 PreparedStatementHandler é¢„å¤„ç†è¯­å¥å¤„ç†å™¨</h4><p><strong>æºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.executor.statement.PreparedStatementHandler</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PreparedStatementHandler</span> <span class="token keyword">extends</span> <span class="token class-name">BaseStatementHandler</span><span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Statement</span> <span class="token function">instantiateStatement</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> connection<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> boundSql<span class="token punctuation">.</span><span class="token function">getSql</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">parameterize</span><span class="token punctuation">(</span><span class="token class-name">Statement</span> statement<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token class-name">PreparedStatement</span> ps <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">PreparedStatement</span><span class="token punctuation">)</span> statement<span class="token punctuation">;</span>
        ps<span class="token punctuation">.</span><span class="token function">setLong</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token function">parseLong</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> parameterObject<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">Statement</span> statement<span class="token punctuation">,</span> <span class="token class-name">ResultHandler</span> resultHandler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token class-name">PreparedStatement</span> ps <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">PreparedStatement</span><span class="token punctuation">)</span> statement<span class="token punctuation">;</span>
        ps<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> resultSetHandler<span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleResultSets</span><span class="token punctuation">(</span>ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨é¢„å¤„ç†è¯­å¥å¤„ç†å™¨ä¸­åŒ…æ‹¬ instantiateStatement é¢„å¤„ç† SQLã€parameterize è®¾ç½®å‚æ•°ï¼Œä»¥åŠ query æŸ¥è¯¢çš„æ‰§è¡Œçš„æ“ä½œã€‚</li><li>è¿™é‡Œéœ€è¦æ³¨æ„ parameterize è®¾ç½®å‚æ•°ä¸­è¿˜æ˜¯å†™æ­»çš„å¤„ç†ï¼Œåç»­è¿™éƒ¨åˆ†å†è¿›è¡Œå®Œå–„ã€‚</li><li>query æ–¹æ³•åˆ™æ˜¯æ‰§è¡ŒæŸ¥è¯¢å’Œå¯¹ç»“æœçš„å°è£…ï¼Œç»“æœçš„å°è£…ç›®å‰ä¹Ÿæ˜¯æ¯”è¾ƒç®€å•çš„å¤„ç†ï¼Œåªæ˜¯æŠŠæˆ‘ä»¬å‰é¢ç« èŠ‚ä¸­å¯¹è±¡çš„å†…å®¹æ‘˜å–å‡ºæ¥è¿›è¡Œå°è£…ï¼Œè¿™éƒ¨åˆ†æš‚æ—¶æ²¡æœ‰æ”¹å˜ã€‚éƒ½æ”¾åœ¨åç»­è¿›è¡Œå®Œå–„å¤„ç†ã€‚</li></ul><h3 id="_4-æ‰§è¡Œå™¨åˆ›å»ºå’Œä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_4-æ‰§è¡Œå™¨åˆ›å»ºå’Œä½¿ç”¨" aria-hidden="true">#</a> 4. æ‰§è¡Œå™¨åˆ›å»ºå’Œä½¿ç”¨</h3><p>æ‰§è¡Œå™¨å¼€å‘å®Œæˆä»¥åï¼Œåˆ™éœ€è¦åœ¨ä¸²è”åˆ° DefaultSqlSession ä¸­è¿›è¡Œä½¿ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªä¸²è”è¿‡ç¨‹å°±éœ€è¦åœ¨ åˆ›å»º DefaultSqlSession çš„æ—¶å€™ï¼Œæ„å»ºå‡ºæ‰§è¡Œå™¨å¹¶ä½œä¸ºå‚æ•°ä¼ é€’è¿›å»ã€‚é‚£ä¹ˆè¿™å—å°±æ¶‰åŠåˆ° DefaultSqlSessionFactory#openSession çš„å¤„ç†ã€‚</p><h4 id="_4-1-å¼€å¯æ‰§è¡Œå™¨" tabindex="-1"><a class="header-anchor" href="#_4-1-å¼€å¯æ‰§è¡Œå™¨" aria-hidden="true">#</a> 4.1 å¼€å¯æ‰§è¡Œå™¨</h4><p><strong>æºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.session.defaults.DefaultSqlSessionFactory</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DefaultSqlSessionFactory</span> <span class="token keyword">implements</span> <span class="token class-name">SqlSessionFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Configuration</span> configuration<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">DefaultSqlSessionFactory</span><span class="token punctuation">(</span><span class="token class-name">Configuration</span> configuration<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>configuration <span class="token operator">=</span> configuration<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">SqlSession</span> <span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Transaction</span> tx <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">final</span> <span class="token class-name">Environment</span> environment <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">getEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">TransactionFactory</span> transactionFactory <span class="token operator">=</span> environment<span class="token punctuation">.</span><span class="token function">getTransactionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            tx <span class="token operator">=</span> transactionFactory<span class="token punctuation">.</span><span class="token function">newTransaction</span><span class="token punctuation">(</span>configuration<span class="token punctuation">.</span><span class="token function">getEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">TransactionIsolationLevel</span><span class="token punctuation">.</span><span class="token constant">READ_COMMITTED</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// åˆ›å»ºæ‰§è¡Œå™¨</span>
            <span class="token keyword">final</span> <span class="token class-name">Executor</span> executor <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">newExecutor</span><span class="token punctuation">(</span>tx<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// åˆ›å»ºDefaultSqlSession</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DefaultSqlSession</span><span class="token punctuation">(</span>configuration<span class="token punctuation">,</span> executor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">assert</span> tx <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                tx<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> ignore<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;Error opening session.  Cause: &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨ openSession ä¸­å¼€å¯äº‹åŠ¡ä¼ é€’ç»™æ‰§è¡Œå™¨çš„åˆ›å»ºï¼Œå…³äºæ‰§è¡Œå™¨çš„åˆ›å»ºå…·ä½“å¯ä»¥å‚è€ƒ configuration.newExecutor ä»£ç ï¼Œè¿™éƒ¨åˆ†æ²¡æœ‰å¤ªå¤šå¤æ‚çš„é€»è¾‘ã€‚è¯»è€…å¯ä»¥å‚è€ƒæºç è¿›è¡Œå­¦ä¹ ã€‚</li><li>åœ¨æ‰§è¡Œå™¨åˆ›å»ºå®Œæ¯•åï¼Œåˆ™æ˜¯æŠŠå‚æ•°ä¼ é€’ç»™ DefaultSqlSessionï¼Œè¿™æ ·å°±æŠŠæ•´ä¸ªè¿‡ç¨‹ä¸²è”èµ·æ¥äº†ã€‚</li></ul><h4 id="_4-2-ä½¿ç”¨æ‰§è¡Œå™¨" tabindex="-1"><a class="header-anchor" href="#_4-2-ä½¿ç”¨æ‰§è¡Œå™¨" aria-hidden="true">#</a> 4.2 ä½¿ç”¨æ‰§è¡Œå™¨</h4><p><strong>æºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.session.defaults.DefaultSqlSession</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DefaultSqlSession</span> <span class="token keyword">implements</span> <span class="token class-name">SqlSession</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Configuration</span> configuration<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Executor</span> executor<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">DefaultSqlSession</span><span class="token punctuation">(</span><span class="token class-name">Configuration</span> configuration<span class="token punctuation">,</span> <span class="token class-name">Executor</span> executor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>configuration <span class="token operator">=</span> configuration<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>executor <span class="token operator">=</span> executor<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">selectOne</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">MappedStatement</span> ms <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">getMappedStatement</span><span class="token punctuation">(</span>statement<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> executor<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>ms<span class="token punctuation">,</span> parameter<span class="token punctuation">,</span> <span class="token class-name">Executor</span><span class="token punctuation">.</span><span class="token constant">NO_RESULT_HANDLER</span><span class="token punctuation">,</span> ms<span class="token punctuation">.</span><span class="token function">getBoundSql</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¥½äº†ï¼Œç»è¿‡ä¸Šé¢æ‰§è¡Œå™¨çš„æ‰€æœ‰å®ç°å®Œæˆåï¼Œæ¥ä¸‹æ¥å°±æ˜¯è§£è€¦åçš„è°ƒç”¨äº†ã€‚åœ¨ DefaultSqlSession#selectOne ä¸­è·å– MappedStatement æ˜ å°„è¯­å¥ç±»åï¼Œåˆ™ä¼ é€’ç»™æ‰§è¡Œå™¨è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆç°åœ¨è¿™ä¸ªç±»ç»è¿‡è®¾è®¡æ€æƒ³çš„è§£è€¦åï¼Œå°±å˜å¾—æ›´åŠ èµ¶ç´§æ•´æ´äº†ï¼Œä¹Ÿå°±æ˜¯æ˜“äºç»´æŠ¤å’Œæ‰©å±•äº†ã€‚</li></ul><h2 id="äº”ã€æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#äº”ã€æµ‹è¯•" aria-hidden="true">#</a> äº”ã€æµ‹è¯•</h2><h3 id="_1-äº‹å…ˆå‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#_1-äº‹å…ˆå‡†å¤‡" aria-hidden="true">#</a> 1. äº‹å…ˆå‡†å¤‡</h3><h4 id="_1-1-åˆ›å»ºåº“è¡¨" tabindex="-1"><a class="header-anchor" href="#_1-1-åˆ›å»ºåº“è¡¨" aria-hidden="true">#</a> 1.1 åˆ›å»ºåº“è¡¨</h4><p>åˆ›å»ºä¸€ä¸ªæ•°æ®åº“åç§°ä¸º mybatis å¹¶åœ¨åº“ä¸­åˆ›å»ºè¡¨ user ä»¥åŠæ·»åŠ æµ‹è¯•æ•°æ®ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span>
    <span class="token keyword">USER</span>
    <span class="token punctuation">(</span>
        id <span class="token keyword">bigint</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;è‡ªå¢ID&#39;</span><span class="token punctuation">,</span>
        userId <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;ç”¨æˆ·ID&#39;</span><span class="token punctuation">,</span>
        userHead <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;ç”¨æˆ·å¤´åƒ&#39;</span><span class="token punctuation">,</span>
        createTime <span class="token keyword">TIMESTAMP</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;åˆ›å»ºæ—¶é—´&#39;</span><span class="token punctuation">,</span>
        updateTime <span class="token keyword">TIMESTAMP</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;æ›´æ–°æ—¶é—´&#39;</span><span class="token punctuation">,</span>
        userName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>
    
<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> userId<span class="token punctuation">,</span> userHead<span class="token punctuation">,</span> createTime<span class="token punctuation">,</span> updateTime<span class="token punctuation">,</span> userName<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;10001&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;1_04&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2022-04-13 00:00:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2022-04-13 00:00:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å°å‚…å“¥&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-2-é…ç½®æ•°æ®æº" tabindex="-1"><a class="header-anchor" href="#_1-2-é…ç½®æ•°æ®æº" aria-hidden="true">#</a> 1.2 é…ç½®æ•°æ®æº</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://127.0.0.1:3306/mybatis?useUnicode=true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>123456<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é€šè¿‡ <code>mybatis-config-datasource.xml</code> é…ç½®æ•°æ®æºä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šdriverã€urlã€usernameã€password</li><li>åœ¨è¿™é‡Œ dataSource å¯ä»¥æŒ‰éœ€é…ç½®æˆ DRUIDã€UNPOOLED å’Œ POOLED è¿›è¡Œæµ‹è¯•éªŒè¯ã€‚</li></ul><h4 id="_1-3-é…ç½®mapper" tabindex="-1"><a class="header-anchor" href="#_1-3-é…ç½®mapper" aria-hidden="true">#</a> 1.3 é…ç½®Mapper</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryUserInfoById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.lang.Long<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.bugstack.mybatis.test.po.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    SELECT id, userId, userName, userHead
    FROM user
    where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™éƒ¨åˆ†æš‚æ—¶ä¸éœ€è¦è°ƒæ•´ï¼Œç›®å‰è¿˜åªæ˜¯ä¸€ä¸ªå…¥å‚çš„ç±»å‹çš„å‚æ•°ï¼Œåç»­æˆ‘ä»¬å…¨éƒ¨å®Œå–„è¿™éƒ¨åˆ†å†…å®¹ä»¥åï¼Œåˆ™å†æä¾›æ›´å¤šçš„å…¶ä»–å‚æ•°è¿›è¡ŒéªŒè¯ã€‚</li></ul><h3 id="_2-å•å…ƒæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_2-å•å…ƒæµ‹è¯•" aria-hidden="true">#</a> 2. å•å…ƒæµ‹è¯•</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_SqlSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. ä»SqlSessionFactoryä¸­è·å–SqlSession</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsReader</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config-datasource.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   
    <span class="token comment">// 2. è·å–æ˜ å°„å™¨å¯¹è±¡</span>
    <span class="token class-name">IUserDao</span> userDao <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">IUserDao</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 3. æµ‹è¯•éªŒè¯</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">queryUserInfoById</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœï¼š{}&quot;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨å•å…ƒæµ‹è¯•ä¸­æ²¡æœ‰ä»€ä¹ˆå˜åŒ–ï¼Œåªæ˜¯æˆ‘ä»¬ä»æ—§æ˜¯ä¼ é€’ä¸€ä¸ª 1L çš„ long ç±»å‹å‚æ•°ï¼Œè¿›è¡Œæ–¹æ³•çš„è°ƒç”¨å¤„ç†ã€‚é€šè¿‡å•å…ƒæµ‹è¯•éªŒè¯æ‰§è¡Œå™¨çš„å¤„ç†è¿‡ç¨‹ï¼Œè¯»è€…åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­å¯ä»¥è¿›è¡Œæ–­ç‚¹æµ‹è¯•ï¼Œå­¦ä¹ æ¯ä¸ªè¿‡ç¨‹çš„å¤„ç†å†…å®¹ã€‚</li></ul><p><strong>æµ‹è¯•ç»“æœ</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">22</span><span class="token operator">:</span><span class="token number">16</span><span class="token operator">:</span><span class="token number">25.770</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">c<span class="token punctuation">.</span>b<span class="token punctuation">.</span>m<span class="token punctuation">.</span>d<span class="token punctuation">.</span>pooled<span class="token punctuation">.</span></span>PooledDataSource</span> <span class="token operator">-</span> <span class="token class-name">PooledDataSource</span> forcefully closed<span class="token operator">/</span>removed all connections<span class="token punctuation">.</span>
<span class="token number">22</span><span class="token operator">:</span><span class="token number">16</span><span class="token operator">:</span><span class="token number">26.076</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">c<span class="token punctuation">.</span>b<span class="token punctuation">.</span>m<span class="token punctuation">.</span>d<span class="token punctuation">.</span>pooled<span class="token punctuation">.</span></span>PooledDataSource</span> <span class="token operator">-</span> <span class="token class-name">Created</span> connection <span class="token number">540642172.</span>
<span class="token number">22</span><span class="token operator">:</span><span class="token number">16</span><span class="token operator">:</span><span class="token number">26.198</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼š<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;userHead&quot;</span><span class="token operator">:</span><span class="token string">&quot;1_04&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;userId&quot;</span><span class="token operator">:</span><span class="token string">&quot;10001&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;userName&quot;</span><span class="token operator">:</span><span class="token string">&quot;å°å‚…å“¥&quot;</span><span class="token punctuation">}</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://bugstack.cn/images/article/spring/mybatis-220428-04.png" alt=""></p><ul><li>ä»æµ‹è¯•ç»“æœçœ‹æˆ‘ä»¬å·²ç»å¯ä»¥æŠŠ DefaultSqlSession#selectOne ä¸­çš„è°ƒç”¨ï¼Œæ¢æˆæ‰§è¡Œå™¨å®Œæˆæ•´ä¸ªè¿‡ç¨‹çš„å¤„ç†äº†ï¼Œè§£è€¦äº†è¿™éƒ¨åˆ†çš„é€»è¾‘æ“ä½œï¼Œä¹Ÿèƒ½æ–¹ä¾¿æˆ‘ä»¬åç»­çš„æ‰©å±•ã€‚</li></ul><h2 id="å…­ã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#å…­ã€æ€»ç»“" aria-hidden="true">#</a> å…­ã€æ€»ç»“</h2><ul><li>æ•´ä¸ªç« èŠ‚çš„å®ç°éƒ½æ˜¯åœ¨å¤„ç†è§£è€¦è¿™ä»¶äº‹æƒ…ï¼Œä» DefaultSqlSession#selectOne å¯¹æ•°æ®æºçš„å¤„ç†è§£è€¦åˆ°æ‰§è¡Œå™¨ä¸­è¿›è¡Œæ“ä½œã€‚è€Œæ‰§è¡Œå™¨ä¸­åˆåŒ…æ‹¬äº†å¯¹ JDBC å¤„ç†çš„æ‹†è§£ï¼Œé“¾æ¥ã€å‡†å¤‡è¯­å¥ã€å°è£…å‚æ•°ã€å¤„ç†ç»“æœï¼Œæ‰€æœ‰çš„è¿™äº›è¿‡ç¨‹ç»è¿‡è§£è€¦åçš„ç±»å’Œæ–¹æ³•ï¼Œå°±éƒ½å¯ä»¥åœ¨ä»¥åçš„åŠŸèƒ½è¿­ä»£ä¸­éå¸¸æ–¹ä¾¿çš„å®Œæˆæ‰©å±•äº†ã€‚</li><li>æœ¬ç« èŠ‚ä¹Ÿä¸ºæˆ‘ä»¬åç»­æ‰©å±•å‚æ•°çš„å¤„ç†ã€ç»“æœé›†çš„å°è£…é¢„ç•™å‡ºäº†æ‰©å±•ç‚¹ï¼Œä»¥åŠå¯¹äºä¸åŒçš„è¯­å¥å¤„ç†å™¨é€‰æ‹©çš„é—®é¢˜ï¼Œéƒ½éœ€è¦åœ¨åç»­è¿›è¡Œå®Œå–„å’Œè¡¥å……ã€‚ç›®å‰æˆ‘ä»¬ä¸²è”å‡ºæ¥çš„æ˜¯æœ€æ ¸å¿ƒçš„éª¨æ¶ç»“æ„ï¼Œéšç€åç»­çš„æ¸è¿›å¼å¼€å‘é™†ç»­è¿­ä»£å®Œå–„ã€‚</li><li>å¯¹äºæºç çš„å­¦ä¹ ï¼Œè¯»è€…è¦ç»å†çœ‹ã€å†™ã€æ€è€ƒã€åº”ç”¨ç­‰å‡ ä¸ªæ­¥éª¤çš„è¿‡ç¨‹ï¼Œæ‰èƒ½æ›´å¥½çš„å¸æ”¶è¿™é‡Œé¢çš„æ€æƒ³ï¼Œä¸åªæ˜¯ç…§ç€CPä¸€éå°±å®Œäº‹äº†ï¼Œå¦åˆ™ä¹Ÿå°±å¤±å»äº†è·Ÿç€å­¦ä¹ æºç çš„æ„ä¹‰ã€‚</li></ul><h2 id="ä¸ƒã€ä¼˜ç§€ä½œä¸š" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€ä¼˜ç§€ä½œä¸š" aria-hidden="true">#</a> ä¸ƒã€ä¼˜ç§€ä½œä¸š</h2>`,80),h={href:"https://t.zsxq.com/05bYB6iqb",target:"_blank",rel:"noopener noreferrer"},y={href:"https://t.zsxq.com/0662fuB62",target:"_blank",rel:"noopener noreferrer"},S={href:"https://t.zsxq.com/07zEwbY91",target:"_blank",rel:"noopener noreferrer"},f={href:"https://t.zsxq.com/08svosiof",target:"_blank",rel:"noopener noreferrer"},w={href:"https://t.zsxq.com/0bXbxKHvd",target:"_blank",rel:"noopener noreferrer"},q={href:"https://t.zsxq.com/0ceTgynZc",target:"_blank",rel:"noopener noreferrer"},x={href:"https://t.zsxq.com/107WusqQD",target:"_blank",rel:"noopener noreferrer"};function E(_,j){const a=p("ExternalLinkIcon");return c(),o("div",null,[u,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),r,s("åšå®¢ï¼š"),n("a",k,[s("https://bugstack.cn"),t(a)]),d,s("åŸæ–‡ï¼š"),n("a",m,[s("https://mp.weixin.qq.com/s/MJYKOn0-jhnGurcbDxgWtA"),t(a)])]),v,b,g,n("ul",null,[n("li",null,[n("a",h,[s("ä¸ºä»€ä¹ˆè¦å®šä¹‰SQLæ‰§è¡Œå™¨ï¼Ÿ"),t(a)])]),n("li",null,[n("a",y,[s("å°†é‡å¤çš„æ­¥éª¤ï¼ˆè£…è½½sql,è®¾ç½®å‚æ•°ï¼Œå°è£…è¿”å›ç»“æœï¼‰ ä»¥ä¸€ä¸ªæ‰§è¡Œå™¨çš„æ–¹å¼æ¥è¿›è¡Œå°è£… @Alpha"),t(a)])]),n("li",null,[n("a",S,[s("è°ƒç”¨å…³ç³»ç±»æ•´ä½“æµç¨‹æ¢³ç† @ç©ºç™½"),t(a)])]),n("li",null,[n("a",f,[s("ä¹‹å‰å¯¹æ•°æ®æºçš„ä½¿ç”¨ã€æ‰§è¡ŒSQLã€å°è£…ç»“æœï¼Œéƒ½è€¦åˆåœ¨DefaultSqlSession#selectOneæ–¹æ³•ä¸­ @liuc"),t(a)])]),n("li",null,[n("a",w,[s("Sqlæ‰§è¡Œå™¨çš„å®šä¹‰å’Œå®ç° @å°çŒªç¢ç¢å¿µ"),t(a)])]),n("li",null,[n("a",q,[s("åœ¨ä»¥åå†™ä»£ç éœ€è¦è€ƒè™‘åˆ°ä»£ç çš„è§£è€¦ï¼Œèƒ½å¤ŸæŠŠExcutorè¿™ç§è®¾è®¡æ€æƒ³åº”ç”¨åˆ°å®é™…çš„ä¸šåŠ¡ä»£ç ä¸­"),t(a)])]),n("li",null,[n("a",x,[s("è§£è€¦ï¼Œå¯¹äºæµç¨‹çš„è§£è€¦ @ADé’™å¥¶"),t(a)])])])])}const D=e(i,[["render",E],["__file","2022-04-28-di7zhangï¼šSQLzhixingqidedingyiheshixian.html.vue"]]);export{D as default};
