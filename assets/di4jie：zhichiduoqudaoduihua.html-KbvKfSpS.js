import{_ as p,r as o,o as e,c,a as n,b as s,d as t,e as u}from"./app-3RcBQnkC.js";const l={},i=n("h1",{id:"《chatgpt-微服务应用体系构建》-chatgpt-sdk-第4节-支持多渠道对话",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#《chatgpt-微服务应用体系构建》-chatgpt-sdk-第4节-支持多渠道对话","aria-hidden":"true"},"#"),s(" 《ChatGPT 微服务应用体系构建》 - chatgpt-sdk 第4节：支持多渠道对话")],-1),k=n("br",null,null,-1),r={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},d=n("blockquote",null,[n("p",null,"沉淀、分享、成长，让自己和他人都能有所收获！😄")],-1),m=n("li",null,[n("strong",null,"本章难度"),s("：★★☆☆☆")],-1),q=n("li",null,[n("strong",null,"本章重点"),s("：让 ChatGPT SDK 支持多种渠道的对话，因为 ChatGPT 的 API 除了官网以外，还有很多公司有相应的资质，他们会提供对应的 ApiHost、ApiKey，以及 3.5/4.0 模型。")],-1),v=n("strong",null,"课程视频",-1),g={href:"https://t.zsxq.com/12BVNBcAe",target:"_blank",rel:"noopener noreferrer"},h=u(`<h2 id="一、本章诉求" tabindex="-1"><a class="header-anchor" href="#一、本章诉求" aria-hidden="true">#</a> 一、本章诉求</h2><p>原本在 ChatGPT SDK 中，我们想调用一个 ChatGPT 的接口，是在 SDK 初始化阶段设置 ApiKey、ApiHost，那么所有的访问用户都会调用到这一套的 ApiKey、ApiHost 上来。但对于一些特殊场景，需要给每个用户分配不同的 ApiKey 甚至可能还有对应的 ApiHost 时，目前的 SDK 就不好扩展了。所以我们要完善这块的功能，让 ChatGPT SDK 支持不同的渠道对话。</p><p>另外在本节中会使用 @Deprecated 注释掉 <code>authToken</code>，后续不在需要使用。如果你的服务设置了 Token 校验，可以继续保留。</p><h2 id="二、流程设计" tabindex="-1"><a class="header-anchor" href="#二、流程设计" aria-hidden="true">#</a> 二、流程设计</h2><p>整个流程为；扩展会话入参信息，在 HTTP 客户端中支持动态参数处理；</p><div align="center"><img src="https://bugstack.cn/images/article/project/chatgpt/chatgpt-sdk-04-01.png?raw=true" width="450px"></div><ul><li>小傅哥会在原有的 SDK 中增加对参数的透传处理，重点涉及对 OpenAiInterceptor 的改造。相当于你要动态的处理 ApiKey 的参数传递。另外 ApiHost 是已经动态的拼接到 URL 重新组合了。</li><li>那么现在的 DefaultOpenAiSession#chatCompletions 接口，就有了动态使用 ApiHost、ApiKey 的能力。</li></ul><h2 id="三、方案实现" tabindex="-1"><a class="header-anchor" href="#三、方案实现" aria-hidden="true">#</a> 三、方案实现</h2><h3 id="_1-工程结构" tabindex="-1"><a class="header-anchor" href="#_1-工程结构" aria-hidden="true">#</a> 1. 工程结构</h3><div align="center"><img src="https://bugstack.cn/images/article/project/chatgpt/chatgpt-sdk-04-02.png?raw=true" width="850px"></div><ul><li>如图工程中的蓝色部分，为本次需要修改的代码区域。</li><li>学习时候可以，以接口 OpenAiSession#chatCompletions 为入口，会看到整个模块的修改变化。</li></ul><h3 id="_2-接口定义-扩展一个新接口" tabindex="-1"><a class="header-anchor" href="#_2-接口定义-扩展一个新接口" aria-hidden="true">#</a> 2. 接口定义 - 扩展一个新接口</h3><p><strong>源码</strong>：<code>cn.bugstack.chatgpt.session.OpenAiSession</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 问答模型 GPT-3.5/4.0 &amp; 流式反馈
 *
 * <span class="token keyword">@param</span> <span class="token parameter">apiHostByUser</span>         自定义host
 * <span class="token keyword">@param</span> <span class="token parameter">apiKeyByUser</span>          自定义Key
 * <span class="token keyword">@param</span> <span class="token parameter">chatCompletionRequest</span> 请求信息
 * <span class="token keyword">@param</span> <span class="token parameter">eventSourceListener</span>   实现监听；通过监听的 onEvent 方法接收数据
 * <span class="token keyword">@return</span> 应答结果
 */</span>
<span class="token class-name">EventSource</span> <span class="token function">chatCompletions</span><span class="token punctuation">(</span><span class="token class-name">String</span> apiHostByUser<span class="token punctuation">,</span> <span class="token class-name">String</span> apiKeyByUser<span class="token punctuation">,</span> <span class="token class-name">ChatCompletionRequest</span> chatCompletionRequest<span class="token punctuation">,</span> <span class="token class-name">EventSourceListener</span> eventSourceListener<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>重载一个 chatCompletions 方法，增加 apiHostByUser、apiKeyByUser 两个字段。便于我们可以使用主机需要的 host、key</li></ul><h3 id="_3-接口实现" tabindex="-1"><a class="header-anchor" href="#_3-接口实现" aria-hidden="true">#</a> 3. 接口实现</h3><p><strong>源码</strong>：<code>cn.bugstack.chatgpt.session.defaults.DefaultOpenAiSession</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">EventSource</span> <span class="token function">chatCompletions</span><span class="token punctuation">(</span><span class="token class-name">String</span> apiHostByUser<span class="token punctuation">,</span> <span class="token class-name">String</span> apiKeyByUser<span class="token punctuation">,</span> <span class="token class-name">ChatCompletionRequest</span> chatCompletionRequest<span class="token punctuation">,</span> <span class="token class-name">EventSourceListener</span> eventSourceListener<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{</span>
    <span class="token comment">// 核心参数校验；不对用户的传参做更改，只返回错误信息。</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>chatCompletionRequest<span class="token punctuation">.</span><span class="token function">isStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;illegal parameter stream is false!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 动态设置 Host、Key，便于用户传递自己的信息</span>
    <span class="token class-name">String</span> apiHost <span class="token operator">=</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">NULL</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>apiHostByUser<span class="token punctuation">)</span> <span class="token operator">?</span> configuration<span class="token punctuation">.</span><span class="token function">getApiHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> apiHostByUser<span class="token punctuation">;</span>
    <span class="token class-name">String</span> apiKey <span class="token operator">=</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">NULL</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>apiKeyByUser<span class="token punctuation">)</span> <span class="token operator">?</span> configuration<span class="token punctuation">.</span><span class="token function">getApiKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> apiKeyByUser<span class="token punctuation">;</span>
    
    <span class="token comment">// 构建请求信息</span>
    <span class="token class-name">Request</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment">// url: https://api.openai.com/v1/chat/completions - 通过 IOpenAiApi 配置的 POST 接口，用这样的方式从统一的地方获取配置信息</span>
            <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span>apiHost<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token class-name">IOpenAiApi</span><span class="token punctuation">.</span>v1_chat_completions<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token string">&quot;apiKey&quot;</span><span class="token punctuation">,</span> apiKey<span class="token punctuation">)</span>
            <span class="token comment">// 封装请求参数信息，如果使用了 Fastjson 也可以替换 ObjectMapper 转换对象</span>
            <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token class-name">RequestBody</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token class-name">ContentType</span><span class="token punctuation">.</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>chatCompletionRequest<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
    <span class="token comment">// 返回结果信息；EventSource 对象可以取消应答</span>
    <span class="token keyword">return</span> factory<span class="token punctuation">.</span><span class="token function">newEventSource</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> eventSourceListener<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>接口的实现有2部分，一个是透传 URL 一个是设置 apiKey 写入进去。</li><li>之后需要在【自定义的拦截器】中，设置 URL 和 ApiKey。</li></ul><h3 id="_4-自定义拦截器" tabindex="-1"><a class="header-anchor" href="#_4-自定义拦截器" aria-hidden="true">#</a> 4. 自定义拦截器</h3><p><strong>源码</strong>：<code>cn.bugstack.chatgpt.interceptor.OpenAiInterceptor</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Response</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Chain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. 获取原始 Request</span>
    <span class="token class-name">Request</span> original <span class="token operator">=</span> chain<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 2. 读取 apiKey；优先使用自己传递的 apiKey</span>
    <span class="token class-name">String</span> apiKeyByUser <span class="token operator">=</span> original<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">&quot;apiKey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> apiKey <span class="token operator">=</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">NULL</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>apiKeyByUser<span class="token punctuation">)</span> <span class="token operator">?</span> apiKeyBySystem <span class="token operator">:</span> apiKeyByUser<span class="token punctuation">;</span>
    
    <span class="token comment">// 3. 构建 Request</span>
    <span class="token class-name">Request</span> request <span class="token operator">=</span> original<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span>original<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token class-name">Header</span><span class="token punctuation">.</span><span class="token constant">AUTHORIZATION</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Bearer &quot;</span> <span class="token operator">+</span> apiKey<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token class-name">Header</span><span class="token punctuation">.</span><span class="token constant">CONTENT_TYPE</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ContentType</span><span class="token punctuation">.</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span>original<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> original<span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
    <span class="token comment">// 4. 返回执行结果</span>
    <span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>因为后续已经不在需要 authToken 所以这里的实现已经去掉了这个字段的使用。</li><li>通过判断是否设置了自己的 apiKey 来判断使用系统默认的还是用户自己传的，系统默认的就是我们在创建会话的时候初始化的。【这样就可以满足用户可以体验使用 OpenAI 也可以绑定自己的 APIKey 使用】</li></ul><h2 id="四、功能验证" tabindex="-1"><a class="header-anchor" href="#四、功能验证" aria-hidden="true">#</a> 四、功能验证</h2><h3 id="_1-必要信息" tabindex="-1"><a class="header-anchor" href="#_1-必要信息" aria-hidden="true">#</a> 1. 必要信息</h3><ol><li>官网原始 apiHost https://api.openai.com/ - 官网的Key可直接使用</li><li>三方公司 apiHost https://pro-share-aws-api.zcyai.com/ - 需要找我获得 Key</li></ol><h3 id="_2-单元测试" tabindex="-1"><a class="header-anchor" href="#_2-单元测试" aria-hidden="true">#</a> 2. 单元测试</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Before</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_OpenAiSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. 配置文件 [联系小傅哥获取key]</span>
    <span class="token comment">// 1.1 官网原始 apiHost https://api.openai.com/ - 官网的Key可直接使用</span>
    <span class="token comment">// 1.2 三方公司 apiHost https://pro-share-aws-api.zcyai.com/ - 需要找我获得 Key 【支持3.5\\4.0流式问答模型调用，有些模型已废弃不对接使用】</span>
    <span class="token class-name">Configuration</span> configuration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Configuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    configuration<span class="token punctuation">.</span><span class="token function">setApiHost</span><span class="token punctuation">(</span><span class="token string">&quot;https://pro-share-aws-api.zcyai.com/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    configuration<span class="token punctuation">.</span><span class="token function">setApiKey</span><span class="token punctuation">(</span><span class="token string">&quot;sk-8Fpeb11ARRIi5JGQCe480fCcF688436a8d9e3c7a6553Af2b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 2. 会话工厂</span>
    <span class="token class-name">OpenAiSessionFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultOpenAiSessionFactory</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 3. 开启会话</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>openAiSession <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_chat_completions_stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. 创建参数</span>
    <span class="token class-name">ChatCompletionRequest</span> chatCompletion <span class="token operator">=</span> <span class="token class-name">ChatCompletionRequest</span>
            <span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">messages</span><span class="token punctuation">(</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonList</span><span class="token punctuation">(</span><span class="token class-name">Message</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">role</span><span class="token punctuation">(</span><span class="token class-name">Constants<span class="token punctuation">.</span>Role</span><span class="token punctuation">.</span><span class="token constant">USER</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token string">&quot;1+1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token class-name">ChatCompletionRequest<span class="token punctuation">.</span>Model</span><span class="token punctuation">.</span><span class="token constant">GPT_3_5_TURBO</span><span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">maxTokens</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
    <span class="token comment">// 2. 用户配置 【可选参数，支持不同渠道的 apiHost、apiKey】- 方便给每个用户都分配了自己的key，用于售卖场景</span>
    <span class="token class-name">String</span> apiHost <span class="token operator">=</span> <span class="token string">&quot;https://pro-share-aws-api.zcyai.com/&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> apiKey <span class="token operator">=</span> <span class="token string">&quot;sk-UAOxqX3EnM0zXxrz07CbC9E905E74549B4FdCcFcAd6bFbA3&quot;</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 3. 发起请求</span>
    <span class="token class-name">EventSource</span> eventSource <span class="token operator">=</span> openAiSession<span class="token punctuation">.</span><span class="token function">chatCompletions</span><span class="token punctuation">(</span>apiHost<span class="token punctuation">,</span> apiKey<span class="token punctuation">,</span> chatCompletion<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">EventSourceListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onEvent</span><span class="token punctuation">(</span><span class="token class-name">EventSource</span> eventSource<span class="token punctuation">,</span> <span class="token class-name">String</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> type<span class="token punctuation">,</span> <span class="token class-name">String</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;测试结果 id:{} type:{} data:{}&quot;</span><span class="token punctuation">,</span> id<span class="token punctuation">,</span> type<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onFailure</span><span class="token punctuation">(</span><span class="token class-name">EventSource</span> eventSource<span class="token punctuation">,</span> <span class="token class-name">Throwable</span> t<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;失败 code:{} message:{}&quot;</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span><span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 等待</span>
    <span class="token keyword">new</span> <span class="token class-name">CountDownLatch</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>首先，在测试中 <code>@Before</code> 方法下初始化设置了 ApiHost、ApiKey 这个也就是所有的用户都使用的设置。</li><li>之后，在 test_chat_completions_stream 测试中，又设置了用户自己的 apiHost、apiKey，那么就可以在调用的时候根据需要自己设置了，也就是用户购买的配置。</li></ul><h3 id="_3-测试结果" tabindex="-1"><a class="header-anchor" href="#_3-测试结果" aria-hidden="true">#</a> 3. 测试结果</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span><span class="token class-name">OkHttp</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pro<span class="token operator">-</span>share<span class="token operator">-</span>aws<span class="token operator">-</span>api<span class="token punctuation">.</span>zcyai<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatgpt<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> 测试结果：<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;chatcmpl-85SMBxN77xL024C4ExM7kaZAl93IV&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;object&quot;</span><span class="token operator">:</span><span class="token string">&quot;chat.completion.chunk&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;created&quot;</span><span class="token operator">:</span><span class="token number">1696311335</span><span class="token punctuation">,</span><span class="token string">&quot;model&quot;</span><span class="token operator">:</span><span class="token string">&quot;gpt-3.5-turbo-0613&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;choices&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;delta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;role&quot;</span><span class="token operator">:</span><span class="token string">&quot;assistant&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;finish_reason&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token class-name">OkHttp</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pro<span class="token operator">-</span>share<span class="token operator">-</span>aws<span class="token operator">-</span>api<span class="token punctuation">.</span>zcyai<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatgpt<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> 测试结果：<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;chatcmpl-85SMBxN77xL024C4ExM7kaZAl93IV&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;object&quot;</span><span class="token operator">:</span><span class="token string">&quot;chat.completion.chunk&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;created&quot;</span><span class="token operator">:</span><span class="token number">1696311335</span><span class="token punctuation">,</span><span class="token string">&quot;model&quot;</span><span class="token operator">:</span><span class="token string">&quot;gpt-3.5-turbo-0613&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;choices&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;delta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;finish_reason&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token class-name">OkHttp</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pro<span class="token operator">-</span>share<span class="token operator">-</span>aws<span class="token operator">-</span>api<span class="token punctuation">.</span>zcyai<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatgpt<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> 测试结果：<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;chatcmpl-85SMBxN77xL024C4ExM7kaZAl93IV&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;object&quot;</span><span class="token operator">:</span><span class="token string">&quot;chat.completion.chunk&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;created&quot;</span><span class="token operator">:</span><span class="token number">1696311335</span><span class="token punctuation">,</span><span class="token string">&quot;model&quot;</span><span class="token operator">:</span><span class="token string">&quot;gpt-3.5-turbo-0613&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;choices&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;delta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;+&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;finish_reason&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token class-name">OkHttp</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pro<span class="token operator">-</span>share<span class="token operator">-</span>aws<span class="token operator">-</span>api<span class="token punctuation">.</span>zcyai<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatgpt<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> 测试结果：<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;chatcmpl-85SMBxN77xL024C4ExM7kaZAl93IV&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;object&quot;</span><span class="token operator">:</span><span class="token string">&quot;chat.completion.chunk&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;created&quot;</span><span class="token operator">:</span><span class="token number">1696311335</span><span class="token punctuation">,</span><span class="token string">&quot;model&quot;</span><span class="token operator">:</span><span class="token string">&quot;gpt-3.5-turbo-0613&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;choices&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;delta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;finish_reason&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token class-name">OkHttp</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pro<span class="token operator">-</span>share<span class="token operator">-</span>aws<span class="token operator">-</span>api<span class="token punctuation">.</span>zcyai<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatgpt<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> 测试结果：<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;chatcmpl-85SMBxN77xL024C4ExM7kaZAl93IV&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;object&quot;</span><span class="token operator">:</span><span class="token string">&quot;chat.completion.chunk&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;created&quot;</span><span class="token operator">:</span><span class="token number">1696311335</span><span class="token punctuation">,</span><span class="token string">&quot;model&quot;</span><span class="token operator">:</span><span class="token string">&quot;gpt-3.5-turbo-0613&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;choices&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;delta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot; equals&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;finish_reason&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token class-name">OkHttp</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pro<span class="token operator">-</span>share<span class="token operator">-</span>aws<span class="token operator">-</span>api<span class="token punctuation">.</span>zcyai<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatgpt<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> 测试结果：<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;chatcmpl-85SMBxN77xL024C4ExM7kaZAl93IV&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;object&quot;</span><span class="token operator">:</span><span class="token string">&quot;chat.completion.chunk&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;created&quot;</span><span class="token operator">:</span><span class="token number">1696311335</span><span class="token punctuation">,</span><span class="token string">&quot;model&quot;</span><span class="token operator">:</span><span class="token string">&quot;gpt-3.5-turbo-0613&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;choices&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;delta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;finish_reason&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token class-name">OkHttp</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pro<span class="token operator">-</span>share<span class="token operator">-</span>aws<span class="token operator">-</span>api<span class="token punctuation">.</span>zcyai<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatgpt<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> 测试结果：<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;chatcmpl-85SMBxN77xL024C4ExM7kaZAl93IV&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;object&quot;</span><span class="token operator">:</span><span class="token string">&quot;chat.completion.chunk&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;created&quot;</span><span class="token operator">:</span><span class="token number">1696311335</span><span class="token punctuation">,</span><span class="token string">&quot;model&quot;</span><span class="token operator">:</span><span class="token string">&quot;gpt-3.5-turbo-0613&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;choices&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;delta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;finish_reason&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token class-name">OkHttp</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pro<span class="token operator">-</span>share<span class="token operator">-</span>aws<span class="token operator">-</span>api<span class="token punctuation">.</span>zcyai<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatgpt<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> 测试结果：<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;chatcmpl-85SMBxN77xL024C4ExM7kaZAl93IV&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;object&quot;</span><span class="token operator">:</span><span class="token string">&quot;chat.completion.chunk&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;created&quot;</span><span class="token operator">:</span><span class="token number">1696311335</span><span class="token punctuation">,</span><span class="token string">&quot;model&quot;</span><span class="token operator">:</span><span class="token string">&quot;gpt-3.5-turbo-0613&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;choices&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;delta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;finish_reason&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token class-name">OkHttp</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pro<span class="token operator">-</span>share<span class="token operator">-</span>aws<span class="token operator">-</span>api<span class="token punctuation">.</span>zcyai<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatgpt<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> 测试结果：<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;chatcmpl-85SMBxN77xL024C4ExM7kaZAl93IV&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;object&quot;</span><span class="token operator">:</span><span class="token string">&quot;chat.completion.chunk&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;created&quot;</span><span class="token operator">:</span><span class="token number">1696311335</span><span class="token punctuation">,</span><span class="token string">&quot;model&quot;</span><span class="token operator">:</span><span class="token string">&quot;gpt-3.5-turbo-0613&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;choices&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;delta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;finish_reason&quot;</span><span class="token operator">:</span><span class="token string">&quot;stop&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token class-name">OkHttp</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pro<span class="token operator">-</span>share<span class="token operator">-</span>aws<span class="token operator">-</span>api<span class="token punctuation">.</span>zcyai<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatgpt<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> 测试结果：<span class="token punctuation">[</span><span class="token constant">DONE</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>流式对话返回结果。</li></ul><h2 id="五、读者作业" tabindex="-1"><a class="header-anchor" href="#五、读者作业" aria-hidden="true">#</a> 五、读者作业</h2><ul><li>简单作业：学习本章的代码，完成功能的开发和测试。</li><li>复杂作业：做到现在的章节，以及有 openai.itedus.cn 在前面引路，你也会有了一些想法。那么你完全可以根据这些内容做一些扩展实现，让你的 OpenAI 即可自己使用，也可以让别人使用。</li></ul>`,35);function b(y,f){const a=o("ExternalLinkIcon");return e(),c("div",null,[i,n("p",null,[s("作者：小傅哥 "),k,s("博客："),n("a",r,[s("https://bugstack.cn"),t(a)])]),d,n("ul",null,[m,q,n("li",null,[v,s("："),n("a",g,[s("https://t.zsxq.com/12BVNBcAe"),t(a)])])]),h])}const x=p(l,[["render",b],["__file","di4jie：zhichiduoqudaoduihua.html.vue"]]);export{x as default};
