import{_ as p,r as o,o as e,c,a as n,b as s,d as t,e as u}from"./app-3RcBQnkC.js";const l={},i=n("h1",{id:"ã€Šchatgpt-å¾®æœåŠ¡åº”ç”¨ä½“ç³»æ„å»ºã€‹-chatgpt-sdk-ç¬¬4èŠ‚-æ”¯æŒå¤šæ¸ é“å¯¹è¯",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ã€Šchatgpt-å¾®æœåŠ¡åº”ç”¨ä½“ç³»æ„å»ºã€‹-chatgpt-sdk-ç¬¬4èŠ‚-æ”¯æŒå¤šæ¸ é“å¯¹è¯","aria-hidden":"true"},"#"),s(" ã€ŠChatGPT å¾®æœåŠ¡åº”ç”¨ä½“ç³»æ„å»ºã€‹ - chatgpt-sdk ç¬¬4èŠ‚ï¼šæ”¯æŒå¤šæ¸ é“å¯¹è¯")],-1),k=n("br",null,null,-1),r={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},d=n("blockquote",null,[n("p",null,"æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„")],-1),m=n("li",null,[n("strong",null,"æœ¬ç« éš¾åº¦"),s("ï¼šâ˜…â˜…â˜†â˜†â˜†")],-1),q=n("li",null,[n("strong",null,"æœ¬ç« é‡ç‚¹"),s("ï¼šè®© ChatGPT SDK æ”¯æŒå¤šç§æ¸ é“çš„å¯¹è¯ï¼Œå› ä¸º ChatGPT çš„ API é™¤äº†å®˜ç½‘ä»¥å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šå…¬å¸æœ‰ç›¸åº”çš„èµ„è´¨ï¼Œä»–ä»¬ä¼šæä¾›å¯¹åº”çš„ ApiHostã€ApiKeyï¼Œä»¥åŠ 3.5/4.0 æ¨¡å‹ã€‚")],-1),v=n("strong",null,"è¯¾ç¨‹è§†é¢‘",-1),g={href:"https://t.zsxq.com/12BVNBcAe",target:"_blank",rel:"noopener noreferrer"},h=u(`<h2 id="ä¸€ã€æœ¬ç« è¯‰æ±‚" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€æœ¬ç« è¯‰æ±‚" aria-hidden="true">#</a> ä¸€ã€æœ¬ç« è¯‰æ±‚</h2><p>åŸæœ¬åœ¨ ChatGPT SDK ä¸­ï¼Œæˆ‘ä»¬æƒ³è°ƒç”¨ä¸€ä¸ª ChatGPT çš„æ¥å£ï¼Œæ˜¯åœ¨ SDK åˆå§‹åŒ–é˜¶æ®µè®¾ç½® ApiKeyã€ApiHostï¼Œé‚£ä¹ˆæ‰€æœ‰çš„è®¿é—®ç”¨æˆ·éƒ½ä¼šè°ƒç”¨åˆ°è¿™ä¸€å¥—çš„ ApiKeyã€ApiHost ä¸Šæ¥ã€‚ä½†å¯¹äºä¸€äº›ç‰¹æ®Šåœºæ™¯ï¼Œéœ€è¦ç»™æ¯ä¸ªç”¨æˆ·åˆ†é…ä¸åŒçš„ ApiKey ç”šè‡³å¯èƒ½è¿˜æœ‰å¯¹åº”çš„ ApiHost æ—¶ï¼Œç›®å‰çš„ SDK å°±ä¸å¥½æ‰©å±•äº†ã€‚æ‰€ä»¥æˆ‘ä»¬è¦å®Œå–„è¿™å—çš„åŠŸèƒ½ï¼Œè®© ChatGPT SDK æ”¯æŒä¸åŒçš„æ¸ é“å¯¹è¯ã€‚</p><p>å¦å¤–åœ¨æœ¬èŠ‚ä¸­ä¼šä½¿ç”¨ @Deprecated æ³¨é‡Šæ‰ <code>authToken</code>ï¼Œåç»­ä¸åœ¨éœ€è¦ä½¿ç”¨ã€‚å¦‚æœä½ çš„æœåŠ¡è®¾ç½®äº† Token æ ¡éªŒï¼Œå¯ä»¥ç»§ç»­ä¿ç•™ã€‚</p><h2 id="äºŒã€æµç¨‹è®¾è®¡" tabindex="-1"><a class="header-anchor" href="#äºŒã€æµç¨‹è®¾è®¡" aria-hidden="true">#</a> äºŒã€æµç¨‹è®¾è®¡</h2><p>æ•´ä¸ªæµç¨‹ä¸ºï¼›æ‰©å±•ä¼šè¯å…¥å‚ä¿¡æ¯ï¼Œåœ¨ HTTP å®¢æˆ·ç«¯ä¸­æ”¯æŒåŠ¨æ€å‚æ•°å¤„ç†ï¼›</p><div align="center"><img src="https://bugstack.cn/images/article/project/chatgpt/chatgpt-sdk-04-01.png?raw=true" width="450px"></div><ul><li>å°å‚…å“¥ä¼šåœ¨åŸæœ‰çš„ SDK ä¸­å¢åŠ å¯¹å‚æ•°çš„é€ä¼ å¤„ç†ï¼Œé‡ç‚¹æ¶‰åŠå¯¹ OpenAiInterceptor çš„æ”¹é€ ã€‚ç›¸å½“äºä½ è¦åŠ¨æ€çš„å¤„ç† ApiKey çš„å‚æ•°ä¼ é€’ã€‚å¦å¤– ApiHost æ˜¯å·²ç»åŠ¨æ€çš„æ‹¼æ¥åˆ° URL é‡æ–°ç»„åˆäº†ã€‚</li><li>é‚£ä¹ˆç°åœ¨çš„ DefaultOpenAiSession#chatCompletions æ¥å£ï¼Œå°±æœ‰äº†åŠ¨æ€ä½¿ç”¨ ApiHostã€ApiKey çš„èƒ½åŠ›ã€‚</li></ul><h2 id="ä¸‰ã€æ–¹æ¡ˆå®ç°" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€æ–¹æ¡ˆå®ç°" aria-hidden="true">#</a> ä¸‰ã€æ–¹æ¡ˆå®ç°</h2><h3 id="_1-å·¥ç¨‹ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div align="center"><img src="https://bugstack.cn/images/article/project/chatgpt/chatgpt-sdk-04-02.png?raw=true" width="850px"></div><ul><li>å¦‚å›¾å·¥ç¨‹ä¸­çš„è“è‰²éƒ¨åˆ†ï¼Œä¸ºæœ¬æ¬¡éœ€è¦ä¿®æ”¹çš„ä»£ç åŒºåŸŸã€‚</li><li>å­¦ä¹ æ—¶å€™å¯ä»¥ï¼Œä»¥æ¥å£ OpenAiSession#chatCompletions ä¸ºå…¥å£ï¼Œä¼šçœ‹åˆ°æ•´ä¸ªæ¨¡å—çš„ä¿®æ”¹å˜åŒ–ã€‚</li></ul><h3 id="_2-æ¥å£å®šä¹‰-æ‰©å±•ä¸€ä¸ªæ–°æ¥å£" tabindex="-1"><a class="header-anchor" href="#_2-æ¥å£å®šä¹‰-æ‰©å±•ä¸€ä¸ªæ–°æ¥å£" aria-hidden="true">#</a> 2. æ¥å£å®šä¹‰ - æ‰©å±•ä¸€ä¸ªæ–°æ¥å£</h3><p><strong>æºç </strong>ï¼š<code>cn.bugstack.chatgpt.session.OpenAiSession</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * é—®ç­”æ¨¡å‹ GPT-3.5/4.0 &amp; æµå¼åé¦ˆ
 *
 * <span class="token keyword">@param</span> <span class="token parameter">apiHostByUser</span>         è‡ªå®šä¹‰host
 * <span class="token keyword">@param</span> <span class="token parameter">apiKeyByUser</span>          è‡ªå®šä¹‰Key
 * <span class="token keyword">@param</span> <span class="token parameter">chatCompletionRequest</span> è¯·æ±‚ä¿¡æ¯
 * <span class="token keyword">@param</span> <span class="token parameter">eventSourceListener</span>   å®ç°ç›‘å¬ï¼›é€šè¿‡ç›‘å¬çš„ onEvent æ–¹æ³•æ¥æ”¶æ•°æ®
 * <span class="token keyword">@return</span> åº”ç­”ç»“æœ
 */</span>
<span class="token class-name">EventSource</span> <span class="token function">chatCompletions</span><span class="token punctuation">(</span><span class="token class-name">String</span> apiHostByUser<span class="token punctuation">,</span> <span class="token class-name">String</span> apiKeyByUser<span class="token punctuation">,</span> <span class="token class-name">ChatCompletionRequest</span> chatCompletionRequest<span class="token punctuation">,</span> <span class="token class-name">EventSourceListener</span> eventSourceListener<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é‡è½½ä¸€ä¸ª chatCompletions æ–¹æ³•ï¼Œå¢åŠ  apiHostByUserã€apiKeyByUser ä¸¤ä¸ªå­—æ®µã€‚ä¾¿äºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸»æœºéœ€è¦çš„ hostã€key</li></ul><h3 id="_3-æ¥å£å®ç°" tabindex="-1"><a class="header-anchor" href="#_3-æ¥å£å®ç°" aria-hidden="true">#</a> 3. æ¥å£å®ç°</h3><p><strong>æºç </strong>ï¼š<code>cn.bugstack.chatgpt.session.defaults.DefaultOpenAiSession</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">EventSource</span> <span class="token function">chatCompletions</span><span class="token punctuation">(</span><span class="token class-name">String</span> apiHostByUser<span class="token punctuation">,</span> <span class="token class-name">String</span> apiKeyByUser<span class="token punctuation">,</span> <span class="token class-name">ChatCompletionRequest</span> chatCompletionRequest<span class="token punctuation">,</span> <span class="token class-name">EventSourceListener</span> eventSourceListener<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ ¸å¿ƒå‚æ•°æ ¡éªŒï¼›ä¸å¯¹ç”¨æˆ·çš„ä¼ å‚åšæ›´æ”¹ï¼Œåªè¿”å›é”™è¯¯ä¿¡æ¯ã€‚</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>chatCompletionRequest<span class="token punctuation">.</span><span class="token function">isStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;illegal parameter stream is false!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// åŠ¨æ€è®¾ç½® Hostã€Keyï¼Œä¾¿äºç”¨æˆ·ä¼ é€’è‡ªå·±çš„ä¿¡æ¯</span>
    <span class="token class-name">String</span> apiHost <span class="token operator">=</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">NULL</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>apiHostByUser<span class="token punctuation">)</span> <span class="token operator">?</span> configuration<span class="token punctuation">.</span><span class="token function">getApiHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> apiHostByUser<span class="token punctuation">;</span>
    <span class="token class-name">String</span> apiKey <span class="token operator">=</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">NULL</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>apiKeyByUser<span class="token punctuation">)</span> <span class="token operator">?</span> configuration<span class="token punctuation">.</span><span class="token function">getApiKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> apiKeyByUser<span class="token punctuation">;</span>
    
    <span class="token comment">// æ„å»ºè¯·æ±‚ä¿¡æ¯</span>
    <span class="token class-name">Request</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment">// url: https://api.openai.com/v1/chat/completions - é€šè¿‡ IOpenAiApi é…ç½®çš„ POST æ¥å£ï¼Œç”¨è¿™æ ·çš„æ–¹å¼ä»ç»Ÿä¸€çš„åœ°æ–¹è·å–é…ç½®ä¿¡æ¯</span>
            <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span>apiHost<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token class-name">IOpenAiApi</span><span class="token punctuation">.</span>v1_chat_completions<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token string">&quot;apiKey&quot;</span><span class="token punctuation">,</span> apiKey<span class="token punctuation">)</span>
            <span class="token comment">// å°è£…è¯·æ±‚å‚æ•°ä¿¡æ¯ï¼Œå¦‚æœä½¿ç”¨äº† Fastjson ä¹Ÿå¯ä»¥æ›¿æ¢ ObjectMapper è½¬æ¢å¯¹è±¡</span>
            <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token class-name">RequestBody</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token class-name">ContentType</span><span class="token punctuation">.</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>chatCompletionRequest<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
    <span class="token comment">// è¿”å›ç»“æœä¿¡æ¯ï¼›EventSource å¯¹è±¡å¯ä»¥å–æ¶ˆåº”ç­”</span>
    <span class="token keyword">return</span> factory<span class="token punctuation">.</span><span class="token function">newEventSource</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> eventSourceListener<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ¥å£çš„å®ç°æœ‰2éƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯é€ä¼  URL ä¸€ä¸ªæ˜¯è®¾ç½® apiKey å†™å…¥è¿›å»ã€‚</li><li>ä¹‹åéœ€è¦åœ¨ã€è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨ã€‘ä¸­ï¼Œè®¾ç½® URL å’Œ ApiKeyã€‚</li></ul><h3 id="_4-è‡ªå®šä¹‰æ‹¦æˆªå™¨" tabindex="-1"><a class="header-anchor" href="#_4-è‡ªå®šä¹‰æ‹¦æˆªå™¨" aria-hidden="true">#</a> 4. è‡ªå®šä¹‰æ‹¦æˆªå™¨</h3><p><strong>æºç </strong>ï¼š<code>cn.bugstack.chatgpt.interceptor.OpenAiInterceptor</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Response</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Chain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. è·å–åŸå§‹ Request</span>
    <span class="token class-name">Request</span> original <span class="token operator">=</span> chain<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 2. è¯»å– apiKeyï¼›ä¼˜å…ˆä½¿ç”¨è‡ªå·±ä¼ é€’çš„ apiKey</span>
    <span class="token class-name">String</span> apiKeyByUser <span class="token operator">=</span> original<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">&quot;apiKey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> apiKey <span class="token operator">=</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">NULL</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>apiKeyByUser<span class="token punctuation">)</span> <span class="token operator">?</span> apiKeyBySystem <span class="token operator">:</span> apiKeyByUser<span class="token punctuation">;</span>
    
    <span class="token comment">// 3. æ„å»º Request</span>
    <span class="token class-name">Request</span> request <span class="token operator">=</span> original<span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span>original<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token class-name">Header</span><span class="token punctuation">.</span><span class="token constant">AUTHORIZATION</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Bearer &quot;</span> <span class="token operator">+</span> apiKey<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token class-name">Header</span><span class="token punctuation">.</span><span class="token constant">CONTENT_TYPE</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ContentType</span><span class="token punctuation">.</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span>original<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> original<span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
    <span class="token comment">// 4. è¿”å›æ‰§è¡Œç»“æœ</span>
    <span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å› ä¸ºåç»­å·²ç»ä¸åœ¨éœ€è¦ authToken æ‰€ä»¥è¿™é‡Œçš„å®ç°å·²ç»å»æ‰äº†è¿™ä¸ªå­—æ®µçš„ä½¿ç”¨ã€‚</li><li>é€šè¿‡åˆ¤æ–­æ˜¯å¦è®¾ç½®äº†è‡ªå·±çš„ apiKey æ¥åˆ¤æ–­ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„è¿˜æ˜¯ç”¨æˆ·è‡ªå·±ä¼ çš„ï¼Œç³»ç»Ÿé»˜è®¤çš„å°±æ˜¯æˆ‘ä»¬åœ¨åˆ›å»ºä¼šè¯çš„æ—¶å€™åˆå§‹åŒ–çš„ã€‚ã€è¿™æ ·å°±å¯ä»¥æ»¡è¶³ç”¨æˆ·å¯ä»¥ä½“éªŒä½¿ç”¨ OpenAI ä¹Ÿå¯ä»¥ç»‘å®šè‡ªå·±çš„ APIKey ä½¿ç”¨ã€‘</li></ul><h2 id="å››ã€åŠŸèƒ½éªŒè¯" tabindex="-1"><a class="header-anchor" href="#å››ã€åŠŸèƒ½éªŒè¯" aria-hidden="true">#</a> å››ã€åŠŸèƒ½éªŒè¯</h2><h3 id="_1-å¿…è¦ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#_1-å¿…è¦ä¿¡æ¯" aria-hidden="true">#</a> 1. å¿…è¦ä¿¡æ¯</h3><ol><li>å®˜ç½‘åŸå§‹ apiHost https://api.openai.com/ - å®˜ç½‘çš„Keyå¯ç›´æ¥ä½¿ç”¨</li><li>ä¸‰æ–¹å…¬å¸ apiHost https://pro-share-aws-api.zcyai.com/ - éœ€è¦æ‰¾æˆ‘è·å¾— Key</li></ol><h3 id="_2-å•å…ƒæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_2-å•å…ƒæµ‹è¯•" aria-hidden="true">#</a> 2. å•å…ƒæµ‹è¯•</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Before</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_OpenAiSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. é…ç½®æ–‡ä»¶ [è”ç³»å°å‚…å“¥è·å–key]</span>
    <span class="token comment">// 1.1 å®˜ç½‘åŸå§‹ apiHost https://api.openai.com/ - å®˜ç½‘çš„Keyå¯ç›´æ¥ä½¿ç”¨</span>
    <span class="token comment">// 1.2 ä¸‰æ–¹å…¬å¸ apiHost https://pro-share-aws-api.zcyai.com/ - éœ€è¦æ‰¾æˆ‘è·å¾— Key ã€æ”¯æŒ3.5\\4.0æµå¼é—®ç­”æ¨¡å‹è°ƒç”¨ï¼Œæœ‰äº›æ¨¡å‹å·²åºŸå¼ƒä¸å¯¹æ¥ä½¿ç”¨ã€‘</span>
    <span class="token class-name">Configuration</span> configuration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Configuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    configuration<span class="token punctuation">.</span><span class="token function">setApiHost</span><span class="token punctuation">(</span><span class="token string">&quot;https://pro-share-aws-api.zcyai.com/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    configuration<span class="token punctuation">.</span><span class="token function">setApiKey</span><span class="token punctuation">(</span><span class="token string">&quot;sk-8Fpeb11ARRIi5JGQCe480fCcF688436a8d9e3c7a6553Af2b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 2. ä¼šè¯å·¥å‚</span>
    <span class="token class-name">OpenAiSessionFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultOpenAiSessionFactory</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 3. å¼€å¯ä¼šè¯</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>openAiSession <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_chat_completions_stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. åˆ›å»ºå‚æ•°</span>
    <span class="token class-name">ChatCompletionRequest</span> chatCompletion <span class="token operator">=</span> <span class="token class-name">ChatCompletionRequest</span>
            <span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">messages</span><span class="token punctuation">(</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonList</span><span class="token punctuation">(</span><span class="token class-name">Message</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">role</span><span class="token punctuation">(</span><span class="token class-name">Constants<span class="token punctuation">.</span>Role</span><span class="token punctuation">.</span><span class="token constant">USER</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token string">&quot;1+1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token class-name">ChatCompletionRequest<span class="token punctuation">.</span>Model</span><span class="token punctuation">.</span><span class="token constant">GPT_3_5_TURBO</span><span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">maxTokens</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
    <span class="token comment">// 2. ç”¨æˆ·é…ç½® ã€å¯é€‰å‚æ•°ï¼Œæ”¯æŒä¸åŒæ¸ é“çš„ apiHostã€apiKeyã€‘- æ–¹ä¾¿ç»™æ¯ä¸ªç”¨æˆ·éƒ½åˆ†é…äº†è‡ªå·±çš„keyï¼Œç”¨äºå”®å–åœºæ™¯</span>
    <span class="token class-name">String</span> apiHost <span class="token operator">=</span> <span class="token string">&quot;https://pro-share-aws-api.zcyai.com/&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> apiKey <span class="token operator">=</span> <span class="token string">&quot;sk-UAOxqX3EnM0zXxrz07CbC9E905E74549B4FdCcFcAd6bFbA3&quot;</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 3. å‘èµ·è¯·æ±‚</span>
    <span class="token class-name">EventSource</span> eventSource <span class="token operator">=</span> openAiSession<span class="token punctuation">.</span><span class="token function">chatCompletions</span><span class="token punctuation">(</span>apiHost<span class="token punctuation">,</span> apiKey<span class="token punctuation">,</span> chatCompletion<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">EventSourceListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onEvent</span><span class="token punctuation">(</span><span class="token class-name">EventSource</span> eventSource<span class="token punctuation">,</span> <span class="token class-name">String</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> type<span class="token punctuation">,</span> <span class="token class-name">String</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœ id:{} type:{} data:{}&quot;</span><span class="token punctuation">,</span> id<span class="token punctuation">,</span> type<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onFailure</span><span class="token punctuation">(</span><span class="token class-name">EventSource</span> eventSource<span class="token punctuation">,</span> <span class="token class-name">Throwable</span> t<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;å¤±è´¥ code:{} message:{}&quot;</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span><span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// ç­‰å¾…</span>
    <span class="token keyword">new</span> <span class="token class-name">CountDownLatch</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é¦–å…ˆï¼Œåœ¨æµ‹è¯•ä¸­ <code>@Before</code> æ–¹æ³•ä¸‹åˆå§‹åŒ–è®¾ç½®äº† ApiHostã€ApiKey è¿™ä¸ªä¹Ÿå°±æ˜¯æ‰€æœ‰çš„ç”¨æˆ·éƒ½ä½¿ç”¨çš„è®¾ç½®ã€‚</li><li>ä¹‹åï¼Œåœ¨ test_chat_completions_stream æµ‹è¯•ä¸­ï¼Œåˆè®¾ç½®äº†ç”¨æˆ·è‡ªå·±çš„ apiHostã€apiKeyï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨è°ƒç”¨çš„æ—¶å€™æ ¹æ®éœ€è¦è‡ªå·±è®¾ç½®äº†ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·è´­ä¹°çš„é…ç½®ã€‚</li></ul><h3 id="_3-æµ‹è¯•ç»“æœ" tabindex="-1"><a class="header-anchor" href="#_3-æµ‹è¯•ç»“æœ" aria-hidden="true">#</a> 3. æµ‹è¯•ç»“æœ</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span><span class="token class-name">OkHttp</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pro<span class="token operator">-</span>share<span class="token operator">-</span>aws<span class="token operator">-</span>api<span class="token punctuation">.</span>zcyai<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatgpt<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼š<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;chatcmpl-85SMBxN77xL024C4ExM7kaZAl93IV&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;object&quot;</span><span class="token operator">:</span><span class="token string">&quot;chat.completion.chunk&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;created&quot;</span><span class="token operator">:</span><span class="token number">1696311335</span><span class="token punctuation">,</span><span class="token string">&quot;model&quot;</span><span class="token operator">:</span><span class="token string">&quot;gpt-3.5-turbo-0613&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;choices&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;delta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;role&quot;</span><span class="token operator">:</span><span class="token string">&quot;assistant&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;finish_reason&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token class-name">OkHttp</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pro<span class="token operator">-</span>share<span class="token operator">-</span>aws<span class="token operator">-</span>api<span class="token punctuation">.</span>zcyai<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatgpt<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼š<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;chatcmpl-85SMBxN77xL024C4ExM7kaZAl93IV&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;object&quot;</span><span class="token operator">:</span><span class="token string">&quot;chat.completion.chunk&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;created&quot;</span><span class="token operator">:</span><span class="token number">1696311335</span><span class="token punctuation">,</span><span class="token string">&quot;model&quot;</span><span class="token operator">:</span><span class="token string">&quot;gpt-3.5-turbo-0613&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;choices&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;delta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;finish_reason&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token class-name">OkHttp</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pro<span class="token operator">-</span>share<span class="token operator">-</span>aws<span class="token operator">-</span>api<span class="token punctuation">.</span>zcyai<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatgpt<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼š<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;chatcmpl-85SMBxN77xL024C4ExM7kaZAl93IV&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;object&quot;</span><span class="token operator">:</span><span class="token string">&quot;chat.completion.chunk&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;created&quot;</span><span class="token operator">:</span><span class="token number">1696311335</span><span class="token punctuation">,</span><span class="token string">&quot;model&quot;</span><span class="token operator">:</span><span class="token string">&quot;gpt-3.5-turbo-0613&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;choices&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;delta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;+&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;finish_reason&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token class-name">OkHttp</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pro<span class="token operator">-</span>share<span class="token operator">-</span>aws<span class="token operator">-</span>api<span class="token punctuation">.</span>zcyai<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatgpt<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼š<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;chatcmpl-85SMBxN77xL024C4ExM7kaZAl93IV&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;object&quot;</span><span class="token operator">:</span><span class="token string">&quot;chat.completion.chunk&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;created&quot;</span><span class="token operator">:</span><span class="token number">1696311335</span><span class="token punctuation">,</span><span class="token string">&quot;model&quot;</span><span class="token operator">:</span><span class="token string">&quot;gpt-3.5-turbo-0613&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;choices&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;delta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;finish_reason&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token class-name">OkHttp</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pro<span class="token operator">-</span>share<span class="token operator">-</span>aws<span class="token operator">-</span>api<span class="token punctuation">.</span>zcyai<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatgpt<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼š<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;chatcmpl-85SMBxN77xL024C4ExM7kaZAl93IV&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;object&quot;</span><span class="token operator">:</span><span class="token string">&quot;chat.completion.chunk&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;created&quot;</span><span class="token operator">:</span><span class="token number">1696311335</span><span class="token punctuation">,</span><span class="token string">&quot;model&quot;</span><span class="token operator">:</span><span class="token string">&quot;gpt-3.5-turbo-0613&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;choices&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;delta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot; equals&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;finish_reason&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token class-name">OkHttp</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pro<span class="token operator">-</span>share<span class="token operator">-</span>aws<span class="token operator">-</span>api<span class="token punctuation">.</span>zcyai<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatgpt<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼š<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;chatcmpl-85SMBxN77xL024C4ExM7kaZAl93IV&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;object&quot;</span><span class="token operator">:</span><span class="token string">&quot;chat.completion.chunk&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;created&quot;</span><span class="token operator">:</span><span class="token number">1696311335</span><span class="token punctuation">,</span><span class="token string">&quot;model&quot;</span><span class="token operator">:</span><span class="token string">&quot;gpt-3.5-turbo-0613&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;choices&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;delta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;finish_reason&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token class-name">OkHttp</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pro<span class="token operator">-</span>share<span class="token operator">-</span>aws<span class="token operator">-</span>api<span class="token punctuation">.</span>zcyai<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatgpt<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼š<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;chatcmpl-85SMBxN77xL024C4ExM7kaZAl93IV&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;object&quot;</span><span class="token operator">:</span><span class="token string">&quot;chat.completion.chunk&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;created&quot;</span><span class="token operator">:</span><span class="token number">1696311335</span><span class="token punctuation">,</span><span class="token string">&quot;model&quot;</span><span class="token operator">:</span><span class="token string">&quot;gpt-3.5-turbo-0613&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;choices&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;delta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;finish_reason&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token class-name">OkHttp</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pro<span class="token operator">-</span>share<span class="token operator">-</span>aws<span class="token operator">-</span>api<span class="token punctuation">.</span>zcyai<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatgpt<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼š<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;chatcmpl-85SMBxN77xL024C4ExM7kaZAl93IV&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;object&quot;</span><span class="token operator">:</span><span class="token string">&quot;chat.completion.chunk&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;created&quot;</span><span class="token operator">:</span><span class="token number">1696311335</span><span class="token punctuation">,</span><span class="token string">&quot;model&quot;</span><span class="token operator">:</span><span class="token string">&quot;gpt-3.5-turbo-0613&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;choices&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;delta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;finish_reason&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token class-name">OkHttp</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pro<span class="token operator">-</span>share<span class="token operator">-</span>aws<span class="token operator">-</span>api<span class="token punctuation">.</span>zcyai<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatgpt<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼š<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;chatcmpl-85SMBxN77xL024C4ExM7kaZAl93IV&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;object&quot;</span><span class="token operator">:</span><span class="token string">&quot;chat.completion.chunk&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;created&quot;</span><span class="token operator">:</span><span class="token number">1696311335</span><span class="token punctuation">,</span><span class="token string">&quot;model&quot;</span><span class="token operator">:</span><span class="token string">&quot;gpt-3.5-turbo-0613&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;choices&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;delta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;finish_reason&quot;</span><span class="token operator">:</span><span class="token string">&quot;stop&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token class-name">OkHttp</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pro<span class="token operator">-</span>share<span class="token operator">-</span>aws<span class="token operator">-</span>api<span class="token punctuation">.</span>zcyai<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatgpt<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼š<span class="token punctuation">[</span><span class="token constant">DONE</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æµå¼å¯¹è¯è¿”å›ç»“æœã€‚</li></ul><h2 id="äº”ã€è¯»è€…ä½œä¸š" tabindex="-1"><a class="header-anchor" href="#äº”ã€è¯»è€…ä½œä¸š" aria-hidden="true">#</a> äº”ã€è¯»è€…ä½œä¸š</h2><ul><li>ç®€å•ä½œä¸šï¼šå­¦ä¹ æœ¬ç« çš„ä»£ç ï¼Œå®ŒæˆåŠŸèƒ½çš„å¼€å‘å’Œæµ‹è¯•ã€‚</li><li>å¤æ‚ä½œä¸šï¼šåšåˆ°ç°åœ¨çš„ç« èŠ‚ï¼Œä»¥åŠæœ‰ openai.itedus.cn åœ¨å‰é¢å¼•è·¯ï¼Œä½ ä¹Ÿä¼šæœ‰äº†ä¸€äº›æƒ³æ³•ã€‚é‚£ä¹ˆä½ å®Œå…¨å¯ä»¥æ ¹æ®è¿™äº›å†…å®¹åšä¸€äº›æ‰©å±•å®ç°ï¼Œè®©ä½ çš„ OpenAI å³å¯è‡ªå·±ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥è®©åˆ«äººä½¿ç”¨ã€‚</li></ul>`,35);function b(y,f){const a=o("ExternalLinkIcon");return e(),c("div",null,[i,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),k,s("åšå®¢ï¼š"),n("a",r,[s("https://bugstack.cn"),t(a)])]),d,n("ul",null,[m,q,n("li",null,[v,s("ï¼š"),n("a",g,[s("https://t.zsxq.com/12BVNBcAe"),t(a)])])]),h])}const x=p(l,[["render",b],["__file","di4jieï¼šzhichiduoqudaoduihua.html.vue"]]);export{x as default};
