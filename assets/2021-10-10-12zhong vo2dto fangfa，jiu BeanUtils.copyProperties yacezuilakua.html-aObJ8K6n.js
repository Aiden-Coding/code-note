import{_ as p,r as o,o as c,c as l,a as n,b as s,d as e,e as t}from"./app-3RcBQnkC.js";const i={},u=n("h1",{id:"_12种-vo2dto-方法-就-beanutils-copyproperties-压测最拉胯",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_12种-vo2dto-方法-就-beanutils-copyproperties-压测最拉胯","aria-hidden":"true"},"#"),s(" 12种 vo2dto 方法，就 BeanUtils.copyProperties 压测最拉胯！")],-1),r=n("br",null,null,-1),k={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},d=n("br",null,null,-1),m={href:"https://mp.weixin.qq.com/s/Xq7oQg7dYESMYxHVnxX8Dw",target:"_blank",rel:"noopener noreferrer"},v=t('<blockquote><p>沉淀、分享、成长，让自己和他人都能有所收获！😄</p></blockquote><h2 id="一、前言" tabindex="-1"><a class="header-anchor" href="#一、前言" aria-hidden="true">#</a> 一、前言</h2><p><code>为哈么，你的代码也就仅仅是能用而已？</code></p><p>没有技术深度、短缺知识储备、匮乏经验积累的前提下，怎么写代码？百度呀，遇到问题这搜一点，那查一块，不管它是什么原理还是适合哪种场景，先粘贴到自己的工程里，<strong>看，能跑了，能跑就行</strong>。那这样的代码也就仅仅是能用程度的交付，根本没有一定的质量保证，也更别提数据结构、算法逻辑和设计模式了，那看的编程资料刷的LeetCode，全歇菜了。</p><p>当你感觉看了很多资料又不会用的时候，会说什么，<code>真卷，都学到这样了</code>。但其实我并不觉对技术的深度挖掘、梳理全套的知识体系，一点点耕耘一点点收获<strong>是在卷</strong>。反而把看技术视频当成看电影一样轻松，不写案例就以为书看会了的爽，没有意义的缺少脑力思考机械式体力重复，才是卷，甚至很卷。</p><p>就像让你用一个属性拷贝工具，把<code>vo转成dto</code>，你用了哪呢，是 Apache 的还是 Spring 的，还是其他的什么，哪个效率最高？<em>接下来我们来用数据验证下，并提供出各种案例的使用对比</em></p><h2 id="二、性能测试对比" tabindex="-1"><a class="header-anchor" href="#二、性能测试对比" aria-hidden="true">#</a> 二、性能测试对比</h2><p>在 Java 系统工程开发过程中，都会有各个层之间的对象转换，比如 VO、DTO、PO、VO 等，而如果都是手动<code>get、set</code>又太浪费时间，还可能操作错误，所以选择一个自动化工具会更加方便。</p><p>目前我整理出，用于对象属性转换有12种，包括：普通的getset、json2Json、Apache属性拷贝、Spring属性拷贝、bean-mapping、bean-mapping-asm、BeanCopier、Orika、Dozer、ModelMapper、JMapper、MapStruct 接下来我们分别测试这11种属性转换操作分别在<code>一百次</code>、<code>一千次</code>、<code>一万次</code>、<code>十万次</code>、<code>一百万次</code>时候的性能时间对比。</p><p><img src="https://bugstack.cn/assets/images/guide/guide-1-01.png" alt=""></p><ul><li><code>BeanUtils.copyProperties</code> 是大家代码里最常出现的工具类，但只要你不把它用错成 <code>Apache</code> 包下的，而是使用 Spring 提供的，就基本还不会对性能造成多大影响。</li><li>但如果说性能更好，可替代手动<code>get、set</code>的，还是 <code>MapStruct</code> 更好用，因为它本身就是在编译期生成<code>get、set</code>代码，和我们写<code>get、set</code>一样。</li><li>其他一些组件包主要基于 <code>AOP</code>、<code>ASM</code>、<code>CGlib</code>，的技术手段实现的，所以也会有相应的性能损耗。</li></ul><h2 id="三、12种转换案例" tabindex="-1"><a class="header-anchor" href="#三、12种转换案例" aria-hidden="true">#</a> 三、12种转换案例</h2><p><img src="https://bugstack.cn/assets/images/guide/guide-1-02.png" alt=""></p>',13),g=n("strong",null,"源码",-1),b={href:"https://github.com/fuzhengwei/guide-vo2dto",target:"_blank",rel:"noopener noreferrer"},h=t(`<p><strong>描述</strong>：在案例工程下创建 interfaces.assembler 包，定义 <code>IAssembler&lt;SOURCE, TARGET&gt;#sourceToTarget(SOURCE var)</code> 接口，提供不同方式的对象转换操作类实现，学习的过程中可以直接下载运行调试。</p><h3 id="_1-get-set" tabindex="-1"><a class="header-anchor" href="#_1-get-set" aria-hidden="true">#</a> 1. get\\set</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetSetAssembler</span> <span class="token keyword">implements</span> <span class="token class-name">IAssembler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserVO</span><span class="token punctuation">,</span> <span class="token class-name">UserDTO</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">UserDTO</span> <span class="token function">sourceToTarget</span><span class="token punctuation">(</span><span class="token class-name">UserVO</span> <span class="token keyword">var</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserDTO</span> userDTO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserDTO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDTO<span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDTO<span class="token punctuation">.</span><span class="token function">setUserNickName</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token function">getUserNickName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDTO<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token function">getCreateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> userDTO<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>推荐</strong>：★★★☆☆</li><li><strong>性能</strong>：★★★★★</li><li><strong>手段</strong>：手写</li><li><strong>点评</strong>：其实这种方式也是日常使用的最多的，性能肯定是杠杠的，就是操作起来有点麻烦。尤其是一大堆属性的 VO 对象转换为 DTO 对象时候。但其实也有一些快捷的操作方式，比如你可以通过 Shift+Alt 选中所有属性，Shift+Tab 归并到一列，接下来在使用 Alt 选中这一列，批量操作粘贴 <code>userDTO.set</code> 以及快捷键大写属性首字母，最后切换到结尾补充括号和分号，最终格式化一下就搞定了。</li></ul><h3 id="_2-json2json" tabindex="-1"><a class="header-anchor" href="#_2-json2json" aria-hidden="true">#</a> 2. json2Json</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Json2JsonAssembler</span> <span class="token keyword">implements</span> <span class="token class-name">IAssembler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserVO</span><span class="token punctuation">,</span> <span class="token class-name">UserDTO</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">UserDTO</span> <span class="token function">sourceToTarget</span><span class="token punctuation">(</span><span class="token class-name">UserVO</span> <span class="token keyword">var</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> strJson <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>strJson<span class="token punctuation">,</span> <span class="token class-name">UserDTO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>推荐</strong>：☆☆☆☆☆</li><li><strong>性能</strong>：★☆☆☆☆</li><li><strong>手段</strong>：把对象转JSON串，再把JSON转另外一个对象</li><li><strong>点评</strong>：这么写多半有点烧！</li></ul><h3 id="_3-apache-copyproperties" tabindex="-1"><a class="header-anchor" href="#_3-apache-copyproperties" aria-hidden="true">#</a> 3. Apache copyProperties</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApacheCopyPropertiesAssembler</span> <span class="token keyword">implements</span> <span class="token class-name">IAssembler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserVO</span><span class="token punctuation">,</span> <span class="token class-name">UserDTO</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">UserDTO</span> <span class="token function">sourceToTarget</span><span class="token punctuation">(</span><span class="token class-name">UserVO</span> <span class="token keyword">var</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserDTO</span> userDTO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserDTO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">BeanUtils</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>userDTO<span class="token punctuation">,</span> <span class="token keyword">var</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IllegalAccessException</span> <span class="token operator">|</span> <span class="token class-name">InvocationTargetException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> userDTO<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>推荐</strong>：☆☆☆☆☆</li><li><strong>性能</strong>：★☆☆☆☆</li><li><strong>手段</strong>：Introspector 机制获取到类的属性来进行赋值操作</li><li><strong>点评</strong>：有坑，兼容性交差，不建议使用</li></ul><h3 id="_4-spring-copyproperties" tabindex="-1"><a class="header-anchor" href="#_4-spring-copyproperties" aria-hidden="true">#</a> 4. Spring copyProperties</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringCopyPropertiesAssembler</span> <span class="token keyword">implements</span> <span class="token class-name">IAssembler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserVO</span><span class="token punctuation">,</span> <span class="token class-name">UserDTO</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">UserDTO</span> <span class="token function">sourceToTarget</span><span class="token punctuation">(</span><span class="token class-name">UserVO</span> <span class="token keyword">var</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserDTO</span> userDTO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserDTO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BeanUtils</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">,</span> userDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> userDTO<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>推荐</strong>：★★★☆☆</li><li><strong>性能</strong>：★★★★☆</li><li><strong>手段</strong>：Introspector机制获取到类的属性来进行赋值操作</li><li><strong>点评</strong>：同样是反射的属性拷贝，Spring 提供的 copyProperties 要比 Apache 好用的多，只要你不用错，基本不会有啥问题。</li></ul><h3 id="_5-bean-mapping" tabindex="-1"><a class="header-anchor" href="#_5-bean-mapping" aria-hidden="true">#</a> 5. Bean Mapping</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanMappingAssembler</span> <span class="token keyword">implements</span> <span class="token class-name">IAssembler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserVO</span><span class="token punctuation">,</span> <span class="token class-name">UserDTO</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">UserDTO</span> <span class="token function">sourceToTarget</span><span class="token punctuation">(</span><span class="token class-name">UserVO</span> <span class="token keyword">var</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserDTO</span> userDTO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserDTO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BeanUtil</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">,</span> userDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> userDTO<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>推荐</strong>：★★☆☆☆</li><li><strong>性能</strong>：★★★☆☆</li><li><strong>手段</strong>：属性拷贝</li><li><strong>点评</strong>：性能一般</li></ul><h3 id="_6-bean-mapping-asm" tabindex="-1"><a class="header-anchor" href="#_6-bean-mapping-asm" aria-hidden="true">#</a> 6. Bean Mapping ASM</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanMappingAssembler</span> <span class="token keyword">implements</span> <span class="token class-name">IAssembler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserVO</span><span class="token punctuation">,</span> <span class="token class-name">UserDTO</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">UserDTO</span> <span class="token function">sourceToTarget</span><span class="token punctuation">(</span><span class="token class-name">UserVO</span> <span class="token keyword">var</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserDTO</span> userDTO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserDTO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BeanUtil</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">,</span> userDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> userDTO<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>推荐</strong>：★★★☆☆</li><li><strong>性能</strong>：★★★★☆</li><li><strong>手段</strong>：基于ASM字节码框架实现</li><li><strong>点评</strong>：与普通的 Bean Mapping 相比，性能有所提升，可以使用。</li></ul><h3 id="_7-beancopier" tabindex="-1"><a class="header-anchor" href="#_7-beancopier" aria-hidden="true">#</a> 7. BeanCopier</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanCopierAssembler</span> <span class="token keyword">implements</span> <span class="token class-name">IAssembler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserVO</span><span class="token punctuation">,</span> <span class="token class-name">UserDTO</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">UserDTO</span> <span class="token function">sourceToTarget</span><span class="token punctuation">(</span><span class="token class-name">UserVO</span> <span class="token keyword">var</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserDTO</span> userDTO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserDTO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BeanCopier</span> beanCopier <span class="token operator">=</span> <span class="token class-name">BeanCopier</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> userDTO<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        beanCopier<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">,</span> userDTO<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> userDTO<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>推荐</strong>：★★★☆☆</li><li><strong>性能</strong>：★★★★☆</li><li><strong>手段</strong>：基于CGlib字节码操作生成get、set方法</li><li><strong>点评</strong>：整体性能很不错，使用也不复杂，可以使用</li></ul><h3 id="_8-orika" tabindex="-1"><a class="header-anchor" href="#_8-orika" aria-hidden="true">#</a> 8. Orika</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrikaAssembler</span> <span class="token keyword">implements</span> <span class="token class-name">IAssembler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserVO</span><span class="token punctuation">,</span> <span class="token class-name">UserDTO</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * 构造一个MapperFactory
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">MapperFactory</span> mapperFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultMapperFactory<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        mapperFactory<span class="token punctuation">.</span><span class="token function">classMap</span><span class="token punctuation">(</span><span class="token class-name">UserDTO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">UserVO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span>  <span class="token comment">// 字段不一致时可以指定</span>
                <span class="token punctuation">.</span><span class="token function">byDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">UserDTO</span> <span class="token function">sourceToTarget</span><span class="token punctuation">(</span><span class="token class-name">UserVO</span> <span class="token keyword">var</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mapperFactory<span class="token punctuation">.</span><span class="token function">getMapperFacade</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">,</span> <span class="token class-name">UserDTO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,24),y=n("strong",null,"官网",-1),_={href:"https://orika-mapper.github.io/orika-docs/",target:"_blank",rel:"noopener noreferrer"},w=n("li",null,[n("strong",null,"推荐"),s("：★★☆☆☆")],-1),O=n("li",null,[n("strong",null,"性能"),s("：★★★☆☆")],-1),f=n("li",null,[n("strong",null,"手段"),s("：基于字节码生成映射对象")],-1),T=n("li",null,[n("strong",null,"点评"),s("：测试性能不是太突出，如果使用的话需要把 MapperFactory 的构建优化成 Bean 对象")],-1),U=t(`<h3 id="_9-dozer" tabindex="-1"><a class="header-anchor" href="#_9-dozer" aria-hidden="true">#</a> 9. Dozer</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DozerAssembler</span> <span class="token keyword">implements</span> <span class="token class-name">IAssembler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserVO</span><span class="token punctuation">,</span> <span class="token class-name">UserDTO</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DozerBeanMapper</span> mapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DozerBeanMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">UserDTO</span> <span class="token function">sourceToTarget</span><span class="token punctuation">(</span><span class="token class-name">UserVO</span> <span class="token keyword">var</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mapper<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">,</span> <span class="token class-name">UserDTO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),D=n("strong",null,"官网",-1),M={href:"http://dozer.sourceforge.net/documentation/gettingstarted.html",target:"_blank",rel:"noopener noreferrer"},j=n("li",null,[n("strong",null,"推荐"),s("：★☆☆☆☆")],-1),x=n("li",null,[n("strong",null,"性能"),s("：★★☆☆☆")],-1),A=n("li",null,[n("strong",null,"手段"),s("：属性映射框架，递归的方式复制对象")],-1),q=n("li",null,[n("strong",null,"点评"),s("：性能有点差，不建议使用")],-1),I=t(`<h3 id="_10-modelmapper" tabindex="-1"><a class="header-anchor" href="#_10-modelmapper" aria-hidden="true">#</a> 10. ModelMapper</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ModelMapperAssembler</span> <span class="token keyword">implements</span> <span class="token class-name">IAssembler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserVO</span><span class="token punctuation">,</span> <span class="token class-name">UserDTO</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ModelMapper</span> modelMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        modelMapper<span class="token punctuation">.</span><span class="token function">addMappings</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PropertyMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserVO</span><span class="token punctuation">,</span> <span class="token class-name">UserDTO</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 属性值不一样可以自己操作</span>
                <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span>source<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">UserDTO</span> <span class="token function">sourceToTarget</span><span class="token punctuation">(</span><span class="token class-name">UserVO</span> <span class="token keyword">var</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> modelMapper<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">,</span> <span class="token class-name">UserDTO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),V=n("strong",null,"官网",-1),S={href:"http://modelmapper.org",target:"_blank",rel:"noopener noreferrer"},C=n("li",null,[n("strong",null,"推荐"),s("：★★★☆☆")],-1),B=n("li",null,[n("strong",null,"性能"),s("：★★★☆☆")],-1),P=n("li",null,[n("strong",null,"手段"),s("：基于ASM字节码实现")],-1),J=n("li",null,[n("strong",null,"点评"),s("：转换对象数量较少时性能不错，如果同时大批量转换对象，性能有所下降")],-1),N=t(`<h3 id="_11-jmapper" tabindex="-1"><a class="header-anchor" href="#_11-jmapper" aria-hidden="true">#</a> 11. JMapper</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">JMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserDTO</span><span class="token punctuation">,</span> <span class="token class-name">UserVO</span><span class="token punctuation">&gt;</span></span> jMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">UserDTO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">UserVO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">JMapperAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">JMapperAPI</span><span class="token punctuation">.</span><span class="token function">mappedClass</span><span class="token punctuation">(</span><span class="token class-name">UserDTO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">JMapperAPI</span><span class="token punctuation">.</span><span class="token function">attribute</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">JMapperAPI</span><span class="token punctuation">.</span><span class="token function">attribute</span><span class="token punctuation">(</span><span class="token string">&quot;userNickName&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token string">&quot;userNickName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">JMapperAPI</span><span class="token punctuation">.</span><span class="token function">attribute</span><span class="token punctuation">(</span><span class="token string">&quot;createTime&quot;</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token string">&quot;createTime&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),z=n("strong",null,"官网",-1),E={href:"https://github.com/jmapper-framework/jmapper-core/wiki",target:"_blank",rel:"noopener noreferrer"},F=n("li",null,[n("strong",null,"推荐"),s("：★★★★☆")],-1),G=n("li",null,[n("strong",null,"性能"),s("：★★★★★")],-1),R=n("li",null,[n("strong",null,"手段"),s("：Elegance, high performance and robustness all in one java bean mapper")],-1),H=n("li",null,[n("strong",null,"点评"),s("：速度真心可以，不过结合 SpringBoot 感觉有的一点点麻烦，可能姿势不对")],-1),X=t(`<h3 id="_12-mapstruct" tabindex="-1"><a class="header-anchor" href="#_12-mapstruct" aria-hidden="true">#</a> 12. MapStruct</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Mapper</span><span class="token punctuation">(</span>componentModel <span class="token operator">=</span> <span class="token string">&quot;spring&quot;</span><span class="token punctuation">,</span> unmappedTargetPolicy <span class="token operator">=</span> <span class="token class-name">ReportingPolicy</span><span class="token punctuation">.</span><span class="token constant">IGNORE</span><span class="token punctuation">,</span> unmappedSourcePolicy <span class="token operator">=</span> <span class="token class-name">ReportingPolicy</span><span class="token punctuation">.</span><span class="token constant">IGNORE</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserDTOMapping</span> <span class="token keyword">extends</span> <span class="token class-name">IMapping</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserVO</span><span class="token punctuation">,</span> <span class="token class-name">UserDTO</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/** 用于测试的单例 */</span>
    <span class="token class-name">IMapping</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserVO</span><span class="token punctuation">,</span> <span class="token class-name">UserDTO</span><span class="token punctuation">&gt;</span></span> <span class="token constant">INSTANCE</span> <span class="token operator">=</span> <span class="token class-name">Mappers</span><span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserDTOMapping</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>target <span class="token operator">=</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">,</span> source <span class="token operator">=</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>target <span class="token operator">=</span> <span class="token string">&quot;createTime&quot;</span><span class="token punctuation">,</span> dateFormat <span class="token operator">=</span> <span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token class-name">UserDTO</span> <span class="token function">sourceToTarget</span><span class="token punctuation">(</span><span class="token class-name">UserVO</span> var1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>target <span class="token operator">=</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">,</span> source <span class="token operator">=</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>target <span class="token operator">=</span> <span class="token string">&quot;createTime&quot;</span><span class="token punctuation">,</span> dateFormat <span class="token operator">=</span> <span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token class-name">UserVO</span> <span class="token function">targetToSource</span><span class="token punctuation">(</span><span class="token class-name">UserDTO</span> var1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),Y=n("strong",null,"官网",-1),L={href:"https://github.com/mapstruct/mapstruct",target:"_blank",rel:"noopener noreferrer"},Q=n("li",null,[n("strong",null,"推荐"),s("：★★★★★")],-1),K=n("li",null,[n("strong",null,"性能"),s("：★★★★★")],-1),W=n("li",null,[n("strong",null,"手段"),s("：直接在编译期生成对应的get、set，像手写的代码一样")],-1),Z=n("li",null,[n("strong",null,"点评"),s("：速度很快，不需要到运行期处理，结合到框架中使用方便")],-1),$=n("h2",{id:"四、总结",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#四、总结","aria-hidden":"true"},"#"),s(" 四、总结")],-1),nn=n("ul",null,[n("li",null,"其实对象属性转换的操作无非是基于反射、AOP、CGlib、ASM、Javassist 在编译时和运行期进行处理，再有好的思路就是在编译前生成出对应的get、set，就像手写出来的一样。"),n("li",null,"所以我更推荐我喜欢的 MapStruct，这货用起来还是比较舒服的，一种是来自于功能上的拓展性，易用性和兼容性。"),n("li",null,"无论哪种使用，都要做一下完整的测试和验证，不要上来就复制粘贴，否则你可能早早的就把挖好坑了，当然不一定是哪个兄弟来填坑了。")],-1);function sn(an,en){const a=o("ExternalLinkIcon");return c(),l("div",null,[u,n("p",null,[s("作者：小傅哥 "),r,s("博客："),n("a",k,[s("https://bugstack.cn"),e(a)]),d,s("原文："),n("a",m,[s("https://mp.weixin.qq.com/s/Xq7oQg7dYESMYxHVnxX8Dw"),e(a)])]),v,n("p",null,[g,s("："),n("a",b,[s("https://github.com/fuzhengwei/guide-vo2dto"),e(a)])]),h,n("ul",null,[n("li",null,[y,s("："),n("a",_,[s("https://orika-mapper.github.io/orika-docs/"),e(a)])]),w,O,f,T]),U,n("ul",null,[n("li",null,[D,s("："),n("a",M,[s("http://dozer.sourceforge.net/documentation/gettingstarted.html"),e(a)])]),j,x,A,q]),I,n("ul",null,[n("li",null,[V,s("："),n("a",S,[s("http://modelmapper.org"),e(a)])]),C,B,P,J]),N,n("ul",null,[n("li",null,[z,s("："),n("a",E,[s("https://github.com/jmapper-framework/jmapper-core/wiki"),e(a)])]),F,G,R,H]),X,n("ul",null,[n("li",null,[Y,s("："),n("a",L,[s("https://github.com/mapstruct/mapstruct"),e(a)])]),Q,K,W,Z]),$,nn])}const pn=p(i,[["render",sn],["__file","2021-10-10-12zhong vo2dto fangfa，jiu BeanUtils.copyProperties yacezuilakua.html.vue"]]);export{pn as default};
