import{_ as e,r as o,o as c,c as i,a as n,b as s,d as t,e as p}from"./app-3RcBQnkC.js";const l={},u=n("h1",{id:"zookeeper-çš„ä½¿ç”¨å’Œé…ç½®ä¸­å¿ƒå®ç°",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#zookeeper-çš„ä½¿ç”¨å’Œé…ç½®ä¸­å¿ƒå®ç°","aria-hidden":"true"},"#"),s(" Zookeeper çš„ä½¿ç”¨å’Œé…ç½®ä¸­å¿ƒå®ç°")],-1),k=n("br",null,null,-1),r={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},d=n("blockquote",null,[n("p",null,"æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„")],-1),v=n("iframe",{id:"B-Video",src:"//player.bilibili.com/player.html?aid=575508253&bvid=BV12z4y1K7jv&cid=1255695805&page=1",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true",width:"100%",height:"480"}," ",-1),m=n("p",null,"æœ¬æ–‡çš„å®—æ—¨åœ¨äºé€šè¿‡ç®€å•å¹²å‡€å®è·µçš„æ–¹å¼ï¼Œå‘è¯»è€…ä»‹ç» Zookeeper çš„å®‰è£…é…ç½®ï¼Œå­¦ä¹  SpringBoot æ•´åˆä½¿ç”¨ï¼Œä»¥åŠåŸºäº Zookeeper å¼€å‘ä¸€ä¸ªç®€å•çš„é…ç½®ä¸­å¿ƒåŠŸèƒ½å†…æ ¸ã€‚é€šè¿‡è¿™æ ·çš„å®è·µæ–¹å¼ï¼Œè®©è¯»è€…å…¥é—¨å’ŒæŒæ¡ Zookeeper ä»¥åº”å¯¹åç»­éœ€è¦æ­¤æŠ€æœ¯æ ˆçš„ç›¸å…³å¼€å‘é¡¹ç›®ã€‚",-1),b=n("p",null,"æœ¬æ–‡çš„é‡ç‚¹æ˜¯åŸºäº Zookeeper å®ç°çš„é…ç½®ä¸­å¿ƒï¼Œé‚£é…ç½®ä¸­å¿ƒæ˜¯å•¥å‘¢ï¼ŸğŸ¤”",-1),h=n("p",null,"é…ç½®ä¸­å¿ƒåœ¨å¤§å‚ç³»ç»Ÿå¼€å‘ä¸­æ˜¯ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„åŠŸèƒ½ï¼Œå®ƒçš„æ ¸å¿ƒåŠŸèƒ½åœ¨äºä¸éœ€è¦ä¸Šçº¿ç³»ç»Ÿçš„æƒ…å†µä¸‹ï¼Œæ”¹å˜ç³»ç»Ÿä¸­å¯¹è±¡æˆ–è€…å±æ€§çš„å€¼ã€‚æ˜¯å±æ€§çš„å€¼ï¼Œä¹Ÿå°±æ˜¯ä½ åœ¨é€šè¿‡ç±»è·å–æŸä¸ªå±æ€§ï¼Œåˆ¤æ–­ï¼›åŠŸèƒ½å¼€å…³ã€æ¸ é“åœ°å€ã€äººç¾¤åå•ã€æ¯è´¹è´¹ç‡ã€åˆ‡é‡å æ¯”ç­‰ç­‰ï¼Œè¿™äº›å¯èƒ½éšæ—¶åŠ¨æ€è°ƒæ•´çš„å€¼ï¼Œéƒ½æ˜¯é€šè¿‡é…ç½®ä¸­å¿ƒå®ç°çš„ã€‚æ‰€ä»¥åœ¨æœ¬ç« èŠ‚çš„æ¡ˆä¾‹ä¸­ï¼Œå°å‚…å“¥åŸºäº Zookeeper ç»„ä»¶çš„åŠŸèƒ½ç‰¹æ€§ï¼Œæ¥è®¾è®¡è¿™æ ·ä¸€ä¸ªé…ç½®ä¸­å¿ƒï¼Œæ–¹ä¾¿å¤§å®¶å­¦ä¹ ã€‚",-1),g=n("p",null,"æœ¬æ–‡æ¶‰åŠçš„å·¥ç¨‹ï¼š",-1),f={href:"https://gitcode.net/KnowledgePlanet/road-map/xfg-dev-tech-zookeeper",target:"_blank",rel:"noopener noreferrer"},w=n("code",null,"docs/dev-ops æä¾›äº† Zookeeper å®‰è£…è„šæœ¬",-1),y=p('<h2 id="ä¸€ã€é…ç½®ä¸­å¿ƒ" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€é…ç½®ä¸­å¿ƒ" aria-hidden="true">#</a> ä¸€ã€é…ç½®ä¸­å¿ƒ</h2><p><code>Zookeeper æœ‰ä»€ä¹ˆç‰¹æ€§ï¼ŒåŠ¨æ€é…ç½®ä¸­å¿ƒæ€ä¹ˆåšï¼Ÿ</code></p><p>æŠ€æœ¯æ˜¯æ”¯æ’‘è§£å†³æ–¹æ¡ˆå®ç°çš„ï¼Œæœ‰äº†å„ä¸ªæŠ€æœ¯æ ˆç»„ä»¶çš„è‡ªèº«ç‰¹ç‚¹ï¼Œæ‰å¥½å®ç°å‡ºæˆ‘ä»¬æ‰€éœ€çš„å„ç±»åŠŸèƒ½ã€‚é‚£ä¹ˆè¿™æ ·çš„ä¸€ä¸ªèƒ½è®©ï¼Œå„ä¸ªæœåŠ¡éƒ½å¯ä»¥åŠ¨æ€å˜æ›´é…ç½®çš„é…ç½®ä¸­å¿ƒï¼Œå°±è¦ç”¨åˆ° Zookeeper çš„èŠ‚ç‚¹ç›‘å¬å’ŒèŠ‚ç‚¹å€¼çš„å˜åŒ–æ¥åŠ¨æ€è®¾ç½® Java ç±»ä¸­å±æ€§çš„å˜åŒ–ã€‚å¦‚å›¾</p><div align="center"><img src="https://bugstack.cn/images/roadmap/tutorial/roadmap-zookeeper-01.png" width="750px"></div><ul><li>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰å‡ºä¸€ä¸ª Zookeeper ç›‘å¬çš„é…ç½®è·¯å¾„ï¼Œä¸€èˆ¬è¿™ä¸ªè·¯å¾„åœ¨é…ç½®ä¸­å¿ƒä¸­æ˜¯ç”³è¯·çš„ç³»ç»Ÿä½¿ç”¨åœ°å€ï¼Œä»¥ç¡®ä¿å€¼çš„å”¯ä¸€ã€‚</li><li>ä¹‹åï¼Œæ¯ä¸ªç±»å¯¹åº”çš„å±æ€§ï¼Œéœ€è¦æ˜ å°„å‡ºä¸€ä¸ªç›‘å¬çš„èŠ‚ç‚¹ã€‚æ¯”å¦‚ï¼›Zookeeper ç›‘å¬äº† <code>/xfg-dev-tech/config</code> é‚£ä¹ˆç±»ä¸­ a å±æ€§å¯ä»¥æ˜¯ <code>/xfg-dev-tech/config/a</code> è¿™å¯¹è¿™ä¸ªè·¯å¾„è®¾ç½®çš„å€¼ï¼Œå°±å¯ä»¥è¢«ç›‘å¬æ‹¿åˆ°äº†ã€‚</li><li>æœ€åï¼ŒæŠŠè·å–åˆ°çš„ç›‘å¬å€¼ï¼Œé€šè¿‡ Java åå°„æ“ä½œï¼ŒæŠŠå€¼è®¾ç½®åˆ°å¯¹åº”çš„å±æ€§ä¸Šã€‚è¿™æ ·åœ¨ SpringBoot åº”ç”¨ç¨‹åºä¸­ï¼Œä½¿ç”¨æŸä¸ªç±»çš„å±æ€§å€¼çš„æ—¶å€™ï¼Œå°±å¯ä»¥åŠ¨æ€çš„è·å–åˆ°å˜åŒ–çš„å±æ€§å€¼äº†ã€‚</li></ul><h2 id="äºŒã€ç¯å¢ƒé…ç½®" tabindex="-1"><a class="header-anchor" href="#äºŒã€ç¯å¢ƒé…ç½®" aria-hidden="true">#</a> äºŒã€ç¯å¢ƒé…ç½®</h2>',6),_={href:"https://bugstack.cn/md/road-map/docker.html",target:"_blank",rel:"noopener noreferrer"},C=n("div",{align:"center"},[n("img",{src:"https://bugstack.cn/images/roadmap/tutorial/roadmap-zookeeper-02.png",width:"650px"})],-1),S=n("div",{align:"center"},[n("img",{src:"https://bugstack.cn/images/roadmap/tutorial/roadmap-zookeeper-03.png",width:"650px"})],-1),x=n("code",null,"docker-compose -f docker-compose.yml up -d",-1),q={href:"https://bugstack.cn/md/road-map/road-map.html",target:"_blank",rel:"noopener noreferrer"},E=p(`<h2 id="ä¸‰ã€åŸºæœ¬ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€åŸºæœ¬ä½¿ç”¨" aria-hidden="true">#</a> ä¸‰ã€åŸºæœ¬ä½¿ç”¨</h2><p><strong>è¿æ¥è„šæœ¬</strong>ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> zookeeper <span class="token function">bash</span>
zkCli.sh <span class="token parameter variable">-server</span> IP<span class="token punctuation">(</span>æ›¿æ¢ä¸ºä½ è‡ªå·±çš„<span class="token punctuation">)</span>:2181
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¸¸ç”¨å‘½ä»¤</strong>ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">1</span>. åˆ›å»ºèŠ‚ç‚¹ï¼šcreate /path data
<span class="token number">2</span>. åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹ï¼šcreate <span class="token parameter variable">-e</span> /path data
<span class="token number">3</span>. åˆ›å»ºé¡ºåºèŠ‚ç‚¹ï¼šcreate <span class="token parameter variable">-s</span> /path data
<span class="token number">4</span>. åˆ›å»ºä¸´æ—¶é¡ºåºèŠ‚ç‚¹ï¼šcreate <span class="token parameter variable">-e</span> <span class="token parameter variable">-s</span> /path data
<span class="token number">5</span>. è·å–èŠ‚ç‚¹æ•°æ®ï¼šget /path
<span class="token number">6</span>. è·å–èŠ‚ç‚¹å­èŠ‚ç‚¹åˆ—è¡¨ï¼šls /path
<span class="token number">7</span>. æ›´æ–°èŠ‚ç‚¹æ•°æ®ï¼šset /path data
<span class="token number">8</span>. åˆ é™¤èŠ‚ç‚¹ï¼šdelete /path
<span class="token number">9</span>. åˆ é™¤èŠ‚ç‚¹åŠå…¶å­èŠ‚ç‚¹ï¼šdeleteall /path
<span class="token number">10</span>. ç›‘å¬èŠ‚ç‚¹å˜åŒ–ï¼šget <span class="token parameter variable">-w</span> /path
<span class="token number">11</span>. æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€ï¼šstat /path
<span class="token number">12</span>. æŸ¥çœ‹èŠ‚ç‚¹ACLæƒé™ï¼šgetAcl /path
<span class="token number">13</span>. è®¾ç½®èŠ‚ç‚¹ACLæƒé™ï¼šsetAcl /path acl
<span class="token number">14</span>. æŸ¥çœ‹èŠ‚ç‚¹å­èŠ‚ç‚¹æ•°é‡ï¼šcount /path
<span class="token number">15</span>. æŸ¥çœ‹èŠ‚ç‚¹å­èŠ‚ç‚¹æ•°é‡å¹¶ç›‘å¬å˜åŒ–ï¼šcount <span class="token parameter variable">-w</span> /path
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>root@4365b68d50d6:/apache-zookeeper-3.9.0-bin<span class="token comment"># ls</span>
bin  conf  docs  lib  LICENSE.txt  NOTICE.txt  README.md  README_packaging.md
root@4365b68d50d6:/apache-zookeeper-3.9.0-bin<span class="token comment"># zkCli.sh -server 10.253.6.71:2181</span>

<span class="token punctuation">[</span>zk: <span class="token number">192.168</span>.1.101:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token function">ls</span> /xfg-dev-tech
<span class="token punctuation">[</span>config, configdowngradeSwitch<span class="token punctuation">]</span>
<span class="token punctuation">[</span>zk: <span class="token number">192.168</span>.1.101:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">2</span><span class="token punctuation">]</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œå®Œé“¾æ¥ Zookeeper ä»¥åï¼Œå°±å¯ä»¥æ‰§è¡Œè¿™äº›å¸¸ç”¨å‘½ä»¤äº†ã€‚ä½ ä¹Ÿå¯ä»¥å°è¯•ç€ç»ƒä¹ ä¸‹è¿™äº›å‘½ä»¤ã€‚</p><h2 id="å››ã€åŠŸèƒ½å®ç°" tabindex="-1"><a class="header-anchor" href="#å››ã€åŠŸèƒ½å®ç°" aria-hidden="true">#</a> å››ã€åŠŸèƒ½å®ç°</h2><h3 id="_1-å·¥ç¨‹ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div align="center"><img src="https://bugstack.cn/images/roadmap/tutorial/roadmap-zookeeper-04.png" width="650px"></div><p>å·¥ç¨‹ç»“æ„åˆ†ä¸º2ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>app å¯åŠ¨å±‚çš„ config åŒ…ä¸‹ï¼Œç”¨äºæä¾› Zookeeper æœåŠ¡çš„å¯åŠ¨é…ç½®ã€‚ä»¥åŠå°å‚…å“¥åœ¨è¿™é‡Œæ–°æ·»åŠ çš„åŠŸèƒ½ DCCValue é…ç½®ä¸­å¿ƒæ¨¡å—ã€‚</li><li>trigger æ˜¯è§¦å‘å™¨ï¼Œè¿™é‡Œå§ http è¯·æ±‚ã€listener ç›‘å¬ï¼Œéƒ½æ˜¯æ”¾åˆ°è¿™é‡Œä½¿ç”¨ã€‚å¦å¤–åƒ MQã€JOBã€RPC ä¹Ÿæ˜¯æ”¾åˆ°è¿™ä¸€å±‚ï¼Œä»¥è¿™ä¸€å±‚è§¦å‘ï¼Œæ¥è°ƒç”¨æˆ‘ä»¬çš„é¢†åŸŸæœåŠ¡ã€‚</li></ul><h3 id="_2-å¯åŠ¨-zookeeper-æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_2-å¯åŠ¨-zookeeper-æœåŠ¡" aria-hidden="true">#</a> 2. å¯åŠ¨ Zookeeper æœåŠ¡</h3><h4 id="_2-1-è‡ªå®šé…ç½®" tabindex="-1"><a class="header-anchor" href="#_2-1-è‡ªå®šé…ç½®" aria-hidden="true">#</a> 2.1 è‡ªå®šé…ç½®</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;zookeeper.sdk.config&quot;</span><span class="token punctuation">,</span> ignoreInvalidFields <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZookeeperClientConfigProperties</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> connectString<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> baseSleepTimeMs<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> maxRetries<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> sessionTimeoutMs<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> connectionTimeoutMs<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2-ä½¿ç”¨é…ç½®" tabindex="-1"><a class="header-anchor" href="#_2-2-ä½¿ç”¨é…ç½®" aria-hidden="true">#</a> 2.2 ä½¿ç”¨é…ç½®</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>zookeeper:
  sdk:
    config:
      connect-string: 10.253.6.71:2181
      base-sleep-time-ms: 1000
      max-retries: 3
      session-timeout-ms: 1800000
      connection-timeout-ms: 30000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-é…ç½®æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_2-3-é…ç½®æœåŠ¡" aria-hidden="true">#</a> 2.3 é…ç½®æœåŠ¡</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">ZookeeperClientConfigProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZooKeeperClientConfig</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * å¤šå‚æ•°æ„å»ºZooKeeperå®¢æˆ·ç«¯è¿æ¥
     *
     * <span class="token keyword">@return</span> client
     */</span>
    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;zookeeperClient&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">CuratorFramework</span> <span class="token function">createWithOptions</span><span class="token punctuation">(</span><span class="token class-name">ZookeeperClientConfigProperties</span> properties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ExponentialBackoffRetry</span> backoffRetry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ExponentialBackoffRetry</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getBaseSleepTimeMs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> properties<span class="token punctuation">.</span><span class="token function">getMaxRetries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">CuratorFramework</span> client <span class="token operator">=</span> <span class="token class-name">CuratorFrameworkFactory</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">connectString</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getConnectString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">retryPolicy</span><span class="token punctuation">(</span>backoffRetry<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">sessionTimeoutMs</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getSessionTimeoutMs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">connectionTimeoutMs</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getConnectionTimeoutMs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        client<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> client<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¯åŠ¨ä¸€ä¸ª Zookeeper çš„å®¢æˆ·ç«¯äº†ï¼Œè‡ªå®šä¹‰å¯ä»¥æ›´å¥½çš„æ§åˆ¶å’Œä½¿ç”¨ã€‚</li></ul><h3 id="_3-å®šä¹‰æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#_3-å®šä¹‰æ³¨è§£" aria-hidden="true">#</a> 3. å®šä¹‰æ³¨è§£</h3><p>å°±åŠŸèƒ½æ¥è®²ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç±»ä¸­çš„å±æ€§è¿›è¡Œèµ‹å€¼æ“ä½œã€‚é‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£è¿›è¡Œæ ‡è®°ã€‚æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å…ˆè‡ªå®šä¹‰ä¸€ä¸ªæ³¨è§£ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">FIELD</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">DCCValue</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™æ ·æ‰€æœ‰ä½¿ç”¨äº† <code>@DCCValue</code> çš„æ³¨è§£çš„å­—æ®µå°±éƒ½å¯ä»¥è¢«æˆ‘æ‰«æåˆ°äº†ã€‚</li></ul><h3 id="_4-ç›‘å¬å˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_4-ç›‘å¬å˜åŒ–" aria-hidden="true">#</a> 4. ç›‘å¬å˜åŒ–</h3><h4 id="_4-1-è·å–å±æ€§" tabindex="-1"><a class="header-anchor" href="#_4-1-è·å–å±æ€§" aria-hidden="true">#</a> 4.1 è·å–å±æ€§</h4><p><strong>æºç </strong>ï¼š<code>cn.bugstack.xfg.dev.tech.config.DCCValueBeanFactory#postProcessAfterInitialization</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">postProcessAfterInitialization</span><span class="token punctuation">(</span><span class="token class-name">Object</span> bean<span class="token punctuation">,</span> <span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> beanClass <span class="token operator">=</span> bean<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> beanClass<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>field<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">DCCValue</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">DCCValue</span> dccValue <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">DCCValue</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> client<span class="token punctuation">.</span><span class="token function">checkExists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forPath</span><span class="token punctuation">(</span><span class="token constant">BASE_CONFIG_PATH</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>dccValue<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    client<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">creatingParentsIfNeeded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forPath</span><span class="token punctuation">(</span><span class="token constant">BASE_CONFIG_PATH</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>dccValue<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;DCC èŠ‚ç‚¹ç›‘å¬ listener node {} not absent create new done!&quot;</span><span class="token punctuation">,</span> <span class="token constant">BASE_CONFIG_PATH</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>dccValue<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            dccObjGroup<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token constant">BASE_CONFIG_PATH</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>dccValue<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> bean<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>DCCValueBeanFactory å®ç°äº† BeanPostProcessor æ¥å£çš„ postProcessAfterInitialization æ–¹æ³•ã€‚</li><li>åœ¨å®ç°ä¸­ï¼Œé€šè¿‡å¯¹ bean å¯¹è±¡çš„è§£æè·å–åˆ°ä½¿ç”¨ DCCValue æ³¨è§£å±æ€§ï¼Œå¹¶åˆ¤æ–­è¿™ä¸ªå±æ€§æ‹¼æ¥çš„åœ°å€æ˜¯å¦åœ¨ Zookeeper ä¸­åˆ›å»ºï¼Œå¦‚æœæ²¡æœ‰åˆ™åˆ›å»ºã€‚ä¹‹åä¿å­˜å¯¹è±¡åˆ°å†…å­˜ä¸­ã€‚</li></ul><h4 id="_4-2-è®¾ç½®å±æ€§" tabindex="-1"><a class="header-anchor" href="#_4-2-è®¾ç½®å±æ€§" aria-hidden="true">#</a> 4.2 è®¾ç½®å±æ€§</h4><p><strong>æºç </strong>ï¼š<code>cn.bugstack.xfg.dev.tech.config.DCCValueBeanFactory#DCCValueBeanFactory</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>curatorCache<span class="token punctuation">.</span><span class="token function">listenable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> oldData<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token constant">NODE_CHANGED</span><span class="token operator">:</span>
            <span class="token class-name">String</span> dccValuePath <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Object</span> objBean <span class="token operator">=</span> dccObjGroup<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>dccValuePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// 1. getDeclaredField æ–¹æ³•ç”¨äºè·å–æŒ‡å®šç±»ä¸­å£°æ˜çš„æ‰€æœ‰å­—æ®µï¼ŒåŒ…æ‹¬ç§æœ‰å­—æ®µã€å—ä¿æŠ¤å­—æ®µå’Œå…¬å…±å­—æ®µã€‚</span>
                <span class="token comment">// 2. getField æ–¹æ³•ç”¨äºè·å–æŒ‡å®šç±»ä¸­çš„å…¬å…±å­—æ®µï¼Œå³åªèƒ½è·å–åˆ°å…¬å…±è®¿é—®ä¿®é¥°ç¬¦ï¼ˆpublicï¼‰çš„å­—æ®µã€‚</span>
                <span class="token class-name">Field</span> field <span class="token operator">=</span> objBean<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span>dccValuePath<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>dccValuePath<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                field<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>objBean<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åŸºäº Zookeeper å¯¹èŠ‚ç‚¹çš„ç›‘å¬ï¼Œåªè¦è¿™ä¸ªèŠ‚ç‚¹ä¸Šæœ‰å€¼å‘ç”Ÿå˜åŒ–ã€‚å°±å¯ä»¥ç«‹åˆ»æ£€æµ‹åˆ°å¯¹åº”çš„è·¯å¾„ä¿¡æ¯å’Œå€¼ä¿¡æ¯ã€‚</li><li>é‚£ä¹ˆæ‹¿åˆ°è¿™ä¸ªå€¼ä¿¡æ¯ï¼Œå°±å¯ä»¥æŠŠå€¼å†™å…¥åˆ°å¯¹åº”çš„å±æ€§ä¸Šäº†ã€‚å¦‚<code>ç±».A = Zookeeper è·å–åˆ°çš„å€¼</code></li></ul><h2 id="äº”ã€åŠŸèƒ½ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#äº”ã€åŠŸèƒ½ä½¿ç”¨" aria-hidden="true">#</a> äº”ã€åŠŸèƒ½ä½¿ç”¨</h2><p><strong>æºç </strong>ï¼š<code>cn.bugstack.xfg.dev.tech.trigger.http.ConfigController</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@DCCValue</span><span class="token punctuation">(</span><span class="token string">&quot;downgradeSwitch&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> downgradeSwitch<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@DCCValue</span><span class="token punctuation">(</span><span class="token string">&quot;userWhiteList&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> userWhiteList<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">CuratorFramework</span> curatorFramework<span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * curl http://localhost:8091/getConfig/downgradeSwitch
     */</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/getConfig/downgradeSwitch&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getConfigDowngradeSwitch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> downgradeSwitch<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * curl http://localhost:8091/getConfig/userWhiteList
     */</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/getConfig/userWhiteList&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getConfigUserWhiteList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> userWhiteList<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * curl -X GET &quot;http://localhost:8091/setConfig?downgradeSwitch=false&amp;userWhiteList=xfg,user2,user3&quot;
     */</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/setConfig&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setConfig</span><span class="token punctuation">(</span><span class="token class-name">Boolean</span> downgradeSwitch<span class="token punctuation">,</span> <span class="token class-name">String</span> userWhiteList<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        curatorFramework<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forPath</span><span class="token punctuation">(</span><span class="token string">&quot;/xfg-dev-tech/config/downgradeSwitch&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>downgradeSwitch <span class="token operator">?</span> <span class="token string">&quot;å¼€&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;å…³&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        curatorFramework<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forPath</span><span class="token punctuation">(</span><span class="token string">&quot;/xfg-dev-tech/config/userWhiteList&quot;</span><span class="token punctuation">,</span> userWhiteList<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œçš„æ ¸å¿ƒéªŒè¯å°±æ˜¯è®© downgradeSwitchã€userWhiteList è¿™2ä¸ªå±æ€§å€¼å¯ä»¥åŠ¨æ€å˜åŒ–ï¼›</p>`,37),F=n("li",null,"åœ¨ä¸¤ä¸ªå±æ€§ä¸Šæ·»åŠ æ³¨è§£åï¼Œå°±ä¼šè¢«æ‰«æå’Œç®¡ç†ã€‚",-1),P={href:"http://localhost:8091/getConfig/downgradeSwitch",target:"_blank",rel:"noopener noreferrer"},T={href:"http://localhost:8091/getConfig/userWhiteList",target:"_blank",rel:"noopener noreferrer"},D={href:"http://localhost:8091/setConfig?downgradeSwitch=false&userWhiteList=xfg,user2,user3",target:"_blank",rel:"noopener noreferrer"},z=n("code",null,"è¿™é‡Œçš„è®¾ç½®å€¼æ“ä½œä¸éå¾—åœ¨è¿™é‡Œï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ§åˆ¶åå°æ¥æ“ä½œã€‚è¿™é‡Œçš„æ–¹å¼ä¸»è¦æ˜¯æ¼”ç¤ºä½œç”¨",-1),B=p(`<div align="center"><img src="https://bugstack.cn/images/roadmap/tutorial/roadmap-zookeeper-05.png" width="850px"></div><p>ä½ å¯ä»¥æŒ‰ç…§å¦‚å›¾çš„æ“ä½œé¡ºåºï¼Œè¿›è¡ŒéªŒè¯å±æ€§å€¼çš„å˜åŒ–ã€‚</p><h2 id="å…­ã€å…¶ä»–æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#å…­ã€å…¶ä»–æµ‹è¯•" aria-hidden="true">#</a> å…­ã€å…¶ä»–æµ‹è¯•</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApiTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">CuratorFramework</span> curatorFramework<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_all</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">&quot;/xfg-dev-tech/config/downgradeSwitch&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> data <span class="token operator">=</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
        curatorFramework<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withMode</span><span class="token punctuation">(</span><span class="token class-name">CreateMode</span><span class="token punctuation">.</span><span class="token constant">EPHEMERAL</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forPath</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> data<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            curatorFramework<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forPath</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * åˆ›å»ºæ°¸ä¹…èŠ‚ç‚¹
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">&quot;/xfg-dev-tech/config/downgradeSwitch/test/a&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> data <span class="token operator">=</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> curatorFramework<span class="token punctuation">.</span><span class="token function">checkExists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forPath</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            curatorFramework<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">creatingParentsIfNeeded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forPath</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createEphemeralNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">&quot;/xfg-dev-tech/config/epnode&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> data <span class="token operator">=</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
        curatorFramework<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withMode</span><span class="token punctuation">(</span><span class="token class-name">CreateMode</span><span class="token punctuation">.</span><span class="token constant">EPHEMERAL</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forPath</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> data<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * åˆ›å»ºä¸´æ—¶æœ‰åºèŠ‚ç‚¹
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">crateEphemeralSequentialNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">&quot;/xfg-dev-tech/config/epsnode&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> data <span class="token operator">=</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
        curatorFramework<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withMode</span><span class="token punctuation">(</span><span class="token class-name">CreateMode</span><span class="token punctuation">.</span><span class="token constant">EPHEMERAL_SEQUENTIAL</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">forPath</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> data<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * å¾€èŠ‚ç‚¹ç§è®¾ç½®æ•°æ®
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        curatorFramework<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forPath</span><span class="token punctuation">(</span><span class="token string">&quot;/xfg-dev-tech/config/downgradeSwitch&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;111&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        curatorFramework<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forPath</span><span class="token punctuation">(</span><span class="token string">&quot;/xfg-dev-tech/config/userWhiteList&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;222&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> downgradeSwitch <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>curatorFramework<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forPath</span><span class="token punctuation">(</span><span class="token string">&quot;/xfg-dev-tech/config/downgradeSwitch&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœ: {}&quot;</span><span class="token punctuation">,</span> downgradeSwitch<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> userWhiteList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>curatorFramework<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forPath</span><span class="token punctuation">(</span><span class="token string">&quot;/xfg-dev-tech/config/userWhiteList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœ: {}&quot;</span><span class="token punctuation">,</span> userWhiteList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * å¼‚æ­¥ä¿®æ”¹æ•°æ®
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDataAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">&quot;/xfg-dev-tech/config/downgradeSwitch&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> data <span class="token operator">=</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">CuratorListener</span> listener <span class="token operator">=</span> <span class="token punctuation">(</span>client<span class="token punctuation">,</span> event<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">Stat</span> stat <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getStat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;stat=&quot;</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>stat<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">CuratorEventType</span> eventType <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;eventType=&quot;</span> <span class="token operator">+</span> eventType<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        curatorFramework<span class="token punctuation">.</span><span class="token function">getCuratorListenable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
        curatorFramework<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inBackground</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forPath</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> data<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token doc-comment comment">/**
     * åˆ é™¤èŠ‚ç‚¹
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">&quot;/xfg-dev-tech/config/downgradeSwitch&quot;</span><span class="token punctuation">;</span>
        curatorFramework<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">deletingChildrenIfNeeded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forPath</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * å®‰å…¨åˆ é™¤èŠ‚ç‚¹
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">guaranteedDeleteData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">&quot;/xfg-dev-tech/config/downgradeSwitch&quot;</span><span class="token punctuation">;</span>
        curatorFramework<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">guaranteed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forPath</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * è·å–å­èŠ‚ç‚¹ä¸‹çš„å…¨éƒ¨å­èŠ‚ç‚¹è·¯å¾„é›†åˆ
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">watchedGetChildren</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">&quot;/xfg-dev-tech&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> children <span class="token operator">=</span> curatorFramework<span class="token punctuation">.</span><span class="token function">getChildren</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">watched</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forPath</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœï¼š{}&quot;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token doc-comment comment">/**
     * è·å–èŠ‚ç‚¹æ•°æ®
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getDataByPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">&quot;/xfg-dev-tech/config/downgradeSwitch&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> fullClassName <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>curatorFramework<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forPath</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>fullClassName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœï¼š{}&quot;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">,</span> clazz<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™äº›åŠŸèƒ½ä¹Ÿéƒ½å¯ä»¥æµ‹è¯•éªŒè¯ï¼Œä¹Ÿæ˜¯å¹³å¸¸ç”¨çš„è¾ƒå¤šçš„ä¸œè¥¿ã€‚</li></ul><h2 id="ä¸ƒã€å…¶ä»–èµ„æ–™" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€å…¶ä»–èµ„æ–™" aria-hidden="true">#</a> ä¸ƒã€å…¶ä»–èµ„æ–™</h2>`,6),j={href:"https://zoonavigator.elkozmon.com/en/latest/",target:"_blank",rel:"noopener noreferrer"},L={href:"https://zookeeper.apache.org/doc/r3.5.0-alpha/zookeeperAdmin.html",target:"_blank",rel:"noopener noreferrer"};function N(A,V){const a=o("ExternalLinkIcon");return c(),i("div",null,[u,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),k,s("åšå®¢ï¼š"),n("a",r,[s("https://bugstack.cn"),t(a)])]),d,v,m,b,h,g,n("ul",null,[n("li",null,[s("xfg-dev-tech-zookeeperï¼š"),n("a",f,[s("https://gitcode.net/KnowledgePlanet/road-map/xfg-dev-tech-zookeeper"),t(a)]),s(" - "),w])]),y,n("p",null,[s("åœ¨å®‰è£…æ‰§è¡Œ docker-compose.yml è„šæœ¬ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆåœ¨æœ¬åœ°å®‰è£… "),n("a",_,[s("docker"),t(a)]),s(" ä¹‹å IntelliJ IDEA æ‰“å¼€ docker-compose.yml æ–‡ä»¶ï¼Œå¦‚å›¾æ“ä½œå³å¯å®‰è£…ã€‚")]),C,S,n("ul",null,[n("li",null,[s("å¦å¤–ï¼Œå¦‚æœä½ æ˜¯åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…ï¼Œåˆ™éœ€è¦æ‰§è¡Œ "),x,s(" å¹¶ä¸”æ˜¯ä½ å·²ç»å®‰è£…äº† Docker-Compose åŒ…ã€‚â€”â€” è¿™äº›å†…å®¹åœ¨å°å‚…å“¥çš„"),n("a",q,[s("ã€ŠJava ç®€æ˜æ•™ç¨‹ã€‹"),t(a)]),s("ä¸­éƒ½æœ‰è®²è§£ï¼Œå¯ä»¥è¿›å…¥å­¦ä¹ ã€‚")])]),E,n("ol",null,[F,n("li",null,[s("è·å–å€¼æ–¹æ³•ï¼š"),n("a",P,[s("http://localhost:8091/getConfig/downgradeSwitch"),t(a)]),s("ã€"),n("a",T,[s("http://localhost:8091/getConfig/userWhiteList"),t(a)])]),n("li",null,[s("è®¾ç½®å€¼æ–¹æ³•ï¼š"),n("a",D,[s("http://localhost:8091/setConfig?downgradeSwitch=false&userWhiteList=xfg,user2,user3"),t(a)]),s(" - "),z])]),B,n("ul",null,[n("li",null,[s("Zookeeper Web UIï¼š"),n("a",j,[s("https://zoonavigator.elkozmon.com/en/latest/"),t(a)])]),n("li",null,[s("å®˜ç½‘æ–‡æ¡£ï¼š"),n("a",L,[s("https://zookeeper.apache.org/doc/r3.5.0-alpha/zookeeperAdmin.html"),t(a)])])])])}const O=e(l,[["render",N],["__file","zookeeper.html.vue"]]);export{O as default};
