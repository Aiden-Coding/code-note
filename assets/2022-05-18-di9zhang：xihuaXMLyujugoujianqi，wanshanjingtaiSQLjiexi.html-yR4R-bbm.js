import{_ as t,r as p,o as c,c as o,a as n,b as s,d as e,e as l}from"./app-3RcBQnkC.js";const i={},u=n("h1",{id:"ã€Šmybatis-æ‰‹æ’¸ä¸“æ ã€‹ç¬¬9ç« -ç»†åŒ–xmlè¯­å¥æ„å»ºå™¨-å®Œå–„é™æ€sqlè§£æ",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ã€Šmybatis-æ‰‹æ’¸ä¸“æ ã€‹ç¬¬9ç« -ç»†åŒ–xmlè¯­å¥æ„å»ºå™¨-å®Œå–„é™æ€sqlè§£æ","aria-hidden":"true"},"#"),s(" ã€ŠMybatis æ‰‹æ’¸ä¸“æ ã€‹ç¬¬9ç« ï¼šç»†åŒ–XMLè¯­å¥æ„å»ºå™¨ï¼Œå®Œå–„é™æ€SQLè§£æ")],-1),r=n("br",null,null,-1),k={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},d=n("br",null,null,-1),m={href:"https://mp.weixin.qq.com/s/I88gvB0NqCRoIQgUJx8EMg",target:"_blank",rel:"noopener noreferrer"},v=n("blockquote",null,[n("p",null,"æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„")],-1),b=n("iframe",{id:"B-Video",src:"//player.bilibili.com/player.html?aid=599429245&bvid=BV1qB4y167AY&cid=803322797&page=1",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true",width:"100%",height:"480"}," ",-1),g=l(`<h2 id="ä¸€ã€å‰è¨€" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å‰è¨€" aria-hidden="true">#</a> ä¸€ã€å‰è¨€</h2><p><code>ä½ åªæ˜¯åœ¨è§£é‡Šè¿‡ç¨‹ï¼Œè€Œä»–æ˜¯åœ¨é˜è¿°é«˜åº¦ï¼</code></p><p>å¦‚æœä¸æ˜¯é•¿æ—¶é—´çš„æ²‰æ·€ã€ç§¯ç´¯å’Œå‚¨å¤‡ï¼Œæˆ‘ä¸€å®šä¹Ÿæ²¡æœ‰åŠæ³•ç”¨æ›´å¤šçš„ç»´åº¦å’Œæ›´å¤šçš„è§†è§’æ¥å¯¹ä¸€ä¸ªé—®é¢˜è¿›è¡Œå¤šæ–¹é¢é˜è¿°ã€‚å°±åƒä½ æˆ‘ï¼›è¶Šè¿‡å³­å£å±±å·ï¼Œæ‰çŸ¥æ•å¸­è¿˜å¸ˆçš„é€šè¾¾å¹³å¦ã€‚é¢†ç•¥è¿‡é›·å£°åƒå¶‚è½ï¼Œé›¨è‰²ä¸‡å³°æ¥ï¼Œæ‰é—»åˆ°å…«è¡¨æµäº‘æ¾„å¤œè‰²ï¼Œä¹éœ„åæœˆåŠ¨æ˜¥åŸçš„å®é™ã€‚</p><p>æ‰€ä»¥å¼•ç”³åˆ°ç¼–ç¨‹å¼€å‘ï¼Œå¾€ç®€å•äº†è¯´å°±æ˜¯å†™å†™ä»£ç ï¼Œæ”¹æ”¹bugã€‚ä½†å¦‚æœå°±å±€é™åœ¨åªæ˜¯å†™å†™ä»£ç ï¼Œå…¶å®å¾ˆéš¾é¢†ç•¥åˆ°é‚£äº›ä¼—å¤šè®¾è®¡æ€æƒ³å’Œå¤æ‚é—®é¢˜ä¸­ï¼Œåº–ä¸è§£ç‰›èˆ¬çš„é…£ç•…æ·‹æ¼“ã€‚è€Œè¿™äº›é…£ç•…çš„ä½“éªŒï¼Œéƒ½éœ€è¦ä½ å¯¹æŠ€æœ¯çš„æ‹“å±•å­¦ä¹ å’Œæ·±åº¦æ¢ç´¢ï¼Œä»ä¼—å¤šçš„ä¼˜ç§€æºç æ¡†æ¶ä¸­å¸æ”¶ç»éªŒã€‚åå¤æ£æ‘©ã€åå¤å°è¯•ï¼Œç»ˆæœ‰é‚£ä¹ˆä¸€ä¸ªæ—¶é—´ç‚¹ï¼Œä½ ä¼šæœ‰ç§æ‚Ÿäº†çš„æ„Ÿè§‰ã€‚è€Œè¿™äº›ä¸€ä¸ªä¸ªæ„Ÿè§‰çš„ç§¯ç´¯ï¼Œå°±èƒ½å¸®åŠ©ä½ ä»¥ååœ¨é¢è¯•ã€è¿°èŒã€ç­”è¾©ã€åˆ†äº«ã€æ±‡æŠ¥ç­‰åœºæ™¯ä¸­ï¼Œè¯´å‡ºæ›´æœ‰æ·±åº¦çš„æŠ€æœ¯æ€æƒ³å’Œç±»æ¯”è®¾è®¡å¯¹ç…§ï¼Œç«™åœ¨æ›´é«˜çš„è§’åº¦ä¿¯è§†ä¸šåŠ¡åœºæ™¯çš„èµ°å‘å’Œç»™å‡ºé•¿è¿œçš„æ¶æ„æ–¹æ¡ˆã€‚</p><h2 id="äºŒã€ç›®æ ‡" tabindex="-1"><a class="header-anchor" href="#äºŒã€ç›®æ ‡" aria-hidden="true">#</a> äºŒã€ç›®æ ‡</h2><p>å®ç°åˆ°æœ¬ç« èŠ‚å‰ï¼Œå…³äº Mybatis ORM æ¡†æ¶çš„å¤§éƒ¨åˆ†æ ¸å¿ƒç»“æ„å·²ç»é€æ­¥ä½“ç°å‡ºæ¥äº†ï¼ŒåŒ…æ‹¬ï¼›è§£æã€ç»‘å®šã€æ˜ å°„ã€äº‹åŠ¡ã€æ‰§è¡Œã€æ•°æ®æºç­‰ã€‚ä½†éšç€æ›´å¤šåŠŸèƒ½çš„é€æ­¥å®Œå–„ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ¨¡å—å†…çš„å®ç°è¿›è¡Œç»†åŒ–å¤„ç†ï¼Œè€Œä¸å•å•åªæ˜¯å®ŒæˆåŠŸèƒ½é€»è¾‘ã€‚è¿™å°±æœ‰ç‚¹åƒæŠŠ CRUD ä½¿ç”¨è®¾è®¡åŸåˆ™è¿›è¡Œæ‹†åˆ†è§£è€¦ï¼Œæ»¡è¶³ä»£ç çš„æ˜“ç»´æŠ¤å’Œå¯æ‰©å±•æ€§ã€‚è€Œè¿™é‡Œæˆ‘ä»¬é¦–å…ˆç€æ‰‹è¦å¤„ç†çš„å°±æ˜¯å…³äº XML è§£æçš„é—®é¢˜ï¼ŒæŠŠä¹‹å‰ç²—ç³™çš„å®ç°è¿›è¡Œç»†åŒ–ï¼Œæ»¡è¶³æˆ‘ä»¬å¯¹è§£ææ—¶ä¸€äº›å‚æ•°çš„æ•´åˆå’Œå¤„ç†ã€‚</p><p><img src="https://bugstack.cn/images/article/spring/mybatis-220519-01.png" alt="å›¾ 9-1 ORMæ¡†æ¶XMLè§£ææ˜ å°„å…³ç³»"></p><ul><li>è¿™ä¸€éƒ¨åˆ†çš„è§£æï¼Œå°±æ˜¯åœ¨æˆ‘ä»¬æœ¬ç« èŠ‚ä¹‹å‰çš„ XMLConfigBuilder#mapperElement æ–¹æ³•ä¸­çš„æ“ä½œã€‚çœ‹ä¸Šå»è™½ç„¶èƒ½å®ç°åŠŸèƒ½ï¼Œä½†æ€»ä¼šè®©äººæ„Ÿè§‰å®ƒä¸å¤Ÿè§„æ•´ã€‚å°±åƒæˆ‘ä»¬å¹³å¸¸å¼€å‘çš„ CRUD ç½—åˆ—åˆ°ä¸€å—çš„é€»è¾‘ä¸€æ ·ï¼Œä»€ä¹ˆæµç¨‹éƒ½èƒ½å¤„ç†ï¼Œä½†ä»€ä¹ˆæµç¨‹éƒ½ä¼šè¶Šæ¥è¶Šæ··ä¹±ã€‚</li><li>å°±åƒæˆ‘ä»¬åœ¨ ORM æ¡†æ¶ DefaultSqlSession ä¸­è°ƒç”¨å…·ä½“æ‰§è¡Œæ•°æ®åº“æ“ä½œçš„æ–¹æ³•ï¼Œéœ€è¦è¿›è¡Œ PreparedStatementHandler#parameterize å‚æ•°æ—¶ï¼Œå…¶å®å¹¶æ²¡æœ‰å‡†ç¡®çš„å®šä½åˆ°å‚æ•°çš„ç±»å‹ï¼ŒjdbcTypeå’ŒjavaTypeçš„è½¬æ¢å…³ç³»ï¼Œæ‰€ä»¥åç»­çš„å±æ€§å¡«å……å°±ä¼šæ˜¾å¾—æ¯”è¾ƒæ··ä¹±ä¸”ä¸æ˜“äºæ‰©å±•ã€‚<em>å½“ç„¶ï¼Œå¦‚æœä½ ç¡¬å†™ä¹Ÿæ˜¯å†™çš„å‡ºæ¥çš„ï¼Œä¸è¿‡è¿™ç§å°±ä¸æ˜¯ä¸€ä¸ªå¥½çš„è®¾è®¡ï¼</em></li><li>æ‰€ä»¥æ¥ä¸‹æ¥å°å‚…å“¥ä¼šå¸¦ç€è¯»è€…ï¼ŒæŠŠè¿™éƒ¨åˆ†è§£æçš„å¤„ç†ï¼Œä½¿ç”¨è®¾è®¡åŸåˆ™å°†æµç¨‹å’ŒèŒè´£è¿›è¡Œè§£è€¦ï¼Œå¹¶ç»“åˆæˆ‘ä»¬çš„å½“å‰è¯‰æ±‚ï¼Œä¼˜å…ˆå¤„ç†é™æ€ SQL å†…å®¹ã€‚å¾…æ¡†æ¶ç»“æ„é€æ­¥å®Œå–„ï¼Œå†è¿›è¡Œä¸€äº›åŠ¨æ€SQLå’Œæ›´å¤šå‚æ•°ç±»å‹çš„å¤„ç†ï¼Œæ»¡è¶³è¯»è€…ä»¥ååœ¨é˜…è¯» Mybatis æºç ï¼Œä»¥åŠéœ€è¦å¼€å‘è‡ªå·±çš„ X-ORM æ¡†æ¶çš„æ—¶å€™ï¼Œæœ‰ä¸€äº›ç»éªŒç§¯ç´¯ã€‚</li></ul><h2 id="ä¸‰ã€è®¾è®¡" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€è®¾è®¡" aria-hidden="true">#</a> ä¸‰ã€è®¾è®¡</h2><p>å‚ç…§è®¾è®¡åŸåˆ™ï¼Œå¯¹äº XML ä¿¡æ¯çš„è¯»å–ï¼Œå„ä¸ªåŠŸèƒ½æ¨¡å—çš„æµç¨‹ä¸Šåº”è¯¥ç¬¦åˆå•ä¸€èŒè´£ï¼Œè€Œæ¯ä¸€ä¸ªå…·ä½“çš„å®ç°åˆå¾—å…·å¤‡è¿ªç±³ç‰¹æ³•åˆ™ï¼Œè¿™æ ·å®ç°å‡ºæ¥çš„åŠŸèƒ½æ‰èƒ½å…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§ã€‚<em>é€šå¸¸è¿™ç±»ä»£ç ä¹Ÿä¼šçœ‹ç€å¾ˆå¹²å‡€</em> é‚£ä¹ˆåŸºäºè¿™æ ·çš„è¯‰æ±‚ï¼Œæˆ‘ä»¬åˆ™éœ€è¦ç»™è§£æè¿‡ç¨‹ä¸­ï¼Œæ‰€å±è§£æçš„ä¸åŒå†…å®¹ï¼ŒæŒ‰ç…§å„è‡ªçš„èŒè´£ç±»è¿›è¡Œæ‹†è§£å’Œä¸²è”è°ƒç”¨ã€‚æ•´ä½“è®¾è®¡å¦‚å›¾ 9-2</p><p><img src="https://bugstack.cn/images/article/spring/mybatis-220519-02.png" alt="å›¾ 9-2 XML é…ç½®æ„å»ºå™¨è§£æè¿‡ç¨‹"></p><ul><li>ä¸ä¹‹å‰çš„è§£æä»£ç ç›¸å¯¹ç…§ï¼Œä¸åœ¨æ˜¯æŠŠæ‰€æœ‰çš„è§£æéƒ½åœ¨ä¸€ä¸ªå¾ªç¯ä¸­å¤„ç†ï¼Œè€Œæ˜¯åœ¨æ•´ä¸ªè§£æè¿‡ç¨‹ä¸­ï¼Œå¼•å…¥ XMLMapperBuilderã€XMLStatementBuilder åˆ†åˆ«å¤„ç†<code>æ˜ å°„æ„å»ºå™¨</code>å’Œ<code>è¯­å¥æ„å»ºå™¨</code>ï¼ŒæŒ‰ç…§ä¸åŒçš„èŒè´£åˆ†åˆ«è¿›è¡Œè§£æã€‚</li><li>ä¸æ­¤åŒæ—¶ä¹Ÿåœ¨è¯­å¥æ„å»ºå™¨ä¸­ï¼Œå¼•å…¥è„šæœ¬è¯­è¨€é©±åŠ¨å™¨ï¼Œé»˜è®¤å®ç°çš„æ˜¯ XMLè¯­è¨€é©±åŠ¨å™¨ XMLLanguageDriverï¼Œè¿™ä¸ªç±»æ¥å…·ä½“æ“ä½œé™æ€å’ŒåŠ¨æ€ SQL è¯­å¥èŠ‚ç‚¹çš„è§£æã€‚<em>è¿™éƒ¨åˆ†çš„è§£æå¤„ç†å®ç°æ–¹å¼å¾ˆå¤šï¼Œå³ä½¿è‡ªå·±ä½¿ç”¨æ­£åˆ™æˆ–è€… String æˆªå–ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚æ‰€ä»¥ä¸ºäº†ä¿æŒä¸ Mybatis çš„ç»Ÿä¸€ï¼Œæˆ‘ä»¬ç›´æ¥å‚ç…§æºç  Ognl çš„æ–¹å¼è¿›è¡Œå¤„ç†ã€‚å¯¹åº”çš„ç±»æ˜¯ DynamicContext</em></li><li>è¿™é‡Œæ‰€æœ‰çš„è§£æé“ºå«ï¼Œé€šè¿‡è§£è€¦çš„æ–¹å¼å®ç°ï¼Œéƒ½æ˜¯ä¸ºäº†åç»­åœ¨ executor æ‰§è¡Œå™¨ä¸­ï¼Œæ›´åŠ æ–¹ä¾¿çš„å¤„ç† setParameters å‚æ•°çš„è®¾ç½®ã€‚<em>åé¢å‚æ•°çš„è®¾ç½®ï¼Œä¹Ÿä¼šæ¶‰åŠåˆ°å‰é¢æˆ‘ä»¬å®ç°çš„å…ƒå¯¹è±¡åå°„å·¥å…·ç±»çš„ä½¿ç”¨ã€‚</em></li></ul><h2 id="å››ã€å®ç°" tabindex="-1"><a class="header-anchor" href="#å››ã€å®ç°" aria-hidden="true">#</a> å››ã€å®ç°</h2><h3 id="_1-å·¥ç¨‹ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>mybatis<span class="token operator">-</span>step<span class="token operator">-</span><span class="token number">08</span>
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â””â”€â”€ java
    â”‚       â””â”€â”€ cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>mybatis
    â”‚           â”œâ”€â”€ binding
    â”‚           â”œâ”€â”€ builder
    â”‚           â”‚   â”œâ”€â”€ xml
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">XMLConfigBuilder</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">XMLMapperBuilder</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">XMLStatementBuilder</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">BaseBuilder</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ParameterExpression</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">SqlSourceBuilder</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">StaticSqlSource</span><span class="token punctuation">.</span>java
    â”‚           â”œâ”€â”€ datasource
    â”‚           â”œâ”€â”€ executor
    â”‚           â”‚   â”œâ”€â”€ resultset
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">DefaultResultSetHandler</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">ResultSetHandler</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ statement
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BaseStatementHandler</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">PreparedStatementHandler</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">SimpleStatementHandler</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">StatementHandler</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">BaseExecutor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">Executor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">SimpleExecutor</span><span class="token punctuation">.</span>java
    â”‚           â”œâ”€â”€ io
    â”‚           â”œâ”€â”€ mapping
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">BoundSql</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">Environment</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">MappedStatement</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ParameterMapping</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">SqlCommandType</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">SqlSource</span><span class="token punctuation">.</span>java
    â”‚           â”œâ”€â”€ parsing
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">GenericTokenParser</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">TokenHandler</span><span class="token punctuation">.</span>java
    â”‚           â”œâ”€â”€ reflection
    â”‚           â”œâ”€â”€ scripting
    â”‚           â”‚   â”œâ”€â”€ defaults
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">DefaultParameterHandler</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">RawSqlSource</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ xmltags
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">DynamicContext</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">MixedSqlNode</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">SqlNode</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">StaticTextSqlNode</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">XMLLanguageDriver</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">XMLScriptBuilder</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">LanguageDriver</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">LanguageDriverRegistry</span><span class="token punctuation">.</span>java
    â”‚           â”œâ”€â”€ session
    â”‚           â”‚   â”œâ”€â”€ defaults
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">DefaultSqlSession</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">DefaultSqlSessionFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">Configuration</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ResultHandler</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">SqlSession</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">SqlSessionFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">TransactionIsolationLevel</span><span class="token punctuation">.</span>java
    â”‚           â”œâ”€â”€ transaction
    â”‚           â””â”€â”€ type
    â”‚               â”œâ”€â”€ <span class="token class-name">JdbcType</span><span class="token punctuation">.</span>java
    â”‚               â”œâ”€â”€ <span class="token class-name">TypeAliasRegistry</span><span class="token punctuation">.</span>java
    â”‚               â”œâ”€â”€ <span class="token class-name">TypeHandler</span><span class="token punctuation">.</span>java
    â”‚               â””â”€â”€ <span class="token class-name">TypeHandlerRegistry</span><span class="token punctuation">.</span>java
    â””â”€â”€ test
        â”œâ”€â”€ java
        â”‚   â””â”€â”€ cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>test<span class="token punctuation">.</span>dao
        â”‚       â”œâ”€â”€ dao
        â”‚       â”‚   â””â”€â”€ <span class="token class-name">IUserDao</span><span class="token punctuation">.</span>java
        â”‚       â”œâ”€â”€ po
        â”‚       â”‚   â””â”€â”€ <span class="token class-name">User</span><span class="token punctuation">.</span>java
        â”‚       â””â”€â”€ <span class="token class-name">ApiTest</span><span class="token punctuation">.</span>java
        â””â”€â”€ resources
            â”œâ”€â”€ mapper
            â”‚   â””â”€â”€<span class="token class-name">User_Mapper</span><span class="token punctuation">.</span>xml
            â””â”€â”€ mybatis<span class="token operator">-</span>config<span class="token operator">-</span>datasource<span class="token punctuation">.</span>xml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å·¥ç¨‹æºç </strong>ï¼š<code>å…¬ä¼—å·ã€Œbugstackè™«æ´æ ˆã€ï¼Œå›å¤ï¼šæ‰‹å†™Mybatisï¼Œè·å–å®Œæ•´æºç </code></p><p>XML è¯­å¥è§£ææ„å»ºå™¨ï¼Œæ ¸å¿ƒé€»è¾‘ç±»å…³ç³»ï¼Œå¦‚å›¾ 9-3 æ‰€ç¤º</p><p><img src="https://bugstack.cn/images/article/spring/mybatis-220519-03.png" alt="å›¾ 9-3 XML è¯­å¥è§£ææ„å»ºå™¨ï¼Œæ ¸å¿ƒé€»è¾‘ç±»å…³ç³»"></p><ul><li>è§£è€¦åŸ XMLConfigBuilder ä¸­å¯¹ XML çš„è§£æï¼Œæ‰©å±•æ˜ å°„æ„å»ºå™¨ã€è¯­å¥æ„å»ºå™¨ï¼Œå¤„ç† SQL çš„æå–å’Œå‚æ•°çš„åŒ…è£…ï¼Œæ•´ä¸ªæ ¸å¿ƒæµå›¾ä»¥ XMLConfigBuilder#mapperElement ä¸ºå…¥å£è¿›è¡Œä¸²è”è°ƒç”¨ã€‚</li><li>åœ¨ XMLStatementBuilder#parseStatementNode æ–¹æ³•ä¸­è§£æ <code>&lt;select id=&quot;queryUserInfoById&quot; parameterType=&quot;java.lang.Long&quot; resultType=&quot;cn.bugstack.mybatis.test.po.User&quot;&gt;...&lt;/select&gt;</code> é…ç½®è¯­å¥ï¼Œæå–å‚æ•°ç±»å‹ã€ç»“æœç±»å‹ï¼Œè€Œè¿™é‡Œçš„è¯­å¥å¤„ç†æµç¨‹ç¨å¾®è¾ƒé•¿ï¼Œå› ä¸ºéœ€è¦ç”¨åˆ°è„šæœ¬è¯­è¨€é©±åŠ¨å™¨ï¼Œè¿›è¡Œè§£æå¤„ç†ï¼Œåˆ›å»ºå‡º SqlSource è¯­å¥ä¿¡æ¯ã€‚<em>SqlSource åŒ…å«äº† BoundSqlï¼ŒåŒæ—¶è¿™é‡Œæ‰©å±•äº† ParameterMapping ä½œä¸ºå‚æ•°åŒ…è£…ä¼ é€’ç±»ï¼Œè€Œä¸æ˜¯ä»…ä»…ä½œä¸º Map ç»“æ„åŒ…è£…ã€‚å› ä¸ºé€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œå¯ä»¥å°è£…è§£æåçš„ javaType/jdbcType ä¿¡æ¯</em></li></ul><h3 id="_2-è§£è€¦æ˜ å°„è§£æ" tabindex="-1"><a class="header-anchor" href="#_2-è§£è€¦æ˜ å°„è§£æ" aria-hidden="true">#</a> 2. è§£è€¦æ˜ å°„è§£æ</h3><p>æä¾›å•ç‹¬çš„ XML æ˜ å°„æ„å»ºå™¨ XMLMapperBuilder ç±»ï¼ŒæŠŠå…³äº Mapper å†…çš„ SQL è¿›è¡Œè§£æå¤„ç†ã€‚æä¾›äº†è¿™ä¸ªç±»ä»¥åï¼Œå°±å¯ä»¥æŠŠè¿™ä¸ªç±»çš„æ“ä½œæ”¾åˆ° XML é…ç½®æ„å»ºå™¨ï¼ŒXMLConfigBuilder#mapperElement ä¸­è¿›è¡Œä½¿ç”¨äº†ã€‚å…·ä½“æˆ‘ä»¬çœ‹ä¸‹å¦‚ä¸‹ä»£ç ã€‚</p><p><strong>æºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.builder.xml.XMLMapperBuilder</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XMLMapperBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">BaseBuilder</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * è§£æ
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¦‚æœå½“å‰èµ„æºæ²¡æœ‰åŠ è½½è¿‡å†åŠ è½½ï¼Œé˜²æ­¢é‡å¤åŠ è½½</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>configuration<span class="token punctuation">.</span><span class="token function">isResourceLoaded</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">configurationElement</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// æ ‡è®°ä¸€ä¸‹ï¼Œå·²ç»åŠ è½½è¿‡äº†</span>
            configuration<span class="token punctuation">.</span><span class="token function">addLoadedResource</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ç»‘å®šæ˜ å°„å™¨åˆ°namespace</span>
            configuration<span class="token punctuation">.</span><span class="token function">addMapper</span><span class="token punctuation">(</span><span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">classForName</span><span class="token punctuation">(</span>currentNamespace<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// é…ç½®mapperå…ƒç´ </span>
    <span class="token comment">// &lt;mapper namespace=&quot;org.mybatis.example.BlogMapper&quot;&gt;</span>
    <span class="token comment">//   &lt;select id=&quot;selectBlog&quot; parameterType=&quot;int&quot; resultType=&quot;Blog&quot;&gt;</span>
    <span class="token comment">//    select * from Blog where id = #{id}</span>
    <span class="token comment">//   &lt;/select&gt;</span>
    <span class="token comment">// &lt;/mapper&gt;</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">configurationElement</span><span class="token punctuation">(</span><span class="token class-name">Element</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 1.é…ç½®namespace</span>
        currentNamespace <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">&quot;namespace&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>currentNamespace<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;Mapper&#39;s namespace cannot be empty&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 2.é…ç½®select|insert|update|delete</span>
        <span class="token function">buildStatementFromContext</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span><span class="token function">elements</span><span class="token punctuation">(</span><span class="token string">&quot;select&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// é…ç½®select|insert|update|delete</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">buildStatementFromContext</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Element</span> element <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">final</span> <span class="token class-name">XMLStatementBuilder</span> statementParser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLStatementBuilder</span><span class="token punctuation">(</span>configuration<span class="token punctuation">,</span> element<span class="token punctuation">,</span> currentNamespace<span class="token punctuation">)</span><span class="token punctuation">;</span>
            statementParser<span class="token punctuation">.</span><span class="token function">parseStatementNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ XMLMapperBuilder#parse çš„è§£æä¸­ï¼Œä¸»è¦ä½“ç°åœ¨èµ„æºè§£æåˆ¤æ–­ã€Mapperè§£æå’Œç»‘å®šæ˜ å°„å™¨åˆ°ï¼›</p><ul><li>configuration.isResourceLoaded èµ„æºåˆ¤æ–­é¿å…é‡å¤è§£æï¼Œåšäº†ä¸ªè®°å½•ã€‚</li><li>configuration.addMapper ç»‘å®šæ˜ å°„å™¨ä¸»è¦æ˜¯æŠŠ namespace <code>cn.bugstack.mybatis.test.dao.IUserDao</code> ç»‘å®šåˆ° Mapper ä¸Šã€‚ä¹Ÿå°±æ˜¯æ³¨å†Œåˆ°æ˜ å°„å™¨æ³¨å†Œæœºé‡Œã€‚</li><li>configurationElement æ–¹æ³•è°ƒç”¨çš„ buildStatementFromContextï¼Œé‡åœ¨å¤„ç† XML è¯­å¥æ„å»ºå™¨ï¼Œä¸‹æ–‡ä¸­å•ç‹¬è®²è§£ã€‚</li></ul><p><strong>é…ç½®æ„å»ºå™¨ï¼Œè°ƒç”¨æ˜ å°„æ„å»ºå™¨ï¼Œæºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.builder.xml.XMLMapperBuilder</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XMLConfigBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">BaseBuilder</span> <span class="token punctuation">{</span>

    <span class="token comment">/*
     * &lt;mappers&gt;
     *	 &lt;mapper resource=&quot;org/mybatis/builder/AuthorMapper.xml&quot;/&gt;
     *	 &lt;mapper resource=&quot;org/mybatis/builder/BlogMapper.xml&quot;/&gt;
     *	 &lt;mapper resource=&quot;org/mybatis/builder/PostMapper.xml&quot;/&gt;
     * &lt;/mappers&gt;
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">mapperElement</span><span class="token punctuation">(</span><span class="token class-name">Element</span> mappers<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">&gt;</span></span> mapperList <span class="token operator">=</span> mappers<span class="token punctuation">.</span><span class="token function">elements</span><span class="token punctuation">(</span><span class="token string">&quot;mapper&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Element</span> e <span class="token operator">:</span> mapperList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> resource <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">&quot;resource&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// åœ¨forå¾ªç¯é‡Œæ¯ä¸ªmapperéƒ½é‡æ–°newä¸€ä¸ªXMLMapperBuilderï¼Œæ¥è§£æ</span>
            <span class="token class-name">XMLMapperBuilder</span> mapperParser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLMapperBuilder</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">,</span> configuration<span class="token punctuation">,</span> resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
            mapperParser<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨ XMLConfigBuilder#mapperElement ä¸­ï¼ŒæŠŠåŸæ¥æµç¨‹åŒ–çš„å¤„ç†è¿›è¡Œè§£è€¦ï¼Œè°ƒç”¨ XMLMapperBuilder#parse æ–¹æ³•è¿›è¡Œè§£æå¤„ç†ã€‚</li></ul><h3 id="_3-è¯­å¥æ„å»ºå™¨" tabindex="-1"><a class="header-anchor" href="#_3-è¯­å¥æ„å»ºå™¨" aria-hidden="true">#</a> 3. è¯­å¥æ„å»ºå™¨</h3><p>XMLStatementBuilder è¯­å¥æ„å»ºå™¨ä¸»è¦è§£æ XML ä¸­ <code>select|insert|update|delete</code> ä¸­çš„è¯­å¥ï¼Œå½“å‰æˆ‘ä»¬å…ˆä»¥ select è§£æä¸ºæ¡ˆä¾‹ï¼Œåç»­å†æ‰©å±•å…¶ä»–çš„è§£ææµç¨‹ã€‚</p><p><strong>æºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.builder.xml.XMLStatementBuilder</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XMLStatementBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">BaseBuilder</span> <span class="token punctuation">{</span>

    <span class="token comment">//è§£æè¯­å¥(select|insert|update|delete)</span>
    <span class="token comment">//&lt;select</span>
    <span class="token comment">//  id=&quot;selectPerson&quot;</span>
    <span class="token comment">//  parameterType=&quot;int&quot;</span>
    <span class="token comment">//  parameterMap=&quot;deprecated&quot;</span>
    <span class="token comment">//  resultType=&quot;hashmap&quot;</span>
    <span class="token comment">//  resultMap=&quot;personResultMap&quot;</span>
    <span class="token comment">//  flushCache=&quot;false&quot;</span>
    <span class="token comment">//  useCache=&quot;true&quot;</span>
    <span class="token comment">//  timeout=&quot;10000&quot;</span>
    <span class="token comment">//  fetchSize=&quot;256&quot;</span>
    <span class="token comment">//  statementType=&quot;PREPARED&quot;</span>
    <span class="token comment">//  resultSetType=&quot;FORWARD_ONLY&quot;&gt;</span>
    <span class="token comment">//  SELECT * FROM PERSON WHERE ID = #{id}</span>
    <span class="token comment">//&lt;/select&gt;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">parseStatementNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> id <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å‚æ•°ç±»å‹</span>
        <span class="token class-name">String</span> parameterType <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">&quot;parameterType&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> parameterTypeClass <span class="token operator">=</span> <span class="token function">resolveAlias</span><span class="token punctuation">(</span>parameterType<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ç»“æœç±»å‹</span>
        <span class="token class-name">String</span> resultType <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">&quot;resultType&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> resultTypeClass <span class="token operator">=</span> <span class="token function">resolveAlias</span><span class="token punctuation">(</span>resultType<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å–å‘½ä»¤ç±»å‹(select|insert|update|delete)</span>
        <span class="token class-name">String</span> nodeName <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlCommandType</span> sqlCommandType <span class="token operator">=</span> <span class="token class-name">SqlCommandType</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>nodeName<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token constant">ENGLISH</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// è·å–é»˜è®¤è¯­è¨€é©±åŠ¨å™¨</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> langClass <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">getLanguageRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDefaultDriverClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">LanguageDriver</span> langDriver <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">getLanguageRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDriver</span><span class="token punctuation">(</span>langClass<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">SqlSource</span> sqlSource <span class="token operator">=</span> langDriver<span class="token punctuation">.</span><span class="token function">createSqlSource</span><span class="token punctuation">(</span>configuration<span class="token punctuation">,</span> element<span class="token punctuation">,</span> parameterTypeClass<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">MappedStatement</span> mappedStatement <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MappedStatement<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span>configuration<span class="token punctuation">,</span> currentNamespace <span class="token operator">+</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">,</span> sqlCommandType<span class="token punctuation">,</span> sqlSource<span class="token punctuation">,</span> resultTypeClass<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// æ·»åŠ è§£æ SQL</span>
        configuration<span class="token punctuation">.</span><span class="token function">addMappedStatement</span><span class="token punctuation">(</span>mappedStatement<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ•´ä¸ªè¿™éƒ¨åˆ†å†…å®¹çš„è§£æï¼Œå°±æ˜¯ä» XMLConfigBuilder æ‹†è§£å‡ºæ¥å…³äº Mapper è¯­å¥è§£æçš„éƒ¨åˆ†ï¼Œé€šè¿‡è¿™æ ·è¿™æ ·çš„è§£è€¦è®¾è®¡ï¼Œä¼šè®©æ•´ä¸ªæµç¨‹æ›´åŠ æ¸…æ™°ã€‚</li><li>XMLStatementBuilder#parseStatementNode æ–¹æ³•æ˜¯è§£æ SQL è¯­å¥èŠ‚ç‚¹çš„è¿‡ç¨‹ï¼ŒåŒ…æ‹¬äº†è¯­å¥çš„IDã€å‚æ•°ç±»å‹ã€ç»“æœç±»å‹ã€å‘½ä»¤(<code>select|insert|update|delete</code>)ï¼Œä»¥åŠä½¿ç”¨è¯­è¨€é©±åŠ¨å™¨å¤„ç†å’Œå°è£…SQLä¿¡æ¯ï¼Œå½“è§£æå®Œæˆåå†™å…¥åˆ° Configuration é…ç½®æ–‡ä»¶ä¸­çš„ <code>Map&lt;String, MappedStatement&gt;</code> æ˜ å°„è¯­å¥å­˜æ”¾ä¸­ã€‚</li></ul><h3 id="_4-è„šæœ¬è¯­è¨€é©±åŠ¨" tabindex="-1"><a class="header-anchor" href="#_4-è„šæœ¬è¯­è¨€é©±åŠ¨" aria-hidden="true">#</a> 4. è„šæœ¬è¯­è¨€é©±åŠ¨</h3><p>åœ¨ XMLStatementBuilder#parseStatementNode è¯­å¥æ„å»ºå™¨çš„è§£æä¸­ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¹ˆä¸€å—ï¼Œè·å–é»˜è®¤è¯­è¨€é©±åŠ¨å™¨å¹¶è§£æSQLçš„æ“ä½œã€‚å…¶å®è¿™éƒ¨åˆ†å°±æ˜¯ XML è„šæ­¥è¯­è¨€é©±åŠ¨å™¨æ‰€å®ç°çš„åŠŸèƒ½ï¼Œåœ¨ XMLScriptBuilder ä¸­å¤„ç†é™æ€SQLå’ŒåŠ¨æ€SQLï¼Œä¸è¿‡ç›®å‰æˆ‘ä»¬åªæ˜¯å®ç°äº†å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå¾…åç»­è¿™éƒ¨åˆ†æ¡†æ¶éƒ½å®Œå–„ååœ¨è¿›è¡Œæ‰©å±•ï¼Œé¿å…ä¸€æ¬¡å¼•å…¥è¿‡å¤šçš„ä»£ç ã€‚</p><h4 id="_4-1-å®šä¹‰æ¥å£" tabindex="-1"><a class="header-anchor" href="#_4-1-å®šä¹‰æ¥å£" aria-hidden="true">#</a> 4.1 å®šä¹‰æ¥å£</h4><p><strong>æºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.scripting.LanguageDriver</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">LanguageDriver</span> <span class="token punctuation">{</span>

    <span class="token class-name">SqlSource</span> <span class="token function">createSqlSource</span><span class="token punctuation">(</span><span class="token class-name">Configuration</span> configuration<span class="token punctuation">,</span> <span class="token class-name">Element</span> script<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> parameterType<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å®šä¹‰è„šæœ¬è¯­è¨€é©±åŠ¨æ¥å£ï¼Œæä¾›åˆ›å»º SQL ä¿¡æ¯çš„æ–¹æ³•ï¼Œå…¥å‚åŒ…æ‹¬äº†é…ç½®ã€å…ƒç´ ã€å‚æ•°ã€‚å…¶å®å®ƒçš„å®ç°ç±»ä¸€å…±æœ‰3ä¸ªï¼›<code>XMLLanguageDriver</code>ã€<code>RawLanguageDriver</code>ã€<code>VelocityLanguageDriver</code>ï¼Œè¿™é‡Œæˆ‘ä»¬åªæ˜¯å®ç°äº†é»˜è®¤çš„ç¬¬ä¸€ä¸ªå³å¯ã€‚</li></ul><h4 id="_4-2-xmlè¯­è¨€é©±åŠ¨å™¨å®ç°" tabindex="-1"><a class="header-anchor" href="#_4-2-xmlè¯­è¨€é©±åŠ¨å™¨å®ç°" aria-hidden="true">#</a> 4.2 XMLè¯­è¨€é©±åŠ¨å™¨å®ç°</h4><p><strong>æºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.scripting.xmltags.XMLLanguageDriver</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XMLLanguageDriver</span> <span class="token keyword">implements</span> <span class="token class-name">LanguageDriver</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">SqlSource</span> <span class="token function">createSqlSource</span><span class="token punctuation">(</span><span class="token class-name">Configuration</span> configuration<span class="token punctuation">,</span> <span class="token class-name">Element</span> script<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> parameterType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">XMLScriptBuilder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLScriptBuilder</span><span class="token punctuation">(</span>configuration<span class="token punctuation">,</span> script<span class="token punctuation">,</span> parameterType<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">parseScriptNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å…³äº XML è¯­è¨€é©±åŠ¨å™¨çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œåªæ˜¯å°è£…äº†å¯¹ XMLScriptBuilder çš„è°ƒç”¨å¤„ç†ã€‚</li></ul><h4 id="_4-3-xmlè„šæœ¬æ„å»ºå™¨è§£æ" tabindex="-1"><a class="header-anchor" href="#_4-3-xmlè„šæœ¬æ„å»ºå™¨è§£æ" aria-hidden="true">#</a> 4.3 XMLè„šæœ¬æ„å»ºå™¨è§£æ</h4><p><strong>æºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.scripting.xmltags.XMLScriptBuilder</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XMLScriptBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">BaseBuilder</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">SqlSource</span> <span class="token function">parseScriptNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SqlNode</span><span class="token punctuation">&gt;</span></span> contents <span class="token operator">=</span> <span class="token function">parseDynamicTags</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MixedSqlNode</span> rootSqlNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MixedSqlNode</span><span class="token punctuation">(</span>contents<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RawSqlSource</span><span class="token punctuation">(</span>configuration<span class="token punctuation">,</span> rootSqlNode<span class="token punctuation">,</span> parameterType<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SqlNode</span><span class="token punctuation">&gt;</span></span> <span class="token function">parseDynamicTags</span><span class="token punctuation">(</span><span class="token class-name">Element</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SqlNode</span><span class="token punctuation">&gt;</span></span> contents <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// element.getText æ‹¿åˆ° SQL</span>
        <span class="token class-name">String</span> data <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        contents<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StaticTextSqlNode</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> contents<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>XMLScriptBuilder#parseScriptNode è§£æSQLèŠ‚ç‚¹çš„å¤„ç†å…¶å®æ²¡æœ‰å¤ªå¤šå¤æ‚çš„å†…å®¹ï¼Œä¸»è¦æ˜¯å¯¹ RawSqlSource çš„åŒ…è£…å¤„ç†ã€‚<em>å…¶ä»–å°ç»†èŠ‚å¯ä»¥é˜…è¯»æºç è¿›è¡Œå­¦ä¹ </em></li></ul><h4 id="_4-4-sqlæºç æ„å»ºå™¨" tabindex="-1"><a class="header-anchor" href="#_4-4-sqlæºç æ„å»ºå™¨" aria-hidden="true">#</a> 4.4 SQLæºç æ„å»ºå™¨</h4><p><strong>æºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.builder.SqlSourceBuilder</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SqlSourceBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">BaseBuilder</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> parameterProperties <span class="token operator">=</span> <span class="token string">&quot;javaType,jdbcType,mode,numericScale,resultMap,typeHandler,jdbcTypeName&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SqlSourceBuilder</span><span class="token punctuation">(</span><span class="token class-name">Configuration</span> configuration<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">SqlSource</span> <span class="token function">parse</span><span class="token punctuation">(</span><span class="token class-name">String</span> originalSql<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> parameterType<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> additionalParameters<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ParameterMappingTokenHandler</span> handler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ParameterMappingTokenHandler</span><span class="token punctuation">(</span>configuration<span class="token punctuation">,</span> parameterType<span class="token punctuation">,</span> additionalParameters<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">GenericTokenParser</span> parser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericTokenParser</span><span class="token punctuation">(</span><span class="token string">&quot;#{&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> parser<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>originalSql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è¿”å›é™æ€ SQL</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">StaticSqlSource</span><span class="token punctuation">(</span>configuration<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> handler<span class="token punctuation">.</span><span class="token function">getParameterMappings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ParameterMappingTokenHandler</span> <span class="token keyword">extends</span> <span class="token class-name">BaseBuilder</span> <span class="token keyword">implements</span> <span class="token class-name">TokenHandler</span> <span class="token punctuation">{</span>
       
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">handleToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            parameterMappings<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">buildParameterMapping</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token string">&quot;?&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// æ„å»ºå‚æ•°æ˜ å°„</span>
        <span class="token keyword">private</span> <span class="token class-name">ParameterMapping</span> <span class="token function">buildParameterMapping</span><span class="token punctuation">(</span><span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// å…ˆè§£æå‚æ•°æ˜ å°„,å°±æ˜¯è½¬åŒ–æˆä¸€ä¸ª HashMap | #{favouriteSection,jdbcType=VARCHAR}</span>
            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> propertiesMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ParameterExpression</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> property <span class="token operator">=</span> propertiesMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;property&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> propertyType <span class="token operator">=</span> parameterType<span class="token punctuation">;</span>
            <span class="token class-name">ParameterMapping<span class="token punctuation">.</span>Builder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ParameterMapping<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span>configuration<span class="token punctuation">,</span> property<span class="token punctuation">,</span> propertyType<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å…³äºä»¥ä¸Šæ–‡ä¸­æåˆ°çš„ï¼Œå…³äº BoundSql.parameterMappings çš„å‚æ•°å°±æ˜¯æ¥è‡ªäº ParameterMappingTokenHandler#buildParameterMapping æ–¹æ³•è¿›è¡Œæ„å»ºå¤„ç†çš„ã€‚</li><li>å…·ä½“çš„ javaTypeã€jdbcType ä¼šä½“ç°åˆ° ParameterExpression å‚æ•°è¡¨è¾¾å¼ä¸­å®Œæˆè§£ææ“ä½œã€‚<em>è¿™ä¸ªè§£æè¿‡ç¨‹ç›´æ¥æ˜¯ Mybatis è‡ªå·±çš„æºç ï¼Œæ•´ä¸ªè¿‡ç¨‹åŠŸèƒ½è¾ƒå•ä¸€ï¼Œç›´æ¥å¯¹ç…§å­¦ä¹ å³å¯</em></li></ul><h3 id="_5-defaultsqlsession-è°ƒç”¨è°ƒæ•´" tabindex="-1"><a class="header-anchor" href="#_5-defaultsqlsession-è°ƒç”¨è°ƒæ•´" aria-hidden="true">#</a> 5. DefaultSqlSession è°ƒç”¨è°ƒæ•´</h3><p>å› ä¸ºä»¥ä¸Šæ•´ä¸ªè®¾è®¡å’Œå®ç°ï¼Œè°ƒæ•´äº†è§£æè¿‡ç¨‹ï¼Œä»¥åŠç»†åŒ–äº† SQL çš„åˆ›å»ºã€‚é‚£ä¹ˆåœ¨ MappedStatement æ˜ å°„è¯­å¥ä¸­ï¼Œåˆ™ä½¿ç”¨ SqlSource æ›¿æ¢äº† BoundSqlï¼Œæ‰€ä»¥åœ¨ DefaultSqlSession ä¸­ä¹Ÿä¼šæœ‰ç›¸åº”çš„è°ƒæ•´ã€‚</p><p><strong>æºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.session.defaults.DefaultSqlSession</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DefaultSqlSession</span> <span class="token keyword">implements</span> <span class="token class-name">SqlSession</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Configuration</span> configuration<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Executor</span> executor<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">selectOne</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">MappedStatement</span> ms <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">getMappedStatement</span><span class="token punctuation">(</span>statement<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> executor<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>ms<span class="token punctuation">,</span> parameter<span class="token punctuation">,</span> <span class="token class-name">Executor</span><span class="token punctuation">.</span><span class="token constant">NO_RESULT_HANDLER</span><span class="token punctuation">,</span> ms<span class="token punctuation">.</span><span class="token function">getSqlSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBoundSql</span><span class="token punctuation">(</span>parameter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™é‡Œçš„ä½¿ç”¨è°ƒæ•´ä¹Ÿä¸å¤§ï¼Œä¸»è¦ä½“ç°åœ¨è·å–SQLçš„æ“ä½œï¼›<code>ms.getSqlSource().getBoundSql(parameter)</code> è¿™æ ·è·å–åï¼Œåé¢çš„æµç¨‹å°±æ²¡æœ‰å¤šå°‘å˜åŒ–äº†ã€‚<em>åœ¨æˆ‘ä»¬æ•´ä¸ªè§£ææ¡†æ¶é€æ­¥å®Œå–„åï¼Œå°±ä¼šå¼€å§‹å¯¹å„ä¸ªå­—æ®µçš„å±æ€§ä¿¡æ¯æ·»åŠ è¿›è¡Œè®¾ç½®æ“ä½œã€‚</em></li></ul><h2 id="äº”ã€æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#äº”ã€æµ‹è¯•" aria-hidden="true">#</a> äº”ã€æµ‹è¯•</h2><h3 id="_1-äº‹å…ˆå‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#_1-äº‹å…ˆå‡†å¤‡" aria-hidden="true">#</a> 1. äº‹å…ˆå‡†å¤‡</h3><h4 id="_1-1-åˆ›å»ºåº“è¡¨" tabindex="-1"><a class="header-anchor" href="#_1-1-åˆ›å»ºåº“è¡¨" aria-hidden="true">#</a> 1.1 åˆ›å»ºåº“è¡¨</h4><p>åˆ›å»ºä¸€ä¸ªæ•°æ®åº“åç§°ä¸º mybatis å¹¶åœ¨åº“ä¸­åˆ›å»ºè¡¨ user ä»¥åŠæ·»åŠ æµ‹è¯•æ•°æ®ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span>
    <span class="token keyword">USER</span>
    <span class="token punctuation">(</span>
        id <span class="token keyword">bigint</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;è‡ªå¢ID&#39;</span><span class="token punctuation">,</span>
        userId <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;ç”¨æˆ·ID&#39;</span><span class="token punctuation">,</span>
        userHead <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;ç”¨æˆ·å¤´åƒ&#39;</span><span class="token punctuation">,</span>
        createTime <span class="token keyword">TIMESTAMP</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;åˆ›å»ºæ—¶é—´&#39;</span><span class="token punctuation">,</span>
        updateTime <span class="token keyword">TIMESTAMP</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;æ›´æ–°æ—¶é—´&#39;</span><span class="token punctuation">,</span>
        userName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>
    
<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> userId<span class="token punctuation">,</span> userHead<span class="token punctuation">,</span> createTime<span class="token punctuation">,</span> updateTime<span class="token punctuation">,</span> userName<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;10001&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;1_04&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2022-04-13 00:00:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2022-04-13 00:00:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å°å‚…å“¥&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-2-é…ç½®æ•°æ®æº" tabindex="-1"><a class="header-anchor" href="#_1-2-é…ç½®æ•°æ®æº" aria-hidden="true">#</a> 1.2 é…ç½®æ•°æ®æº</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://127.0.0.1:3306/mybatis?useUnicode=true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>123456<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é€šè¿‡ <code>mybatis-config-datasource.xml</code> é…ç½®æ•°æ®æºä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šdriverã€urlã€usernameã€password</li><li>åœ¨è¿™é‡Œ dataSource å¯ä»¥æŒ‰éœ€é…ç½®æˆ DRUIDã€UNPOOLED å’Œ POOLED è¿›è¡Œæµ‹è¯•éªŒè¯ã€‚</li></ul><h4 id="_1-3-é…ç½®mapper" tabindex="-1"><a class="header-anchor" href="#_1-3-é…ç½®mapper" aria-hidden="true">#</a> 1.3 é…ç½®Mapper</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryUserInfoById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.lang.Long<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.bugstack.mybatis.test.po.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    SELECT id, userId, userName, userHead
    FROM user
    where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™éƒ¨åˆ†æš‚æ—¶ä¸éœ€è¦è°ƒæ•´ï¼Œç›®å‰è¿˜åªæ˜¯ä¸€ä¸ªå…¥å‚çš„ç±»å‹çš„å‚æ•°ï¼Œåç»­æˆ‘ä»¬å…¨éƒ¨å®Œå–„è¿™éƒ¨åˆ†å†…å®¹ä»¥åï¼Œåˆ™å†æä¾›æ›´å¤šçš„å…¶ä»–å‚æ•°è¿›è¡ŒéªŒè¯ã€‚</li></ul><h3 id="_2-å•å…ƒæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_2-å•å…ƒæµ‹è¯•" aria-hidden="true">#</a> 2. å•å…ƒæµ‹è¯•</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_SqlSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. ä»SqlSessionFactoryä¸­è·å–SqlSession</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsReader</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config-datasource.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   
    <span class="token comment">// 2. è·å–æ˜ å°„å™¨å¯¹è±¡</span>
    <span class="token class-name">IUserDao</span> userDao <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">IUserDao</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 3. æµ‹è¯•éªŒè¯</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">queryUserInfoById</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœï¼š{}&quot;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™é‡Œçš„æµ‹è¯•ä¸éœ€è¦è°ƒæ•´ï¼Œå› ä¸ºæˆ‘ä»¬æœ¬ç« èŠ‚çš„å¼€å‘å†…å®¹ï¼Œä¸»è¦ä»¥è§£è€¦ XML çš„è§£æï¼Œåªè¦èƒ½ä¿æŒå’Œä¹‹å‰ç« èŠ‚ä¸€æ ·ï¼Œæ­£å¸¸è¾“å‡ºç»“æœå°±å¯ä»¥ã€‚</li></ul><p><strong>æµ‹è¯•ç»“æœ</strong></p><p><img src="https://bugstack.cn/images/article/spring/mybatis-220519-04.png" alt=""></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">07</span><span class="token operator">:</span><span class="token number">26</span><span class="token operator">:</span><span class="token number">15.049</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">c<span class="token punctuation">.</span>b<span class="token punctuation">.</span>m<span class="token punctuation">.</span>d<span class="token punctuation">.</span>pooled<span class="token punctuation">.</span></span>PooledDataSource</span> <span class="token operator">-</span> <span class="token class-name">Created</span> connection <span class="token number">1138410383.</span>
<span class="token number">07</span><span class="token operator">:</span><span class="token number">26</span><span class="token operator">:</span><span class="token number">15.192</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼š<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;userHead&quot;</span><span class="token operator">:</span><span class="token string">&quot;1_04&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;userId&quot;</span><span class="token operator">:</span><span class="token string">&quot;10001&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;userName&quot;</span><span class="token operator">:</span><span class="token string">&quot;å°å‚…å“¥&quot;</span><span class="token punctuation">}</span>
<span class="token class-name">Disconnected</span> from the target <span class="token constant">VM</span><span class="token punctuation">,</span> address<span class="token operator">:</span> &#39;<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">54797</span>&#39;<span class="token punctuation">,</span> transport<span class="token operator">:</span> <span class="token char">&#39;socket&#39;</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»æµ‹è¯•ç»“æœå’Œè°ƒè¯•çš„æˆªå›¾å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„ XML è§£æå¤„ç†æ‹†è§£åï¼Œå·²ç»å¯ä»¥é¡ºåˆ©çš„æ”¯æ’‘æˆ‘ä»¬çš„ä½¿ç”¨ã€‚</li></ul><h2 id="å…­ã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#å…­ã€æ€»ç»“" aria-hidden="true">#</a> å…­ã€æ€»ç»“</h2><ul><li>æœ¬ç« èŠ‚æˆ‘ä»¬å°±åƒæ˜¯å»æŠŠåŸæœ¬ CRUD çš„ä»£ç ï¼Œé€šè¿‡è®¾è®¡åŸåˆ™è¿›è¡Œæ‹†åˆ†å’Œè§£è€¦ï¼Œè¿ç”¨ä¸ç”¨çš„ç±»æ¥æ‰¿æ‹…ä¸åŒçš„èŒè´£ï¼Œå®Œæ•´æ•´ä¸ªåŠŸèƒ½çš„å®ç°ã€‚è¿™åŒ…æ‹¬ï¼›æ˜ å°„æ„å»ºå™¨ã€è¯­å¥æ„å»ºå™¨ã€æºç æ„å»ºå™¨çš„ç»¼åˆä½¿ç”¨ï¼Œä»¥åŠå¯¹åº”çš„å¼•ç”¨ï¼›è„šæœ¬è¯­è¨€é©±åŠ¨å’Œè„šæœ¬æ„å»ºå™¨è§£æï¼Œå¤„ç†æˆ‘ä»¬çš„ XML ä¸­çš„ SQL è¯­å¥ã€‚</li><li>é€šè¿‡è¿™æ ·çš„é‡æ„ä»£ç ï¼Œä¹Ÿèƒ½è®©æˆ‘ä»¬å¯¹å¹³å¸¸çš„ä¸šåŠ¡å¼€å‘ä¸­çš„å¤§ç‰‡é¢å‘è¿‡ç¨‹çš„æµç¨‹ä»£ç æœ‰æ‰€æ„Ÿæ‚Ÿï¼Œå½“ä½ å¯ä»¥ç»†åˆ†æ‹†è§£èŒè´£åŠŸèƒ½åˆ°ä¸åŒçš„ç±»ä¸­å»ä»¥åï¼Œä½ çš„ä»£ç ä¼šæ›´åŠ çš„æ¸…æ™°å¹¶æ˜“äºç»´æŠ¤ã€‚</li><li>åç»­æˆ‘ä»¬å°†ç»§ç»­æŒ‰ç…§ç°åœ¨çš„æ‰©å±•ç»“æ„åº•åº§ï¼Œå®Œæˆå…¶ä»–æ¨¡å—çš„åŠŸèƒ½é€»è¾‘å¼€å‘ï¼Œå› ä¸ºäº†è¿™äº›åŸºç¡€å†…å®¹çš„å»ºé€ ï¼Œå†ç»§ç»­è¡¥å……åŠŸèƒ½ä¹Ÿä¼šæ›´åŠ å®¹æ˜“ã€‚<em>å½“ç„¶è¿™äº›ä»£ç è¿˜æ˜¯éœ€è¦ä½ ç†Ÿæ‚‰ä»¥åæ‰èƒ½é©¾é©­ï¼Œåœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­å¯ä»¥å°è¯•æ–­ç‚¹è°ƒè¯•ï¼Œçœ‹çœ‹æ¯ä¸€ä¸ªæ­¥éª¤éƒ½åœ¨å®Œæˆå“ªäº›å·¥ä½œã€‚</em></li></ul><h2 id="ä¸ƒã€ä¼˜ç§€ä½œä¸š" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€ä¼˜ç§€ä½œä¸š" aria-hidden="true">#</a> ä¸ƒã€ä¼˜ç§€ä½œä¸š</h2>`,77),y={href:"https://t.zsxq.com/06ZFQF2zb",target:"_blank",rel:"noopener noreferrer"},q={href:"https://t.zsxq.com/09BrVRsSa",target:"_blank",rel:"noopener noreferrer"},S={href:"https://t.zsxq.com/09ldlXf8A",target:"_blank",rel:"noopener noreferrer"};function h(f,M){const a=p("ExternalLinkIcon");return c(),o("div",null,[u,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),r,s("åšå®¢ï¼š"),n("a",k,[s("https://bugstack.cn"),e(a)]),d,s("åŸæ–‡ï¼š"),n("a",m,[s("https://mp.weixin.qq.com/s/I88gvB0NqCRoIQgUJx8EMg"),e(a)])]),v,b,g,n("ul",null,[n("li",null,[n("a",y,[s("å¼•å…¥æ˜ å°„æ„å»ºå™¨XMLMapperBuilderå’Œè¯­å¥æ˜ å°„å™¨XMLStatementBuilderç»†åŒ–XMLè¯­å¥æ„å»ºå™¨ã€‚@æ¨æ¨å¾—äº¿ğŸ™‰"),e(a)])]),n("li",null,[n("a",q,[s("ç»†åŒ–XMLè¯­å¥æ„å»ºå™¨ï¼Œå®Œå–„é™æ€SQLè§£æ @liuc"),e(a)])]),n("li",null,[n("a",S,[s("æ ¸å¿ƒç±»UMLç±»å›¾æ¢³ç† @å°ç†æƒ³"),e(a)])])])])}const L=t(i,[["render",h],["__file","2022-05-18-di9zhangï¼šxihuaXMLyujugoujianqiï¼ŒwanshanjingtaiSQLjiexi.html.vue"]]);export{L as default};
