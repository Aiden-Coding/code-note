import{_ as p,r as o,o as c,c as l,a as n,b as s,d as t,e}from"./app-3RcBQnkC.js";const i={},u=n("h1",{id:"é‡å­¦-java-è®¾è®¡æ¨¡å¼-å®æˆ˜å¤–è§‚æ¨¡å¼ã€ŒåŸºäºspringbootå¼€å‘é—¨é¢æ¨¡å¼ä¸­é—´ä»¶-ç»Ÿä¸€æ§åˆ¶æ¥å£ç™½åå•åœºæ™¯ã€",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#é‡å­¦-java-è®¾è®¡æ¨¡å¼-å®æˆ˜å¤–è§‚æ¨¡å¼ã€ŒåŸºäºspringbootå¼€å‘é—¨é¢æ¨¡å¼ä¸­é—´ä»¶-ç»Ÿä¸€æ§åˆ¶æ¥å£ç™½åå•åœºæ™¯ã€","aria-hidden":"true"},"#"),s(" é‡å­¦ Java è®¾è®¡æ¨¡å¼ï¼šå®æˆ˜å¤–è§‚æ¨¡å¼ã€ŒåŸºäºSpringBootå¼€å‘é—¨é¢æ¨¡å¼ä¸­é—´ä»¶ï¼Œç»Ÿä¸€æ§åˆ¶æ¥å£ç™½åå•åœºæ™¯ã€")],-1),r=n("br",null,null,-1),d={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},k=n("blockquote",null,[n("p",null,"æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„")],-1),v=n("iframe",{id:"B-Video",src:"//player.bilibili.com/player.html?aid=640500387&bvid=BV1JY4y1H711&cid=572131478&page=1",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true",width:"100%",height:"480"}," ",-1),m=e('<h2 id="ä¸€ã€å‰è¨€" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å‰è¨€" aria-hidden="true">#</a> ä¸€ã€å‰è¨€</h2><p><code>ä½ æ„Ÿå—åˆ°çš„å®¹æ˜“ï¼Œä¸€å®šæœ‰äººä¸ºä½ æ‰¿æ‹…ä¸å®¹æ˜“</code></p><p>è¿™å¥è¯æ›´åƒæ˜¯æè¿°ç”Ÿæ´»çš„ï¼Œè®¸è®¸å¤šå¤šçš„ç£•ç£•ç»Šç»Šæ€»æœ‰äººä¸ºä½ æä¾›èº²é›¨çš„å±‹æªå’Œé¿é£çš„æ¸¯æ¹¾ã€‚å…¶å®ç¼–ç¨‹å¼€å‘çš„å›¢é˜Ÿä¸­ä¹Ÿä¸€æ ·æœ‰äººåªè´Ÿè´£CRUDä¸­çš„ç®€å•è°ƒç”¨ï¼Œå»ä½¿ç”¨å›¢é˜Ÿä¸­é«˜çº§ç¨‹åºå‘˜å¼€å‘å‡ºæ¥çš„æ ¸å¿ƒæœåŠ¡å’Œæ¥å£ã€‚è¿™æ ·çš„ç¼–ç¨‹å¼€å‘å¯¹äºåˆæœŸåˆšè¿›å…¥ç¨‹åºå‘˜è¡Œä¸šçš„å°ä¼™ä¼´æ¥è¯´é”»ç‚¼é”»ç‚¼è¿˜æ˜¯ä¸é”™çš„ï¼Œä½†éšç€å¼€å‘çš„æ—¥å­è¶Šæ¥è¶Šä¹…ä¸€ç›´åšè¿™æ ·çš„äº‹æƒ…å°±å¾ˆéš¾å¾—åˆ°æˆé•¿ï¼Œä¹Ÿæƒ³åŠªåŠ›çš„å»åšä¸€äº›æ›´æœ‰éš¾åº¦çš„æ‰¿æ‹…ï¼Œä»¥æ­¤æ¥å¢å¼ºä¸ªäººçš„æŠ€æœ¯èƒ½åŠ›ã€‚</p><p><code>æ²¡æœ‰æœ€å¥½çš„ç¼–ç¨‹è¯­è¨€ï¼Œè¯­è¨€åªæ˜¯å·¥å…·</code></p><p>åˆ€æªæ£æ£’ã€æ–§é’ºé’©å‰ã€åŒ…å­æ²¹æ¡ã€ç›’å­éº»èŠ±ï¼Œæ˜¯<strong>è¯­è¨€</strong>ã€‚äº”éƒå…«å¦æ£ã€åäºŒè·¯å¼¹è…¿ã€æ´ªå®¶é“çº¿æ‹³ï¼Œæ˜¯<strong>è®¾è®¡</strong>ã€‚è®°å¾—å¶é—®é‡Œæœ‰ä¸€å¥å°è¯æ˜¯ï¼š<code>é‡‘å±±æ‰¾ï¼šä»Šå¤©æˆ‘åŒ—æ–¹æ‹³æœ¯ï¼Œè¾“ç»™ä½ å—æ–¹æ‹³æœ¯äº†ã€‚å¶é—®ï¼šä½ é”™äº†ï¼Œä¸æ˜¯å—åŒ—æ‹³çš„é—®é¢˜ï¼Œæ˜¯ä½ çš„é—®é¢˜ã€‚</code>æ‰€ä»¥å½“ä½ ç¼–ç¨‹å¼€å‘å†™çš„ä¹…äº†ï¼Œå°±ä¸ä¼šå†ç‰¹åˆ«åœ¨æ„ç”¨çš„è¯­è¨€ï¼Œè€Œæ˜¯ä¸ºç›®æ ‡æœåŠ¡ï¼Œç”¨æœ€å¥½çš„è®¾è®¡èƒ½åŠ›ä¹Ÿå°±æ˜¯ç¼–ç¨‹çš„æ™ºæ…§åšå‡ºåšæœ€å®Œç¾çš„æœåŠ¡ã€‚è¿™ä¹Ÿå°±æ˜¯ç¼–ç¨‹äººå‘˜çš„ä»·å€¼æ‰€åœ¨ï¼</p><p><code>è®¾è®¡ä¸åè®¾è®¡ä»¥åŠè¿‡æ¸¡è®¾è®¡</code></p><p>è®¾è®¡æ¨¡å¼æ˜¯è§£å†³ç¨‹åºä¸­ä¸åˆç†ã€ä¸æ˜“äºæ‰©å±•ã€ä¸æ˜“äºç»´æŠ¤çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯å¹²æ‰å¤§éƒ¨åˆ†<code>ifelse</code>çš„åˆ©å™¨ï¼Œåœ¨æˆ‘ä»¬å¸¸ç”¨çš„æ¡†æ¶ä¸­åŸºæœ¬éƒ½ä¼šç”¨åˆ°å¤§é‡çš„è®¾è®¡æ¨¡å¼æ¥æ„å»ºç»„ä»¶ï¼Œè¿™æ ·ä¹Ÿèƒ½æ–¹ä¾¿æ¡†æ¶çš„å‡çº§å’ŒåŠŸèƒ½çš„æ‰©å±•ã€‚ä½†ï¼å¦‚æœä¸èƒ½åˆç†çš„è®¾è®¡ä»¥åŠä¹±ç”¨è®¾è®¡æ¨¡å¼ï¼Œä¼šå¯¼è‡´æ•´ä¸ªç¼–ç¨‹å˜å¾—æ›´åŠ å¤æ‚éš¾ç»´æŠ¤ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ï¼›<code>åè®¾è®¡</code>ã€<code>è¿‡æ¸¡è®¾è®¡</code>ã€‚è€Œè¿™éƒ¨åˆ†è®¾è®¡èƒ½åŠ›ä¹Ÿæ˜¯ä»å®è·µçš„é¡¹ç›®ä¸­è·å–çš„ç»éªŒï¼Œä¸æ–­çš„æ”¹é€ ä¼˜åŒ–æ‘¸ç´¢å‡ºçš„æœ€åˆç†çš„æ–¹å¼ï¼Œåº”å¯¹å½“å‰çš„æœåŠ¡ä½“é‡ã€‚</p><h2 id="äºŒã€å¼€å‘ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#äºŒã€å¼€å‘ç¯å¢ƒ" aria-hidden="true">#</a> äºŒã€å¼€å‘ç¯å¢ƒ</h2>',8),b=n("li",null,"JDK 1.8",-1),g=n("li",null,"Idea + Maven",-1),h=n("li",null,"SpringBoot 2.1.2.RELEASE",-1),f=n("strong",null,"å…¬ä¼—å·",-1),_={href:"https://bugstack.cn/assets/images/qrcode.png",target:"_blank",rel:"noopener noreferrer"},y=n("code",null,"bugstackè™«æ´æ ˆ",-1),q=n("code",null,"æºç ä¸‹è½½",-1),w=e('<table><thead><tr><th>å·¥ç¨‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>itstack-demo-design-10-00</td><td>åœºæ™¯æ¨¡æ‹Ÿå·¥ç¨‹ï¼›æ¨¡æ‹Ÿä¸€ä¸ªæä¾›æ¥å£æœåŠ¡çš„SpringBootå·¥ç¨‹</td></tr><tr><td>itstack-demo-design-10-01</td><td>ä½¿ç”¨ä¸€å¨ä»£ç å®ç°ä¸šåŠ¡éœ€æ±‚</td></tr><tr><td>itstack-demo-design-10-02</td><td>é€šè¿‡è®¾è®¡æ¨¡å¼å¼€å‘ä¸ºä¸­é—´ä»¶ï¼ŒåŒ…è£…é€šç”¨å‹æ ¸å¿ƒé€»è¾‘</td></tr></tbody></table><h2 id="ä¸‰ã€å¤–è§‚æ¨¡å¼ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€å¤–è§‚æ¨¡å¼ä»‹ç»" aria-hidden="true">#</a> ä¸‰ã€å¤–è§‚æ¨¡å¼ä»‹ç»</h2><p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-10-01.png" alt="å¤–è§‚æ¨¡å¼ï¼Œå›¾ç‰‡æ¥è‡ª refactoringguru.cn"></p>',3),j={href:"https://refactoringguru.cn/design-patterns/facade",target:"_blank",rel:"noopener noreferrer"},S=e(`<p>å¤–è§‚æ¨¡å¼ä¹Ÿå«é—¨é¢æ¨¡å¼ï¼Œä¸»è¦è§£å†³çš„æ˜¯é™ä½è°ƒç”¨æ–¹çš„ä½¿ç”¨æ¥å£çš„å¤æ‚é€»è¾‘ç»„åˆã€‚è¿™æ ·è°ƒç”¨æ–¹ä¸å®é™…çš„æ¥å£æä¾›æ–¹æä¾›æ–¹æä¾›äº†ä¸€ä¸ªä¸­é—´å±‚ï¼Œç”¨äºåŒ…è£…é€»è¾‘æä¾›APIæ¥å£ã€‚æœ‰äº›æ—¶å€™å¤–è§‚æ¨¡å¼ä¹Ÿè¢«ç”¨åœ¨ä¸­é—´ä»¶å±‚ï¼Œå¯¹æœåŠ¡ä¸­çš„é€šç”¨æ€§å¤æ‚é€»è¾‘è¿›è¡Œä¸­é—´ä»¶å±‚åŒ…è£…ï¼Œè®©ä½¿ç”¨æ–¹å¯ä»¥åªå…³å¿ƒä¸šåŠ¡å¼€å‘ã€‚</p><p><strong>é‚£ä¹ˆè¿™æ ·çš„æ¨¡å¼åœ¨æˆ‘ä»¬çš„æ‰€è§äº§å“åŠŸèƒ½ä¸­ä¹Ÿç»å¸¸é‡åˆ°</strong>ï¼Œå°±åƒå‡ å¹´å‰æˆ‘ä»¬æ³¨å†Œä¸€ä¸ªç½‘ç«™æ—¶å€™å¾€å¾€è¦æ·»åŠ å¾ˆå¤šä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼›å§“åã€æ˜µç§°ã€æ‰‹æœºå·ã€QQã€é‚®ç®±ã€ä½å€ã€å•èº«ç­‰ç­‰ï¼Œä½†ç°åœ¨æ³¨å†Œæˆä¸ºä¸€ä¸ªç½‘ç«™çš„ç”¨æˆ·åªéœ€è¦ä¸€æ­¥å³å¯ï¼Œæ— è®ºæ˜¯æ‰‹æœºå·è¿˜æ˜¯å¾®ä¿¡ä¹Ÿéƒ½æä¾›äº†è¿™æ ·çš„ç™»å½•æœåŠ¡ã€‚è€Œå¯¹äºæœåŠ¡ç«¯åº”ç”¨å¼€å‘æ¥è¯´ä»¥å‰æ˜¯æä¾›äº†ä¸€ä¸ªæ•´å¥—çš„æ¥å£ï¼Œç°åœ¨æ³¨å†Œçš„æ—¶å€™å¹¶æ²¡æœ‰è¿™äº›ä¿¡æ¯ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯å°±éœ€è¦è¿›è¡Œæ¥å£åŒ…è£…ï¼Œåœ¨å‰ç«¯è°ƒç”¨æ³¨å†Œçš„æ—¶å€™æœåŠ¡ç«¯è·å–ç›¸åº”çš„ç”¨æˆ·ä¿¡æ¯(ä»å„ä¸ªæ¸ é“)ï¼Œå¦‚æœè·å–ä¸åˆ°ä¼šè®©ç”¨æˆ·åç»­è¿›è¡Œè¡¥å…¨(è¥é”€è¡¥å…¨ä¿¡æ¯ç»™å¥–åŠ±)ï¼Œä»¥æ­¤æ¥æ‹‰åŠ¨ç”¨æˆ·çš„æ³¨å†Œé‡å’Œæ´»è·ƒåº¦ã€‚</p><h2 id="å››ã€æ¡ˆä¾‹åœºæ™¯æ¨¡æ‹Ÿ" tabindex="-1"><a class="header-anchor" href="#å››ã€æ¡ˆä¾‹åœºæ™¯æ¨¡æ‹Ÿ" aria-hidden="true">#</a> å››ã€æ¡ˆä¾‹åœºæ™¯æ¨¡æ‹Ÿ</h2><p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-10-02.png" alt="åœºæ™¯æ¨¡æ‹Ÿï¼›æ‰€æœ‰æœåŠ¡æ·»åŠ ç™½åå•æ ¡éªŒ"></p><p><strong>åœ¨æœ¬æ¡ˆä¾‹ä¸­æˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªå°†æ‰€æœ‰æœåŠ¡æ¥å£æ·»åŠ ç™½åå•çš„åœºæ™¯</strong></p><p>åœ¨é¡¹ç›®ä¸æ–­å£®å¤§å‘å±•çš„è·¯ä¸Šï¼Œæ¯ä¸€æ¬¡å‘ç‰ˆä¸Šçº¿éƒ½éœ€è¦è¿›è¡Œæµ‹è¯•ï¼Œè€Œè¿™éƒ¨åˆ†æµ‹è¯•éªŒè¯ä¸€èˆ¬ä¼šè¿›è¡Œç™½åå•å¼€é‡æˆ–è€…åˆ‡é‡çš„æ–¹å¼è¿›è¡ŒéªŒè¯ã€‚é‚£ä¹ˆå¦‚æœåœ¨æ¯ä¸€ä¸ªæ¥å£ä¸­éƒ½æ·»åŠ è¿™æ ·çš„é€»è¾‘ï¼Œå°±ä¼šéå¸¸éº»çƒ¦ä¸”ä¸æ˜“ç»´æŠ¤ã€‚å¦å¤–è¿™æ˜¯ä¸€ç±»å…·å¤‡é€šç”¨é€»è¾‘çš„å…±æ€§éœ€æ±‚ï¼Œéå¸¸é€‚åˆå¼€å‘æˆç»„ä»¶ï¼Œä»¥æ­¤æ¥æ²»ç†æœåŠ¡ï¼Œè®©ç ”å‘äººå‘˜æ›´å¤šçš„å…³å¿ƒä¸šåŠ¡åŠŸèƒ½å¼€å‘ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹å¯¹äºå¤–è§‚æ¨¡å¼çš„ä½¿ç”¨é€šå¸¸æ˜¯ç”¨åœ¨å¤æ‚æˆ–å¤šä¸ªæ¥å£è¿›è¡ŒåŒ…è£…ç»Ÿä¸€å¯¹å¤–æä¾›æœåŠ¡ä¸Šï¼Œæ­¤ç§ä½¿ç”¨æ–¹å¼ä¹Ÿç›¸å¯¹ç®€å•åœ¨æˆ‘ä»¬å¹³å¸¸çš„ä¸šåŠ¡å¼€å‘ä¸­ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ã€‚<em>ä½ å¯èƒ½ç»å¸¸å¬åˆ°æŠŠè¿™ä¸¤ä¸ªæ¥å£åŒ…è£…ä¸€ä¸‹</em>ï¼Œä½†åœ¨æœ¬ä¾‹å­ä¸­æˆ‘ä»¬æŠŠè¿™ç§è®¾è®¡æ€è·¯æ”¾åˆ°ä¸­é—´ä»¶å±‚ï¼Œè®©æœåŠ¡å˜å¾—å¯ä»¥ç»Ÿä¸€æ§åˆ¶ã€‚</p><h3 id="_1-åœºæ™¯æ¨¡æ‹Ÿå·¥ç¨‹" tabindex="-1"><a class="header-anchor" href="#_1-åœºæ™¯æ¨¡æ‹Ÿå·¥ç¨‹" aria-hidden="true">#</a> 1. åœºæ™¯æ¨¡æ‹Ÿå·¥ç¨‹</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>design<span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">00</span>
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â”œâ”€â”€ java
    â”‚   â”‚   â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design
    â”‚   â”‚       â”œâ”€â”€ domain
    â”‚   â”‚       â”‚	â””â”€â”€ <span class="token class-name">UserInfo</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â”œâ”€â”€ web	
    â”‚   â”‚       â”‚	â””â”€â”€ <span class="token class-name">HelloWorldController</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â””â”€â”€ <span class="token class-name">HelloWorldApplication</span><span class="token punctuation">.</span>java
    â”‚   â””â”€â”€ resources	
    â”‚       â””â”€â”€ application<span class="token punctuation">.</span>yml	
    â””â”€â”€ test
        â””â”€â”€ java
            â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>test
                â””â”€â”€ <span class="token class-name">ApiTest</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™æ˜¯ä¸€ä¸ª<code>SpringBoot</code>çš„<code>HelloWorld</code>å·¥ç¨‹ï¼Œåœ¨å·¥ç¨‹ä¸­æä¾›äº†æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„æ¥å£<code>HelloWorldController.queryUserInfo</code>ï¼Œä¸ºåç»­æ‰©å±•æ­¤æ¥å£çš„ç™½åå•è¿‡æ»¤åšå‡†å¤‡ã€‚</li></ul><h3 id="_2-åœºæ™¯ç®€è¿°" tabindex="-1"><a class="header-anchor" href="#_2-åœºæ™¯ç®€è¿°" aria-hidden="true">#</a> 2. åœºæ™¯ç®€è¿°</h3><h4 id="_2-1-å®šä¹‰åŸºç¡€æŸ¥è¯¢æ¥å£" tabindex="-1"><a class="header-anchor" href="#_2-1-å®šä¹‰åŸºç¡€æŸ¥è¯¢æ¥å£" aria-hidden="true">#</a> 2.1 å®šä¹‰åŸºç¡€æŸ¥è¯¢æ¥å£</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorldController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${server.port}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> port<span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * keyï¼šéœ€è¦ä»å…¥å‚å–å€¼çš„å±æ€§å­—æ®µï¼Œå¦‚æœæ˜¯å¯¹è±¡åˆ™ä»å¯¹è±¡ä¸­å–å€¼ï¼Œå¦‚æœæ˜¯å•ä¸ªå€¼åˆ™ç›´æ¥ä½¿ç”¨
     * returnJsonï¼šé¢„è®¾æ‹¦æˆªæ—¶è¿”å›å€¼ï¼Œæ˜¯è¿”å›å¯¹è±¡çš„Json
     *
     * http://localhost:8080/api/queryUserInfo?userId=1001
     * http://localhost:8080/api/queryUserInfo?userId=å°å›¢å›¢
     */</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>path <span class="token operator">=</span> <span class="token string">&quot;/api/queryUserInfo&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">UserInfo</span> <span class="token function">queryUserInfo</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">String</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserInfo</span><span class="token punctuation">(</span><span class="token string">&quot;è™«è™«:&quot;</span> <span class="token operator">+</span> userId<span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token string">&quot;å¤©æ´¥å¸‚å—å¼€åŒºæ—®æ—¯èƒ¡åŒ100å·&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™é‡Œæä¾›äº†ä¸€ä¸ªåŸºæœ¬çš„æŸ¥è¯¢æœåŠ¡ï¼Œé€šè¿‡å…¥å‚<code>userId</code>ï¼ŒæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ã€‚åç»­å°±éœ€è¦åœ¨è¿™é‡Œæ‰©å±•ç™½åå•ï¼Œåªæœ‰æŒ‡å®šç”¨æˆ·æ‰å¯ä»¥æŸ¥è¯¢ï¼Œå…¶ä»–ç”¨æˆ·ä¸èƒ½æŸ¥è¯¢ã€‚</li></ul><h4 id="_2-2-è®¾ç½®applicationå¯åŠ¨ç±»" tabindex="-1"><a class="header-anchor" href="#_2-2-è®¾ç½®applicationå¯åŠ¨ç±»" aria-hidden="true">#</a> 2.2 è®¾ç½®Applicationå¯åŠ¨ç±»</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorldApplication</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">HelloWorldApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™é‡Œæ˜¯é€šç”¨çš„<code>SpringBoot</code>å¯åŠ¨ç±»ã€‚éœ€è¦æ·»åŠ çš„æ˜¯ä¸€ä¸ªé…ç½®æ³¨è§£<code>@Configuration</code>ï¼Œä¸ºäº†åç»­å¯ä»¥è¯»å–ç™½åå•é…ç½®ã€‚</li></ul><h2 id="äº”ã€ç”¨ä¸€å¨å¨ä»£ç å®ç°" tabindex="-1"><a class="header-anchor" href="#äº”ã€ç”¨ä¸€å¨å¨ä»£ç å®ç°" aria-hidden="true">#</a> äº”ã€ç”¨ä¸€å¨å¨ä»£ç å®ç°</h2><p><code>ä¸€èˆ¬å¯¹äºæ­¤ç§åœºæ™¯æœ€ç®€å•çš„åšæ³•å°±æ˜¯ç›´æ¥ä¿®æ”¹ä»£ç </code></p><p>ç´¯åŠ <code>if</code>å—å‡ ä¹æ˜¯å®ç°éœ€æ±‚æœ€å¿«ä¹Ÿæ˜¯æœ€æ…¢çš„æ–¹å¼ï¼Œ<strong>å¿«</strong>æ˜¯ä¿®æ”¹å½“å‰å†…å®¹å¾ˆå¿«ï¼Œ<strong>æ…¢</strong>æ˜¯å¦‚æœåŒç±»çš„å†…å®¹å‡ ç™¾ä¸ªä¹Ÿéƒ½éœ€è¦å¦‚æ­¤ä¿®æ”¹æ‰©å±•å’Œç»´æŠ¤ä¼šè¶Šæ¥è¶Šæ…¢ã€‚</p><h3 id="_1-å·¥ç¨‹ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>design<span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">01</span>
â””â”€â”€ src
    â””â”€â”€ main
        â””â”€â”€ java
            â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design
                â””â”€â”€ <span class="token class-name">HelloWorldController</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»¥ä¸Šçš„å®ç°æ˜¯æ¨¡æ‹Ÿä¸€ä¸ªApiæ¥å£ç±»ï¼Œåœ¨é‡Œé¢æ·»åŠ ç™½åå•åŠŸèƒ½ï¼Œä½†ç±»ä¼¼æ­¤ç±»çš„æ¥å£ä¼šæœ‰å¾ˆå¤šéƒ½éœ€è¦ä¿®æ”¹ï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯ä¸æ¨èä½¿ç”¨æ­¤ç§æ–¹å¼çš„é‡è¦åŸå› ã€‚</li></ul><h3 id="_2-ä»£ç å®ç°" tabindex="-1"><a class="header-anchor" href="#_2-ä»£ç å®ç°" aria-hidden="true">#</a> 2. ä»£ç å®ç°</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorldController</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">UserInfo</span> <span class="token function">queryUserInfo</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">String</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// åšç™½åå•æ‹¦æˆª</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> userList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;1001&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;aaaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;ccc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>userList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserInfo</span><span class="token punctuation">(</span><span class="token string">&quot;1111&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;éç™½åå•å¯è®¿é—®ç”¨æˆ·æ‹¦æˆªï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserInfo</span><span class="token punctuation">(</span><span class="token string">&quot;è™«è™«:&quot;</span> <span class="token operator">+</span> userId<span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token string">&quot;å¤©æ´¥å¸‚å—å¼€åŒºæ—®æ—¯èƒ¡åŒ100å·&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨è¿™é‡Œç™½åå•çš„ä»£ç å æ®äº†ä¸€å¤§å—ï¼Œä½†å®ƒåˆä¸æ˜¯ä¸šåŠ¡ä¸­çš„é€»è¾‘ï¼Œè€Œæ˜¯å› ä¸ºæˆ‘ä»¬ä¸Šçº¿è¿‡ç¨‹ä¸­éœ€è¦åšçš„å¼€é‡å‰æµ‹è¯•éªŒè¯ã€‚</li><li>å¦‚æœä½ æ—¥å¸¸å¯¹å¾…æ­¤ç±»éœ€æ±‚ç»å¸¸æ˜¯è¿™æ ·å¼€å‘ï¼Œé‚£ä¹ˆå¯ä»¥æŒ‰ç…§æ­¤è®¾è®¡æ¨¡å¼è¿›è¡Œä¼˜åŒ–ä½ çš„å¤„ç†æ–¹å¼ï¼Œè®©åç»­çš„æ‰©å±•å’Œæ‘˜é™¤æ›´åŠ å®¹æ˜“ã€‚</li></ul><h2 id="å…­ã€å¤–è§‚æ¨¡å¼é‡æ„ä»£ç " tabindex="-1"><a class="header-anchor" href="#å…­ã€å¤–è§‚æ¨¡å¼é‡æ„ä»£ç " aria-hidden="true">#</a> å…­ã€å¤–è§‚æ¨¡å¼é‡æ„ä»£ç </h2><p><code>æ¥ä¸‹æ¥ä½¿ç”¨å¤–è§‚å™¨æ¨¡å¼æ¥è¿›è¡Œä»£ç ä¼˜åŒ–ï¼Œä¹Ÿç®—æ˜¯ä¸€æ¬¡å¾ˆå°çš„é‡æ„ã€‚</code></p><p>è¿™æ¬¡é‡æ„çš„æ ¸å¿ƒæ˜¯ä½¿ç”¨å¤–è§‚æ¨¡å¼ä¹Ÿå¯ä»¥è¯´é—¨é¢æ¨¡å¼ï¼Œç»“åˆ<code>SpringBoot</code>ä¸­çš„è‡ªå®šä¹‰<code>starter</code>ä¸­é—´ä»¶å¼€å‘çš„æ–¹å¼ï¼Œç»Ÿä¸€å¤„ç†æ‰€æœ‰éœ€è¦ç™½åå•çš„åœ°æ–¹ã€‚</p><p>åç»­æ¥ä¸‹æ¥çš„å®ç°ä¸­ï¼Œä¼šæ¶‰åŠçš„çŸ¥è¯†ï¼›</p><ol><li>SpringBootçš„starterä¸­é—´ä»¶å¼€å‘æ–¹å¼ã€‚</li><li>é¢å‘åˆ‡é¢ç¼–ç¨‹å’Œè‡ªå®šä¹‰æ³¨è§£çš„ä½¿ç”¨ã€‚</li><li>å¤–éƒ¨è‡ªå®šä¹‰é…ç½®ä¿¡æ¯çš„é€ä¼ ï¼ŒSpringBootä¸Springä¸åŒï¼Œå¯¹äºæ­¤ç±»æ–¹å¼è·å–ç™½åå•é…ç½®å­˜åœ¨å·®å¼‚ã€‚</li></ol><h3 id="_1-å·¥ç¨‹ç»“æ„-1" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„-1" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>design<span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">02</span>
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â”œâ”€â”€ java
    â”‚   â”‚   â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span>door
    â”‚   â”‚       â”œâ”€â”€ annotation
    â”‚   â”‚       â”‚	â””â”€â”€ <span class="token class-name">DoDoor</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”œâ”€â”€ config
    â”‚   â”‚       â”‚	â”œâ”€â”€ <span class="token class-name">StarterAutoConfigure</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â”‚	â”œâ”€â”€ <span class="token class-name">StarterService</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â”‚	â””â”€â”€ <span class="token class-name">StarterServiceProperties</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â””â”€â”€ <span class="token class-name">DoJoinPoint</span><span class="token punctuation">.</span>java
    â”‚   â””â”€â”€ resources	
    â”‚       â””â”€â”€ <span class="token constant">META_INF</span>
    â”‚           â””â”€â”€ spring<span class="token punctuation">.</span>factories
    â””â”€â”€ test
        â””â”€â”€ java
            â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>test
                â””â”€â”€ <span class="token class-name">ApiTest</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>é—¨é¢æ¨¡å¼æ¨¡å‹ç»“æ„</strong></p><p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-10-03.png" alt="é—¨é¢æ¨¡å¼æ¨¡å‹ç»“æ„"></p><ul><li>ä»¥ä¸Šæ˜¯å¤–è§‚æ¨¡å¼çš„ä¸­é—´ä»¶å®ç°æ€è·¯ï¼Œå³ä¾§æ˜¯ä¸ºäº†è·å–é…ç½®æ–‡ä»¶ï¼Œå·¦ä¾§æ˜¯å¯¹äºåˆ‡é¢çš„å¤„ç†ã€‚</li><li>é—¨é¢æ¨¡å¼å¯ä»¥æ˜¯å¯¹æ¥å£çš„åŒ…è£…æä¾›å‡ºæ¥å£æœåŠ¡ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹é€»è¾‘çš„åŒ…è£…é€šè¿‡è‡ªå®šä¹‰æ³¨è§£å¯¹æ¥å£æä¾›æœåŠ¡èƒ½åŠ›ã€‚</li></ul><h3 id="_2-ä»£ç å®ç°-1" tabindex="-1"><a class="header-anchor" href="#_2-ä»£ç å®ç°-1" aria-hidden="true">#</a> 2. ä»£ç å®ç°</h3><h4 id="_2-1-é…ç½®æœåŠ¡ç±»" tabindex="-1"><a class="header-anchor" href="#_2-1-é…ç½®æœåŠ¡ç±»" aria-hidden="true">#</a> 2.1 é…ç½®æœåŠ¡ç±»</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StarterService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> userStr<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">StarterService</span><span class="token punctuation">(</span><span class="token class-name">String</span> userStr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userStr <span class="token operator">=</span> userStr<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">split</span><span class="token punctuation">(</span><span class="token class-name">String</span> separatorChar<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>userStr<span class="token punctuation">,</span> separatorChar<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»¥ä¸Šç±»çš„å†…å®¹è¾ƒç®€å•åªæ˜¯ä¸ºäº†è·å–é…ç½®ä¿¡æ¯ã€‚</li></ul><h4 id="_2-2-é…ç½®ç±»æ³¨è§£å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#_2-2-é…ç½®ç±»æ³¨è§£å®šä¹‰" aria-hidden="true">#</a> 2.2 é…ç½®ç±»æ³¨è§£å®šä¹‰</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span><span class="token string">&quot;itstack.door&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StarterServiceProperties</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> userStr<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUserStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> userStr<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserStr</span><span class="token punctuation">(</span><span class="token class-name">String</span> userStr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userStr <span class="token operator">=</span> userStr<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç”¨äºå®šä¹‰å¥½åç»­åœ¨ <code>application.yml</code> ä¸­æ·»åŠ  <code>itstack.door</code> çš„é…ç½®ä¿¡æ¯ã€‚</li></ul><h4 id="_2-3-è‡ªå®šä¹‰é…ç½®ç±»ä¿¡æ¯è·å–" tabindex="-1"><a class="header-anchor" href="#_2-3-è‡ªå®šä¹‰é…ç½®ç±»ä¿¡æ¯è·å–" aria-hidden="true">#</a> 2.3 è‡ªå®šä¹‰é…ç½®ç±»ä¿¡æ¯è·å–</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token class-name">StarterService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">StarterServiceProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StarterAutoConfigure</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">StarterServiceProperties</span> properties<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span>
    <span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;itstack.door&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;enabled&quot;</span><span class="token punctuation">,</span> havingValue <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">StarterService</span> <span class="token function">starterService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">StarterService</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getUserStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»¥ä¸Šä»£ç æ˜¯å¯¹é…ç½®çš„è·å–æ“ä½œï¼Œä¸»è¦æ˜¯å¯¹æ³¨è§£çš„å®šä¹‰ï¼›<code>@Configuration</code>ã€<code>@ConditionalOnClass</code>ã€<code>@EnableConfigurationProperties</code>ï¼Œè¿™ä¸€éƒ¨åˆ†ä¸»è¦æ˜¯ä¸SpringBootçš„ç»“åˆä½¿ç”¨ã€‚</li></ul><h4 id="_2-4-åˆ‡é¢æ³¨è§£å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#_2-4-åˆ‡é¢æ³¨è§£å®šä¹‰" aria-hidden="true">#</a> 2.4 åˆ‡é¢æ³¨è§£å®šä¹‰</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">DoDoor</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span> <span class="token function">key</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> <span class="token function">returnJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å®šä¹‰äº†å¤–è§‚æ¨¡å¼é—¨é¢æ³¨è§£ï¼Œåç»­å°±æ˜¯æ­¤æ³¨è§£æ·»åŠ åˆ°éœ€è¦æ‰©å±•ç™½åå•çš„æ–¹æ³•ä¸Šã€‚</li><li>è¿™é‡Œæä¾›äº†ä¸¤ä¸ªå…¥å‚ï¼Œ<strong>key</strong>ï¼šè·å–æŸä¸ªå­—æ®µä¾‹å¦‚ç”¨æˆ·IDã€<strong>returnJson</strong>ï¼šç¡®å®šç™½åå•æ‹¦æˆªåè¿”å›çš„å…·ä½“å†…å®¹ã€‚</li></ul><h4 id="_2-5-ç™½åå•åˆ‡é¢é€»è¾‘" tabindex="-1"><a class="header-anchor" href="#_2-5-ç™½åå•åˆ‡é¢é€»è¾‘" aria-hidden="true">#</a> 2.5 ç™½åå•åˆ‡é¢é€»è¾‘</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DoJoinPoint</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">DoJoinPoint</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">StarterService</span> starterService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">&quot;@annotation(org.itstack.demo.design.door.annotation.DoDoor)&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">aopPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;aopPoint()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">doRouter</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> jp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token comment">//è·å–å†…å®¹</span>
        <span class="token class-name">Method</span> method <span class="token operator">=</span> <span class="token function">getMethod</span><span class="token punctuation">(</span>jp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DoDoor</span> door <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">DoDoor</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è·å–å­—æ®µå€¼</span>
        <span class="token class-name">String</span> keyValue <span class="token operator">=</span> <span class="token function">getFiledValue</span><span class="token punctuation">(</span>door<span class="token punctuation">.</span><span class="token function">key</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> jp<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;itstack door handler methodï¼š{} valueï¼š{}&quot;</span><span class="token punctuation">,</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> keyValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> keyValue <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>keyValue<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> jp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//é…ç½®å†…å®¹</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> split <span class="token operator">=</span> starterService<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//ç™½åå•è¿‡æ»¤</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> str <span class="token operator">:</span> split<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>keyValue<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> jp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//æ‹¦æˆª</span>
        <span class="token keyword">return</span> <span class="token function">returnObject</span><span class="token punctuation">(</span>door<span class="token punctuation">,</span> method<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">Method</span> <span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> jp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchMethodException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Signature</span> sig <span class="token operator">=</span> jp<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MethodSignature</span> methodSignature <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MethodSignature</span><span class="token punctuation">)</span> sig<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">getClass</span><span class="token punctuation">(</span>jp<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span>methodSignature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> methodSignature<span class="token punctuation">.</span><span class="token function">getParameterTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> jp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchMethodException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> jp<span class="token punctuation">.</span><span class="token function">getTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//è¿”å›å¯¹è±¡</span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">returnObject</span><span class="token punctuation">(</span><span class="token class-name">DoDoor</span> doGate<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalAccessException</span><span class="token punctuation">,</span> <span class="token class-name">InstantiationException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> returnType <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getReturnType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> returnJson <span class="token operator">=</span> doGate<span class="token punctuation">.</span><span class="token function">returnJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>returnJson<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> returnType<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>returnJson<span class="token punctuation">,</span> returnType<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//è·å–å±æ€§å€¼</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getFiledValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> filed<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> filedValue <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> arg <span class="token operator">:</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> filedValue <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>filedValue<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    filedValue <span class="token operator">=</span> <span class="token class-name">BeanUtils</span><span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span>arg<span class="token punctuation">,</span> filed<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> filedValue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™é‡ŒåŒ…æ‹¬çš„å†…å®¹è¾ƒå¤šï¼Œæ ¸å¿ƒé€»è¾‘ä¸»è¦æ˜¯ï¼›<code>Object doRouter(ProceedingJoinPoint jp)</code>ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åˆ†åˆ«ä»‹ç»ã€‚</li></ul><p><strong>@Pointcut(&quot;@annotation(org.itstack.demo.design.door.annotation.DoDoor)&quot;)</strong></p><p>å®šä¹‰åˆ‡é¢ï¼Œè¿™é‡Œé‡‡ç”¨çš„æ˜¯æ³¨è§£è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰çš„åŠ å…¥è¿™ä¸ªæ³¨è§£çš„æ–¹æ³•éƒ½ä¼šè¢«åˆ‡é¢è¿›è¡Œç®¡ç†ã€‚</p><p><strong>getFiledValue</strong></p><p>è·å–æŒ‡å®škeyä¹Ÿå°±æ˜¯è·å–å…¥å‚ä¸­çš„æŸä¸ªå±æ€§ï¼Œè¿™é‡Œä¸»è¦æ˜¯è·å–ç”¨æˆ·IDï¼Œé€šè¿‡IDè¿›è¡Œæ‹¦æˆªæ ¡éªŒã€‚</p><p><strong>returnObject</strong></p><p>è¿”å›æ‹¦æˆªåçš„è½¬æ¢å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´å½“éç™½åå•ç”¨æˆ·è®¿é—®æ—¶åˆ™è¿”å›ä¸€äº›æç¤ºä¿¡æ¯ã€‚</p><p><strong>doRouter</strong></p><p>åˆ‡é¢æ ¸å¿ƒé€»è¾‘ï¼Œè¿™ä¸€éƒ¨åˆ†ä¸»è¦æ˜¯åˆ¤æ–­å½“å‰è®¿é—®çš„ç”¨æˆ·IDæ˜¯å¦ç™½åå•ç”¨æˆ·ï¼Œå¦‚æœæ˜¯åˆ™æ”¾è¡Œ<code>jp.proceed();</code>ï¼Œå¦åˆ™è¿”å›è‡ªå®šä¹‰çš„æ‹¦æˆªæç¤ºä¿¡æ¯ã€‚</p><h3 id="_3-æµ‹è¯•éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_3-æµ‹è¯•éªŒè¯" aria-hidden="true">#</a> 3. æµ‹è¯•éªŒè¯</h3><p>è¿™é‡Œçš„æµ‹è¯•æˆ‘ä»¬ä¼šåœ¨å·¥ç¨‹ï¼š<code>itstack-demo-design-10-00</code>ä¸­è¿›è¡Œæ“ä½œï¼Œé€šè¿‡å¼•å…¥jaråŒ…ï¼Œé…ç½®æ³¨è§£çš„æ–¹å¼è¿›è¡ŒéªŒè¯ã€‚</p><h4 id="_3-1-å¼•å…¥ä¸­é—´ä»¶pomé…ç½®" tabindex="-1"><a class="header-anchor" href="#_3-1-å¼•å…¥ä¸­é—´ä»¶pomé…ç½®" aria-hidden="true">#</a> 3.1 å¼•å…¥ä¸­é—´ä»¶POMé…ç½®</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
    <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>design<span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ‰“åŒ…ä¸­é—´ä»¶å·¥ç¨‹ï¼Œç»™å¤–éƒ¨æä¾›jaråŒ…æœåŠ¡</li></ul><h4 id="_3-2-é…ç½®application-yml" tabindex="-1"><a class="header-anchor" href="#_3-2-é…ç½®application-yml" aria-hidden="true">#</a> 3.2 é…ç½®application.yml</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code># è‡ªå®šä¹‰ä¸­é—´ä»¶é…ç½®
itstack<span class="token operator">:</span>
  door<span class="token operator">:</span>
    enabled<span class="token operator">:</span> <span class="token boolean">true</span>
    userStr<span class="token operator">:</span> <span class="token number">1001</span><span class="token punctuation">,</span>aaaa<span class="token punctuation">,</span>ccc #ç™½åå•ç”¨æˆ·<span class="token constant">ID</span>ï¼Œå¤šä¸ªé€—å·éš”å¼€
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™é‡Œä¸»è¦æ˜¯åŠ å…¥äº†ç™½åå•çš„å¼€å…³å’Œç™½åå•çš„ç”¨æˆ·IDï¼Œé€—å·éš”å¼€ã€‚</li></ul><h4 id="_3-3-åœ¨controllerä¸­æ·»åŠ è‡ªå®šä¹‰æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#_3-3-åœ¨controllerä¸­æ·»åŠ è‡ªå®šä¹‰æ³¨è§£" aria-hidden="true">#</a> 3.3 åœ¨Controllerä¸­æ·»åŠ è‡ªå®šä¹‰æ³¨è§£</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * http://localhost:8080/api/queryUserInfo?userId=1001
 * http://localhost:8080/api/queryUserInfo?userId=å°å›¢å›¢
 */</span>
<span class="token annotation punctuation">@DoDoor</span><span class="token punctuation">(</span>key <span class="token operator">=</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">,</span> returnJson <span class="token operator">=</span> <span class="token string">&quot;{\\&quot;code\\&quot;:\\&quot;1111\\&quot;,\\&quot;info\\&quot;:\\&quot;éç™½åå•å¯è®¿é—®ç”¨æˆ·æ‹¦æˆªï¼\\&quot;}&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>path <span class="token operator">=</span> <span class="token string">&quot;/api/queryUserInfo&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">UserInfo</span> <span class="token function">queryUserInfo</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">String</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserInfo</span><span class="token punctuation">(</span><span class="token string">&quot;è™«è™«:&quot;</span> <span class="token operator">+</span> userId<span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token string">&quot;å¤©æ´¥å¸‚å—å¼€åŒºæ—®æ—¯èƒ¡åŒ100å·&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™é‡Œæ ¸å¿ƒçš„å†…å®¹ä¸»è¦æ˜¯è‡ªå®šä¹‰çš„æ³¨è§£çš„æ·»åŠ <code>@DoDoor</code>ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„å¤–è§‚æ¨¡å¼ä¸­é—´ä»¶åŒ–å®ç°ã€‚</li><li>keyï¼šéœ€è¦ä»å…¥å‚å–å€¼çš„å±æ€§å­—æ®µï¼Œå¦‚æœæ˜¯å¯¹è±¡åˆ™ä»å¯¹è±¡ä¸­å–å€¼ï¼Œå¦‚æœæ˜¯å•ä¸ªå€¼åˆ™ç›´æ¥ä½¿ç”¨ã€‚</li><li>returnJsonï¼šé¢„è®¾æ‹¦æˆªæ—¶è¿”å›å€¼ï¼Œæ˜¯è¿”å›å¯¹è±¡çš„Jsonã€‚</li></ul><h4 id="_3-4-å¯åŠ¨springboot" tabindex="-1"><a class="header-anchor" href="#_3-4-å¯åŠ¨springboot" aria-hidden="true">#</a> 3.4 å¯åŠ¨SpringBoot</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>  <span class="token punctuation">.</span>   ____          _            __ _ _
 <span class="token operator">/</span>\\\\ <span class="token operator">/</span> ___&#39;_ __ _ <span class="token function">_</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span>_ __  __ _ \\ \\ \\ \\
<span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token punctuation">)</span>\\___ <span class="token operator">|</span> <span class="token char">&#39;_ | &#39;</span>_<span class="token operator">|</span> <span class="token operator">|</span> &#39;_ \\<span class="token operator">/</span> _\` <span class="token operator">|</span> \\ \\ \\ \\
 \\\\<span class="token operator">/</span>  ___<span class="token punctuation">)</span><span class="token operator">|</span> <span class="token operator">|</span>_<span class="token punctuation">)</span><span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">||</span> <span class="token punctuation">(</span>_<span class="token operator">|</span> <span class="token operator">|</span>  <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span>
  &#39;  <span class="token operator">|</span>____<span class="token operator">|</span> <span class="token punctuation">.</span>__<span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>_\\__<span class="token punctuation">,</span> <span class="token operator">|</span> <span class="token operator">/</span> <span class="token operator">/</span> <span class="token operator">/</span> <span class="token operator">/</span>
 <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">|</span>_<span class="token operator">|=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">|</span>___<span class="token operator">/=</span><span class="token operator">/</span>_<span class="token operator">/</span>_<span class="token operator">/</span>_<span class="token operator">/</span>
 <span class="token operator">::</span> <span class="token class-name">Spring</span> <span class="token class-name">Boot</span> <span class="token operator">::</span>        <span class="token punctuation">(</span>v2<span class="token punctuation">.</span><span class="token number">1.2</span><span class="token punctuation">.</span><span class="token constant">RELEASE</span><span class="token punctuation">)</span>

<span class="token number">2020</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">11</span> <span class="token number">23</span><span class="token operator">:</span><span class="token number">56</span><span class="token operator">:</span><span class="token number">55.451</span>  <span class="token constant">WARN</span> <span class="token number">65228</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> ion$<span class="token class-name">DefaultTemplateResolverConfiguration</span> <span class="token operator">:</span> <span class="token class-name">Cannot</span> find template location<span class="token operator">:</span> classpath<span class="token operator">:</span><span class="token operator">/</span>templates<span class="token operator">/</span> <span class="token punctuation">(</span>please add some templates or check your <span class="token class-name">Thymeleaf</span> configuration<span class="token punctuation">)</span>
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">11</span> <span class="token number">23</span><span class="token operator">:</span><span class="token number">56</span><span class="token operator">:</span><span class="token number">55.531</span>  <span class="token constant">INFO</span> <span class="token number">65228</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>b<span class="token punctuation">.</span>w<span class="token punctuation">.</span>embedded<span class="token punctuation">.</span>tomcat<span class="token punctuation">.</span></span>TomcatWebServer</span>  <span class="token operator">:</span> <span class="token class-name">Tomcat</span> started on <span class="token function">port</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token number">8080</span> <span class="token punctuation">(</span>http<span class="token punctuation">)</span> <span class="token keyword">with</span> <span class="token namespace">context</span> path &#39;&#39;
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">11</span> <span class="token number">23</span><span class="token operator">:</span><span class="token number">56</span><span class="token operator">:</span><span class="token number">55.533</span>  <span class="token constant">INFO</span> <span class="token number">65228</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span></span>HelloWorldApplication</span>    <span class="token operator">:</span> <span class="token class-name">Started</span> <span class="token class-name">HelloWorldApplication</span> in <span class="token number">1.688</span> seconds <span class="token punctuation">(</span><span class="token constant">JVM</span> running <span class="token keyword">for</span> <span class="token number">2.934</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¯åŠ¨æ­£å¸¸ï¼ŒSpringBootå·²ç»å¯åŠ¨å¯ä»¥å¯¹å¤–æä¾›æœåŠ¡ã€‚</li></ul><h4 id="_3-5-è®¿é—®æ¥å£æ¥å£æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_3-5-è®¿é—®æ¥å£æ¥å£æµ‹è¯•" aria-hidden="true">#</a> 3.5 è®¿é—®æ¥å£æ¥å£æµ‹è¯•</h4><p><strong>ç™½åå•ç”¨æˆ·è®¿é—®</strong></p>`,76),I={href:"http://localhost:8080/api/queryUserInfo?userId=1001",target:"_blank",rel:"noopener noreferrer"},x=e(`<div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token operator">:</span><span class="token string">&quot;0000&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;info&quot;</span><span class="token operator">:</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;è™«è™«:1001&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;age&quot;</span><span class="token operator">:</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token string">&quot;address&quot;</span><span class="token operator">:</span><span class="token string">&quot;å¤©æ´¥å¸‚å—å¼€åŒºæ—®æ—¯èƒ¡åŒ100å·&quot;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>æ­¤æ—¶çš„æµ‹è¯•ç»“æœæ­£å¸¸ï¼Œå¯ä»¥æ‹¿åˆ°æ¥å£æ•°æ®ã€‚</li></ul><p><strong>éç™½åå•ç”¨æˆ·è®¿é—®</strong></p>`,3),C={href:"http://localhost:8080/api/queryUserInfo?userId=%E5%B0%8F%E5%9B%A2%E5%9B%A2",target:"_blank",rel:"noopener noreferrer"},D=e(`<div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token operator">:</span><span class="token string">&quot;1111&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;info&quot;</span><span class="token operator">:</span><span class="token string">&quot;éç™½åå•å¯è®¿é—®ç”¨æˆ·æ‹¦æˆªï¼&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">&quot;age&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">&quot;address&quot;</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>è¿™æ¬¡æˆ‘ä»¬æŠŠ<code>userId</code>æ¢æˆ<code>å°å›¢å›¢</code>ï¼Œæ­¤æ—¶è¿”å›çš„ä¿¡æ¯å·²ç»æ˜¯è¢«æ‹¦æˆªçš„ä¿¡æ¯ã€‚è€Œè¿™ä¸ªæ‹¦æˆªä¿¡æ¯æ­£å¼æˆ‘ä»¬è‡ªå®šä¹‰æ³¨è§£ä¸­çš„ä¿¡æ¯ï¼š<code>@DoDoor(key = &quot;userId&quot;, returnJson = &quot;{\\&quot;code\\&quot;:\\&quot;1111\\&quot;,\\&quot;info\\&quot;:\\&quot;éç™½åå•å¯è®¿é—®ç”¨æˆ·æ‹¦æˆªï¼\\&quot;}&quot;)</code></li></ul><h2 id="ä¸ƒã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€æ€»ç»“" aria-hidden="true">#</a> ä¸ƒã€æ€»ç»“</h2><ul><li>ä»¥ä¸Šæˆ‘ä»¬é€šè¿‡ä¸­é—´ä»¶çš„æ–¹å¼å®ç°å¤–è§‚æ¨¡å¼ï¼Œè¿™æ ·çš„è®¾è®¡å¯ä»¥å¾ˆå¥½çš„å¢å¼ºä»£ç çš„éš”ç¦»æ€§ï¼Œä»¥åŠå¤ç”¨æ€§ï¼Œä¸ä»…ä½¿ç”¨ä¸Šéå¸¸çµæ´»ä¹Ÿé™ä½äº†æ¯ä¸€ä¸ªç³»ç»Ÿéƒ½å¼€å‘è¿™æ ·çš„æœåŠ¡å¸¦æ¥çš„é£é™©ã€‚</li><li>å¯èƒ½ç›®å‰ä½ çœ‹è¿™åªæ˜¯éå¸¸ç®€å•çš„ç™½åå•æ§åˆ¶ï¼Œæ˜¯å¦éœ€è¦è¿™æ ·çš„å¤„ç†ã€‚ä½†å¾€å¾€ä¸€ä¸ªå°å°çš„å¼€å§‹ä¼šå½±å“ç€åç»­æ— é™çš„æ‰©å±•ï¼Œå®é™…çš„ä¸šåŠ¡å¼€å‘å¾€å¾€ä¹Ÿè¦å¤æ‚çš„å¾ˆå¤šï¼Œä¸å¯èƒ½å¦‚æ­¤ç®€å•ã€‚å› è€Œä½¿ç”¨è®¾è®¡æ¨¡å¼æ¥è®©ä»£ç ç»“æ„æ›´åŠ å¹²å‡€æ•´æ´ã€‚</li><li>å¾ˆå¤šæ—¶å€™ä¸æ˜¯è®¾è®¡æ¨¡å¼æ²¡æœ‰ç”¨ï¼Œè€Œæ˜¯è‡ªå·±ç¼–ç¨‹å¼€å‘ç»éªŒä¸è¶³å¯¼è‡´å³ä½¿å­¦äº†è®¾è®¡æ¨¡å¼ä¹Ÿå¾ˆéš¾é©¾é©­ã€‚æ¯•ç«Ÿè¿™äº›çŸ¥è¯†éƒ½æ˜¯ç»è¿‡ä¸€äº›å®é™…æ“ä½œæç‚¼å‡ºæ¥çš„ç²¾åï¼Œä½†å¦‚æœä½ å¯ä»¥æŒ‰ç…§æœ¬ç³»åˆ—æ–‡ç« ä¸­çš„æ¡ˆä¾‹æ–¹å¼è¿›è¡Œå­¦ä¹ å®æ“ï¼Œè¿˜æ˜¯å¯ä»¥å¢å¼ºè¿™éƒ¨åˆ†è®¾è®¡èƒ½åŠ›çš„ã€‚</li></ul>`,4);function P(U,A){const a=o("ExternalLinkIcon");return c(),l("div",null,[u,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),r,s("åšå®¢ï¼š"),n("a",d,[s("https://bugstack.cn"),t(a)])]),k,v,m,n("ol",null,[b,g,h,n("li",null,[s("æ¶‰åŠå·¥ç¨‹ä¸‰ä¸ªï¼Œå¯ä»¥é€šè¿‡å…³æ³¨"),f,s("ï¼š"),n("a",_,[y,t(a)]),s("ï¼Œå›å¤"),q,s("è·å–(æ‰“å¼€è·å–çš„é“¾æ¥ï¼Œæ‰¾åˆ°åºå·18)")])]),w,n("ul",null,[n("li",null,[s("å›¾ç‰‡æ¥è‡ªï¼š"),n("a",j,[s("https://refactoringguru.cn/design-patterns/facade"),t(a)])])]),S,n("p",null,[n("a",I,[s("http://localhost:8080/api/queryUserInfo?userId=1001"),t(a)])]),x,n("p",null,[n("a",C,[s("http://localhost:8080/api/queryUserInfo?userId=å°å›¢å›¢"),t(a)])]),D])}const E=p(i,[["render",P],["__file","2020-06-11-zhongxue Java shejimoshiã€Šshizhanwaiguanmoshiã€‹.html.vue"]]);export{E as default};
