import{_ as e,r as o,o as t,c as p,a as n,b as a,d as r,e as i}from"./app-3RcBQnkC.js";const l={},c=n("h1",{id:"ç¬¬1ç« -æœåŠ¡é›†ç¾¤æ³¨å†Œä¸å‘ç°-eureka",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ç¬¬1ç« -æœåŠ¡é›†ç¾¤æ³¨å†Œä¸å‘ç°-eureka","aria-hidden":"true"},"#"),a(" ç¬¬1ç« ï¼šæœåŠ¡é›†ç¾¤æ³¨å†Œä¸å‘ç° Eureka")],-1),d=n("br",null,null,-1),u={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},k=i(`<blockquote><p>æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„</p></blockquote><h2 id="å‰è¨€ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#å‰è¨€ä»‹ç»" aria-hidden="true">#</a> å‰è¨€ä»‹ç»</h2><ol><li><p>å¯¹äºèƒ½æä¾›å®Œæ•´é¢†åŸŸæœåŠ¡æ¥å£åŠŸèƒ½çš„RPCè€Œè¨€ï¼Œä¾‹å¦‚ï¼›gRPCã€Thriftã€Dubboç­‰ï¼ŒæœåŠ¡çš„æ³¨å†Œä¸å‘ç°éƒ½æ˜¯æ ¸å¿ƒåŠŸèƒ½ä¸­éå¸¸é‡è¦çš„ä¸€ç¯ï¼Œä½¿å¾—å¾®æœåŠ¡å¾—åˆ°ç»Ÿä¸€ç®¡ç†ã€‚</p></li><li><p>åœ¨åˆ†å¸ƒå¼é¢†åŸŸä¸­æœ‰ä¸ªè‘—åçš„CAPç†è®ºï¼›ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰ã€åˆ†åŒºå®¹é”™æ€§ï¼ˆPartition toleranceï¼‰ï¼Œè¿™ä¸‰ä¸ªè¦ç´ åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæœ€å¤šæ»¡è¶³ä¸¤ä¸ªï¼Œä¸å¯èƒ½ä¸‰è€…å…¼é¡¾ã€‚</p></li><li><p>é€šå¸¸æˆ‘ä»¬åœ¨ä½¿ç”¨dubboæ—¶zookeeperä½œä¸ºæ³¨å†Œä¸­å¿ƒä»¥é€‰ä¸»é…ç½®ä¸ºæ ¸å¿ƒï¼Œä¿è¯CPç‰¹æ€§ï¼Œå³ä»»ä½•æ—¶åˆ»å¯¹ Zookeeper çš„è®¿é—®è¯·æ±‚èƒ½å¾—åˆ°ä¸€è‡´çš„æ•°æ®ç»“æœï¼ŒåŒæ—¶ç³»ç»Ÿå¯¹ç½‘ç»œåˆ†å‰²å…·å¤‡å®¹é”™æ€§ï¼Œä½†æ˜¯å®ƒä¸èƒ½ä¿è¯æ¯æ¬¡æœåŠ¡è¯·æ±‚çš„å¯ç”¨æ€§ã€‚</p></li><li><p>è€Œ Spring Cloud Netflix åœ¨è®¾è®¡ Eureka æ—¶éµå®ˆçš„å°±æ˜¯ AP åŸåˆ™ï¼Œå› ä¸ºå¯¹äºæœåŠ¡å‘ç°è€Œè¨€ï¼Œå¯ç”¨æ€§æ¯”æ•°æ®ä¸€è‡´æ€§æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚</p></li><li><p>Spring Cloud Eureka æ˜¯ Spring Cloud Netflix å¾®æœåŠ¡å¥—ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œä¸»è¦è´Ÿè´£å®Œæˆå¾®æœåŠ¡æ¶æ„ä¸­çš„æœåŠ¡æ²»ç†åŠŸèƒ½ï¼ŒæœåŠ¡æ²»ç†å¯ä»¥è¯´æ˜¯å¾®æœåŠ¡æ¶æ„ä¸­æœ€ä¸ºæ ¸å¿ƒå’ŒåŸºç¡€çš„æ¨¡å—ï¼Œä»–ä¸»è¦ç”¨æ¥å®ç°å„ä¸ªå¾®æœåŠ¡å®ä¾‹çš„è‡ªåŠ¨åŒ–æ³¨å†Œä¸å‘ç°ã€‚</p></li><li><p>å¦å¤–EurekaæœåŠ¡é›†ç¾¤æœ‰è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ï¼Œåœ¨æ¯åˆ†é’Ÿæ”¶åˆ°å¿ƒè·³ä½äºé˜€å€¼æ—¶ï¼Œå°±ä¼šè§¦å‘è‡ªæˆ‘ä¿æŠ¤ï¼›</p></li></ol><blockquote><p>é˜ˆå€¼ = instanceçš„æ•°é‡ Ã— (60 / instanceçš„å¿ƒè·³é—´éš”ç§’æ•°) Ã— è‡ªæˆ‘ä¿æŠ¤ç³»æ•° {å®é™…è®¡ç®—ä¸ºï¼›this.expectedNumberOfRenewsPerMin + 2}</p></blockquote><h2 id="æ¡ˆä¾‹è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹è¯´æ˜" aria-hidden="true">#</a> æ¡ˆä¾‹è¯´æ˜</h2><p>é‡‡ç”¨ Eureka Server è¿è¡Œ3ä¸ªå®ä¾‹ï½›node01ã€node02ã€node03ï½æ„å»ºæœåŠ¡å‘ç°é›†ç¾¤ï¼Œè§£å†³å•ç‚¹é—®é¢˜(zookeeperä¹Ÿæ˜¯è‡³å°‘éƒ¨ç½²ä¸‰ç»„ä»¥ä¸Šæ„å»ºä¸€ä¸ªé›†ç¾¤)ã€‚ä½†Eureka Server é‡‡ç”¨çš„æ˜¯å»ä¸­å¿ƒåŒ–çš„æ¶æ„çš„ Peer to Peer å¯¹ç­‰é€šä¿¡ï¼Œæ²¡æœ‰ master/slave åŒºåˆ†ï¼Œæ¯ä¸€ä¸ª Peer éƒ½æ˜¯å¯¹ç­‰çš„ã€‚åœ¨è¿™ç§æ¶æ„ä¸­ï¼ŒèŠ‚ç‚¹é€šè¿‡å½¼æ­¤äº’ç›¸æ³¨å†Œæ¥æé«˜å¯ç”¨æ€§ï¼Œæ¯ä¸ªèŠ‚ç‚¹éœ€è¦æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰æ•ˆçš„ serviceUrl æŒ‡å‘å…¶ä»–èŠ‚ç‚¹ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯è¢«è§†ä¸ºå…¶ä»–èŠ‚ç‚¹çš„å‰¯æœ¬ã€‚</p><p><img src="https://bugstack.cn/assets/images/pic-content/2019/11/SpringCloud-1-1.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ &amp; Eureka å®˜ç½‘çš„æ¶æ„å›¾"></p><h2 id="ç¯å¢ƒå‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#ç¯å¢ƒå‡†å¤‡" aria-hidden="true">#</a> ç¯å¢ƒå‡†å¤‡</h2><ol><li>jdk 1.8</li><li>Spring Boot 2.0.6.RELEASE</li><li>Spring Cloud Finchley.SR2</li></ol><h2 id="ä»£ç ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ä»£ç ç¤ºä¾‹" aria-hidden="true">#</a> ä»£ç ç¤ºä¾‹</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>springcloud<span class="token operator">-</span><span class="token number">01</span>
â”œâ”€â”€ itstack<span class="token operator">-</span>demo<span class="token operator">-</span>node01
â”‚   â””â”€â”€ src
â”‚		â””â”€â”€ main
â”‚		    â”œâ”€â”€ java
â”‚		    â”‚   â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo
â”‚	        â”‚        â””â”€â”€ <span class="token class-name">EurekaServerApplication</span><span class="token punctuation">.</span>java
â”‚           â””â”€â”€ resources	
â”‚               â””â”€â”€ application<span class="token punctuation">.</span>yml
â”œâ”€â”€ itstack<span class="token operator">-</span>demo<span class="token operator">-</span>node02
â”‚   â””â”€â”€ src
â”‚		â””â”€â”€ main
â”‚		    â”œâ”€â”€ java
â”‚		    â”‚   â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo
â”‚	        â”‚        â””â”€â”€ <span class="token class-name">EurekaServerApplication</span><span class="token punctuation">.</span>java
â”‚           â””â”€â”€ resources	
â”‚               â””â”€â”€ application<span class="token punctuation">.</span>yml
â””â”€â”€ itstack<span class="token operator">-</span>demo<span class="token operator">-</span>node03
    â””â”€â”€ src
 		â””â”€â”€ main
 		    â”œâ”€â”€ java
 		    â”‚   â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo
 	        â”‚        â””â”€â”€ <span class="token class-name">EurekaServerApplication</span><span class="token punctuation">.</span>java
            â””â”€â”€ resources	
                â””â”€â”€ application<span class="token punctuation">.</span>yml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å®Œæ•´ä»£ç æ¬¢è¿å…³æ³¨å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ | å›å¤â€œSpringCloudä¸“é¢˜â€è¿›è¡Œä¸‹è½½</strong></p><blockquote><p>EurekaServerApplication.java | ä¸‰ç»„nodeä»£ç ä¸€è‡´ï¼Œåªéœ€è¦ä¸€ä¸ªæ™®é€šçš„springbootæ·»åŠ @EnableEurekaServerå³å¯å¯åŠ¨</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ | æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œä¸“æ³¨äºåŸåˆ›ä¸“é¢˜æ¡ˆä¾‹
 * è®ºå›ï¼šhttp://bugstack.cn
 * Create by ä»˜æ”¿å§” on @2019
 */</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaServer</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EurekaServerApplication</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span> <span class="token class-name">EurekaServerApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>itstack-demo-node01/application.yml | node1 æŒ‡å‘å¦å¤–ä¸¤å°æœåŠ¡ï¼ŒregisterWithEurekaã€fetchRegistryå’Œå•å®ä¾‹ä¸åŒéœ€è¦é…ç½®ä¸ºtrue</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>spring<span class="token operator">:</span>
  application<span class="token operator">:</span>
    name<span class="token operator">:</span> itstack<span class="token operator">-</span>demo<span class="token operator">-</span>eureka<span class="token operator">-</span>server

server<span class="token operator">:</span>
  port<span class="token operator">:</span> <span class="token number">8081</span>

eureka<span class="token operator">:</span>
  instance<span class="token operator">:</span>
    hostname<span class="token operator">:</span> node01
  client<span class="token operator">:</span>
    registerWithEureka<span class="token operator">:</span> <span class="token boolean">true</span>
    fetchRegistry<span class="token operator">:</span> <span class="token boolean">true</span>
    serviceUrl<span class="token operator">:</span>
      defaultZone<span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>node02<span class="token operator">:</span><span class="token number">8082</span><span class="token operator">/</span>eureka<span class="token operator">/</span><span class="token punctuation">,</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>node03<span class="token operator">:</span><span class="token number">8083</span><span class="token operator">/</span>eureka<span class="token operator">/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>itstack-demo-node02/application.yml | node2 æŒ‡å‘å¦å¤–ä¸¤å°æœåŠ¡</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>spring<span class="token operator">:</span>
  application<span class="token operator">:</span>
    name<span class="token operator">:</span> itstack<span class="token operator">-</span>demo<span class="token operator">-</span>eureka<span class="token operator">-</span>server

server<span class="token operator">:</span>
  port<span class="token operator">:</span> <span class="token number">8082</span>

eureka<span class="token operator">:</span>
  instance<span class="token operator">:</span>
    hostname<span class="token operator">:</span> node02
  client<span class="token operator">:</span>
    registerWithEureka<span class="token operator">:</span> <span class="token boolean">true</span>
    fetchRegistry<span class="token operator">:</span> <span class="token boolean">true</span>
    serviceUrl<span class="token operator">:</span>
      defaultZone<span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>node03<span class="token operator">:</span><span class="token number">8083</span><span class="token operator">/</span>eureka<span class="token operator">/</span><span class="token punctuation">,</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>node01<span class="token operator">:</span><span class="token number">8081</span><span class="token operator">/</span>eureka<span class="token operator">/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>itstack-demo-node03/application.yml | node3 æŒ‡å‘å¦å¤–ä¸¤å°æœåŠ¡</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>spring<span class="token operator">:</span>
  application<span class="token operator">:</span>
    name<span class="token operator">:</span> itstack<span class="token operator">-</span>demo<span class="token operator">-</span>eureka<span class="token operator">-</span>server

server<span class="token operator">:</span>
  port<span class="token operator">:</span> <span class="token number">8083</span>

eureka<span class="token operator">:</span>
  instance<span class="token operator">:</span>
    hostname<span class="token operator">:</span> node03
  client<span class="token operator">:</span>
    registerWithEureka<span class="token operator">:</span> <span class="token boolean">true</span>
    fetchRegistry<span class="token operator">:</span> <span class="token boolean">true</span>
    serviceUrl<span class="token operator">:</span>
      defaultZone<span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>node01<span class="token operator">:</span><span class="token number">8081</span><span class="token operator">/</span>eureka<span class="token operator">/</span><span class="token punctuation">,</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>node02<span class="token operator">:</span><span class="token number">8082</span><span class="token operator">/</span>eureka<span class="token operator">/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æµ‹è¯•éªŒè¯" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•éªŒè¯" aria-hidden="true">#</a> æµ‹è¯•éªŒè¯</h2><ol><li>é…ç½®hostï¼›127.0.0.1 node01 node02 node03</li><li>åˆ†åˆ«å¯åŠ¨node1ã€node2ã€node3</li><li>è®¿é—®ï¼›http://localhost:8081/ <img src="https://bugstack.cn/assets/images/pic-content/2019/11/SpringCloud-1-2.jpg" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ &amp; Eurekaé›†ç¾¤"></li></ol><p>å¾®ä¿¡æœç´¢ã€Œ<strong>bugstackè™«æ´æ ˆ</strong>ã€å…¬ä¼—å·ï¼Œå…³æ³¨åå›å¤ã€Œ<strong>SpringCloudä¸“é¢˜</strong>ã€è·å–æœ¬æ–‡æºç &amp;æ›´å¤šåŸåˆ›ä¸“é¢˜æ¡ˆä¾‹ï¼</p>`,23);function v(m,b){const s=o("ExternalLinkIcon");return t(),p("div",null,[c,n("p",null,[a("ä½œè€…ï¼šå°å‚…å“¥ "),d,a("åšå®¢ï¼š"),n("a",u,[a("https://bugstack.cn"),r(s)])]),k])}const g=e(l,[["render",v],["__file","2019-11-01-Spring Cloudyiã€Šfuwujiqunzhuceyufaxian Eurekaã€‹.html.vue"]]);export{g as default};
