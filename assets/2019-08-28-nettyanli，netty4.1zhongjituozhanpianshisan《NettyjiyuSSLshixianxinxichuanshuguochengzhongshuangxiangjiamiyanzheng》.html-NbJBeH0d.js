import{_ as e,r as o,o as c,c as l,a as n,b as s,d as t,e as p}from"./app-3RcBQnkC.js";const i={},u=n("h1",{id:"netty案例-netty4-1中级拓展篇十三《netty基于ssl实现信息传输过程中双向加密验证》",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#netty案例-netty4-1中级拓展篇十三《netty基于ssl实现信息传输过程中双向加密验证》","aria-hidden":"true"},"#"),s(" netty案例，netty4.1中级拓展篇十三《Netty基于SSL实现信息传输过程中双向加密验证》")],-1),k=n("br",null,null,-1),r={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},d=p(`<blockquote><p>沉淀、分享、成长，让自己和他人都能有所收获！😄</p></blockquote><h2 id="前言介绍" tabindex="-1"><a class="header-anchor" href="#前言介绍" aria-hidden="true">#</a> 前言介绍</h2><blockquote><p>SSL(Secure Sockets Layer 安全套接层),及其继任者传输层安全（Transport Layer Security，TLS）是为网络通信提供安全及数据完整性的一种安全协议。TLS与SSL在传输层对网络连接进行加密。</p></blockquote><p>在实际通信过程中，如果不使用SSL那么信息就是明文传输，从而给非法分子一些可乘之机；</p><ul><li>窃听风险[eavesdropping]：第三方可以获知通信内容。</li><li>篡改风险[tampering]：第三方可以修改通信内容。</li><li>冒充风险[pretending]：第三方可以冒充他人身份参与通信。</li></ul><p>SSL/TLS协议就是为了解决这三大风险而设计的；</p><ul><li>保密：在握手协议中定义了会话密钥后，所有的消息都被加密。</li><li>鉴别：可选的客户端认证，和强制的服务器端认证。</li><li>完整性：传送的消息包括消息完整性检查（使用MAC）。</li></ul><p>那么本章节我们通过在netty的channHandler中添加SSL安全模块{sslContext.newHandler(channel.alloc())}，来实现加密传输的效果。</p><p><strong>测试注释掉客户端SSL安全模块：</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">io<span class="token punctuation">.</span>netty<span class="token punctuation">.</span>handler<span class="token punctuation">.</span>ssl<span class="token punctuation">.</span></span>NotSslRecordException</span><span class="token operator">:</span> not an <span class="token constant">SSL</span><span class="token operator">/</span><span class="token constant">TLS</span> record<span class="token operator">:</span> cea2d0c5b9abd6dabac5a3ba627567737461636bb3e6b6b4d5bb207c20cda8d6aab7fecef1b6cbc1b4bdd3bda8c1a2b3c9b9a6204d6f6e205365702032332031333a35303a3535204353542032303139203132372e302e302e310d0a
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>测试篡改服务端时间：</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">javax<span class="token punctuation">.</span>net<span class="token punctuation">.</span>ssl<span class="token punctuation">.</span></span>SSLHandshakeException</span><span class="token operator">:</span> <span class="token class-name">General</span> <span class="token class-name">SSLEngine</span> problem
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="开发环境" tabindex="-1"><a class="header-anchor" href="#开发环境" aria-hidden="true">#</a> 开发环境</h2>`,13),m=n("li",null,"jdk1.8【jdk1.7以下只能部分支持netty】",-1),v=n("li",null,"Netty4.1.36.Final【netty3.x 4.x 5每次的变化较大，接口类名也随着变化】",-1),b={href:"http://slproweb.com/products/Win32OpenSSL.html",target:"_blank",rel:"noopener noreferrer"},y=n("h2",{id:"生成证书-过程较长-耐心完成",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#生成证书-过程较长-耐心完成","aria-hidden":"true"},"#"),s(" 生成证书 | 过程较长，耐心完成")],-1),g=n("p",null,[n("img",{src:"https://bugstack.cn/assets/images/pic-content/2019/09/netty-2-13-2.png",alt:"微信公众号：bustack虫洞栈 | 生成证书"})],-1),h=n("blockquote",null,[n("p",null,"1、安装OpenSSL")],-1),S={href:"https://stackoverflow.com/questions/22906927/openssl-windows-error-in-req/27918971",target:"_blank",rel:"noopener noreferrer"},f=n("img",{src:"https://bugstack.cn/assets/images/pic-content/2019/09/netty-2-13-1.png",alt:"OpenSSL Windows: error in req"},null,-1),w=p(`<blockquote><p>2、生成服务端和客户端私钥 | 命令中需要输入密码测试可以都输入123456</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>openssl genrsa <span class="token operator">-</span>des3 <span class="token operator">-</span>out server<span class="token punctuation">.</span>key <span class="token number">1024</span>
openssl genrsa <span class="token operator">-</span>des3 <span class="token operator">-</span>out client<span class="token punctuation">.</span>key <span class="token number">1024</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>3、根据key生成csr文件 | -config openssl.cnf 默认在cnf文件夹，如果未复制出来，需要指定路径“D://..cnf//openssl.cnf”</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>openssl req <span class="token operator">-</span><span class="token keyword">new</span> <span class="token operator">-</span>key server<span class="token punctuation">.</span>key <span class="token operator">-</span>out server<span class="token punctuation">.</span>csr <span class="token operator">-</span>config openssl<span class="token punctuation">.</span>cnf
openssl req <span class="token operator">-</span><span class="token keyword">new</span> <span class="token operator">-</span>key client<span class="token punctuation">.</span>key <span class="token operator">-</span>out client<span class="token punctuation">.</span>csr <span class="token operator">-</span>config openssl<span class="token punctuation">.</span>cnf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>4、根据ca证书server.csr、client.csr生成<strong>x509</strong>证书</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>openssl x509 <span class="token operator">-</span>req <span class="token operator">-</span>days <span class="token number">3650</span> <span class="token operator">-</span>in server<span class="token punctuation">.</span>csr <span class="token operator">-</span><span class="token constant">CA</span> ca<span class="token punctuation">.</span>crt <span class="token operator">-</span><span class="token class-name">CAkey</span> ca<span class="token punctuation">.</span>key <span class="token operator">-</span><span class="token class-name">CAcreateserial</span> <span class="token operator">-</span>out server<span class="token punctuation">.</span>crt
openssl x509 <span class="token operator">-</span>req <span class="token operator">-</span>days <span class="token number">3650</span> <span class="token operator">-</span>in client<span class="token punctuation">.</span>csr <span class="token operator">-</span><span class="token constant">CA</span> ca<span class="token punctuation">.</span>crt <span class="token operator">-</span><span class="token class-name">CAkey</span> ca<span class="token punctuation">.</span>key <span class="token operator">-</span><span class="token class-name">CAcreateserial</span> <span class="token operator">-</span>out client<span class="token punctuation">.</span>crt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>5、将key文件进行<strong>PKCS#8</strong>编码</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>openssl pkcs8 <span class="token operator">-</span>topk8 <span class="token operator">-</span>in server<span class="token punctuation">.</span>key <span class="token operator">-</span>out pkcs8_server<span class="token punctuation">.</span>key <span class="token operator">-</span>nocrypt
openssl pkcs8 <span class="token operator">-</span>topk8 <span class="token operator">-</span>in client<span class="token punctuation">.</span>key <span class="token operator">-</span>out pkcs8_client<span class="token punctuation">.</span>key <span class="token operator">-</span>nocrypt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>6、最终将bin文件夹下，如下文件复制出来；</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>server端：ca<span class="token punctuation">.</span>crt、server<span class="token punctuation">.</span>crt、pkcs8_server<span class="token punctuation">.</span>key
client端：ca<span class="token punctuation">.</span>crt、client<span class="token punctuation">.</span>crt、pkcs8_client<span class="token punctuation">.</span>key
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="代码示例" tabindex="-1"><a class="header-anchor" href="#代码示例" aria-hidden="true">#</a> 代码示例</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>netty<span class="token operator">-</span><span class="token number">2</span><span class="token operator">-</span><span class="token number">13</span>
└── src
    ├── main
    │   └── java
    │       └── org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>netty
    │           ├── client
    │           │	├── <span class="token class-name">MyChannelInitializer</span><span class="token punctuation">.</span>java
    │           │	├── <span class="token class-name">MyClientHandler</span><span class="token punctuation">.</span>java
    │           │	└── <span class="token class-name">NettyClient</span><span class="token punctuation">.</span>java
    │           ├── server
    │           │	├── <span class="token class-name">MyChannelInitializer</span><span class="token punctuation">.</span>java
    │           │	├── <span class="token class-name">MyServerHandler</span><span class="token punctuation">.</span>java	
    │           │	└── <span class="token class-name">NettyServer</span><span class="token punctuation">.</span>java
    │           └── ssl
    │           	├── client
    │           	│	├── ca<span class="token punctuation">.</span>crt
    │           	│	├── client<span class="token punctuation">.</span>crt	
    │           	│	└── pkcs8_client<span class="token punctuation">.</span>key	
    │           	└── server
    │           		├── ca<span class="token punctuation">.</span>crt
    │           		├── pkcs8_server<span class="token punctuation">.</span>key
    │           		└── server<span class="token punctuation">.</span>crt
    │
    └── test
         └── java
             └── org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>test
                 └── <span class="token class-name">ApiTest</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>以下重点代码块讲解，完整代码，关注公众号：bugstack虫洞栈 | 回复Netty源码获取</strong></p><h3 id="客户端" tabindex="-1"><a class="header-anchor" href="#客户端" aria-hidden="true">#</a> 客户端：</h3><blockquote><p>client/NettyClient.java | 引入SSL认证</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 虫洞栈：https://bugstack.cn
 * 公众号：bugstack虫洞栈  ｛获取学习源码｝
 * Create by fuzhengwei on 2019
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NettyClient</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SSLException</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">NettyClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">7398</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token class-name">String</span> inetHost<span class="token punctuation">,</span> <span class="token keyword">int</span> inetPort<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SSLException</span> <span class="token punctuation">{</span>

        <span class="token comment">//引入SSL安全验证</span>
        <span class="token class-name">File</span> certChainFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;E:\\\\itstack\\\\GIT\\\\itstack.org\\\\itstack-demo-netty\\\\itstack-demo-netty-2-13\\\\src\\\\main\\\\java\\\\org\\\\itstack\\\\demo\\\\netty\\\\ssl\\\\client\\\\client.crt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">File</span> keyFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;E:\\\\itstack\\\\GIT\\\\itstack.org\\\\itstack-demo-netty\\\\itstack-demo-netty-2-13\\\\src\\\\main\\\\java\\\\org\\\\itstack\\\\demo\\\\netty\\\\ssl\\\\client\\\\pkcs8_client.key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">File</span> rootFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;E:\\\\itstack\\\\GIT\\\\itstack.org\\\\itstack-demo-netty\\\\itstack-demo-netty-2-13\\\\src\\\\main\\\\java\\\\org\\\\itstack\\\\demo\\\\netty\\\\ssl\\\\client\\\\ca.crt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SslContext</span> sslCtx <span class="token operator">=</span> <span class="token class-name">SslContextBuilder</span><span class="token punctuation">.</span><span class="token function">forClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">keyManager</span><span class="token punctuation">(</span>certChainFile<span class="token punctuation">,</span> keyFile<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trustManager</span><span class="token punctuation">(</span>rootFile<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//配置客户端NIO线程组</span>
        <span class="token class-name">EventLoopGroup</span> workerGroup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NioEventLoopGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Bootstrap</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bootstrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            b<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span>workerGroup<span class="token punctuation">)</span><span class="token punctuation">;</span>
            b<span class="token punctuation">.</span><span class="token function">channel</span><span class="token punctuation">(</span><span class="token class-name">NioSocketChannel</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            b<span class="token punctuation">.</span><span class="token function">option</span><span class="token punctuation">(</span><span class="token class-name">ChannelOption</span><span class="token punctuation">.</span><span class="token constant">AUTO_READ</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            b<span class="token punctuation">.</span><span class="token function">handler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyChannelInitializer</span><span class="token punctuation">(</span>sslCtx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">ChannelFuture</span> f <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>inetHost<span class="token punctuation">,</span> inetPort<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;itstack-demo-netty client start done. {关注公众号：bugstack虫洞栈 | 获取专题源码}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            f<span class="token punctuation">.</span><span class="token function">channel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">closeFuture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            workerGroup<span class="token punctuation">.</span><span class="token function">shutdownGracefully</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>client/NettyClient.java | 添加SSL认证模块，测试过程中可以尝试注释掉</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 虫洞栈：https://bugstack.cn
 * 公众号：bugstack虫洞栈  ｛获取学习源码｝
 * Create by fuzhengwei on 2019
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyChannelInitializer</span> <span class="token keyword">extends</span> <span class="token class-name">ChannelInitializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SocketChannel</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">SslContext</span> sslContext<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">MyChannelInitializer</span><span class="token punctuation">(</span><span class="token class-name">SslContext</span> sslContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>sslContext <span class="token operator">=</span> sslContext<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">initChannel</span><span class="token punctuation">(</span><span class="token class-name">SocketChannel</span> channel<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">// 添加SSL安全验证</span>
        channel<span class="token punctuation">.</span><span class="token function">pipeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span>sslContext<span class="token punctuation">.</span><span class="token function">newHandler</span><span class="token punctuation">(</span>channel<span class="token punctuation">.</span><span class="token function">alloc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 基于换行符号</span>
        channel<span class="token punctuation">.</span><span class="token function">pipeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LineBasedFrameDecoder</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 解码转String，注意调整自己的编码格式GBK、UTF-8</span>
        channel<span class="token punctuation">.</span><span class="token function">pipeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringDecoder</span><span class="token punctuation">(</span><span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;GBK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 解码转String，注意调整自己的编码格式GBK、UTF-8</span>
        channel<span class="token punctuation">.</span><span class="token function">pipeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringEncoder</span><span class="token punctuation">(</span><span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;GBK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 在管道中添加我们自己的接收数据实现方法</span>
        channel<span class="token punctuation">.</span><span class="token function">pipeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyClientHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="服务端" tabindex="-1"><a class="header-anchor" href="#服务端" aria-hidden="true">#</a> 服务端：</h3><blockquote><p>server/NettyServer.java | 引入SSL安全验证</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 虫洞栈：https://bugstack.cn
 * 公众号：bugstack虫洞栈  ｛获取学习源码｝
 * Create by fuzhengwei on 2019
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NettyServer</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SSLException</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">NettyServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bing</span><span class="token punctuation">(</span><span class="token number">7398</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">bing</span><span class="token punctuation">(</span><span class="token keyword">int</span> port<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SSLException</span> <span class="token punctuation">{</span>

        <span class="token comment">//引入SSL安全验证</span>
        <span class="token class-name">File</span> certChainFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;E:\\\\itstack\\\\GIT\\\\itstack.org\\\\itstack-demo-netty\\\\itstack-demo-netty-2-13\\\\src\\\\main\\\\java\\\\org\\\\itstack\\\\demo\\\\netty\\\\ssl\\\\server\\\\server.crt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">File</span> keyFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;E:\\\\itstack\\\\GIT\\\\itstack.org\\\\itstack-demo-netty\\\\itstack-demo-netty-2-13\\\\src\\\\main\\\\java\\\\org\\\\itstack\\\\demo\\\\netty\\\\ssl\\\\server\\\\pkcs8_server.key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">File</span> rootFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;E:\\\\itstack\\\\GIT\\\\itstack.org\\\\itstack-demo-netty\\\\itstack-demo-netty-2-13\\\\src\\\\main\\\\java\\\\org\\\\itstack\\\\demo\\\\netty\\\\ssl\\\\server\\\\ca.crt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SslContext</span> sslCtx <span class="token operator">=</span> <span class="token class-name">SslContextBuilder</span><span class="token punctuation">.</span><span class="token function">forServer</span><span class="token punctuation">(</span>certChainFile<span class="token punctuation">,</span> keyFile<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trustManager</span><span class="token punctuation">(</span>rootFile<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clientAuth</span><span class="token punctuation">(</span><span class="token class-name">ClientAuth</span><span class="token punctuation">.</span><span class="token constant">REQUIRE</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//配置服务端NIO线程组</span>
        <span class="token class-name">EventLoopGroup</span> parentGroup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NioEventLoopGroup</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//NioEventLoopGroup extends MultithreadEventLoopGroup Math.max(1, SystemPropertyUtil.getInt(&quot;io.netty.eventLoopThreads&quot;, NettyRuntime.availableProcessors() * 2));</span>
        <span class="token class-name">EventLoopGroup</span> childGroup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NioEventLoopGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">ServerBootstrap</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerBootstrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            b<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span>parentGroup<span class="token punctuation">,</span> childGroup<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">channel</span><span class="token punctuation">(</span><span class="token class-name">NioServerSocketChannel</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>    <span class="token comment">//非阻塞模式</span>
                    <span class="token punctuation">.</span><span class="token function">option</span><span class="token punctuation">(</span><span class="token class-name">ChannelOption</span><span class="token punctuation">.</span><span class="token constant">SO_BACKLOG</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">childHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyChannelInitializer</span><span class="token punctuation">(</span>sslCtx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">ChannelFuture</span> f <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;itstack-demo-netty server start done. {关注公众号：bugstack虫洞栈 | 获取专题源码}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            f<span class="token punctuation">.</span><span class="token function">channel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">closeFuture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            childGroup<span class="token punctuation">.</span><span class="token function">shutdownGracefully</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            parentGroup<span class="token punctuation">.</span><span class="token function">shutdownGracefully</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>server/NettyServer.java | 添加SSL认证模块</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token operator">*</span><span class="token operator">*</span>
 <span class="token operator">*</span> 虫洞栈：https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>bugstack<span class="token punctuation">.</span>cn
 <span class="token operator">*</span> 公众号：bugstack虫洞栈  ｛获取学习源码｝
 <span class="token operator">*</span> <span class="token class-name">Create</span> by fuzhengwei on <span class="token number">2019</span>
 <span class="token operator">*</span><span class="token operator">/</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyChannelInitializer</span> <span class="token keyword">extends</span> <span class="token class-name">ChannelInitializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SocketChannel</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">SslContext</span> sslContext<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">MyChannelInitializer</span><span class="token punctuation">(</span><span class="token class-name">SslContext</span> sslContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>sslContext <span class="token operator">=</span> sslContext<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">initChannel</span><span class="token punctuation">(</span><span class="token class-name">SocketChannel</span> channel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 添加SSL安装验证</span>
        channel<span class="token punctuation">.</span><span class="token function">pipeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span>sslContext<span class="token punctuation">.</span><span class="token function">newHandler</span><span class="token punctuation">(</span>channel<span class="token punctuation">.</span><span class="token function">alloc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 基于换行符号</span>
        channel<span class="token punctuation">.</span><span class="token function">pipeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LineBasedFrameDecoder</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 解码转String，注意调整自己的编码格式GBK、UTF-8</span>
        channel<span class="token punctuation">.</span><span class="token function">pipeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringDecoder</span><span class="token punctuation">(</span><span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;GBK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 解码转String，注意调整自己的编码格式GBK、UTF-8</span>
        channel<span class="token punctuation">.</span><span class="token function">pipeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringEncoder</span><span class="token punctuation">(</span><span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;GBK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 在管道中添加我们自己的接收数据实现方法</span>
        channel<span class="token punctuation">.</span><span class="token function">pipeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyServerHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="测试结果" tabindex="-1"><a class="header-anchor" href="#测试结果" aria-hidden="true">#</a> 测试结果</h2><blockquote><p>启动服务端NettyServer</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>netty server start done<span class="token punctuation">.</span> <span class="token punctuation">{</span>关注公众号：bugstack虫洞栈 <span class="token operator">|</span> 获取专题源码<span class="token punctuation">}</span>
链接报告开始
链接报告信息：有一客户端链接到本服务端
链接报告<span class="token constant">IP</span><span class="token operator">:</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>
链接报告<span class="token class-name">Port</span><span class="token operator">:</span><span class="token number">7399</span>
链接报告完毕
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">50</span> 接收到消息：微信公众号：bugstack虫洞栈 <span class="token operator">|</span> 通知服务端链接建立成功 <span class="token class-name">Mon</span> <span class="token class-name">Sep</span> <span class="token number">23</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">50</span> <span class="token constant">CST</span> <span class="token number">2019</span> <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">51</span> 接收到消息：微信公众号：bugstack虫洞栈 <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token constant">SSL</span><span class="token punctuation">]</span>客户端发送，服务端你在吗？
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">51</span> 接收到消息：微信公众号：bugstack虫洞栈 <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token constant">SSL</span><span class="token punctuation">]</span>客户端发送，服务端你在吗？
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">51</span> 接收到消息：微信公众号：bugstack虫洞栈 <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token constant">SSL</span><span class="token punctuation">]</span>客户端发送，服务端你在吗？
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">51</span> 接收到消息：微信公众号：bugstack虫洞栈 <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token constant">SSL</span><span class="token punctuation">]</span>客户端发送，服务端你在吗？
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">51</span> 接收到消息：微信公众号：bugstack虫洞栈 <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token constant">SSL</span><span class="token punctuation">]</span>客户端发送，服务端你在吗？
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">51</span> 接收到消息：微信公众号：bugstack虫洞栈 <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token constant">SSL</span><span class="token punctuation">]</span>客户端发送，服务端你在吗？
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">51</span> 接收到消息：微信公众号：bugstack虫洞栈 <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token constant">SSL</span><span class="token punctuation">]</span>客户端发送，服务端你在吗？
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">51</span> 接收到消息：微信公众号：bugstack虫洞栈 <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token constant">SSL</span><span class="token punctuation">]</span>客户端发送，服务端你在吗？
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">51</span> 接收到消息：微信公众号：bugstack虫洞栈 <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token constant">SSL</span><span class="token punctuation">]</span>客户端发送，服务端你在吗？

异常信息：
远程主机强迫关闭了一个现有的连接。
客户端断开链接<span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">7399</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token operator">-</span><span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>启动客户端NettyClient</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>链接报告开始
链接报告信息：本客户端链接到服务端。channelId：<span class="token number">3</span>ad375e9
链接报告<span class="token constant">IP</span><span class="token operator">:</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>
链接报告<span class="token class-name">Port</span><span class="token operator">:</span><span class="token number">51656</span>
链接报告完毕
itstack<span class="token operator">-</span>demo<span class="token operator">-</span>netty client start done<span class="token punctuation">.</span> <span class="token punctuation">{</span>关注公众号：bugstack虫洞栈 <span class="token operator">|</span> 获取专题源码<span class="token punctuation">}</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">50</span> 接收到消息：微信公众号：bugstack虫洞栈 <span class="token operator">|</span> 通知客户端链接建立成功 <span class="token class-name">Mon</span> <span class="token class-name">Sep</span> <span class="token number">23</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">50</span> <span class="token constant">CST</span> <span class="token number">2019</span> <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">50</span> 接收到消息：微信公众号：bugstack虫洞栈 <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token constant">SSL</span><span class="token punctuation">]</span>服务端发送，客户端我在。
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">50</span> 接收到消息：微信公众号：bugstack虫洞栈 <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token constant">SSL</span><span class="token punctuation">]</span>服务端发送，客户端我在。
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">50</span> 接收到消息：微信公众号：bugstack虫洞栈 <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token constant">SSL</span><span class="token punctuation">]</span>服务端发送，客户端我在。
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">50</span> 接收到消息：微信公众号：bugstack虫洞栈 <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token constant">SSL</span><span class="token punctuation">]</span>服务端发送，客户端我在。
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">50</span> 接收到消息：微信公众号：bugstack虫洞栈 <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token constant">SSL</span><span class="token punctuation">]</span>服务端发送，客户端我在。
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">50</span> 接收到消息：微信公众号：bugstack虫洞栈 <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token constant">SSL</span><span class="token punctuation">]</span>服务端发送，客户端我在。
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">50</span> 接收到消息：微信公众号：bugstack虫洞栈 <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token constant">SSL</span><span class="token punctuation">]</span>服务端发送，客户端我在。
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">50</span> 接收到消息：微信公众号：bugstack虫洞栈 <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token constant">SSL</span><span class="token punctuation">]</span>服务端发送，客户端我在。
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">50</span> 接收到消息：微信公众号：bugstack虫洞栈 <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token constant">SSL</span><span class="token punctuation">]</span>服务端发送，客户端我在。

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token operator">-</span><span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>微信搜索「<strong>bugstack虫洞栈</strong>」公众号，关注后回复「<strong>Netty专题案例</strong>」获取本文源码&amp;更多原创专题案例！</p>`,29);function x(C,L){const a=o("ExternalLinkIcon");return c(),l("div",null,[u,n("p",null,[s("作者：小傅哥 "),k,s("博客："),n("a",r,[s("https://bugstack.cn"),t(a)])]),d,n("ol",null,[m,v,n("li",null,[s("OpenSSL-Win64 可以按照自己的需要进行下载；"),n("a",b,[s("http://slproweb.com/products/Win32OpenSSL.html"),t(a)])])]),y,g,h,n("p",null,[s("安装完成后D:\\Program Files\\OpenSSL-Win64\\bin目录下，cnf文件复制到bin目录里，否则在操作工程中如果未指定路径，会报错； "),n("a",S,[s("https://stackoverflow.com/questions/22906927/openssl-windows-error-in-req/27918971"),t(a)]),f]),w])}const q=e(i,[["render",x],["__file","2019-08-28-nettyanli，netty4.1zhongjituozhanpianshisan《NettyjiyuSSLshixianxinxichuanshuguochengzhongshuangxiangjiamiyanzheng》.html.vue"]]);export{q as default};
