import{_ as e,r as p,o,c,a as n,b as s,d as t,e as l}from"./app-3RcBQnkC.js";const i={},u=n("h1",{id:"ã€Šspring-æ‰‹æ’¸ä¸“æ ã€‹ç¬¬-14-ç« -ç¬‘å‚²æ±Ÿæ¹–-é€šè¿‡æ³¨è§£é…ç½®å’ŒåŒ…è‡ªåŠ¨æ‰«æçš„æ–¹å¼å®Œæˆbeanå¯¹è±¡çš„æ³¨å†Œ",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ã€Šspring-æ‰‹æ’¸ä¸“æ ã€‹ç¬¬-14-ç« -ç¬‘å‚²æ±Ÿæ¹–-é€šè¿‡æ³¨è§£é…ç½®å’ŒåŒ…è‡ªåŠ¨æ‰«æçš„æ–¹å¼å®Œæˆbeanå¯¹è±¡çš„æ³¨å†Œ","aria-hidden":"true"},"#"),s(" ã€ŠSpring æ‰‹æ’¸ä¸“æ ã€‹ç¬¬ 14 ç« ï¼šç¬‘å‚²æ±Ÿæ¹–ï¼Œé€šè¿‡æ³¨è§£é…ç½®å’ŒåŒ…è‡ªåŠ¨æ‰«æçš„æ–¹å¼å®ŒæˆBeanå¯¹è±¡çš„æ³¨å†Œ")],-1),r=n("br",null,null,-1),k={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},d=n("br",null,null,-1),v={href:"https://mp.weixin.qq.com/s/1BWMc9sYUB9-uz2w7TZWmw",target:"_blank",rel:"noopener noreferrer"},m=l(`<blockquote><p>æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„</p></blockquote><h2 id="ä¸€ã€å‰è¨€" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å‰è¨€" aria-hidden="true">#</a> ä¸€ã€å‰è¨€</h2><p><code>å¿’å¤æ‚ï¼Œæ²¡ç­‰ææ˜ç™½å¤§ä¿ƒéƒ½è¿‡å»äº†ï¼</code></p><p>ä½ ç»å†è¿‡<code>618</code>å’Œ<code>åŒ11</code>å—ï¼Ÿä½ åŠ å…¥è¿‡å¤§ä¿ƒæ—¶å€™é‚£ä¹ˆå¤šå¤æ‚çš„è¥é”€æ´»åŠ¨èµšå‡ æ¯›é’±å—ï¼Ÿä½ å¼€å‘è¿‡è¿è¯»æ˜ç™½ç©æ³•éƒ½éœ€è¦ä¸€å‘¨ä½†åªä½¿ç”¨3å¤©çš„å¤§ä¿ƒéœ€æ±‚å—ï¼Ÿæœ‰æ—¶å€™å¯¹äºæœ‰äº›äº§å“çš„éœ€æ±‚çœŸçš„æ˜¯å¤ªå¤æ‚äº†ï¼Œå¤æ‚åˆ°å¼€å‘ã€æµ‹è¯•éƒ½éœ€è¦åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ä¸æ–­çš„å­¦ä¹ æœ€åæ‰å¯èƒ½è¯»æ‡‚äº§å“ä¸ºå•¥è¿™æ ·çš„ç©ï¼Œè¦æ˜¯ä¸€ä¸ªé•¿æœŸçš„æ´»åŠ¨å¯èƒ½ä¹Ÿå°±ç®—äº†ï¼ŒåŸ¹å…»ç”¨æˆ·å¿ƒæ™ºå—ï¼ä½†è¿™ä¸€æ•´å¥—æ‹‰æ–°ã€åŠ©åŠ›ã€æ¿€æ´»ã€ä¸‹å•ã€æŠ•ä¿ã€é¢†åˆ¸ã€æ¶ˆè´¹ã€å¼€çº¢åŒ…ç­‰ç­‰ä¸€è¿ä¸²çš„éªšæ“ä½œä¸‹æ¥ï¼Œå¦‚æœåœ¨çº¿ä¸Šåªç”¨3å¤©å‘¢ï¼Œæˆ–è€…æ˜¯åªç”¨1å¤©ï¼Œé‚£TMè¿å‚ä¸çš„ç”¨æˆ·éƒ½æ²¡å¼„æ˜ç™½å‘¢ï¼Œæ´»åŠ¨å°±ç»“æŸäº†ï¼Œæœ€åèƒ½æ‰“æ¥ä»€ä¹ˆæ ·å¥½çš„æ•°æ®å‘¢ï¼Ÿ<em>å¯¹äºè¿™æ ·æµç¨‹å¤æ‚ï¼Œä¼°è®¡è¿ç¾Šæ¯›å½“éƒ½çœ‹ä¸ä¸Šï¼ï¼ï¼</em></p><p>ä»¥ä¸Šåªæ˜¯ä¸¾ä¸ªä¾‹å­ï¼Œå¤§éƒ¨åˆ†æ—¶å€™å¹¶ä¸ä¼šæçš„è¿™ä¹ˆæ¶å¿ƒï¼Œè¯„å®¡ä¹Ÿæ˜¯è¿‡ä¸å»çš„ï¼è€ŒåŒæ ·çš„é“ç†ç”¨åœ¨ç¨‹åºè®¾è®¡å¼€å‘å’Œä½¿ç”¨ä¸­ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œå¦‚æœä½ æŠŠä½ çš„ä»£ç é€»è¾‘å®ç°çš„è¿‡äºåˆ†æ•£ï¼Œè®©å¤–éƒ¨è°ƒç”¨æ–¹åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œéœ€è¦è°ƒç”¨ä½ çš„æ¥å£å¤šä¸ªå’Œå¤šæ¬¡ï¼Œè¿˜æ²¡æœ‰æ¶ˆæ¯è§¦è¾¾ï¼Œåªèƒ½å®šæ—¶è‡ªå·±è½®è®­ä½ çš„æ¥å£æŸ¥çœ‹è®¢å•çŠ¶æ€ï¼Œæ¯æ¬¡è¿˜åªèƒ½æŸ¥10æ¡ï¼ŒæŸ¥å¤šäº†ä½ è¯´ä¸è¡Œï¼Œç­‰ç­‰åäººç±»çš„è®¾è®¡ï¼Œéƒ½ä¼šç»™è°ƒç”¨æ–¹å¸¦æ¥è¦å¹²ä½ çš„ä½“ä¼šã€‚</p><p>æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬èƒ½åœ¨å®Œæˆç›®çš„çš„æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯å¸Œæœ›å°½å¯èƒ½æµç¨‹ç®€å•ã€æ¨¡å¼æ¸…æ™°ã€è‡ªåŠ¨æœåŠ¡ã€‚é‚£è¿™åœ¨Springçš„æ¡†æ¶ä¸­ä¹Ÿæ˜¯æœ‰æ‰€ä½“ç°çš„ï¼Œè¿™ä¸ªæ¡†æ¶çš„æ™®åŠä½¿ç”¨ç¨‹åº¦å’Œå®ƒæ‰€èƒ½å¸¦æ¥çš„æ–¹ä¾¿æ€§æ˜¯åˆ†ä¸å¼€çš„ï¼Œè€Œæˆ‘ä»¬å¦‚æœèƒ½åšåˆ°å¦‚æ­¤çš„æ–¹ä¾¿ï¼Œé‚£è‚¯å®šæ˜¯ä¸€ç§å¥½çš„è®¾è®¡å’Œå®ç°ã€‚</p><h2 id="äºŒã€ç›®æ ‡" tabindex="-1"><a class="header-anchor" href="#äºŒã€ç›®æ ‡" aria-hidden="true">#</a> äºŒã€ç›®æ ‡</h2><p>å…¶å®åˆ°æœ¬ç« èŠ‚æˆ‘ä»¬å·²ç»æŠŠå…³äº IOC å’Œ AOP å…¨éƒ¨æ ¸å¿ƒå†…å®¹éƒ½å·²ç»å®ç°å®Œæˆäº†ï¼Œåªä¸è¿‡åœ¨ä½¿ç”¨ä¸Šè¿˜æœ‰ç‚¹åƒæ—©æœŸçš„ Spring ç‰ˆæœ¬ï¼Œéœ€è¦ä¸€ä¸ªä¸€ä¸ªåœ¨ spring.xml ä¸­è¿›è¡Œé…ç½®ã€‚è¿™ä¸å®é™…çš„ç›®å‰ä½¿ç”¨çš„ Spring æ¡†æ¶è¿˜æ˜¯æœ‰è›®å¤§çš„å·®åˆ«ï¼Œè€Œè¿™ç§å·®åˆ«å…¶å®éƒ½æ˜¯åœ¨æ ¸å¿ƒåŠŸèƒ½é€»è¾‘ä¹‹ä¸Šå»ºè®¾çš„åœ¨æ›´å°‘çš„é…ç½®ä¸‹ï¼Œåšåˆ°æ›´ç®€åŒ–çš„ä½¿ç”¨ã€‚</p><p>è¿™å…¶ä¸­å°±åŒ…æ‹¬ï¼šåŒ…çš„æ‰«ææ³¨å†Œã€æ³¨è§£é…ç½®çš„ä½¿ç”¨ã€å ä½ç¬¦å±æ€§çš„å¡«å……ç­‰ç­‰ï¼Œè€Œæˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯åœ¨ç›®å‰çš„æ ¸å¿ƒé€»è¾‘ä¸Šå¡«å……ä¸€äº›è‡ªåŠ¨åŒ–çš„åŠŸèƒ½ï¼Œè®©å¤§å®¶å¯ä»¥å­¦ä¹ åˆ°è¿™éƒ¨åˆ†çš„è®¾è®¡å’Œå®ç°ï¼Œä»ä¸­ä½“ä¼šåˆ°ä¸€äº›å…³äºä»£ç é€»è¾‘çš„å®ç°è¿‡ç¨‹ï¼Œæ€»ç»“ä¸€äº›ç¼–ç ç»éªŒã€‚</p><h2 id="ä¸‰ã€æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€æ–¹æ¡ˆ" aria-hidden="true">#</a> ä¸‰ã€æ–¹æ¡ˆ</h2><p>é¦–å…ˆæˆ‘ä»¬è¦è€ƒè™‘ğŸ¤”ï¼Œä¸ºäº†å¯ä»¥ç®€åŒ– Bean å¯¹è±¡çš„é…ç½®ï¼Œè®©æ•´ä¸ª Bean å¯¹è±¡çš„æ³¨å†Œéƒ½æ˜¯è‡ªåŠ¨æ‰«æçš„ï¼Œé‚£ä¹ˆåŸºæœ¬éœ€è¦çš„å…ƒç´ åŒ…æ‹¬ï¼šæ‰«æè·¯å¾„å…¥å£ã€XMLè§£ææ‰«æä¿¡æ¯ã€ç»™éœ€è¦æ‰«æçš„Beanå¯¹è±¡åšæ³¨è§£æ ‡è®°ã€æ‰«æClasså¯¹è±¡æ‘˜å–Beanæ³¨å†Œçš„åŸºæœ¬ä¿¡æ¯ï¼Œç»„è£…æ³¨å†Œä¿¡æ¯ã€æ³¨å†ŒæˆBeanå¯¹è±¡ã€‚é‚£ä¹ˆåœ¨è¿™äº›æ¡ä»¶å…ƒç´ çš„æ”¯æ’‘ä¸‹ï¼Œå°±å¯ä»¥å®ç°å‡ºé€šè¿‡è‡ªå®šä¹‰æ³¨è§£å’Œé…ç½®æ‰«æè·¯å¾„çš„æƒ…å†µä¸‹ï¼Œå®Œæˆ Bean å¯¹è±¡çš„æ³¨å†Œã€‚é™¤æ­¤ä¹‹å¤–å†é¡ºå¸¦è§£å†³ä¸€ä¸ªé…ç½®ä¸­å ä½ç¬¦å±æ€§çš„çŸ¥è¯†ç‚¹ï¼Œæ¯”å¦‚å¯ä»¥é€šè¿‡ <code>\${token}</code> ç»™ Bean å¯¹è±¡æ³¨å…¥è¿›å»å±æ€§ä¿¡æ¯ï¼Œé‚£ä¹ˆè¿™ä¸ªæ“ä½œéœ€è¦ç”¨åˆ° BeanFactoryPostProcessorï¼Œå› ä¸ºå®ƒå¯ä»¥å¤„ç† <strong>åœ¨æ‰€æœ‰çš„ BeanDefinition åŠ è½½å®Œæˆåï¼Œå®ä¾‹åŒ– Bean å¯¹è±¡ä¹‹å‰ï¼Œæä¾›ä¿®æ”¹ BeanDefinition å±æ€§çš„æœºåˆ¶</strong> è€Œå®ç°è¿™éƒ¨åˆ†å†…å®¹æ˜¯ä¸ºäº†åç»­æŠŠæ­¤ç±»å†…å®¹ç»“åˆåˆ°è‡ªåŠ¨åŒ–é…ç½®å¤„ç†ä¸­ã€‚æ•´ä½“è®¾è®¡ç»“æ„å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://bugstack.cn/assets/images/spring/spring-14-01.png" alt=""></p><p>ç»“åˆbeançš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‰«æåªä¸è¿‡æ˜¯æ‰«æç‰¹å®šæ³¨è§£çš„ç±»ï¼Œæå–ç±»çš„ç›¸å…³ä¿¡æ¯ç»„è£…æˆBeanDefinitionæ³¨å†Œåˆ°å®¹å™¨ä¸­ã€‚</p><p>åœ¨XmlBeanDefinitionReaderä¸­è§£æ<code>&lt;context:component-scan /&gt;</code>æ ‡ç­¾ï¼Œæ‰«æç±»ç»„è£…BeanDefinitionç„¶åæ³¨å†Œåˆ°å®¹å™¨ä¸­çš„æ“ä½œåœ¨ClassPathBeanDefinitionScanner#doScanä¸­å®ç°ã€‚</p><ul><li>è‡ªåŠ¨æ‰«ææ³¨å†Œä¸»è¦æ˜¯æ‰«ææ·»åŠ äº†è‡ªå®šä¹‰æ³¨è§£çš„ç±»ï¼Œåœ¨xmlåŠ è½½è¿‡ç¨‹ä¸­æå–ç±»çš„ä¿¡æ¯ï¼Œç»„è£… BeanDefinition æ³¨å†Œåˆ° Spring å®¹å™¨ä¸­ã€‚</li><li>æ‰€ä»¥æˆ‘ä»¬ä¼šç”¨åˆ° <code>&lt;context:component-scan /&gt;</code> é…ç½®åŒ…è·¯å¾„å¹¶åœ¨ XmlBeanDefinitionReader è§£æå¹¶åšç›¸åº”çš„å¤„ç†ã€‚<em>è¿™é‡Œçš„å¤„ç†ä¼šåŒ…æ‹¬å¯¹ç±»çš„æ‰«æã€è·å–æ³¨è§£ä¿¡æ¯ç­‰</em></li><li>æœ€åè¿˜åŒ…æ‹¬äº†ä¸€éƒ¨åˆ†å…³äº <code>BeanFactoryPostProcessor</code> çš„ä½¿ç”¨ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å®Œæˆå¯¹å ä½ç¬¦é…ç½®ä¿¡æ¯çš„åŠ è½½ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨åˆ° BeanFactoryPostProcessor åœ¨æ‰€æœ‰çš„ BeanDefinition åŠ è½½å®Œæˆåï¼Œå®ä¾‹åŒ– Bean å¯¹è±¡ä¹‹å‰ï¼Œä¿®æ”¹ BeanDefinition çš„å±æ€§ä¿¡æ¯ã€‚<em>è¿™ä¸€éƒ¨åˆ†çš„å®ç°ä¹Ÿä¸ºåç»­å¤„ç†å…³äºå ä½ç¬¦é…ç½®åˆ°æ³¨è§£ä¸Šåšå‡†å¤‡</em></li></ul><h2 id="å››ã€å®ç°" tabindex="-1"><a class="header-anchor" href="#å››ã€å®ç°" aria-hidden="true">#</a> å››ã€å®ç°</h2><h3 id="_1-å·¥ç¨‹ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>small<span class="token operator">-</span>spring<span class="token operator">-</span>step<span class="token operator">-</span><span class="token number">13</span>
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â””â”€â”€ java
    â”‚       â””â”€â”€ cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>springframework
    â”‚           â”œâ”€â”€ aop
    â”‚           â”‚   â”œâ”€â”€ aspectj
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">AspectJExpressionPointcut</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">AspectJExpressionPointcutAdvisor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ framework 
    â”‚           â”‚   â”‚   â”œâ”€â”€ adapter
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ <span class="token class-name">MethodBeforeAdviceInterceptor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ autoproxy
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ <span class="token class-name">MethodBeforeAdviceInterceptor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AopProxy</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">Cglib2AopProxy</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">JdkDynamicAopProxy</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ProxyFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">ReflectiveMethodInvocation</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">AdvisedSupport</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">Advisor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">BeforeAdvice</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ClassFilter</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">MethodBeforeAdvice</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">MethodMatcher</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">Pointcut</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">PointcutAdvisor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">TargetSource</span><span class="token punctuation">.</span>java
    â”‚           â”œâ”€â”€ beans
    â”‚           â”‚   â”œâ”€â”€ factory
    â”‚           â”‚   â”‚   â”œâ”€â”€ config
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AutowireCapableBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanDefinition</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanFactoryPostProcessor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanPostProcessor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanReference</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ConfigurableBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">InstantiationAwareBeanPostProcessor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ <span class="token class-name">SingletonBeanRegistry</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ support
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractAutowireCapableBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractBeanDefinitionReader</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanDefinitionReader</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanDefinitionRegistry</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">CglibSubclassingInstantiationStrategy</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">DefaultListableBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">DefaultSingletonBeanRegistry</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">DisposableBeanAdapter</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">FactoryBeanRegistrySupport</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">InstantiationStrategy</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ <span class="token class-name">SimpleInstantiationStrategy</span><span class="token punctuation">.</span>java  
    â”‚           â”‚   â”‚   â”œâ”€â”€ support
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ <span class="token class-name">XmlBeanDefinitionReader</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">Aware</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanClassLoaderAware</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanFactoryAware</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanNameAware</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ConfigurableListableBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">DisposableBean</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">FactoryBean</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">HierarchicalBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">InitializingBean</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ListableBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">PropertyPlaceholderConfigurer</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">BeansException</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">PropertyValue</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">PropertyValues</span><span class="token punctuation">.</span>java 
    â”‚           â”œâ”€â”€ context
    â”‚           â”‚   â”œâ”€â”€ annotation
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ClassPathBeanDefinitionScanner</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ClassPathScanningCandidateComponentProvider</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">Scope</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ event
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractApplicationEventMulticaster</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationContextEvent</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationEventMulticaster</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ContextClosedEvent</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ContextRefreshedEvent</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">SimpleApplicationEventMulticaster</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ support
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractApplicationContext</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractRefreshableApplicationContext</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractXmlApplicationContext</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationContextAwareProcessor</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationContext</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationContextAware</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationEvent</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationEventPublisher</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationListener</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">ConfigurableApplicationContext</span><span class="token punctuation">.</span>java
    â”‚           â”œâ”€â”€ core<span class="token punctuation">.</span>io
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ClassPathResource</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">DefaultResourceLoader</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">FileSystemResource</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">Resource</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ResourceLoader</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">UrlResource</span><span class="token punctuation">.</span>java
    â”‚           â”œâ”€â”€ stereotype
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">Component</span><span class="token punctuation">.</span>java
    â”‚           â””â”€â”€ utils
    â”‚               â””â”€â”€ <span class="token class-name">ClassUtils</span><span class="token punctuation">.</span>java
    â””â”€â”€ test
        â””â”€â”€ java
            â””â”€â”€ cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test
                â”œâ”€â”€ bean
                â”‚   â”œâ”€â”€ <span class="token class-name">IUserService</span><span class="token punctuation">.</span>java
                â”‚   â””â”€â”€ <span class="token class-name">UserService</span><span class="token punctuation">.</span>java
                â””â”€â”€ <span class="token class-name">ApiTest</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å·¥ç¨‹æºç </strong>ï¼š<code>å…¬ä¼—å·ã€Œbugstackè™«æ´æ ˆã€ï¼Œå›å¤ï¼šSpring ä¸“æ ï¼Œè·å–å®Œæ•´æºç </code></p><p>åœ¨Beançš„ç”Ÿå‘½å‘¨æœŸä¸­è‡ªåŠ¨åŠ è½½åŒ…æ‰«ææ³¨å†ŒBeanå¯¹è±¡å’Œè®¾ç½®å ä½ç¬¦å±æ€§çš„ç±»å…³ç³»ï¼Œå¦‚å›¾ 14-2</p><p><img src="https://bugstack.cn/assets/images/spring/spring-14-02.png" alt="å›¾ 14-2"></p><ul><li>æ•´ä¸ªç±»çš„å…³ç³»ç»“æ„æ¥çœ‹ï¼Œå…¶å®æ¶‰åŠçš„å†…å®¹å¹¶ä¸å¤šï¼Œä¸»è¦åŒ…æ‹¬çš„å°±æ˜¯ xml è§£æç±» XmlBeanDefinitionReader å¯¹ ClassPathBeanDefinitionScanner#doScan çš„ä½¿ç”¨ã€‚</li><li>åœ¨ doScan æ–¹æ³•ä¸­å¤„ç†æ‰€æœ‰æŒ‡å®šè·¯å¾„ä¸‹æ·»åŠ äº†æ³¨è§£çš„ç±»ï¼Œæ‹†è§£å‡ºç±»çš„ä¿¡æ¯ï¼šåç§°ã€ä½œç”¨èŒƒå›´ç­‰ï¼Œè¿›è¡Œåˆ›å»º BeanDefinition å¥½ç”¨äº Bean å¯¹è±¡çš„æ³¨å†Œæ“ä½œã€‚</li><li>PropertyPlaceholderConfigurer ç›®å‰çœ‹ä¸Šå»åƒä¸€å—å•ç‹¬çš„å†…å®¹ï¼Œåç»­ä¼šæŠŠè¿™å—çš„å†…å®¹ä¸è‡ªåŠ¨åŠ è½½ Bean å¯¹è±¡è¿›è¡Œæ•´åˆï¼Œä¹Ÿå°±æ˜¯å¯ä»¥åœ¨æ³¨è§£ä¸Šä½¿ç”¨å ä½ç¬¦é…ç½®ä¸€äº›åœ¨é…ç½®æ–‡ä»¶é‡Œçš„å±æ€§ä¿¡æ¯ã€‚</li></ul><h3 id="_2-å¤„ç†å ä½ç¬¦é…ç½®" tabindex="-1"><a class="header-anchor" href="#_2-å¤„ç†å ä½ç¬¦é…ç½®" aria-hidden="true">#</a> 2. å¤„ç†å ä½ç¬¦é…ç½®</h3><p><strong>cn.bugstack.springframework.beans.factory.PropertyPlaceholderConfigurer</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PropertyPlaceholderConfigurer</span> <span class="token keyword">implements</span> <span class="token class-name">BeanFactoryPostProcessor</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * Default placeholder prefix: <span class="token punctuation">{</span><span class="token keyword">@value</span><span class="token punctuation">}</span>
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">DEFAULT_PLACEHOLDER_PREFIX</span> <span class="token operator">=</span> <span class="token string">&quot;\${&quot;</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * Default placeholder suffix: <span class="token punctuation">{</span><span class="token keyword">@value</span><span class="token punctuation">}</span>
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">DEFAULT_PLACEHOLDER_SUFFIX</span> <span class="token operator">=</span> <span class="token string">&quot;}&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> location<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postProcessBeanFactory</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableListableBeanFactory</span> beanFactory<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token comment">// åŠ è½½å±æ€§æ–‡ä»¶</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">DefaultResourceLoader</span> resourceLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultResourceLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Resource</span> resource <span class="token operator">=</span> resourceLoader<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>resource<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> beanDefinitionNames <span class="token operator">=</span> beanFactory<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> beanName <span class="token operator">:</span> beanDefinitionNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> beanFactory<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token class-name">PropertyValues</span> propertyValues <span class="token operator">=</span> beanDefinition<span class="token punctuation">.</span><span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> propertyValue <span class="token operator">:</span> propertyValues<span class="token punctuation">.</span><span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Object</span> value <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>value <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
                    <span class="token class-name">String</span> strVal <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> value<span class="token punctuation">;</span>
                    <span class="token class-name">StringBuilder</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span>strVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">int</span> startIdx <span class="token operator">=</span> strVal<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_PLACEHOLDER_PREFIX</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">int</span> stopIdx <span class="token operator">=</span> strVal<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_PLACEHOLDER_SUFFIX</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>startIdx <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> stopIdx <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> startIdx <span class="token operator">&lt;</span> stopIdx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token class-name">String</span> propKey <span class="token operator">=</span> strVal<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>startIdx <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> stopIdx<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">String</span> propVal <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span>propKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        buffer<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>startIdx<span class="token punctuation">,</span> stopIdx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> propVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        propertyValues<span class="token punctuation">.</span><span class="token function">addPropertyValue</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span>propertyValue<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> buffer<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BeansException</span><span class="token punctuation">(</span><span class="token string">&quot;Could not load properties&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLocation</span><span class="token punctuation">(</span><span class="token class-name">String</span> location<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>location <span class="token operator">=</span> location<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä¾èµ–äº BeanFactoryPostProcessor åœ¨ Bean ç”Ÿå‘½å‘¨æœŸçš„å±æ€§ï¼Œå¯ä»¥åœ¨ Bean å¯¹è±¡å®ä¾‹åŒ–ä¹‹å‰ï¼Œæ”¹å˜å±æ€§ä¿¡æ¯ã€‚æ‰€ä»¥è¿™é‡Œé€šè¿‡å®ç° BeanFactoryPostProcessor æ¥å£ï¼Œå®Œæˆå¯¹é…ç½®æ–‡ä»¶çš„åŠ è½½ä»¥åŠæ‘˜å–å ä½ç¬¦ä¸­çš„åœ¨å±æ€§æ–‡ä»¶é‡Œçš„é…ç½®ã€‚</li><li>è¿™æ ·å°±å¯ä»¥æŠŠæå–åˆ°çš„é…ç½®ä¿¡æ¯æ”¾ç½®åˆ°å±æ€§é…ç½®ä¸­äº†ï¼Œ<code>buffer.replace(startIdx, stopIdx + 1, propVal); propertyValues.addPropertyValue</code></li></ul><h3 id="_3-å®šä¹‰æ‹¦æˆªæ³¨è§£" tabindex="-1"><a class="header-anchor" href="#_3-å®šä¹‰æ‹¦æˆªæ³¨è§£" aria-hidden="true">#</a> 3. å®šä¹‰æ‹¦æˆªæ³¨è§£</h3><p><strong>cn.bugstack.springframework.context.annotation.Scope</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">,</span> <span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Scope</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;singleton&quot;</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç”¨äºé…ç½®ä½œç”¨åŸŸçš„è‡ªå®šä¹‰æ³¨è§£ï¼Œæ–¹ä¾¿é€šè¿‡é…ç½®Beanå¯¹è±¡æ³¨è§£çš„æ—¶å€™ï¼Œæ‹¿åˆ°Beanå¯¹è±¡çš„ä½œç”¨åŸŸã€‚<em>ä¸è¿‡ä¸€èˆ¬éƒ½ä½¿ç”¨é»˜è®¤çš„ singleton</em></li></ul><p><strong>cn.bugstack.springframework.stereotype.Component</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Component è‡ªå®šä¹‰æ³¨è§£å¤§å®¶éƒ½éå¸¸ç†Ÿæ‚‰äº†ï¼Œç”¨äºé…ç½®åˆ° Class ç±»ä¸Šçš„ã€‚é™¤æ­¤ä¹‹å¤–è¿˜æœ‰ Serviceã€Controllerï¼Œä¸è¿‡æ‰€æœ‰çš„å¤„ç†æ–¹å¼åŸºæœ¬ä¸€è‡´ï¼Œè¿™é‡Œå°±åªå±•ç¤ºä¸€ä¸ª Component å³å¯ã€‚</li></ul><h3 id="_4-å¤„ç†å¯¹è±¡æ‰«æè£…é…" tabindex="-1"><a class="header-anchor" href="#_4-å¤„ç†å¯¹è±¡æ‰«æè£…é…" aria-hidden="true">#</a> 4. å¤„ç†å¯¹è±¡æ‰«æè£…é…</h3><p><strong>cn.bugstack.springframework.context.annotation.ClassPathScanningCandidateComponentProvider</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassPathScanningCandidateComponentProvider</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BeanDefinition</span><span class="token punctuation">&gt;</span></span> <span class="token function">findCandidateComponents</span><span class="token punctuation">(</span><span class="token class-name">String</span> basePackage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BeanDefinition</span><span class="token punctuation">&gt;</span></span> candidates <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Class</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> classes <span class="token operator">=</span> <span class="token class-name">ClassUtil</span><span class="token punctuation">.</span><span class="token function">scanPackageByAnnotation</span><span class="token punctuation">(</span>basePackage<span class="token punctuation">,</span> <span class="token class-name">Component</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">:</span> classes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            candidates<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">(</span>clazz<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> candidates<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™é‡Œå…ˆè¦æä¾›ä¸€ä¸ªå¯ä»¥é€šè¿‡é…ç½®è·¯å¾„ <code>basePackage=cn.bugstack.springframework.test.bean</code>ï¼Œè§£æå‡º classes ä¿¡æ¯çš„å·¥å…·æ–¹æ³• findCandidateComponentsï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•å°±å¯ä»¥æ‰«æåˆ°æ‰€æœ‰ @Component æ³¨è§£çš„ Bean å¯¹è±¡äº†ã€‚</li></ul><p><strong>cn.bugstack.springframework.context.annotation.ClassPathBeanDefinitionScanner</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassPathBeanDefinitionScanner</span> <span class="token keyword">extends</span> <span class="token class-name">ClassPathScanningCandidateComponentProvider</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ClassPathBeanDefinitionScanner</span><span class="token punctuation">(</span><span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>registry <span class="token operator">=</span> registry<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doScan</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> basePackages<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> basePackage <span class="token operator">:</span> basePackages<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BeanDefinition</span><span class="token punctuation">&gt;</span></span> candidates <span class="token operator">=</span> <span class="token function">findCandidateComponents</span><span class="token punctuation">(</span>basePackage<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">:</span> candidates<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// è§£æ Bean çš„ä½œç”¨åŸŸ singletonã€prototype</span>
                <span class="token class-name">String</span> beanScope <span class="token operator">=</span> <span class="token function">resolveBeanScope</span><span class="token punctuation">(</span>beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>beanScope<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    beanDefinition<span class="token punctuation">.</span><span class="token function">setScope</span><span class="token punctuation">(</span>beanScope<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                registry<span class="token punctuation">.</span><span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token function">determineBeanName</span><span class="token punctuation">(</span>beanDefinition<span class="token punctuation">)</span><span class="token punctuation">,</span> beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">resolveBeanScope</span><span class="token punctuation">(</span><span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> beanClass <span class="token operator">=</span> beanDefinition<span class="token punctuation">.</span><span class="token function">getBeanClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Scope</span> scope <span class="token operator">=</span> beanClass<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Scope</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> scope<span class="token punctuation">)</span> <span class="token keyword">return</span> scope<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token constant">EMPTY</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">determineBeanName</span><span class="token punctuation">(</span><span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> beanClass <span class="token operator">=</span> beanDefinition<span class="token punctuation">.</span><span class="token function">getBeanClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Component</span> component <span class="token operator">=</span> beanClass<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Component</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> value <span class="token operator">=</span> component<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            value <span class="token operator">=</span> <span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">lowerFirst</span><span class="token punctuation">(</span>beanClass<span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ClassPathBeanDefinitionScanner æ˜¯ç»§æ‰¿è‡ª ClassPathScanningCandidateComponentProvider çš„å…·ä½“æ‰«æåŒ…å¤„ç†çš„ç±»ï¼Œåœ¨ doScan ä¸­é™¤äº†è·å–åˆ°æ‰«æçš„ç±»ä¿¡æ¯ä»¥åï¼Œè¿˜éœ€è¦è·å– Bean çš„ä½œç”¨åŸŸå’Œç±»åï¼Œå¦‚æœä¸é…ç½®ç±»ååŸºæœ¬éƒ½æ˜¯æŠŠé¦–å­—æ¯ç¼©å†™ã€‚</li></ul><h3 id="_5-è§£æxmlä¸­è°ƒç”¨æ‰«æ" tabindex="-1"><a class="header-anchor" href="#_5-è§£æxmlä¸­è°ƒç”¨æ‰«æ" aria-hidden="true">#</a> 5. è§£æxmlä¸­è°ƒç”¨æ‰«æ</h3><p><strong>cn.bugstack.springframework.beans.factory.xml.XmlBeanDefinitionReader</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XmlBeanDefinitionReader</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBeanDefinitionReader</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doLoadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">InputStream</span> inputStream<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">DocumentException</span> <span class="token punctuation">{</span>
        <span class="token class-name">SAXReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SAXReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Document</span> document <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Element</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getRootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// è§£æ context:component-scan æ ‡ç­¾ï¼Œæ‰«æåŒ…ä¸­çš„ç±»å¹¶æå–ç›¸å…³ä¿¡æ¯ï¼Œç”¨äºç»„è£… BeanDefinition</span>
        <span class="token class-name">Element</span> componentScan <span class="token operator">=</span> root<span class="token punctuation">.</span><span class="token function">element</span><span class="token punctuation">(</span><span class="token string">&quot;component-scan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> componentScan<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> scanPath <span class="token operator">=</span> componentScan<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">&quot;base-package&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>scanPath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BeansException</span><span class="token punctuation">(</span><span class="token string">&quot;The value of base-package attribute can not be empty or null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">scanPackage</span><span class="token punctuation">(</span>scanPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
       
        <span class="token comment">// ... çœç•¥å…¶ä»–</span>
            
        <span class="token comment">// æ³¨å†Œ BeanDefinition</span>
        <span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">scanPackage</span><span class="token punctuation">(</span><span class="token class-name">String</span> scanPath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> basePackages <span class="token operator">=</span> <span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">splitToArray</span><span class="token punctuation">(</span>scanPath<span class="token punctuation">,</span> <span class="token char">&#39;,&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ClassPathBeanDefinitionScanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathBeanDefinitionScanner</span><span class="token punctuation">(</span><span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        scanner<span class="token punctuation">.</span><span class="token function">doScan</span><span class="token punctuation">(</span>basePackages<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å…³äº XmlBeanDefinitionReader ä¸­ä¸»è¦æ˜¯åœ¨åŠ è½½é…ç½®æ–‡ä»¶åï¼Œå¤„ç†æ–°å¢çš„è‡ªå®šä¹‰é…ç½®å±æ€§ <code>component-scan</code>ï¼Œè§£æåè°ƒç”¨ scanPackage æ–¹æ³•ï¼Œå…¶å®ä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ ClassPathBeanDefinitionScanner#doScan åŠŸèƒ½ã€‚</li><li>å¦å¤–è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œä¸ºäº†å¯ä»¥æ–¹ä¾¿çš„åŠ è½½å’Œè§£æxmlï¼ŒXmlBeanDefinitionReader å·²ç»å…¨éƒ¨æ›¿æ¢ä¸º dom4j çš„æ–¹å¼è¿›è¡Œè§£æå¤„ç†ã€‚</li></ul><h2 id="äº”ã€æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#äº”ã€æµ‹è¯•" aria-hidden="true">#</a> äº”ã€æµ‹è¯•</h2><h3 id="_1-äº‹å…ˆå‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#_1-äº‹å…ˆå‡†å¤‡" aria-hidden="true">#</a> 1. äº‹å…ˆå‡†å¤‡</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span><span class="token punctuation">(</span><span class="token string">&quot;userService&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token keyword">implements</span> <span class="token class-name">IUserService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> token<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">queryUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">&quot;å°å‚…å“¥ï¼Œ100001ï¼Œæ·±åœ³&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">String</span> userName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">&quot;æ³¨å†Œç”¨æˆ·ï¼š&quot;</span> <span class="token operator">+</span> userName <span class="token operator">+</span> <span class="token string">&quot; successï¼&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;UserService#token = { &quot;</span> <span class="token operator">+</span> token <span class="token operator">+</span> <span class="token string">&quot; }&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> token<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>token <span class="token operator">=</span> token<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç»™ UserService ç±»æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰æ³¨è§£ <code>@Component(&quot;userService&quot;)</code> å’Œä¸€ä¸ªå±æ€§ä¿¡æ¯ <code>String token</code>ã€‚è¿™æ˜¯ä¸ºäº†åˆ†åˆ«æµ‹è¯•åŒ…æ‰«æå’Œå ä½ç¬¦å±æ€§ã€‚</li></ul><h3 id="_2-å±æ€§é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_2-å±æ€§é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> 2. å±æ€§é…ç½®æ–‡ä»¶</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>token<span class="token operator">=</span><span class="token class-name">RejDlI78hu223Opo983Ds</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>è¿™é‡Œé…ç½®ä¸€ä¸ª token çš„å±æ€§ä¿¡æ¯ï¼Œç”¨äºé€šè¿‡å ä½ç¬¦çš„æ–¹å¼è¿›è¡Œè·å–</li></ul><h3 id="_3-spring-xml-é…ç½®å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#_3-spring-xml-é…ç½®å¯¹è±¡" aria-hidden="true">#</a> 3. spring.xml é…ç½®å¯¹è±¡</h3><p><strong>spring-property.xml</strong></p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
	         http://www.springframework.org/schema/beans/spring-beans.xsd
		 http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.bugstack.springframework.beans.factory.PropertyPlaceholderConfigurer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>location<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classpath:token.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.bugstack.springframework.test.bean.UserService<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>token<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${token}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åŠ è½½ <code>classpath:token.properties</code> è®¾ç½®å ä½ç¬¦å±æ€§å€¼ <code>\${token}</code></li></ul><p><strong>spring-scan.xml</strong></p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
	         http://www.springframework.org/schema/beans/spring-beans.xsd
		 http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.bugstack.springframework.test.bean<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ·»åŠ  <code>component-scan</code> å±æ€§ï¼Œè®¾ç½®åŒ…æ‰«ææ ¹è·¯å¾„</li></ul><h3 id="_4-å•å…ƒæµ‹è¯•-å ä½ç¬¦" tabindex="-1"><a class="header-anchor" href="#_4-å•å…ƒæµ‹è¯•-å ä½ç¬¦" aria-hidden="true">#</a> 4. å•å…ƒæµ‹è¯•(å ä½ç¬¦)</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_property</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ClassPathXmlApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:spring-property.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">IUserService</span> userService <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;userService&quot;</span><span class="token punctuation">,</span> <span class="token class-name">IUserService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœï¼š&quot;</span> <span class="token operator">+</span> userService<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æµ‹è¯•ç»“æœ</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>æµ‹è¯•ç»“æœï¼š<span class="token class-name">UserService</span>#token <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token class-name">RejDlI78hu223Opo983Ds</span> <span class="token punctuation">}</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é€šè¿‡æµ‹è¯•ç»“æœå¯ä»¥çœ‹åˆ° UserService ä¸­çš„ token å±æ€§å·²ç»é€šè¿‡å ä½ç¬¦çš„æ–¹å¼è®¾ç½®è¿›å»é…ç½®æ–‡ä»¶é‡Œçš„ <code>token.properties</code> çš„å±æ€§å€¼äº†ã€‚</li></ul><h3 id="_5-å•å…ƒæµ‹è¯•-åŒ…æ‰«æ" tabindex="-1"><a class="header-anchor" href="#_5-å•å…ƒæµ‹è¯•-åŒ…æ‰«æ" aria-hidden="true">#</a> 5. å•å…ƒæµ‹è¯•(åŒ…æ‰«æ)</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ClassPathXmlApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:spring-scan.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">IUserService</span> userService <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;userService&quot;</span><span class="token punctuation">,</span> <span class="token class-name">IUserService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœï¼š&quot;</span> <span class="token operator">+</span> userService<span class="token punctuation">.</span><span class="token function">queryUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æµ‹è¯•ç»“æœ</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>æµ‹è¯•ç»“æœï¼šå°å‚…å“¥ï¼Œ<span class="token number">100001</span>ï¼Œæ·±åœ³

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é€šè¿‡è¿™ä¸ªæµ‹è¯•ç»“æœå¯ä»¥çœ‹å‡ºæ¥ï¼Œç°åœ¨ä½¿ç”¨æ³¨è§£çš„æ–¹å¼å°±å¯ä»¥è®© Class æ³¨å†Œå®Œæˆ Bean å¯¹è±¡äº†ã€‚</li></ul><h2 id="å…­ã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#å…­ã€æ€»ç»“" aria-hidden="true">#</a> å…­ã€æ€»ç»“</h2><ul><li>é€šè¿‡æ•´ç¯‡çš„å†…å®¹å®ç°å¯ä»¥çœ‹å‡ºæ¥ï¼Œç›®å‰çš„åŠŸèƒ½æ·»åŠ å…¶å®å·²ç»ä¸å¤æ‚äº†ï¼Œéƒ½æ˜¯åœ¨ IOC å’Œ AOP æ ¸å¿ƒçš„åŸºç¡€ä¸Šæ¥è¡¥å…¨åŠŸèƒ½ã€‚è¿™äº›è¡¥å…¨çš„åŠŸèƒ½ä¹Ÿæ˜¯åœ¨å®Œå–„ Bean çš„ç”Ÿå‘½å‘¨æœŸï¼Œè®©æ•´ä¸ªåŠŸèƒ½ä½¿ç”¨ä¹Ÿè¶Šæ¥è¶Šå®¹æ˜“ã€‚</li><li>åœ¨ä½ ä¸æ–­çš„å®ç°ç€ Spring çš„å„é¡¹åŠŸèƒ½æ—¶ï¼Œä¹Ÿå¯ä»¥æŠŠè‡ªå·±åœ¨å¹³å¸¸ä½¿ç”¨ Spring çš„ä¸€äº›åŠŸèƒ½æƒ³æ³•èå…¥è¿›æ¥ï¼Œæ¯”å¦‚åƒ Spring æ˜¯å¦‚ä½•åŠ¨æ€åˆ‡æ¢æ•°æ®æºçš„ï¼Œçº¿ç¨‹æ± æ˜¯æ€ä¹ˆæä¾›é…ç½®çš„ï¼Œè¿™äº›å†…å®¹è™½ç„¶ä¸æ˜¯æœ€åŸºç¡€çš„æ ¸å¿ƒèŒƒå›´ï¼Œä½†ä¹Ÿéå¸¸é‡è¦ã€‚</li><li>å¯èƒ½æœ‰äº›æ—¶å€™è¿™äº›ç±»å®ç°çš„å†…å®¹å¯¹æ–°äººæ¥è¯´æ¯”è¾ƒå¤šï¼Œå¯ä»¥ä¸€ç‚¹ç‚¹åŠ¨æ‰‹å®ç°é€æ­¥ç†è§£ï¼Œåœ¨æŠŠä¸€äº›ç¨å¾®è¾ƒæœ‰éš¾åº¦çš„å†…å®¹å®ç°åï¼Œå…¶å®åé¢ä¹Ÿå°±æ²¡æœ‰é‚£ä¹ˆéš¾ç†è§£äº†ã€‚</li></ul><h2 id="ä¸ƒã€ä¼˜ç§€ä½œä¸š" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€ä¼˜ç§€ä½œä¸š" aria-hidden="true">#</a> ä¸ƒã€ä¼˜ç§€ä½œä¸š</h2>`,71),b={href:"https://t.zsxq.com/05ZjYbyJA",target:"_blank",rel:"noopener noreferrer"},g={href:"https://t.zsxq.com/06URR3ZBq",target:"_blank",rel:"noopener noreferrer"},f={href:"https://t.zsxq.com/089S6Zf5P",target:"_blank",rel:"noopener noreferrer"},h=n("code",null,"<bean>",-1),y={href:"https://t.zsxq.com/08gaH0bTk",target:"_blank",rel:"noopener noreferrer"},w={href:"https://t.zsxq.com/084AWdKED",target:"_blank",rel:"noopener noreferrer"},x={href:"https://t.zsxq.com/0bb6gydsQ",target:"_blank",rel:"noopener noreferrer"};function S(B,j){const a=p("ExternalLinkIcon");return o(),c("div",null,[u,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),r,s("åšå®¢ï¼š"),n("a",k,[s("https://bugstack.cn"),t(a)]),d,s("åŸæ–‡ï¼š"),n("a",v,[s("https://mp.weixin.qq.com/s/1BWMc9sYUB9-uz2w7TZWmw"),t(a)])]),m,n("ul",null,[n("li",null,[n("a",b,[s("åˆ©ç”¨è‡ªå®šä¹‰æ³¨è§£ å®ç°Beançš„è‡ªåŠ¨åŒ–æ‰«ææ³¨å†Œ @Rechie"),t(a)])]),n("li",null,[n("a",g,[s("è§£å†³åŒ…æ‰«æé—®é¢˜ä»¥åŠ${}å­—ç¬¦æ˜ å°„ @Chin"),t(a)])]),n("li",null,[n("a",f,[s("ç›®å‰éœ€è¦åœ¨spring.xmlä¸­é…ç½®"),h,s("ï¼Œæ‰å¯ä»¥ä½¿ç”¨ä½¿ç”¨Springå®¹å™¨å®ŒæˆBeançš„ç”Ÿå‘½å‘¨æœŸ @liuc"),t(a)])]),n("li",null,[n("a",y,[s("è¿™ä¸€ç« èŠ‚æ¯”è¾ƒç®€å•ï¼Œä¸»è¦æ˜¯è¿›ä¸€æ­¥ç®€åŒ–é…ç½®æ–‡ä»¶æ“ä½œï¼Œæ‰«ææŒ‡å®šè·¯å¾„å¹¶é€šè¿‡æ³¨è§£å®Œæˆ Bean çš„æ³¨å†Œã€‚ @Homage"),t(a)])]),n("li",null,[n("a",w,[s("åœ¨å®ç°è‡ªåŠ¨æ‰«æå¸¦ @Component æ³¨è§£çš„å¯¹è±¡è‡ªåŠ¨è£…é…å’Œæ³¨å†Œçš„åŸºç¡€ä¸Šï¼Œé¢å¯ä»¥ä½¿ç”¨ @Autowiredã€@Value æ³¨è§£ï¼Œå®Œæˆå¯¹å±æ€§å’Œå¯¹è±¡çš„æ³¨å…¥æ“ä½œã€‚@æ°´ä¸­ææœˆ"),t(a)])]),n("li",null,[n("a",x,[s("åœ¨åˆ›å»º Bean å¯¹è±¡ä¹‹å‰ï¼Œè¦å…ˆè·å–åˆ° Bean çš„å±æ€§ä¿¡æ¯ç»„è£…æˆ BeanDefinition @lucien"),t(a)])])])])}const C=e(i,[["render",S],["__file","2021-07-27-di14zhangï¼šxiaoaojianghuï¼ŒtongguozhujiepeizhihebaozidongsaomiaodefangshiwanchengBeanduixiangdezhuce.html.vue"]]);export{C as default};
