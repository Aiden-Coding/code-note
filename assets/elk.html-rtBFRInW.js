import{_ as p,r as o,o as l,c,a,b as s,d as e,e as t}from"./app-3RcBQnkC.js";const r={},i=a("h1",{id:"elk-ä½¿ç”¨æ•™ç¨‹é‡‡é›†ç³»ç»Ÿæ—¥å¿—-elasticsearchã€logstashã€kibana",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#elk-ä½¿ç”¨æ•™ç¨‹é‡‡é›†ç³»ç»Ÿæ—¥å¿—-elasticsearchã€logstashã€kibana","aria-hidden":"true"},"#"),s(" ELK ä½¿ç”¨æ•™ç¨‹é‡‡é›†ç³»ç»Ÿæ—¥å¿— Elasticsearchã€Logstashã€Kibana")],-1),u=a("br",null,null,-1),d={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},k=a("blockquote",null,[a("p",null,"æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„")],-1),m=a("iframe",{id:"B-Video",src:"//player.bilibili.com/player.html?aid=664765195&bvid=BV1pa4y1R7Rh&cid=1369260100&p=1",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true",width:"100%",height:"480"}," ",-1),v={href:"https://bugstack.cn/md/road-map/ratelimiter.html",target:"_blank",rel:"noopener noreferrer"},h={href:"https://bugstack.cn/md/road-map/grafana.html",target:"_blank",rel:"noopener noreferrer"},b=a("p",null,"æœ¬æ–‡æ¶‰åŠçš„å·¥ç¨‹ï¼š",-1),g={href:"https://gitcode.net/KnowledgePlanet/road-map/xfg-dev-tech-elk",target:"_blank",rel:"noopener noreferrer"},_={href:"https://www.elastic.co/cn/",target:"_blank",rel:"noopener noreferrer"},f=t(`<h2 id="ä¸€ã€ç®€è¦è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€ç®€è¦è¯´æ˜" aria-hidden="true">#</a> ä¸€ã€ç®€è¦è¯´æ˜</h2><p>Elastic Stack æŠ€æœ¯æ ˆï¼Œåˆ«æ˜¯ <code>Elasticsearch</code>ã€<code>Logstash</code>ã€<code>Kibana</code> ç»„æˆï¼Œç®€ç§° ELK æ˜¯ä¸€å¥—é’ˆå¯¹æ—¥å¿—æ•°æ®åšè§£å†³æ–¹æ¡ˆçš„æ¡†æ¶ã€‚å®ƒä½¿æ‚¨èƒ½å¤Ÿèšåˆæ¥è‡ªæ‰€æœ‰ç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºçš„æ—¥å¿—ï¼Œåˆ†æè¿™äº›æ—¥å¿—ï¼Œå¹¶åˆ›å»ºå¯è§†åŒ–æ¥è¿›è¡Œåº”ç”¨ç¨‹åºå’ŒåŸºç¡€è®¾æ–½ç›‘æ§ã€æ›´å¿«çš„æ•…éšœæ’é™¤ã€å®‰å…¨åˆ†æç­‰ã€‚</p><ul><li>E = Elasticsearchï¼šElasticsearch æ˜¯åœ¨ Apache Lucene ä¸Šæ„å»ºçš„åˆ†å¸ƒå¼æœç´¢å’Œåˆ†æå¼•æ“ã€‚å¯¹å„ç§è¯­è¨€ã€é«˜æ€§èƒ½å’Œæ— æ¶æ„ JSON æ–‡æ¡£çš„æ”¯æŒä½¿ Elasticsearch æˆä¸ºå„ç§æ—¥å¿—åˆ†æå’Œæœç´¢ä½¿ç”¨æ¡ˆä¾‹çš„ç†æƒ³é€‰æ‹©ã€‚</li><li>L = Logstashï¼šLogstash æ˜¯ä¸€ä¸ªå¼€æºæ•°æ®æ‘„å–å·¥å…·ï¼Œå…è®¸æ‚¨ä»å„ç§æ¥æºæ”¶é›†æ•°æ®ï¼Œè½¬æ¢æ•°æ®ï¼Œå¹¶å°†æ•°æ®å‘é€åˆ°æ‚¨å¸Œæœ›çš„ç›®æ ‡ã€‚é€šè¿‡é¢„æ„å»ºçš„ç­›é€‰å™¨å’Œå¯¹ 200 å¤šç§æ’ä»¶çš„æ”¯æŒï¼ŒLogstash ä½¿ç”¨æˆ·èƒ½å¤Ÿè½»æ¾æ‘„å–æ•°æ®ï¼Œæ— è®ºæ•°æ®æºæˆ–ç±»å‹å¦‚ä½•ã€‚</li><li>K = Kibanaï¼šKibana æ˜¯ä¸€ç§æ•°æ®å¯è§†åŒ–å’ŒæŒ–æ˜å·¥å…·ï¼Œå¯ä»¥ç”¨äºæ—¥å¿—å’Œæ—¶é—´åºåˆ—åˆ†æã€åº”ç”¨ç¨‹åºç›‘æ§å’Œè¿è¥æ™ºèƒ½ä½¿ç”¨æ¡ˆä¾‹ã€‚å®ƒæä¾›äº†å¼ºå¤§ä¸”æ˜“ç”¨çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ç›´æ–¹å›¾ã€çº¿å½¢å›¾ã€é¥¼å›¾ã€çƒ­å›¾å’Œå†…ç½®çš„åœ°ç†ç©ºé—´æ”¯æŒã€‚æ­¤å¤–ï¼Œä»˜è´¹çš„ Kibana è¿˜æœ‰ x-pack-jdbc å¯ä»¥ä½¿ç”¨ï¼Œè®©ä½ å°±åƒä½¿ç”¨ MyBatis æ“ä½œ MySQL æ•°æ®åº“ä¸€æ ·æ“ä½œ Elasticsearch æ•°æ®ã€‚</li></ul><p>ç»¼ä¸Šï¼Œ3ä¸ªç»„ä»¶çš„ç»„åˆä½¿ç”¨ã€‚ç”± Logstash å°†æ‘„å–ã€è½¬æ¢æ•°æ®å¹¶å°†å…¶å‘é€åˆ° Elasticsearch ä¸ºæ‘„å–çš„æ•°æ®ç¼–åˆ¶ç´¢å¼•ï¼Œå¹¶ä¸”åˆ†æå’Œæœç´¢è¿™äº›æ•°æ®ã€‚æœ€ç»ˆ Kibana ä¼šå°†åˆ†æç»“æœå¯è§†åŒ–ã€‚ä¹Ÿå°±æ˜¯ä½ å¯ä»¥åœ¨ Kibana ä¸Šå®æ—¶çœ‹åˆ°ç³»ç»Ÿçš„è¿è¡Œæ—¥å¿—ã€‚</p><h2 id="äºŒã€ç¯å¢ƒé…ç½®" tabindex="-1"><a class="header-anchor" href="#äºŒã€ç¯å¢ƒé…ç½®" aria-hidden="true">#</a> äºŒã€ç¯å¢ƒé…ç½®</h2><p>è¿™é‡Œå°å‚…å“¥åšäº†ä¸ªå·¥ç¨‹æ¡ˆä¾‹ï¼Œå¹¶é…æœ‰å¯¹åº”çš„ç¯å¢ƒå®‰è£…ã€æ—¥å¿—ä¸ŠæŠ¥ï¼Œä½ åªéœ€è¦è·Ÿéšæ¥ä¸‹æ¥çš„æ–‡ç« è¯´æ˜ï¼Œå³å¯çŸ¥é“ ELK å¦‚ä½•é…ç½®å’Œä½¿ç”¨ã€‚</p><div align="center"><img src="https://bugstack.cn/images/roadmap/tutorial/road-map-elk-01.png?raw=true" width="600px"></div><ul><li>ç¯å¢ƒï¼›jdk 1.8ã€Maven 3.6.xã€Docker</li><li>ç»„ä»¶ï¼›ELK version 7.17.14 æ”¯æŒ ARM&amp;AMD</li><li>ä»£ç ï¼›åœ¨ xfg-dev-tech-elk æµ‹è¯•å·¥ç¨‹ä¸­æä¾›äº†æµ‹è¯•ä»£ç å’Œç¯å¢ƒå®‰è£…ï¼Œç»¿è‰²æŒ‰é’®ç‚¹å‡»å³å¯å®‰è£…ã€ç¡®ä¿ä½ å·²ç»æœ¬åœ°å®‰è£…äº† Dockerã€‘</li></ul><h3 id="_1-ç¯å¢ƒé…ç½®" tabindex="-1"><a class="header-anchor" href="#_1-ç¯å¢ƒé…ç½®" aria-hidden="true">#</a> 1. ç¯å¢ƒé…ç½®</h3><div align="center"><img src="https://bugstack.cn/images/roadmap/tutorial/road-map-elk-02.png?raw=true" width="600px"></div><ul><li>docker-compose.yml è¿è¡Œæ—¶ä¼šåŠ è½½ä¸‹é¢çš„ kibanaã€logstash é…ç½®ä¿¡æ¯ã€‚</li><li>kibana.yml è®¾ç½®äº†èµ„æºçš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬ ES çš„è¿æ¥ï¼Œä¸­æ–‡æ±‰åŒ–ã€‚</li><li>logstash.conf è®¾ç½®äº†æ—¥å¿—çš„æ ¼å¼ï¼Œä¸ŠæŠ¥åˆ° es:9200 çš„åœ°å€ä¿¡æ¯ã€‚è¿™äº›éƒ½å¯ä»¥ä¿æŒé»˜è®¤ä¸ç”¨ä¿®æ”¹ã€‚</li></ul><h3 id="_2-å®‰è£…ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#_2-å®‰è£…ç¯å¢ƒ" aria-hidden="true">#</a> 2. å®‰è£…ç¯å¢ƒ</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>version<span class="token operator">:</span> <span class="token char">&#39;3&#39;</span>
# æ‰§è¡Œè„šæœ¬ï¼›docker<span class="token operator">-</span>compose <span class="token operator">-</span>f docker<span class="token operator">-</span>compose<span class="token punctuation">.</span>yml up <span class="token operator">-</span>d
# æ§åˆ¶å°ï¼›<span class="token constant">GET</span> _cat<span class="token operator">/</span>indices <span class="token operator">-</span> æŸ¥çœ‹ springboot<span class="token operator">-</span>logstash<span class="token operator">-</span> æ˜¯å¦å­˜åœ¨ï¼Œä¸ŠæŠ¥åå­˜åœ¨ï¼Œåˆ™è¡¨ç¤ºæ¥å…¥æˆåŠŸ
services<span class="token operator">:</span>
  elasticsearch<span class="token operator">:</span>
    image<span class="token operator">:</span> elasticsearch<span class="token operator">:</span><span class="token number">7.17</span><span class="token number">.14</span>
    ports<span class="token operator">:</span>
      <span class="token operator">-</span> &#39;<span class="token number">9200</span><span class="token operator">:</span><span class="token number">9200</span>&#39;
      <span class="token operator">-</span> &#39;<span class="token number">9300</span><span class="token operator">:</span><span class="token number">9300</span>&#39;
    container_name<span class="token operator">:</span> elasticsearch
    restart<span class="token operator">:</span> always
    environment<span class="token operator">:</span>
      <span class="token operator">-</span> &#39;cluster<span class="token punctuation">.</span>name<span class="token operator">=</span>elasticsearch&#39; # è®¾ç½®é›†ç¾¤åç§°ä¸ºelasticsearch
      <span class="token operator">-</span> &#39;discovery<span class="token punctuation">.</span>type<span class="token operator">=</span>single<span class="token operator">-</span>node&#39; # ä»¥å•ä¸€èŠ‚ç‚¹æ¨¡å¼å¯åŠ¨
      <span class="token operator">-</span> <span class="token string">&quot;cluster.name=docker-cluster&quot;</span> # è®¾ç½®åç§°
      <span class="token operator">-</span> &#39;<span class="token constant">ES_JAVA_OPTS</span><span class="token operator">=</span><span class="token operator">-</span><span class="token class-name">Xms512m</span> <span class="token operator">-</span><span class="token class-name">Xmx512m</span>&#39; # è®¾ç½®ä½¿ç”¨jvmå†…å­˜å¤§å°
    networks<span class="token operator">:</span>
      <span class="token operator">-</span> elk

  logstash<span class="token operator">:</span>
    image<span class="token operator">:</span> logstash<span class="token operator">:</span><span class="token number">7.17</span><span class="token number">.14</span>
    container_name<span class="token operator">:</span> logstash
    restart<span class="token operator">:</span> always
    volumes<span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token operator">/</span>etc<span class="token operator">/</span>localtime<span class="token operator">:</span><span class="token operator">/</span>etc<span class="token operator">/</span>localtime
      <span class="token operator">-</span> <span class="token punctuation">.</span>/logstash<span class="token operator">/</span>logstash<span class="token punctuation">.</span>conf<span class="token operator">:</span><span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>logstash<span class="token operator">/</span>pipeline<span class="token operator">/</span>logstash<span class="token punctuation">.</span>conf
    ports<span class="token operator">:</span>
      <span class="token operator">-</span> &#39;<span class="token number">4560</span><span class="token operator">:</span><span class="token number">4560</span>&#39;
      <span class="token operator">-</span> &#39;<span class="token number">50000</span><span class="token operator">:</span><span class="token number">50000</span><span class="token operator">/</span>tcp&#39;
      <span class="token operator">-</span> &#39;<span class="token number">50000</span><span class="token operator">:</span><span class="token number">50000</span><span class="token operator">/</span>udp&#39;
      <span class="token operator">-</span> &#39;<span class="token number">9600</span><span class="token operator">:</span><span class="token number">9600</span>&#39;
    environment<span class="token operator">:</span>
      <span class="token constant">LS_JAVA_OPTS</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token class-name">Xms1024m</span> <span class="token operator">-</span><span class="token class-name">Xmx1024m</span>
      <span class="token constant">TZ</span><span class="token operator">:</span> <span class="token class-name">Asia</span><span class="token operator">/</span><span class="token class-name">Shanghai</span>
      <span class="token constant">MONITORING_ENABLED</span><span class="token operator">:</span> <span class="token boolean">false</span>
    links<span class="token operator">:</span>
      <span class="token operator">-</span> elasticsearch<span class="token operator">:</span>es # å¯ä»¥ç”¨esè¿™ä¸ªåŸŸåè®¿é—®elasticsearchæœåŠ¡
    networks<span class="token operator">:</span>
      <span class="token operator">-</span> elk
    depends_on<span class="token operator">:</span>
      <span class="token operator">-</span> elasticsearch # ä¾èµ–elasticsearchå¯åŠ¨ååœ¨å¯åŠ¨logstash

  kibana<span class="token operator">:</span>
    image<span class="token operator">:</span> kibana<span class="token operator">:</span><span class="token number">7.17</span><span class="token number">.14</span>
    container_name<span class="token operator">:</span> kibana
    restart<span class="token operator">:</span> always
    volumes<span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token operator">/</span>etc<span class="token operator">/</span>localtime<span class="token operator">:</span><span class="token operator">/</span>etc<span class="token operator">/</span>localtime
      <span class="token operator">-</span> <span class="token punctuation">.</span>/kibana<span class="token operator">/</span>config<span class="token operator">/</span>kibana<span class="token punctuation">.</span>yml<span class="token operator">:</span><span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>kibana<span class="token operator">/</span>config<span class="token operator">/</span>kibana<span class="token punctuation">.</span>yml
    ports<span class="token operator">:</span>
      <span class="token operator">-</span> &#39;<span class="token number">5601</span><span class="token operator">:</span><span class="token number">5601</span>&#39;
    links<span class="token operator">:</span>
      <span class="token operator">-</span> elasticsearch<span class="token operator">:</span>es #å¯ä»¥ç”¨esè¿™ä¸ªåŸŸåè®¿é—®elasticsearchæœåŠ¡
    environment<span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token constant">ELASTICSEARCH_URL</span><span class="token operator">=</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>elasticsearch<span class="token operator">:</span><span class="token number">9200</span> #è®¾ç½®è®¿é—®elasticsearchçš„åœ°å€
      <span class="token operator">-</span> &#39;elasticsearch<span class="token punctuation">.</span>hosts<span class="token operator">=</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>es<span class="token operator">:</span><span class="token number">9200</span>&#39; #è®¾ç½®è®¿é—®elasticsearchçš„åœ°å€
      <span class="token operator">-</span> <span class="token constant">I18N_LOCALE</span><span class="token operator">=</span>zh<span class="token operator">-</span><span class="token constant">CN</span>
    networks<span class="token operator">:</span>
      <span class="token operator">-</span> elk
    depends_on<span class="token operator">:</span>
      <span class="token operator">-</span> elasticsearch

networks<span class="token operator">:</span>
  elk<span class="token operator">:</span>
    driver<span class="token operator">:</span> bridge #ç½‘ç»œ
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div align="center"><img src="https://bugstack.cn/images/roadmap/tutorial/road-map-elk-03.png?raw=true" width="850px"></div><div align="center"><img src="https://bugstack.cn/images/roadmap/tutorial/road-map-elk-04.png?raw=true" width="850px"></div><ul><li>è¿™æ˜¯ docker compose æ‰§è¡Œè„šæœ¬ï¼Œå¦‚æœä½ æœ¬åœ°å·²ç»å®‰è£…äº† Docker å¯ä»¥ç›´æ¥æ‰§è¡Œ å®‰è£…å³å¯ã€‚</li><li>å®‰è£…å®Œæˆåï¼Œå½“ä½ çœ‹åˆ°å¦‚ä¸Šæˆªå›¾ï¼Œåˆ™è¡¨ç¤ºå·²ç»è¿è¡Œã€‚æ³¨æ„ Quick Actions ä¸‹å¯ä»¥è¿›å…¥æ—¥å¿—å’Œæ§åˆ¶å°ã€‚å¦‚æœå¯åŠ¨å¤±è´¥ï¼Œå¯ä»¥æ£€æŸ¥æ—¥å¿—ã€‚</li></ul><h3 id="_3-æ—¥å¿—é…ç½®" tabindex="-1"><a class="header-anchor" href="#_3-æ—¥å¿—é…ç½®" aria-hidden="true">#</a> 3. æ—¥å¿—é…ç½®</h3><h4 id="_3-1-å¼•å…¥pom-logstash" tabindex="-1"><a class="header-anchor" href="#_3-1-å¼•å…¥pom-logstash" aria-hidden="true">#</a> 3.1 å¼•å…¥POM - logstash</h4><div class="language-pom line-numbers-mode" data-ext="pom"><pre class="language-pom"><code>&lt;dependency&gt;
    &lt;groupId&gt;net.logstash.logback&lt;/groupId&gt;
    &lt;artifactId&gt;logstash-logback-encoder&lt;/artifactId&gt;
    &lt;version&gt;7.3&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªJaræ˜¯ä¸ºäº†ä¸ŠæŠ¥åº”ç”¨æ—¥å¿—ç”¨çš„ã€‚å·¥ç¨‹çš„æ ¹ç›®å½•ä¸‹å¼•å…¥æ˜¯å®šä¹‰ç‰ˆæœ¬ï¼Œåœ¨ xfg-dev-tech-app æ¨¡å—ä¸‹å¼•å…¥æ˜¯å…·ä½“çš„å¼•å…¥ã€‚</p><h4 id="_3-2-logback-é‡‡é›†" tabindex="-1"><a class="header-anchor" href="#_3-2-logback-é‡‡é›†" aria-hidden="true">#</a> 3.2 logback é‡‡é›†</h4><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># logstashéƒ¨ç½²çš„æœåŠ¡å™¨IP</span>
<span class="token key atrule">logstash</span><span class="token punctuation">:</span>
  <span class="token key atrule">host</span><span class="token punctuation">:</span> 127.0.0.1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LOG_STASH_HOST<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>context<span class="token punctuation">&quot;</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logstash.host<span class="token punctuation">&quot;</span></span> <span class="token attr-name">defaultValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>127.0.0.1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!--è¾“å‡ºåˆ°logstashçš„appender--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LOGSTASH<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>net.logstash.logback.appender.LogstashTcpSocketAppender<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--å¯ä»¥è®¿é—®çš„logstashæ—¥å¿—æ”¶é›†ç«¯å£--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>destination</span><span class="token punctuation">&gt;</span></span>\${LOG_STASH_HOST}:4560<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>destination</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>net.logstash.logback.encoder.LogstashEncoder<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LOGSTASH<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>LOG_STASH_HOST é€šè¿‡å ä½ç¬¦å¯ä»¥ä½¿ç”¨ yml é…ç½®ï¼Œè¿™æ ·æ–¹ä¾¿åæœŸåŠ¨æ€è°ƒæ•´ã€‚</li></ul><h2 id="å››ã€åº”ç”¨æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#å››ã€åº”ç”¨æµ‹è¯•" aria-hidden="true">#</a> å››ã€åº”ç”¨æµ‹è¯•</h2><h3 id="_1-å¯åŠ¨åº”ç”¨-æ£€æµ‹ä¸ŠæŠ¥" tabindex="-1"><a class="header-anchor" href="#_1-å¯åŠ¨åº”ç”¨-æ£€æµ‹ä¸ŠæŠ¥" aria-hidden="true">#</a> 1. å¯åŠ¨åº”ç”¨&amp;æ£€æµ‹ä¸ŠæŠ¥</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * curl http://localhost:8091/api/ratelimiter/login?fingerprint=uljpplllll01009&amp;uId=1000&amp;token=8790
     */</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> fingerprint<span class="token punctuation">,</span> <span class="token class-name">String</span> uId<span class="token punctuation">,</span> <span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ¨¡æ‹Ÿç™»å½• login fingerprint:{}&quot;</span><span class="token punctuation">,</span> fingerprint<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;æ¨¡æ‹Ÿç™»å½•ï¼šç™»å½•æˆåŠŸ &quot;</span> <span class="token operator">+</span> uId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div align="center"><img src="https://bugstack.cn/images/roadmap/tutorial/road-map-elk-05.png?raw=true" width="850px"></div>`,28),x={href:"http://0.0.0.0:5601/app/dev_tools#/console",target:"_blank",rel:"noopener noreferrer"},q=a("li",null,[s("å‘½ä»¤ï¼š"),a("code",null,"GET _cat/indices"),s(" - é€šè¿‡å‘½ä»¤æ£€æµ‹æ—¥å¿—ä¸ŠæŠ¥")],-1),w=a("h3",{id:"_2-é…ç½®æ—¥å¿—",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#_2-é…ç½®æ—¥å¿—","aria-hidden":"true"},"#"),s(" 2. é…ç½®æ—¥å¿—")],-1),y={href:"http://0.0.0.0:5601/app/discover",target:"_blank",rel:"noopener noreferrer"},S=t('<h4 id="_2-1-åˆ›å»ºç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#_2-1-åˆ›å»ºç´¢å¼•" aria-hidden="true">#</a> 2.1 åˆ›å»ºç´¢å¼•</h4><div align="center"><img src="https://bugstack.cn/images/roadmap/tutorial/road-map-elk-06.png?raw=true" width="850px"></div><div align="center"><img src="https://bugstack.cn/images/roadmap/tutorial/road-map-elk-07.png?raw=true" width="850px"></div><ul><li>å½“ä½ çš„åº”ç”¨å¯åŠ¨åï¼Œä¼šä¸ŠæŠ¥æ•°æ®ã€‚è¿™ä¸ªæ—¶å€™åœ¨ç‚¹å‡» Discover ä¼šæç¤ºä½ æœ‰å¯ç”¨çš„æ•°æ®ã€‚</li><li>å¦‚å›¾åˆ›å»ºç´¢å¼•å³å¯ã€‚</li></ul><h4 id="_2-2-å›åˆ°ç›‘æ§" tabindex="-1"><a class="header-anchor" href="#_2-2-å›åˆ°ç›‘æ§" aria-hidden="true">#</a> 2.2 å›åˆ°ç›‘æ§</h4>',5),L={href:"http://localhost:8091/api/ratelimiter/login?fingerprint=uljpplllll01009&uId=1000&token=8790",target:"_blank",rel:"noopener noreferrer"},E=a("div",{align:"center"},[a("img",{src:"https://bugstack.cn/images/roadmap/tutorial/road-map-elk-08.png?raw=true",width:"850px"})],-1),A=a("ul",null,[a("li",null,"å½“ä½ ä¸æ–­çš„è®¿é—®æ¥å£ï¼Œå°±å¯ä»¥çœ‹åˆ°ä¸ŠæŠ¥çš„æ—¥å¿—æ•°æ®ä¿¡æ¯äº†ã€‚")],-1);function T(I,K){const n=o("ExternalLinkIcon");return l(),c("div",null,[i,a("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),u,s("åšå®¢ï¼š"),a("a",d,[s("https://bugstack.cn"),e(n)])]),k,m,a("p",null,[s("æœ¬æ–‡çš„å®—æ—¨åœ¨äºé€šè¿‡æ˜“äºä¸Šæ‰‹å®æ“çš„æ–¹å¼ï¼Œæ•™ä¼šè¯»è€…å®Œæˆç³»ç»ŸELKæ—¥å¿—é‡‡é›†çš„å¯¹æ¥å’Œä½¿ç”¨ã€‚é‚£ä½ çŸ¥é“å¯¹äºä¸€ä¸ªç³»ç»Ÿçš„ä¸Šçº¿è€ƒå¯Ÿï¼Œå¿…å¤‡çš„å‡ æ ·ä¸œè¥¿æ˜¯ä»€ä¹ˆå—ï¼Ÿå…¶å®è¿™ä¹Ÿæ˜¯é¢è¯•ä¸­è€ƒå¯Ÿæ±‚èŒè€…ï¼Œæ˜¯å¦çœŸçš„åšè¿‡ç³»ç»Ÿå¼€å‘å’Œä¸Šçº¿çš„å¿…å¤‡é—®é¢˜ã€‚åŒ…æ‹¬ï¼š"),a("a",v,[s("æœåŠ¡æ²»ç†(ç†”æ–­/é™æµ)"),e(n)]),s("ã€"),a("a",h,[s("ç›‘æ§"),e(n)]),s("å’Œæ—¥å¿—ï¼Œå¦‚æœä½ åšçš„ç³»ç»Ÿé‡Œæ²¡æœ‰è¿™æ ·å‡ ä¸ªä¸œè¥¿ï¼Œä¸€ç§æ˜¯è¯´æ˜ç³»ç»Ÿæ˜¯ç©å…·é¡¹ç›®ï¼Œå¦å¤–ä¸€ç§å°±æ˜¯å‹æ ¹æ²¡åšè¿‡æˆ–è€…æ²¡å…³å¿ƒè¿‡ã€‚å‰é¢çš„å·²ç»å†™å®Œäº†ï¼Œæ‰€ä»¥ä»Šå¤©æ¥ç»™å¤§å®¶å†™ELKæ—¥å¿—ã€‚")]),b,a("ul",null,[a("li",null,[s("xfg-dev-tech-elkï¼š"),a("a",g,[s("https://gitcode.net/KnowledgePlanet/road-map/xfg-dev-tech-elk"),e(n)])]),a("li",null,[s("å®˜ç½‘ï¼š"),a("a",_,[s("https://www.elastic.co/cn/"),e(n)])])]),f,a("ul",null,[a("li",null,[s("åœ°å€ï¼š"),a("a",x,[s("http://0.0.0.0:5601/app/dev_tools#/console"),e(n)])]),q]),w,a("p",null,[s("åœ°å€ï¼š"),a("a",y,[s("http://0.0.0.0:5601/app/discover"),e(n)])]),S,a("p",null,[s("åˆ›å»ºç´¢å¼•åï¼Œå›åˆ° Discover å³å¯æŸ¥çœ‹ç›‘æ§æ—¥å¿—ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œä½ å¯ä»¥è®¿é—®åº”ç”¨ç¨‹åºæ¥å£ï¼ŒæŸ¥çœ‹ä¸ŠæŠ¥æ—¥å¿—ä¿¡æ¯ï¼›"),a("a",L,[s("http://localhost:8091/api/ratelimiter/login?fingerprint=uljpplllll01009&uId=1000&token=8790"),e(n)])]),E,A])}const j=p(r,[["render",T],["__file","elk.html.vue"]]);export{j as default};
