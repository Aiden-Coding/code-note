import{_ as p,r as e,o,c,a as n,b as s,d as t,e as i}from"./app-3RcBQnkC.js";const l={},u=n("h1",{id:"mock-å•å…ƒæµ‹è¯•-æ’ä»¶ç”Ÿæˆæµ‹è¯•ä»£ç ",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#mock-å•å…ƒæµ‹è¯•-æ’ä»¶ç”Ÿæˆæµ‹è¯•ä»£ç ","aria-hidden":"true"},"#"),s(" Mock å•å…ƒæµ‹è¯•&æ’ä»¶ç”Ÿæˆæµ‹è¯•ä»£ç ")],-1),k=n("br",null,null,-1),d={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},r=n("blockquote",null,[n("p",null,"æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„")],-1),m=n("iframe",{id:"B-Video",src:"//player.bilibili.com/player.html?aid=492503304&bvid=BV1mN411x7rJ&cid=1311297417&p=1",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true",width:"100%",height:"480"}," ",-1),v={href:"https://zh.wikipedia.org/wiki/%E6%A8%A1%E6%8B%9F%E5%AF%B9%E8%B1%A1",target:"_blank",rel:"noopener noreferrer"},b=n("p",null,"ä»æ•´ä¸ªå·¥ç¨‹æ‰€å¤„ä¸åŒé˜¶æ®µçš„æµ‹è¯•æ‰‹æ®µåŒ…æ‹¬ï¼›å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€ç³»ç»Ÿæµ‹è¯•ã€éªŒæ”¶æµ‹è¯•ã€æ€§èƒ½æµ‹è¯•ã€å®‰å…¨æµ‹è¯•ã€å›å½’æµ‹è¯•ï¼Œä»¥åŠå…¼å®¹ã€å¯é ã€å¯ç”¨æ€§æµ‹è¯•ã€‚",-1),h={href:"https://zh.wikipedia.org/wiki/%E6%A8%A1%E6%8B%9F%E5%AF%B9%E8%B1%A1",target:"_blank",rel:"noopener noreferrer"},g=n("p",null,"æœ¬æ–‡æ¶‰åŠçš„å·¥ç¨‹ï¼š",-1),f={href:"https://gitcode.net/KnowledgePlanet/road-map/xfg-dev-tech-mock",target:"_blank",rel:"noopener noreferrer"},w={href:"https://gitcode.net/KnowledgePlanet/road-map/chatglm-sdk-java",target:"_blank",rel:"noopener noreferrer"},y=n("h2",{id:"ä¸€ã€æ¡ˆä¾‹èƒŒæ™¯",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ä¸€ã€æ¡ˆä¾‹èƒŒæ™¯","aria-hidden":"true"},"#"),s(" ä¸€ã€æ¡ˆä¾‹èƒŒæ™¯")],-1),I=n("p",null,"å› ä¸º Mock å•å…ƒæµ‹è¯•çš„é‡ç‚¹ï¼Œä¸»è¦ä½“ç°åœ¨ï¼›åŠŸèƒ½æµç¨‹è¾ƒé•¿ã€è°ƒç”¨å¤–éƒ¨æ¥å£ç¨³å®šæ€§è¾ƒå·®ã€æµ‹è¯•è¿‡ç¨‹ä¸­å¸Œæœ›å¯ä»¥ä¸å¯åŠ¨ SpringBoot åº”ç”¨å°±èƒ½å¯¹å•ä¸ªåŠŸèƒ½æ¨¡å—è¿›è¡Œæµ‹è¯•éªŒè¯ã€‚",-1),_={href:"https://bugstack.cn/md/road-map/http.html",target:"_blank",rel:"noopener noreferrer"},x=i(`<div align="center"><img src="https://bugstack.cn/images/roadmap/tutorial/roadmap-mock-01.png" width="650px"></div><ul><li>é¦–å…ˆï¼Œè¿™é‡Œä½¿ç”¨ DDD å·¥ç¨‹æ¨¡å‹ç»“æ„ï¼Œæ­å»ºå‡ºæµ‹è¯•å·¥ç¨‹ã€‚â€”â€” DDD æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ–¹æ³•ï¼Œè€Œè½¯ä»¶çš„è®¾è®¡æ–¹æ³•æ¶µç›–äº†ï¼›èŒƒå¼ã€æ¨¡å‹ã€æ¡†æ¶ã€æ–¹æ³•è®ºã€‚æ‰€ä»¥é€šå¸¸ä¸‹ MVC ä¸ DDD çš„å¯¹æ¯”å…ˆä»æ¨¡å‹ã€æ¡†æ¶åœ¨åˆ°æ€æƒ³è®¾è®¡å’Œæ–¹æ³•è®ºã€‚</li><li>ä¹‹åï¼Œæˆ‘ä»¬åœ¨è¿™æ ·çš„ä¸€ä¸ªæ¨¡å‹ç»“æ„ä¸‹ï¼Œå®ç°å‡ºè‡ªåŠ¨å›å¸–çš„é¢†åŸŸåŠŸèƒ½ã€‚è€Œè¿™ä¸ªæ¨¡å‹çš„å®ç°æ°å¥½éœ€è¦è°ƒç”¨å¤–éƒ¨çš„æ¥å£å’Œ ChatGLM SDKï¼Œè¿™ä¸æˆ‘ä»¬è¦åšçš„ Mock æµ‹è¯•æ­£å¥½ç¬¦åˆï¼Œå› ä¸ºåœ¨å¤§éƒ¨åˆ†å¼€å‘åœºæ™¯ä¸‹ï¼Œè¿œç¨‹çš„ HTTP è°ƒç”¨å¯èƒ½ä¸ä¸ä¼šä¸€ç›´å¯ç”¨ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ Mock æ–¹å¼è¿›è¡Œæ¨¡æ‹Ÿã€‚</li></ul><h2 id="äºŒã€åŠŸèƒ½å®ç°" tabindex="-1"><a class="header-anchor" href="#äºŒã€åŠŸèƒ½å®ç°" aria-hidden="true">#</a> äºŒã€åŠŸèƒ½å®ç°</h2><h3 id="_1-å·¥ç¨‹ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div align="center"><img src="https://bugstack.cn/images/roadmap/tutorial/roadmap-mock-02.png" width="450px"></div><ul><li>åœ¨ domain ä¸­å®ç°ä¸€ä¸ªzsxqçš„è‡ªåŠ¨å›å¸–é¢†åŸŸï¼Œè€Œå®ƒæ‰€éœ€çš„è¦è°ƒç”¨çš„æ¥å£åˆ™ç”±åŸºç¡€è®¾æ–½å±‚æä¾›ã€‚</li><li>å¦å¤–åœ¨ app ä¸­è¿˜æœ‰ ChatGLM SDK çš„é…ç½®å¯åŠ¨ï¼Œä¹Ÿä¼šè¢«æ³¨å…¥åˆ° AiReply å®ç°ç±»ä¸­ã€‚</li></ul><h3 id="_2-aiæ¨¡å—å¯åŠ¨" tabindex="-1"><a class="header-anchor" href="#_2-aiæ¨¡å—å¯åŠ¨" aria-hidden="true">#</a> 2. Aiæ¨¡å—å¯åŠ¨</h3><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># ChatGLM SDK Config</span>
<span class="token key atrule">chatglm</span><span class="token punctuation">:</span>
  <span class="token key atrule">sdk</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token comment"># çŠ¶æ€ï¼›true = å¼€å¯ã€false å…³é—­</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
      <span class="token comment"># å®˜ç½‘åœ°å€</span>
      <span class="token key atrule">api-host</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//open.bigmodel.cn/
      <span class="token comment"># å®˜ç½‘ç”³è¯· https://open.bigmodel.cn/usercenter/apikeys</span>
      <span class="token key atrule">api-secret-key</span><span class="token punctuation">:</span> d570f7c5d289cdac2abdfdc562e39f3f.trqz1dH8ZK6ED7Pg
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;chatglm.sdk.config.enabled&quot;</span><span class="token punctuation">,</span> havingValue <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">,</span> matchIfMissing <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">OpenAiSession</span> <span class="token function">openAiSession</span><span class="token punctuation">(</span><span class="token class-name">ChatGLMSDKConfigProperties</span> properties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. é…ç½®æ–‡ä»¶</span>
    <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatglm<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span>Configuration</span> configuration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>chatglm<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span>Configuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    configuration<span class="token punctuation">.</span><span class="token function">setApiHost</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getApiHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    configuration<span class="token punctuation">.</span><span class="token function">setApiSecretKey</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getApiSecretKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2. ä¼šè¯å·¥å‚</span>
    <span class="token class-name">OpenAiSessionFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultOpenAiSessionFactory</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 3. å¼€å¯ä¼šè¯</span>
    <span class="token keyword">return</span> factory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ‰€æœ‰çš„è¿™äº›é…ç½®ç±»çš„æœåŠ¡ï¼Œéƒ½å¯ä»¥æ”¾åˆ° appä¸‹çš„ config æ¨¡å—ä¸­ã€‚</li><li>ChatGLM å¯ä»¥ç›´æ¥åœ¨å®˜ç½‘ç”³è¯·ï¼Œé»˜è®¤ä¼šèµ é€18å…ƒçš„é¢åº¦ï¼Œå¯¹äºå®ƒæ‰€æä¾›çš„æ¨¡å‹ï¼Œè¿˜æ˜¯éå¸¸å¤Ÿæµ‹è¯•ä½¿ç”¨çš„ã€‚</li></ul><h3 id="_3-åŸºç¡€è®¾ç½®-æ¥å£è°ƒç”¨" tabindex="-1"><a class="header-anchor" href="#_3-åŸºç¡€è®¾ç½®-æ¥å£è°ƒç”¨" aria-hidden="true">#</a> 3. åŸºç¡€è®¾ç½® - æ¥å£è°ƒç”¨</h3><h4 id="_3-1-æ¥å£-é˜²è…å¯¹æ¥" tabindex="-1"><a class="header-anchor" href="#_3-1-æ¥å£-é˜²è…å¯¹æ¥" aria-hidden="true">#</a> 3.1 æ¥å£ - é˜²è…å¯¹æ¥</h4><p><strong>æºç </strong>ï¼š<code>cn.bugstack.xfg.dev.tech.infrastructure.gateway.api.IZSXQApi</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IZSXQApi</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * æŸ¥è¯¢çŸ¥è¯†æ˜Ÿçƒå¸–å­å†…å®¹
     *
     * <span class="token keyword">@return</span> å¸–å­æ•°æ®
     * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">IOException</span></span> å¼‚å¸¸
     */</span>
    <span class="token class-name">ResponseDTO</span> <span class="token function">topics</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * å›å¤å¸–å­
     *
     * <span class="token keyword">@param</span> <span class="token parameter">topicId</span> å¸–å­ID
     * <span class="token keyword">@param</span> <span class="token parameter">content</span> å›å¤å†…å®¹
     */</span>
    <span class="token keyword">void</span> <span class="token function">comment</span><span class="token punctuation">(</span><span class="token keyword">long</span> topicId<span class="token punctuation">,</span> <span class="token class-name">String</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨åŸºç¡€è®¾ç½®å±‚ä¸­å®šä¹‰ gateway ç½‘å…³æ¥å£è°ƒç”¨ï¼Œå¯¹äºå¤–éƒ¨çš„æ¥å£ä½¿ç”¨ï¼Œä¸­é—´è¦åšä¸€å±‚é˜²è…ï¼Œä¸è¦ç›´æ¥æŠŠå¤–éƒ¨çš„æ¥å£æš´éœ²å‡ºå»ä½¿ç”¨ã€‚</li></ul><h4 id="_3-2-ä½¿ç”¨-ä¾èµ–å€’ç½®" tabindex="-1"><a class="header-anchor" href="#_3-2-ä½¿ç”¨-ä¾èµ–å€’ç½®" aria-hidden="true">#</a> 3.2 ä½¿ç”¨ - ä¾èµ–å€’ç½®</h4><p><strong>æºç </strong>ï¼š<code>cn.bugstack.xfg.dev.tech.infrastructure.gateway.adapter.ZSXQAdapter</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZSXQAdapter</span> <span class="token keyword">implements</span> <span class="token class-name">IZSXQAdapter</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">IZSXQApi</span> zsxqApi<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TopicsItemVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryTopics</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">ResponseDTO</span> responseDTO <span class="token operator">=</span> zsxqApi<span class="token punctuation">.</span><span class="token function">topics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">RespData</span> respData <span class="token operator">=</span> responseDTO<span class="token punctuation">.</span><span class="token function">getRespData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TopicsItem</span><span class="token punctuation">&gt;</span></span> topics <span class="token operator">=</span> respData<span class="token punctuation">.</span><span class="token function">getTopics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TopicsItemVO</span><span class="token punctuation">&gt;</span></span> topicsItemVOList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">TopicsItem</span> topicsItem <span class="token operator">:</span> topics<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">TopicsItemVO</span> topicsItemVO <span class="token operator">=</span> <span class="token class-name">TopicsItemVO</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">topicId</span><span class="token punctuation">(</span>topicsItem<span class="token punctuation">.</span><span class="token function">getTopicId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">talk</span><span class="token punctuation">(</span>topicsItem<span class="token punctuation">.</span><span class="token function">getTalk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">showCommentsItems</span><span class="token punctuation">(</span>topicsItem<span class="token punctuation">.</span><span class="token function">getShowComments</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> topicsItem<span class="token punctuation">.</span><span class="token function">getShowComments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>showCommentsItem <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                                    <span class="token class-name">TopicsItemVO<span class="token punctuation">.</span>ShowCommentsItem</span> item <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TopicsItemVO<span class="token punctuation">.</span>ShowCommentsItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                    item<span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span>showCommentsItem<span class="token punctuation">.</span><span class="token function">getOwner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                    <span class="token keyword">return</span> item<span class="token punctuation">;</span>
                                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                                <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                topicsItemVOList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>topicsItemVO<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">return</span> topicsItemVOList<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">comment</span><span class="token punctuation">(</span><span class="token keyword">long</span> topicId<span class="token punctuation">,</span> <span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        zsxqApi<span class="token punctuation">.</span><span class="token function">comment</span><span class="token punctuation">(</span>topicId<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ³¨æ„ï¼ŒTopicsItemVO å¯¹è±¡æ¥è‡ªäº domain ä¸‹é¢†åŸŸä¸­æ¨¡å‹ä¸‹çš„ VO å¯¹è±¡ã€‚å› ä¸ºæ˜¯ä¾èµ–å€’ç½®çš„ï¼Œæ‰€ä»¥ infrastructure å¼•ç”¨çš„æ˜¯ domain å¹¶å¯¹å…¶æ¥å£åšå®ç°å¤„ç†ã€‚</li><li>å¹¶ä¸”ï¼ŒTopicsItemVO åªæ˜¯éœ€è¦è·å–è‡ªå·±éœ€è¦çš„å¯¹è±¡ï¼Œè¿˜å¯ä»¥åšç®€å•çš„å°è£…å¤„ç†ã€‚è¿™æ ·å¯ä»¥è¡”æ¥å¤–éƒ¨æ¥å£å’Œå†…éƒ¨é€»è¾‘ä¸­é—´çš„æ¡¥æ¢ï¼Œä¸åšå¼ºå…³è”ã€‚</li></ul><h3 id="_4-ä»»åŠ¡è°ƒåº¦" tabindex="-1"><a class="header-anchor" href="#_4-ä»»åŠ¡è°ƒåº¦" aria-hidden="true">#</a> 4. ä»»åŠ¡è°ƒåº¦</h3><p><strong>æºç </strong>ï¼š<code>cn.bugstack.xfg.dev.tech.job.ReplyJob</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReplyJob</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">IAiReply</span> aiReply<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Scheduled</span><span class="token punctuation">(</span>cron <span class="token operator">=</span> <span class="token string">&quot;0/10 * * * * ?&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è‡ªåŠ¨å›å¸–ä»»åŠ¡å¼€å§‹æ‰§è¡Œ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        aiReply<span class="token punctuation">.</span><span class="token function">doAiReply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç°åœ¨åœ¨ trigger è§¦å‘å™¨å±‚ä¸­çš„ job ä¸‹ï¼Œå°±å¯ä»¥è°ƒç”¨æˆ‘ä»¬å·²ç»å®ç°å¥½çš„ AiReply è‡ªåŠ¨å›å¸–åŠŸèƒ½äº†ã€‚</li><li>æ­¤å¤–ï¼Œæ³¨æ„ Application ä¸­ <code>@EnableScheduling</code> æ³¨è§£æ˜¯å¼€å¯çš„ï¼Œå¦åˆ™ä»»åŠ¡ä¸èƒ½æ‰§è¡Œã€‚</li></ul><h2 id="ä¸‰ã€ç³»ç»Ÿæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€ç³»ç»Ÿæµ‹è¯•" aria-hidden="true">#</a> ä¸‰ã€ç³»ç»Ÿæµ‹è¯•</h2><h3 id="_1-é›†æˆæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_1-é›†æˆæµ‹è¯•" aria-hidden="true">#</a> 1. é›†æˆæµ‹è¯•</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApiTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">IAiReply</span> aiReply<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_IAiReply</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        aiReply<span class="token punctuation">.</span><span class="token function">doAiReply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é€šå¸¸æƒ…å†µä¸‹è¿™ç§æµ‹è¯•æ˜¯æœ€å¤šçš„ï¼Œå†™å¤šå°‘åŠŸèƒ½ï¼Œå°±ç›´æ¥æµ‹è¯•è°ƒç”¨ã€‚å¦‚åŠŸèƒ½ä¸­æ‰€ç”¨åˆ°çš„ï¼›HTTPæ¥å£ã€RPCæ¥å£ã€æ•°æ®åº“ã€Redisç­‰èµ„æºï¼Œéƒ½ä¼šéœ€è¦ä½¿ç”¨åˆ°ã€‚æœ‰æ—¶å€™ä¹Ÿå› ä¸ºè¿™æ ·ï¼Œæ‰€ä»¥ä¸å¥½æµ‹è¯•ã€‚é‚£ä¹ˆå•å…ƒæµ‹è¯•å°±å‡ºç°äº†ã€‚</li></ul><h3 id="_2-å•å…ƒæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_2-å•å…ƒæµ‹è¯•" aria-hidden="true">#</a> 2. å•å…ƒæµ‹è¯•</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MockTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">IAiReply</span> aiReply<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@MockBean</span>
    <span class="token keyword">private</span> <span class="token class-name">IZSXQAdapter</span> izsxqAdapter<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_doAiReply</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">,</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Mockito</span><span class="token punctuation">.</span><span class="token function">when</span><span class="token punctuation">(</span>izsxqAdapter<span class="token punctuation">.</span><span class="token function">queryTopics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TopicsItemVO</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>
            <span class="token class-name">TopicsItemVO</span> topicsItemVO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TopicsItemVO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            topicsItemVO<span class="token punctuation">.</span><span class="token function">setTopicId</span><span class="token punctuation">(</span><span class="token number">10001L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            topicsItemVO<span class="token punctuation">.</span><span class="token function">setTalk</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;e type=\\&quot;mention\\&quot; uid=\\&quot;241858242255511\\&quot; title=\\&quot;%40%E5%B0%8F%E5%82%85%E5%93%A5\\&quot; /&gt; æé—® java å†’æ³¡æ’åº&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">add</span><span class="token punctuation">(</span>topicsItemVO<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Mockito</span><span class="token punctuation">.</span><span class="token function">when</span><span class="token punctuation">(</span>izsxqAdapter<span class="token punctuation">.</span><span class="token function">comment</span><span class="token punctuation">(</span><span class="token class-name">Mockito</span><span class="token punctuation">.</span><span class="token function">anyLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Mockito</span><span class="token punctuation">.</span><span class="token function">anyString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        aiReply<span class="token punctuation">.</span><span class="token function">doAiReply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ç­‰å¾…ï¼›ChatGLM å¼‚æ­¥å›å¤</span>
        <span class="token keyword">new</span> <span class="token class-name">CountDownLatch</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div align="center"><img src="https://bugstack.cn/images/roadmap/tutorial/roadmap-mock-03.png" width="550px"></div><ul><li>åœ¨åŸºäºä½¿ç”¨ SpringBoot çš„å¯åŠ¨ï¼Œä»¥åŠä¸€éƒ¨åˆ†åŠŸèƒ½éœ€è¦èµ°çœŸå®è°ƒç”¨çš„æƒ…å†µä¸‹ï¼Œå¦å¤–ä¸€éƒ¨åˆ†åŠŸèƒ½çš„æ¥å£å¯èƒ½æ²¡æ³•è°ƒç”¨æ—¶ã€‚å¯ä»¥ä½¿ç”¨è¿™æ ·çš„ä¸€ç§ MockBean çš„æ–¹å¼è¿›è¡Œå¤„ç†ï¼Œå¹¶å¯¹æ•´æ¡é“¾è·¯ä¸Šè°ƒç”¨åˆ°çš„æ¥å£æ–¹æ³•è¿›è¡Œ Mock å¤„ç†ã€‚\`Mockito.when(è°ƒç”¨åˆ°çš„æ¥å£).thenReturn(è¿”å›çš„ç»“æœ);</li><li>é‚£ä¹ˆç°åœ¨åœ¨æµ‹è¯•æ–¹æ³•ä¸­ï¼Œåšäº†2ä¸ªMockæ“ä½œï¼ŒæŠŠæŸ¥è¯¢å¸–å­å’Œå›å¤å¸–å­ï¼Œéƒ½ç»™å¤„ç†æ‰ã€‚ä¹Ÿå°±æ˜¯æœ‰äº† Mock ä»¥åï¼Œç¨‹åºè°ƒç”¨åˆ°è¿™é‡Œï¼Œå°±ç›´æ¥èµ° Mock é‡Œè®¾ç½®çš„ç»“æœä¿¡æ¯äº†ã€‚</li></ul><h3 id="_3-åŠŸèƒ½æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_3-åŠŸèƒ½æµ‹è¯•" aria-hidden="true">#</a> 3. åŠŸèƒ½æµ‹è¯•</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">MockitoJUnitRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZSXQAdapterTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Mock</span>
    <span class="token keyword">private</span> <span class="token class-name">IZSXQApi</span> mockZsxqApi<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@InjectMocks</span>
    <span class="token keyword">private</span> <span class="token class-name">ZSXQAdapter</span> zsxqAdapterUnderTest<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQueryTopics</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">// Setup</span>
        <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TopicsItemVO</span><span class="token punctuation">&gt;</span></span> expectedResult <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token class-name">TopicsItemVO</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">topicId</span><span class="token punctuation">(</span><span class="token number">0L</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">talk</span><span class="token punctuation">(</span><span class="token string">&quot;talk&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">showCommentsItems</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token class-name">TopicsItemVO<span class="token punctuation">.</span>ShowCommentsItem</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">userId</span><span class="token punctuation">(</span><span class="token number">0L</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Configure IZSXQApi.topics(...).</span>
        <span class="token keyword">final</span> <span class="token class-name">ResponseDTO</span> responseDTO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ResponseDTO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">RespData</span> respData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RespData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">TopicsItem</span> topicsItem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TopicsItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">ShowCommentsItem</span> showCommentsItem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ShowCommentsItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">Owner</span> owner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Owner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        owner<span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span><span class="token number">0L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        showCommentsItem<span class="token punctuation">.</span><span class="token function">setOwner</span><span class="token punctuation">(</span>owner<span class="token punctuation">)</span><span class="token punctuation">;</span>
        topicsItem<span class="token punctuation">.</span><span class="token function">setShowComments</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>showCommentsItem<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">Talk</span> talk <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        talk<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;talk&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        topicsItem<span class="token punctuation">.</span><span class="token function">setTalk</span><span class="token punctuation">(</span>talk<span class="token punctuation">)</span><span class="token punctuation">;</span>
        topicsItem<span class="token punctuation">.</span><span class="token function">setTopicId</span><span class="token punctuation">(</span><span class="token number">0L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        respData<span class="token punctuation">.</span><span class="token function">setTopics</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>topicsItem<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        responseDTO<span class="token punctuation">.</span><span class="token function">setRespData</span><span class="token punctuation">(</span>respData<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">when</span><span class="token punctuation">(</span>mockZsxqApi<span class="token punctuation">.</span><span class="token function">topics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span>responseDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Run the test</span>
        <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TopicsItemVO</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> zsxqAdapterUnderTest<span class="token punctuation">.</span><span class="token function">queryTopics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Verify the results</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span>expectedResult<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>

        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœï¼š{}&quot;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div align="center"><img src="https://bugstack.cn/images/roadmap/tutorial/roadmap-mock-04.png" width="550px"></div><ul><li>é™¤äº†å‰é¢ä¸¤ç§æµ‹è¯•ï¼Œæˆ‘ä»¬åœ¨å¼€å‘åŠŸèƒ½çš„æ—¶å€™ï¼Œè¿˜æœ‰åœºæ™¯æµ‹è¯•ï¼›ä¸å¯åŠ¨ SpringBoot ä½†å¸Œæœ›å¯¹å®ç°çš„åŠŸèƒ½è¿›è¡Œæµ‹è¯•ã€‚</li><li>é‚£ä¹ˆè¿™é‡Œæ‰€ä½“ç°çš„å°±æ˜¯è¿™æ ·çš„æµ‹è¯•ï¼Œä¸»è¦ä½¿ç”¨ï¼›<code>@RunWith(MockitoJUnitRunner.class)</code>ã€<code>@Mock</code>ã€<code>@InjectMocks</code> ç›¸å½“äºæ¨¡æ‹Ÿäº†ä¸€ä¸ªå¯åŠ¨çš„è¿‡ç¨‹ï¼Œåªä¸è¿‡éƒ½æ˜¯ Mock çš„ä¿¡æ¯ã€‚ä½†ä½ å¯ä»¥æ ¹æ®è¿™äº›ä¿¡æ¯æ¥è°ƒè¯•ä½ çš„æ¥å£ã€‚</li><li>æç¤ºï¼šä½ å¯ä»¥å®‰è£… <code>IDEA Plugin Squaretest</code> å®ƒèƒ½è‡ªåŠ¨çš„å¸®ä½ ç”ŸæˆMockå•å…ƒæµ‹è¯•ã€‚<code>è¿™ä¸ªæ’ä»¶æ˜¯æ”¶è´¹çš„ï¼Œä½†è¿˜å¥½ä¸è´µã€‚</code></li></ul>`,35);function T(A,S){const a=e("ExternalLinkIcon");return o(),c("div",null,[u,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),k,s("åšå®¢ï¼š"),n("a",d,[s("https://bugstack.cn"),t(a)])]),r,m,n("p",null,[s("æœ¬æ–‡çš„å®—æ—¨åœ¨äºé€šè¿‡ç®€å•å¹²å‡€å®è·µçš„æ–¹å¼æ•™ä¼šè¯»è€…ï¼Œå¦‚ä½•ä½¿ç”¨ "),n("a",v,[s("Mock"),t(a)]),s(" è¿›è¡Œå·¥ç¨‹çš„å•å…ƒæµ‹è¯•ï¼Œä»¥ä¾¿äºéªŒè¯ç³»ç»Ÿä¸­çš„ç‹¬ç«‹æ¨¡å—åŠŸèƒ½çš„å¥å£®æ€§ã€‚")]),b,n("p",null,[s("è€Œå•å…ƒæµ‹è¯•çš„é‡ç‚¹åœ¨äºï¼Œå¯¹å·¥ç¨‹å¼€å‘ä¸­çš„ä»£ç ï¼Œè¿›è¡Œæµç¨‹ä¸­çš„å•å…ƒåŒ–æµ‹è¯•ã€‚å¦‚ä¸€æ•´ä¸ªä¸‹å•æµç¨‹ä¸­ï¼Œéœ€è¦è°ƒç”¨å„é¡¹å¤–éƒ¨çš„æ¥å£(é£æ§ã€è´¦æˆ·ã€è¥é”€ã€è¯•ç®—ã€æ”¯ä»˜)ï¼Œæ‰èƒ½å®Œæˆæ•´ä¸ªä¸‹å•æµç¨‹ã€‚ä½†åœ¨æœ¬åœ°å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸å¤ªèƒ½å°†æ‰€æœ‰çš„å¤–éƒ¨æ¥å£éƒ½è°ƒè¯•ä¸ºå¼€å‘ç¯å¢ƒå¯ç”¨çŠ¶æ€ï¼Œæ‰€æœ‰è¿™ä¸ªæ—¶å€™è¦åšå•å…ƒåŒ–æµ‹è¯•ï¼Œå¯¹äºä¸€äº›ä¸èƒ½éšæ—¶æä¾›æœåŠ¡çš„æ¥å£è¿›è¡Œ "),n("a",h,[s("Mock"),t(a)]),s(" å¤„ç†ã€‚")]),g,n("ul",null,[n("li",null,[s("xfg-dev-tech-mockï¼š"),n("a",f,[s("https://gitcode.net/KnowledgePlanet/road-map/xfg-dev-tech-mock"),t(a)])]),n("li",null,[s("chatglm-sdk-javaï¼š"),n("a",w,[s("https://gitcode.net/KnowledgePlanet/road-map/chatglm-sdk-java"),t(a)])])]),y,I,n("p",null,[s("æ‰€ä»¥æœ¬ç« èŠ‚å¸¦ç€è¿™æ ·ä¸€ä¸ªæ¡ˆä¾‹èƒŒæ™¯çš„æƒ…å†µï¼Œå°å‚…å“¥å¸¦ç€å¤§å®¶æŠŠ "),n("a",_,[s("ã€ŠHTTP æ¡†æ¶ä½¿ç”¨å’Œåœºæ™¯å®æˆ˜ - ç»“åˆChatGLMè‡ªåŠ¨å›å¸–ï¼ã€‹"),t(a)]),s(" åšä¸€ä¸ªå°é‡æ„ã€‚æ¥å¯¹ Mock æ¡†æ¶è¿›è¡ŒéªŒè¯ä½¿ç”¨ã€‚")]),x])}const R=p(l,[["render",T],["__file","mock.html.vue"]]);export{R as default};
