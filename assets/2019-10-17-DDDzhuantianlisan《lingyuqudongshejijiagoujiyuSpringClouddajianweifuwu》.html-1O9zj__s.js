import{_ as i,r as t,o as l,c as p,a as n,b as a,d as e,e as c}from"./app-3RcBQnkC.js";const o={},d=n("h1",{id:"dddä¸“é¢˜æ¡ˆä¾‹ä¸‰ã€Šé¢†åŸŸé©±åŠ¨è®¾è®¡æ¶æ„åŸºäºspringcloudæ­å»ºå¾®æœåŠ¡ã€‹",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#dddä¸“é¢˜æ¡ˆä¾‹ä¸‰ã€Šé¢†åŸŸé©±åŠ¨è®¾è®¡æ¶æ„åŸºäºspringcloudæ­å»ºå¾®æœåŠ¡ã€‹","aria-hidden":"true"},"#"),a(" DDDä¸“é¢˜æ¡ˆä¾‹ä¸‰ã€Šé¢†åŸŸé©±åŠ¨è®¾è®¡æ¶æ„åŸºäºSpringCloudæ­å»ºå¾®æœåŠ¡ã€‹")],-1),r=n("br",null,null,-1),u={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},v=n("br",null,null,-1),k={href:"https://t.zsxq.com/jAi2nUf",target:"_blank",rel:"noopener noreferrer"},m=c(`<blockquote><p>æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„</p></blockquote><h2 id="å‰è¨€ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#å‰è¨€ä»‹ç»" aria-hidden="true">#</a> å‰è¨€ä»‹ç»</h2><p>å¾®æœåŠ¡ä¸æ˜¯æ³¥çƒå°å•ä½“ï¼Œè€Œæ˜¯å…·å¤‡æ›´åŠ æ¸…æ™°èŒè´£è¾¹ç•Œçš„å®Œæ•´ä¸€ä½“çš„ä¸šåŠ¡åŠŸèƒ½æœåŠ¡ã€‚é¢†åŸŸé©±åŠ¨è®¾è®¡çš„æ€æƒ³é€šè¿‡Domainçš„åŠŸèƒ½åŸŸè®¾è®¡ï¼Œå¯ä»¥æŠŠæ ¸å¿ƒåŠŸèƒ½ä¸æ”¯æ’‘åŠŸèƒ½å¾ˆå¥½çš„åŒºåˆ†å¼€ã€‚è€Œåœ¨MVCçš„è®¾è®¡æ¨¡å¼å°å°æ˜¯æŠŠæ‰€æœ‰çš„ï¼›æ•°æ®æœåŠ¡ã€å®šä¹‰çš„å±æ€§ç±»ã€æä¾›çš„åŠŸèƒ½éƒ½åœ¨ä¸€æ¡çº¿ä¸Šï¼Œè¿™æ ·æ˜¯éå¸¸å¿«é€Ÿçš„å¼€å‘æ–¹å¼ä½†åœ¨åšå¾®æœåŠ¡éƒ¨ç½²æ—¶å€™ç¡®å¾ˆéº»çƒ¦ã€‚</p><p>æŒ‰ç…§ä¸åŒçš„ä¸šåŠ¡åœºæ™¯å¯èƒ½è®¾è®¡å‡ºè½¯ä»¶åœ¨æ•°æ®åº“ä½¿ç”¨ä¸Šä¼šæœ‰å•åº“å•è¡¨æˆ–è€…åˆ†åº“åˆ†è¡¨ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªä½“é‡è¶³å¤Ÿéœ€è¦åˆ†åº“åˆ†è¡¨è®¾è®¡çš„ç³»ç»Ÿï¼Œåœ¨æ‰©å®¹æ—¶å€™å®ƒæ˜¯å¦èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚åŒ…æ‹¬ï¼›</p><ol><li>æ ¸å¿ƒè®¡ç®—ä¸æ¶‰åŠåº“æ‰©å®¹ï¼Œä½†æ˜¯ç³»ç»ŸåŠŸèƒ½éƒ½åœ¨ä¸€èµ·æ€ä¹ˆåŠï¼Œå·²æ‰©å®¹éƒ½æ‰©å®¹äº†å¾ˆæµªè´¹</li><li>æ‰€æœ‰çš„æ‰©å®¹éƒ½æ¶‰åŠåˆ°æ•°æ®åº“è¿æ¥æ•°å¢åŠ ï¼Œä½†å¹¶ä¸æ˜¯æ¯ä¸ªè¡Œä¸ºéƒ½ç›´è¾¾åˆ°æ‰€æœ‰åº“è¡¨</li><li>æŒç»­å‘å±•çš„ä¸šåŠ¡ä¼šå¸¦æ¥æ•°æ®æ¿€å¢ï¼Œå°†æ¥æ€ä¹ˆè¿›è¡Œæ‰©å±•ï¼Œé‡æ–°æ´—æ•°æ®å¹¶ä¸æ˜¯å¾ˆå¥½çš„é€‰æ‹©</li></ol><p>é‚£ä¹ˆå®é™…å¼€å‘å¤§æ³¥çƒæ¶æ„æ—¶ï¼Œä¸åªæ˜¯ä¼šé‡åˆ°ä¸Šé¢çš„é—®é¢˜ï¼Œè¿˜å¯èƒ½ä¼šé‡åˆ°å·¥æœŸå¾ˆèµ¶åŠ ä¸ªäººä¹Ÿä¸æå‡æ•ˆç‡ï¼Œåå¤äº¤æ¥ä»£ç æ‰¶ä¸è¿‡ä¸‰ä»£ç­‰ç­‰ï¼Œå› æ­¤æˆ‘ä»¬å°†æœåŠ¡æ‹†åˆ†ä¸ºç‹¬ç«‹å•ä½“å…·å¤‡æ­¤æ ¸å¿ƒåŸŸå®Œæ•´åŠŸèƒ½çš„ç³»ç»Ÿæ˜¯éå¸¸å¿…è¦çš„ã€‚</p><p>å¦‚å›¾ï¼Œæ˜¯å¾®æœåŠ¡æ•°æ®åº“ä½¿ç”¨çš„ä¸€ç§æ€æƒ³ï¼Œæˆ‘ä»¬å¸Œæœ›è·¯ç”±å±‚ä»æœ€å¼€å§‹å°±è¢«æ‰§è¡Œï¼Œç”¨æˆ·åˆ†ç¾¤åŠ¨æ€æ‰©å±• <img src="https://bugstack.cn/assets/images/pic-content/2019/10/ddd-03-1.png" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ &amp; å¾®æœåŠ¡æ•°æ®åº“è·¯ç”±"></p><h2 id="æ¡ˆä¾‹ç›®æ ‡" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹ç›®æ ‡" aria-hidden="true">#</a> æ¡ˆä¾‹ç›®æ ‡</h2><p>æœ¬æ¡ˆä¾‹é€šè¿‡ä½¿ç”¨SpringCloudå°†æˆ‘ä»¬çš„æœåŠ¡æ¶æ„æ‰©å±•ä¸ºé€šè¿‡è·¯ç”±è°ƒç”¨çš„å¾®æœåŠ¡</p><ol><li>é¦–å…ˆé€šè¿‡Eurekaä½œä¸ºæœåŠ¡æ³¨å†Œä¸å‘ç°ä¸­å¿ƒ</li><li>ç„¶åä½¿ç”¨Feignæ¨¡å¼ä½œä¸ºè°ƒç”¨APIæ¥å£</li><li>æœ€åä¾èµ–äºzuulè®¾ç½®è·¯ç”±è½¬å‘åŠŸèƒ½</li></ol><p>ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œæœ¬æ¡ˆä¾‹ä¼šåœ¨itstack-demo-ddd-03ä¸­å»º4ä¸ªå·¥ç¨‹ï¼›</p><ul><li>itstack-demo-ddd-caseï½›åŸºäºDDDçš„å¾®æœåŠ¡ï½</li><li>itstack-demo-ddd-eureka-serverï½›æœåŠ¡æ³¨å†Œä¸å‘ç°ï½</li><li>itstack-demo-ddd-feignï½›è°ƒç”¨æ–¹ï¼Œé€šè¿‡APIæ¥å£è°ƒç”¨ï½</li><li>itstack-demo-ddd-zuulï½›ç½‘å…³è·¯ç”±ç»„ä»¶ï½</li></ul><h2 id="å¼€å‘ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#å¼€å‘ç¯å¢ƒ" aria-hidden="true">#</a> å¼€å‘ç¯å¢ƒ</h2><p>1ã€jdk1.8 2ã€springboot 2.0.6.RELEASE ä»¥åŠSpringCloudç›¸å…³æœåŠ¡ 3ã€idea + maven</p><h2 id="ä»£ç ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ä»£ç ç¤ºä¾‹" aria-hidden="true">#</a> ä»£ç ç¤ºä¾‹</h2><h3 id="itstack-demo-ddd-case-åŸºäºdddçš„å¾®æœåŠ¡-æœ¬æ®µä»£ç åœ¨ä¸Šä¸€ç« èŠ‚å·²ç»æ¼”ç¤º" tabindex="-1"><a class="header-anchor" href="#itstack-demo-ddd-case-åŸºäºdddçš„å¾®æœåŠ¡-æœ¬æ®µä»£ç åœ¨ä¸Šä¸€ç« èŠ‚å·²ç»æ¼”ç¤º" aria-hidden="true">#</a> itstack-demo-ddd-case | åŸºäºDDDçš„å¾®æœåŠ¡ {æœ¬æ®µä»£ç åœ¨ä¸Šä¸€ç« èŠ‚å·²ç»æ¼”ç¤º}</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>ddd<span class="token operator">-</span><span class="token keyword">case</span>
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â”œâ”€â”€ java
    â”‚   â”‚   â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo
    â”‚   â”‚       â”œâ”€â”€ application
    â”‚   â”‚       â”‚	â”œâ”€â”€ <span class="token class-name">MallRuleService</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”‚	â””â”€â”€ <span class="token class-name">MallTreeService</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”œâ”€â”€ domain
    â”‚   â”‚       â”‚	â”œâ”€â”€ rule
    â”‚   â”‚       â”‚	â”‚   â”œâ”€â”€ model
    â”‚   â”‚       â”‚	â”‚   â”‚   â”œâ”€â”€ aggregates
    â”‚   â”‚       â”‚	â”‚   â”‚   â”‚   â””â”€â”€ <span class="token class-name">UserRichInfo</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”‚	â”‚   â”‚   â””â”€â”€ vo
    â”‚   â”‚       â”‚	â”‚   â”‚       â”œâ”€â”€ <span class="token class-name">DecisionMatter</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â”‚	â”‚   â”‚       â”œâ”€â”€ <span class="token class-name">EngineResult</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â”‚	â”‚   â”‚       â”œâ”€â”€ <span class="token class-name">TreeNodeInfo</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â”‚	â”‚   â”‚       â”œâ”€â”€ <span class="token class-name">TreeNodeLineInfo</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”‚	â”‚   â”‚       â””â”€â”€ <span class="token class-name">UserSchool</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”‚	â”‚   â”œâ”€â”€ repository
    â”‚   â”‚       â”‚	â”‚   â”‚   â””â”€â”€ <span class="token class-name">IRuleRepository</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”‚	â”‚   â””â”€â”€ service
    â”‚   â”‚       â”‚	â”‚       â”œâ”€â”€ engine
    â”‚   â”‚       â”‚	â”‚       â”‚   â”œâ”€â”€ impl	
    â”‚   â”‚       â”‚	â”‚       â”‚   â””â”€â”€ <span class="token class-name">EngineFilter</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”‚	â”‚       â”œâ”€â”€ logic
    â”‚   â”‚       â”‚	â”‚       â”‚   â”œâ”€â”€ impl	
    â”‚   â”‚       â”‚	â”‚       â”‚   â””â”€â”€ <span class="token class-name">LogicFilter</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”‚	â”‚       â””â”€â”€ <span class="token class-name">MallRuleServiceImpl</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”‚	â””â”€â”€ tree
    â”‚   â”‚       â”‚	    â”œâ”€â”€ model
    â”‚   â”‚       â”‚	    â”‚   â”œâ”€â”€ aggregates
    â”‚   â”‚       â”‚	    â”‚   â”‚   â””â”€â”€ <span class="token class-name">TreeCollect</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”‚	    â”‚   â””â”€â”€ vo
    â”‚   â”‚       â”‚	    â”‚       â”œâ”€â”€ <span class="token class-name">TreeInfo</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”‚	    â”‚       â””â”€â”€ <span class="token class-name">TreeRulePoint</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”‚	    â”œâ”€â”€ repository
    â”‚   â”‚       â”‚	    â”‚   â””â”€â”€ <span class="token class-name">ITreeRepository</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”‚	    â””â”€â”€ service
    â”‚   â”‚       â”‚	        â””â”€â”€ <span class="token class-name">MallTreeServiceImpl</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”œâ”€â”€ infrastructure
    â”‚   â”‚       â”‚	â”œâ”€â”€ common
    â”‚   â”‚       â”‚	â”‚   â””â”€â”€ <span class="token class-name">Constants</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â”‚	â”œâ”€â”€ dao
    â”‚   â”‚       â”‚	â”‚   â”œâ”€â”€ <span class="token class-name">RuleTreeDao</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â”‚	â”‚   â”œâ”€â”€ <span class="token class-name">RuleTreeNodeDao</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”‚	â”‚   â””â”€â”€ <span class="token class-name">RuleTreeNodeLineDao</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”‚	â”œâ”€â”€ po
    â”‚   â”‚       â”‚	â”‚   â”œâ”€â”€ <span class="token class-name">RuleTree</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â”‚	â”‚   â”œâ”€â”€ <span class="token class-name">RuleTreeConfig</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â”‚	â”‚   â”œâ”€â”€ <span class="token class-name">RuleTreeNode</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”‚	â”‚   â””â”€â”€ <span class="token class-name">RuleTreeNodeLine</span><span class="token punctuation">.</span>java		
    â”‚   â”‚       â”‚	â”œâ”€â”€ repository
    â”‚   â”‚       â”‚	â”‚   â”œâ”€â”€ cache
    â”‚   â”‚       â”‚	â”‚   â”‚   â””â”€â”€ <span class="token class-name">RuleCacheRepository</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â”‚	â”‚   â”œâ”€â”€ mysql
    â”‚   â”‚       â”‚	â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">RuleMysqlRepository</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”‚	â”‚   â”‚   â””â”€â”€ <span class="token class-name">TreeMysqlRepository</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â”‚	â”‚   â”œâ”€â”€ <span class="token class-name">RuleRepository</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”‚	â”‚   â””â”€â”€ <span class="token class-name">TreeRepository</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”‚	â””â”€â”€ util
    â”‚   â”‚       â”‚	    â””â”€â”€ <span class="token class-name">CacheUtil</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â”œâ”€â”€ interfaces
    â”‚   â”‚       â”‚	â”œâ”€â”€ dto
    â”‚   â”‚       â”‚	â”‚	â”œâ”€â”€ <span class="token class-name">DecisionMatterDTO</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â”‚	â”‚	â””â”€â”€ <span class="token class-name">TreeDTO</span><span class="token punctuation">.</span>java	
    â”‚   â”‚       â”‚	â””â”€â”€ <span class="token class-name">DDDController</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â””â”€â”€ <span class="token class-name">DDDApplication</span><span class="token punctuation">.</span>java
    â”‚   â””â”€â”€ resources	
    â”‚       â”œâ”€â”€ mybatis
    â”‚       â””â”€â”€ application<span class="token punctuation">.</span>yml
    â””â”€â”€ test
         â””â”€â”€ java
             â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>test
                 â””â”€â”€ <span class="token class-name">ApiTest</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="itstack-demo-ddd-eureka-server-æœåŠ¡æ³¨å†Œä¸å‘ç°" tabindex="-1"><a class="header-anchor" href="#itstack-demo-ddd-eureka-server-æœåŠ¡æ³¨å†Œä¸å‘ç°" aria-hidden="true">#</a> itstack-demo-ddd-eureka-server | æœåŠ¡æ³¨å†Œä¸å‘ç°</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>ddd<span class="token operator">-</span>eureka<span class="token operator">-</span>server
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â”œâ”€â”€ java
    â”‚   â”‚   â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo
    â”‚   â”‚       â””â”€â”€ <span class="token class-name">EurekaServerApplication</span><span class="token punctuation">.</span>java
    â”‚   â””â”€â”€ resources	
    â”‚       â””â”€â”€ application<span class="token punctuation">.</span>yml
    â””â”€â”€ test
         â””â”€â”€ java
             â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>test
                 â””â”€â”€ <span class="token class-name">ApiTest</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>EurekaServerApplication.java | å¯åŠ¨æœåŠ¡</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ | ä¸“æ³¨åŸåˆ›æŠ€æœ¯ä¸“é¢˜æ¡ˆä¾‹
 * è®ºå›ï¼šhttp://bugstack.cn
 * Create by ä»˜æ”¿å§” on @2019
 */</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaServer</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EurekaServerApplication</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span> <span class="token class-name">EurekaServerApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>application.yml | æœåŠ¡é…ç½®</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>server<span class="token operator">:</span>
  port<span class="token operator">:</span> <span class="token number">8989</span>

eureka<span class="token operator">:</span>
  instance<span class="token operator">:</span>
    hostname<span class="token operator">:</span> localhost
  client<span class="token operator">:</span>
    registerWithEureka<span class="token operator">:</span> <span class="token boolean">false</span>
    fetchRegistry<span class="token operator">:</span> <span class="token boolean">false</span>
    serviceUrl<span class="token operator">:</span>
      defaultZone<span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>$<span class="token punctuation">{</span>eureka<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>hostname<span class="token punctuation">}</span><span class="token operator">:</span>$<span class="token punctuation">{</span>server<span class="token punctuation">.</span>port<span class="token punctuation">}</span><span class="token operator">/</span>eureka<span class="token operator">/</span>

spring<span class="token operator">:</span>
  application<span class="token operator">:</span>
    name<span class="token operator">:</span> itstack<span class="token operator">-</span>demo<span class="token operator">-</span>ddd<span class="token operator">-</span>eureka<span class="token operator">-</span>server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="itstack-demo-ddd-feign-è°ƒç”¨æ–¹-é€šè¿‡apiæ¥å£è°ƒç”¨" tabindex="-1"><a class="header-anchor" href="#itstack-demo-ddd-feign-è°ƒç”¨æ–¹-é€šè¿‡apiæ¥å£è°ƒç”¨" aria-hidden="true">#</a> itstack-demo-ddd-feign | è°ƒç”¨æ–¹ï¼Œé€šè¿‡APIæ¥å£è°ƒç”¨</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>ddd<span class="token operator">-</span>feign
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â”œâ”€â”€ java
    â”‚   â”‚   â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo
    â”‚   â”‚       â”œâ”€â”€ domain
    â”‚   â”‚       â”‚	â””â”€â”€ <span class="token class-name">TreeDTO</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â”œâ”€â”€ service
    â”‚   â”‚       â”‚	â””â”€â”€ <span class="token class-name">MallService</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â”œâ”€â”€ web
    â”‚   â”‚       â”‚	â””â”€â”€ <span class="token class-name">FeignController</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â””â”€â”€ <span class="token class-name">FeignApplication</span><span class="token punctuation">.</span>java
    â”‚   â””â”€â”€ resources	
    â”‚       â””â”€â”€ application<span class="token punctuation">.</span>yml
    â””â”€â”€ test
         â””â”€â”€ java
             â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>test
                 â””â”€â”€ <span class="token class-name">ApiTest</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>MallService.java | é€šè¿‡æ³¨å†Œæ–¹å¼è°ƒç”¨API</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ | ä¸“æ³¨åŸåˆ›æŠ€æœ¯ä¸“é¢˜æ¡ˆä¾‹
 * è®ºå›ï¼šhttp://bugstack.cn
 * Create by ä»˜æ”¿å§” on @2019
 */</span>
<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;itstack-demo-ddd-case&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MallService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/api/tree/queryTreeSummaryInfo&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">POST</span><span class="token punctuation">)</span>
    <span class="token class-name">Object</span> <span class="token function">queryTreeSummaryInfo</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">TreeDTO</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>FeignApplication.java | å¯åŠ¨æœåŠ¡</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ | ä¸“æ³¨åŸåˆ›æŠ€æœ¯ä¸“é¢˜æ¡ˆä¾‹
 * è®ºå›ï¼šhttp://bugstack.cn
 * Create by ä»˜æ”¿å§” on @2019
 */</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token annotation punctuation">@EnableFeignClients</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FeignApplication</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">FeignApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>application.yml | æœåŠ¡é…ç½®</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>server<span class="token operator">:</span>
  port<span class="token operator">:</span> <span class="token number">9090</span>

spring<span class="token operator">:</span>
  application<span class="token operator">:</span>
    name<span class="token operator">:</span> itstack<span class="token operator">-</span>demo<span class="token operator">-</span>ddd<span class="token operator">-</span>feign

eureka<span class="token operator">:</span>
  client<span class="token operator">:</span>
    serviceUrl<span class="token operator">:</span>
      defaultZone<span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8989</span><span class="token operator">/</span>eureka<span class="token operator">/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="itstack-demo-ddd-zuul-ç½‘å…³è·¯ç”±ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#itstack-demo-ddd-zuul-ç½‘å…³è·¯ç”±ç»„ä»¶" aria-hidden="true">#</a> itstack-demo-ddd-zuul| ç½‘å…³è·¯ç”±ç»„ä»¶</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>ddd<span class="token operator">-</span>zuul
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â”œâ”€â”€ java
    â”‚   â”‚   â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo
    â”‚   â”‚       â””â”€â”€ <span class="token class-name">ZuulApplication</span><span class="token punctuation">.</span>java
    â”‚   â””â”€â”€ resources	
    â”‚       â””â”€â”€ application<span class="token punctuation">.</span>yml
    â””â”€â”€ test
         â””â”€â”€ java
             â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>test
                 â””â”€â”€ <span class="token class-name">ApiTest</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ZuulApplication.java | å¯åŠ¨æœåŠ¡</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ | ä¸“æ³¨åŸåˆ›æŠ€æœ¯ä¸“é¢˜æ¡ˆä¾‹
 * è®ºå›ï¼šhttp://bugstack.cn
 * Create by ä»˜æ”¿å§” on @2019
 */</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableZuulProxy</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZuulApplication</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ZuulApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>application.yml | æœåŠ¡é…ç½®{æœ¬æ¡ˆä¾‹æ˜¯é™æ€è·¯ç”±ï¼ŒæŒ‰éœ€å¯ä»¥å¼€å‘ä¸ºåŠ¨æ€è·¯ç”±}</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>server<span class="token operator">:</span>
  port<span class="token operator">:</span> <span class="token number">9191</span>

spring<span class="token operator">:</span>
  application<span class="token operator">:</span>
    name<span class="token operator">:</span> itstack<span class="token operator">-</span>demo<span class="token operator">-</span>ddd<span class="token operator">-</span>zuul

eureka<span class="token operator">:</span>
  client<span class="token operator">:</span>
    serviceUrl<span class="token operator">:</span>
      defaultZone<span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8989</span><span class="token operator">/</span>eureka<span class="token operator">/</span>
zuul<span class="token operator">:</span>
  routes<span class="token operator">:</span>
    api<span class="token operator">-</span>a<span class="token operator">:</span>
      path<span class="token operator">:</span> <span class="token operator">/</span>route<span class="token operator">-</span>a<span class="token doc-comment comment">/**
      serviceId: itstack-demo-ddd-feign
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æµ‹è¯•éªŒè¯" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•éªŒè¯" aria-hidden="true">#</a> æµ‹è¯•éªŒè¯</h2><p>æŒ‰ç…§é¡ºåºå¯åŠ¨ï¼›itstack-demo-ddd-eureka-serverã€itstack-demo-ddd-caseï½›å¯ä»¥æ¨¡æ‹Ÿå¯åŠ¨å¤šä¸ªï½ã€itstack-demo-ddd-feignã€itstack-demo-ddd-zuul</p><blockquote><p>è®¿é—®ï¼›http://localhost:8989/ | æœåŠ¡ä¸­å¿ƒ <img src="https://bugstack.cn/assets/images/pic-content/2019/10/ddd-03-2.png" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ &amp; æœåŠ¡ä¸­å¿ƒ"></p></blockquote><blockquote><p>è®¿é—®ï¼šhttp://localhost:9191/route-a/api/queryTreeSummaryInfo?treeId=10001 | é€šè¿‡ç½‘å…³è·¯ç”±è°ƒç”¨DDDæœåŠ¡æ¥å£</p></blockquote><p><img src="https://bugstack.cn/assets/images/pic-content/2019/10/ddd-03-3.png" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ &amp; è°ƒç”¨ç½‘å…³æ¥å£æµ‹è¯•"></p><h2 id="ç»¼ä¸Šæ€»ç»“" tabindex="-1"><a class="header-anchor" href="#ç»¼ä¸Šæ€»ç»“" aria-hidden="true">#</a> ç»¼ä¸Šæ€»ç»“</h2><ol><li>DDDçš„è®¾è®¡æ¨¡å¼åŠ ä¸ŠSpringBootä¸SpringCloudéå¸¸é€‚åˆå¼€å‘å¾®æœåŠ¡</li><li>ä»¥ä¸Šæ¡ˆä¾‹å¯ä»¥è¿›è¡Œæ‰©å±•ï¼Œä½¿ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“åœ¨ç½‘å…³æ¥å£è°ƒç”¨æ—¶å°±æ‰“åˆ°ä¸åŒçš„æœåŠ¡ä¸Š</li><li>å¦å¤–ç›®å‰æ²¡æœ‰ä½¿ç”¨dubboç±»å‹çš„rpcæ¡†æ¶ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å¯¹å¤–æä¾›å®šä¹‰æ¥å£jaråŒ…ï¼Œåç»­ä¼šè¿›è¡Œå»¶å±•</li></ol>`,44),b=n("strong",null,"bugstackè™«æ´æ ˆ",-1),g=n("strong",null,"DDDè½åœ°æ¡ˆä¾‹",-1),h={href:"https://t.zsxq.com/jAi2nUf",target:"_blank",rel:"noopener noreferrer"};function j(f,y){const s=t("ExternalLinkIcon");return l(),p("div",null,[d,n("p",null,[a("ä½œè€…ï¼šå°å‚…å“¥ "),r,a("åšå®¢ï¼š"),n("a",u,[a("https://bugstack.cn"),e(s)]),v,a("DDDé¡¹ç›®ï¼š"),n("a",k,[a("https://t.zsxq.com/jAi2nUf"),e(s)])]),m,n("p",null,[a("å¾®ä¿¡æœç´¢ã€Œ"),b,a("ã€å…¬ä¼—å·ï¼Œå…³æ³¨åå›å¤ã€Œ"),g,a("ã€è·å–æœ¬æ–‡æºç &æ›´å¤šåŸåˆ›ä¸“é¢˜æ¡ˆä¾‹ï¼æ­¤å¤–æ¨èä½ ä¸€ä¸ªå¯ä»¥ä¸Šæ‰‹å®è·µçš„DDDé¡¹ç›®ï¼Œçœ‹çœ‹å¦‚ä½•ä»æµç¨‹ä¸­æç‚¼é¢†åŸŸè®¾è®¡ä»£ç å®ç°ï¼Œåœ¨åº”ç”¨å±‚ã€é¢†åŸŸå±‚ä»¥åŠåŸºç¡€å±‚çš„ä»“å‚¨å®ç°æ˜¯å¦‚ä½•å®Œæˆå¼€å‘å’Œè°ƒç”¨çš„ï¼Œé¡¹ç›®åœ°å€ï¼š"),n("a",h,[a("https://t.zsxq.com/jAi2nUf"),e(s)])])])}const q=i(o,[["render",j],["__file","2019-10-17-DDDzhuantianlisanã€ŠlingyuqudongshejijiagoujiyuSpringClouddajianweifuwuã€‹.html.vue"]]);export{q as default};
