import{_ as p,r as e,o,c,a as n,b as s,d as t,e as i}from"./app-3RcBQnkC.js";const l={},u=n("h1",{id:"rabbitmq-ä½¿ç”¨æ•™ç¨‹",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#rabbitmq-ä½¿ç”¨æ•™ç¨‹","aria-hidden":"true"},"#"),s(" RabbitMQ ä½¿ç”¨æ•™ç¨‹")],-1),r=n("br",null,null,-1),k={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},d=n("blockquote",null,[n("p",null,"æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„")],-1),m={href:"https://bugstack.cn/md/road-map/rocketmq.html",target:"_blank",rel:"noopener noreferrer"},v={href:"https://www.rabbitmq.com/",target:"_blank",rel:"noopener noreferrer"},b=n("p",null,"æœ¬æ–‡æ¶‰åŠçš„å·¥ç¨‹ï¼š",-1),g={href:"https://gitcode.net/KnowledgePlanet/road-map/xfg-dev-tech-rabbitmq",target:"_blank",rel:"noopener noreferrer"},h={href:"https://gitcode.net/KnowledgePlanet/road-map/xfg-dev-tech-rabbitmq/-/blob/master/docs/dev-ops/docker-compose.yml",target:"_blank",rel:"noopener noreferrer"},q=n("h2",{id:"ä¸€ã€ç¯å¢ƒå®‰è£…",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ä¸€ã€ç¯å¢ƒå®‰è£…","aria-hidden":"true"},"#"),s(" ä¸€ã€ç¯å¢ƒå®‰è£…")],-1),f={href:"https://bugstack.cn/md/road-map/rocketmq.html",target:"_blank",rel:"noopener noreferrer"},y={href:"https://bugstack.cn/md/road-map/docker.html",target:"_blank",rel:"noopener noreferrer"},w=n("div",{align:"center"},[n("img",{src:"https://bugstack.cn/images/roadmap/tutorial/roadmap-rabbitmq-01.png?raw=true",width:"750px"})],-1),_=n("div",{align:"center"},[n("img",{src:"https://bugstack.cn/images/roadmap/tutorial/roadmap-rabbitmq-02.png?raw=true",width:"750px"})],-1),x={href:"http://localhost:9000/#!/2/docker/containers",target:"_blank",rel:"noopener noreferrer"},E=n("li",null,"Windows ç”µè„‘å®‰è£… Docker éœ€è¦æŠ˜è…¾ä¸‹",-1),Q=n("li",null,[s("Linux æœåŠ¡å™¨ï¼Œéœ€è¦ä¸Šä¼ æ•´ä¸ª dev-ops ååœ¨äº‘æœåŠ¡å™¨æ‰§è¡Œè„šæœ¬å®‰è£…ï¼›"),n("code",null,"docker-compose -f docker-compose.yml up -d")],-1),C=n("h2",{id:"äºŒã€é…ç½®ä¸»é¢˜",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#äºŒã€é…ç½®ä¸»é¢˜","aria-hidden":"true"},"#"),s(" äºŒã€é…ç½®ä¸»é¢˜")],-1),R={href:"http://127.0.0.1:15672/#/",target:"_blank",rel:"noopener noreferrer"},T=n("code",null,"è´¦å¯†ï¼šadmin/admin",-1),j=i(`<div align="center"><img src="https://bugstack.cn/images/roadmap/tutorial/roadmap-rabbitmq-03.png?raw=true" width="750px"></div><p>è¿›å…¥åˆ°åå°ä»¥åï¼Œå…ˆå¦‚å›¾é…ç½®ä¸ªä¸»é¢˜æ¶ˆæ¯ï¼Œåé¢ä¼šä½¿ç”¨åˆ°è¿™ä¸ªä¸»é¢˜å‘é€å’Œç›‘å¬æ¶ˆæ¯ä¿¡æ¯ã€‚</p><h2 id="ä¸‰ã€æµ‹è¯•æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€æµ‹è¯•æ¡ˆä¾‹" aria-hidden="true">#</a> ä¸‰ã€æµ‹è¯•æ¡ˆä¾‹</h2><h3 id="_1-yml-é…ç½®" tabindex="-1"><a class="header-anchor" href="#_1-yml-é…ç½®" aria-hidden="true">#</a> 1. yml é…ç½®</h3><p><strong>æ–‡ä»¶</strong>ï¼š<code>application-dev.yml</code></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token comment"># RabbitMQ é…ç½®</span>
  <span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>
    <span class="token key atrule">addresses</span><span class="token punctuation">:</span> 127.0.0.1
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">5672</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> admin
    <span class="token key atrule">password</span><span class="token punctuation">:</span> admin
    <span class="token key atrule">listener</span><span class="token punctuation">:</span>
      <span class="token key atrule">simple</span><span class="token punctuation">:</span>
        <span class="token key atrule">prefetch</span><span class="token punctuation">:</span> <span class="token number">1</span> <span class="token comment"># æ¯æ¬¡æŠ•é€’nä¸ªæ¶ˆæ¯ï¼Œæ¶ˆè´¹å®Œåœ¨æŠ•é€’nä¸ª</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æµ‹è¯•å‰ï¼Œéœ€è¦åœ¨å·¥ç¨‹ä¸­æ·»åŠ  RabbitMQ è¿æ¥é…ç½®ä¿¡æ¯ã€‚</li><li>prefetch æ˜¯æ¶ˆæ¯æŠ•é€’çš„æ•°é‡ï¼Œå®é™…åœºæ™¯å¯ä»¥é€‚å½“é…ç½®çš„å¤§ä¸€äº›ã€‚</li></ul><h3 id="_2-æ¶ˆè´¹é…ç½®" tabindex="-1"><a class="header-anchor" href="#_2-æ¶ˆè´¹é…ç½®" aria-hidden="true">#</a> 2. æ¶ˆè´¹é…ç½®</h3><p>è¿›å…¥åˆ° <code>xfg-dev-tech-trigger</code> æ˜¯ç›‘å¬ MQ æ¶ˆæ¯çš„åœ°æ–¹ã€‚</p><h4 id="_2-1-æ™®é€šæ¶ˆæ¯" tabindex="-1"><a class="header-anchor" href="#_2-1-æ™®é€šæ¶ˆæ¯" aria-hidden="true">#</a> 2.1 æ™®é€šæ¶ˆæ¯</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Customer</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * queuesToDeclareï¼šæ”¯æŒå¤šä¸ªé˜Ÿåˆ—ï¼Œå°†é˜Ÿåˆ—ç»‘å®šåˆ°é»˜è®¤äº¤æ¢æœºä¸Šï¼ŒrouteKeyä¸ºé˜Ÿåˆ—åç§°ã€‚
     *
     * <span class="token keyword">@param</span> <span class="token parameter">msg</span> æ¥æ”¶åˆ°çš„æ¶ˆæ¯
     */</span>
    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>queuesToDeclare <span class="token operator">=</span> <span class="token annotation punctuation">@Queue</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;testQueue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">listener</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ¥æ”¶æ¶ˆæ¯ï¼š{}&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// é€šè¿‡æŠ›å¼‚å¸¸ï¼ŒéªŒè¯æ¶ˆæ¯é‡è¯•</span>
<span class="token comment">//        throw new RuntimeException(&quot;Err&quot;);</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¼‚å¸¸å¯ä»¥éšç€ä½ çš„æµ‹è¯•å¼€å¯ï¼Œå¼€å¯åä¼šæ¥æ”¶åˆ°é‡è¯•çš„æ¶ˆæ¯ã€‚</li></ul><h4 id="_2-2-å¹¿æ’­æ¶ˆæ¯" tabindex="-1"><a class="header-anchor" href="#_2-2-å¹¿æ’­æ¶ˆæ¯" aria-hidden="true">#</a> 2.2 å¹¿æ’­æ¶ˆæ¯</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FanoutCustomer</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>
            bindings <span class="token operator">=</span> <span class="token annotation punctuation">@QueueBinding</span><span class="token punctuation">(</span>
                    value <span class="token operator">=</span> <span class="token annotation punctuation">@Queue</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;fanoutCustomer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    exchange <span class="token operator">=</span> <span class="token annotation punctuation">@Exchange</span><span class="token punctuation">(</span>
                            value <span class="token operator">=</span> <span class="token string">&quot;fanoutExchange&quot;</span><span class="token punctuation">,</span>
                            type <span class="token operator">=</span> <span class="token class-name">ExchangeTypes</span><span class="token punctuation">.</span><span class="token constant">FANOUT</span>
                    <span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">listener</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ¥æ”¶æ¶ˆæ¯ã€å¹¿æ’­æ¨¡å¼ã€‘ï¼š{}&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¹¿æ’­æ¨¡å¼ï¼Œæ‰€æœ‰çš„æ¶ˆè´¹æ”¾éƒ½ç›‘å¬åˆ°æ¶ˆæ¯ã€‚</li></ul><h4 id="_2-3-è·¯ç”±æ¶ˆæ¯" tabindex="-1"><a class="header-anchor" href="#_2-3-è·¯ç”±æ¶ˆæ¯" aria-hidden="true">#</a> 2.3 è·¯ç”±æ¶ˆæ¯</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RouteCustomer</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>
            bindings <span class="token operator">=</span> <span class="token annotation punctuation">@QueueBinding</span><span class="token punctuation">(</span>
                    value <span class="token operator">=</span> <span class="token annotation punctuation">@Queue</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;routeQueue1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    exchange <span class="token operator">=</span> <span class="token annotation punctuation">@Exchange</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;routeExchange&quot;</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token class-name">ExchangeTypes</span><span class="token punctuation">.</span><span class="token constant">DIRECT</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    key <span class="token operator">=</span> <span class="token string">&quot;routeKey1&quot;</span>
            <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">listener01</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ¥æ”¶æ¶ˆæ¯ã€è·¯ç”±æ¨¡å¼ã€‘ï¼š{}&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>
            bindings <span class="token operator">=</span> <span class="token annotation punctuation">@QueueBinding</span><span class="token punctuation">(</span>
                    value <span class="token operator">=</span> <span class="token annotation punctuation">@Queue</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;routeQueue2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    exchange <span class="token operator">=</span> <span class="token annotation punctuation">@Exchange</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;routeExchange&quot;</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token class-name">ExchangeTypes</span><span class="token punctuation">.</span><span class="token constant">DIRECT</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    key <span class="token operator">=</span> <span class="token string">&quot;routeKey2&quot;</span>
            <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">listener02</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ¥æ”¶æ¶ˆæ¯ã€è·¯ç”±æ¨¡å¼ã€‘ï¼š{}&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è·¯ç”±æ¨¡å¼ï¼Œä¼šæ ¹æ®å®é™…å‘é€æ¶ˆæ¯æ—¶å€™è·¯ç”±é€‰æ‹©é…ç½®ï¼Œè®©æŒ‡å®šçš„æ¶ˆè´¹æ–¹æ¥æ”¶æ¶ˆæ¯ã€‚æ¯”å¦‚å®é™…åœºæ™¯ä¸­æœ‰ç›‘å¬è®¢å•çš„æ¶ˆæ¯ï¼Œä½†è®¢å•æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚è‡ªè¥ã€ä¸‰æ–¹ä»¥åŠä¸åŒæ”¯ä»˜æ¸ é“ï¼Œé‚£ä¹ˆå¯ä»¥è®©ä¸åŒçš„ç›‘å¬è€…åªæ”¶å–è‡ªå·±çš„æ¶ˆæ¯ä¿¡æ¯ã€‚</li></ul><h4 id="_2-3-é€šé…ç¬¦æ¶ˆæ¯" tabindex="-1"><a class="header-anchor" href="#_2-3-é€šé…ç¬¦æ¶ˆæ¯" aria-hidden="true">#</a> 2.3 é€šé…ç¬¦æ¶ˆæ¯</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TopicCustomer</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>
            bindings <span class="token operator">=</span> <span class="token annotation punctuation">@QueueBinding</span><span class="token punctuation">(</span>
                    value <span class="token operator">=</span> <span class="token annotation punctuation">@Queue</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;topicQueue1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    exchange <span class="token operator">=</span> <span class="token annotation punctuation">@Exchange</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;topicExchange&quot;</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token class-name">ExchangeTypes</span><span class="token punctuation">.</span><span class="token constant">TOPIC</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    key <span class="token operator">=</span> <span class="token string">&quot;topic.*&quot;</span> <span class="token comment">// \`*\`ï¼šåŒ¹é…ä¸€ä¸ªå•è¯ï¼Œå°±åªæœ‰ä¸€ä¸ªå•è¯</span>
            <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">listener01</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ¥æ”¶æ¶ˆæ¯ã€é€šé…ç¬¦æ¨¡å¼ã€‘listener01ï¼š{}&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>
            bindings <span class="token operator">=</span> <span class="token annotation punctuation">@QueueBinding</span><span class="token punctuation">(</span>
                    value <span class="token operator">=</span> <span class="token annotation punctuation">@Queue</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;topicQueue2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    exchange <span class="token operator">=</span> <span class="token annotation punctuation">@Exchange</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;topicExchange&quot;</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token class-name">ExchangeTypes</span><span class="token punctuation">.</span><span class="token constant">TOPIC</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    key <span class="token operator">=</span> <span class="token string">&quot;topic.#&quot;</span> <span class="token comment">// \`#\`ï¼šåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªè¯</span>
            <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">listener02</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ¥æ”¶æ¶ˆæ¯ã€é€šé…ç¬¦æ¨¡å¼ã€‘listener02ï¼š{}&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>
            bindings <span class="token operator">=</span> <span class="token annotation punctuation">@QueueBinding</span><span class="token punctuation">(</span>
                    value <span class="token operator">=</span> <span class="token annotation punctuation">@Queue</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;topicQueue3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    exchange <span class="token operator">=</span> <span class="token annotation punctuation">@Exchange</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;topicExchange&quot;</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token class-name">ExchangeTypes</span><span class="token punctuation">.</span><span class="token constant">TOPIC</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    key <span class="token operator">=</span> <span class="token string">&quot;topic.y.#&quot;</span> <span class="token comment">// \`#\`ï¼šåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªè¯</span>
            <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">listener03</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ¥æ”¶æ¶ˆæ¯ã€é€šé…ç¬¦æ¨¡å¼ã€‘listener03ï¼š{}&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é€šé…ç¬¦å¯ä»¥èµ·åˆ°è¿‡æ»¤çš„ä½œç”¨ï¼Œæ¯”å¦‚åœ¨å®é™…åœºæ™¯ä¸­ï¼Œä½ éœ€è¦æ ¹æ®è¿‡å¾€mqçš„ç±»å‹ï¼Œåšéƒ¨åˆ†çš„ç›‘å¬ã€‚é‚£ä¹ˆå¯ä»¥æ ¹æ®é€šé…ç¬¦é…ç½®æ¥æå®šã€‚</li></ul><h2 id="å››ã€æµ‹è¯•éªŒè¯" tabindex="-1"><a class="header-anchor" href="#å››ã€æµ‹è¯•éªŒè¯" aria-hidden="true">#</a> å››ã€æµ‹è¯•éªŒè¯</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApiTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">RabbitTemplate</span> rabbitTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_product</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token comment">// å‘é€æ¶ˆæ¯</span>
        rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token string">&quot;testQueue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;åŸºæœ¬æ¶ˆæ¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ç­‰å¾…</span>
        <span class="token keyword">new</span> <span class="token class-name">CountDownLatch</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_product_fanout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token string">&quot;fanoutExchange&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;å¹¿æ’­æ¶ˆæ¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ç­‰å¾…</span>
        <span class="token keyword">new</span> <span class="token class-name">CountDownLatch</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_product_route</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token string">&quot;routeExchange&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;routeKey1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;è·¯ç”±æ¨¡å¼ï¼Œæ¶ˆæ¯1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token string">&quot;routeExchange&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;routeKey2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;è·¯ç”±æ¨¡å¼ï¼Œæ¶ˆæ¯2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ç­‰å¾…</span>
        <span class="token keyword">new</span> <span class="token class-name">CountDownLatch</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_product_topic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token string">&quot;topicExchange&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;topic.x&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;é€šé…ç¬¦æ¨¡å¼ï¼Œæ¶ˆæ¯1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token string">&quot;topicExchange&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;topic.y.z&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;é€šé…ç¬¦æ¨¡å¼ï¼Œæ¶ˆæ¯2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ç­‰å¾…</span>
        <span class="token keyword">new</span> <span class="token class-name">CountDownLatch</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">22</span><span class="token operator">:</span><span class="token number">29</span><span class="token operator">:</span><span class="token number">46.792</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>rabbit<span class="token punctuation">.</span></span>RabbitListenerEndpointContainer</span>#<span class="token number">0</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name">Customer</span>               <span class="token operator">-</span> æ¥æ”¶æ¶ˆæ¯ï¼šåŸºæœ¬æ¶ˆæ¯
<span class="token number">22</span><span class="token operator">:</span><span class="token number">30</span><span class="token operator">:</span><span class="token number">40.525</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>rabbit<span class="token punctuation">.</span></span>RabbitListenerEndpointContainer</span>#<span class="token number">1</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name">FanoutCustomer</span>         <span class="token operator">-</span> æ¥æ”¶æ¶ˆæ¯ã€å¹¿æ’­æ¨¡å¼ã€‘ï¼šå¹¿æ’­æ¶ˆæ¯
<span class="token number">22</span><span class="token operator">:</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">27.117</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>rabbit<span class="token punctuation">.</span></span>RabbitListenerEndpointContainer</span>#<span class="token number">3</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name">RouteCustomer</span>          <span class="token operator">-</span> æ¥æ”¶æ¶ˆæ¯ã€è·¯ç”±æ¨¡å¼ã€‘ï¼šè·¯ç”±æ¨¡å¼ï¼Œæ¶ˆæ¯<span class="token number">2</span>
<span class="token number">22</span><span class="token operator">:</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">27.117</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>rabbit<span class="token punctuation">.</span></span>RabbitListenerEndpointContainer</span>#<span class="token number">2</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name">RouteCustomer</span>          <span class="token operator">-</span> æ¥æ”¶æ¶ˆæ¯ã€è·¯ç”±æ¨¡å¼ã€‘ï¼šè·¯ç”±æ¨¡å¼ï¼Œæ¶ˆæ¯<span class="token number">1</span>
<span class="token number">10</span><span class="token operator">:</span><span class="token number">32</span><span class="token operator">:</span><span class="token number">08.359</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>rabbit<span class="token punctuation">.</span></span>RabbitListenerEndpointContainer</span>#<span class="token number">6</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name">TopicCustomer</span>          <span class="token operator">-</span> æ¥æ”¶æ¶ˆæ¯ã€é€šé…ç¬¦æ¨¡å¼ã€‘listener03ï¼šé€šé…ç¬¦æ¨¡å¼ï¼Œæ¶ˆæ¯<span class="token number">2</span>
<span class="token number">10</span><span class="token operator">:</span><span class="token number">32</span><span class="token operator">:</span><span class="token number">08.359</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>rabbit<span class="token punctuation">.</span></span>RabbitListenerEndpointContainer</span>#<span class="token number">4</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name">TopicCustomer</span>          <span class="token operator">-</span> æ¥æ”¶æ¶ˆæ¯ã€é€šé…ç¬¦æ¨¡å¼ã€‘listener01ï¼šé€šé…ç¬¦æ¨¡å¼ï¼Œæ¶ˆæ¯<span class="token number">1</span>
<span class="token number">10</span><span class="token operator">:</span><span class="token number">32</span><span class="token operator">:</span><span class="token number">08.359</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>rabbit<span class="token punctuation">.</span></span>RabbitListenerEndpointContainer</span>#<span class="token number">5</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name">TopicCustomer</span>          <span class="token operator">-</span> æ¥æ”¶æ¶ˆæ¯ã€é€šé…ç¬¦æ¨¡å¼ã€‘listener02ï¼šé€šé…ç¬¦æ¨¡å¼ï¼Œæ¶ˆæ¯<span class="token number">1</span>
<span class="token number">10</span><span class="token operator">:</span><span class="token number">32</span><span class="token operator">:</span><span class="token number">08.372</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>rabbit<span class="token punctuation">.</span></span>RabbitListenerEndpointContainer</span>#<span class="token number">5</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name">TopicCustomer</span>          <span class="token operator">-</span> æ¥æ”¶æ¶ˆæ¯ã€é€šé…ç¬¦æ¨¡å¼ã€‘listener02ï¼šé€šé…ç¬¦æ¨¡å¼ï¼Œæ¶ˆæ¯<span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»¥ä¸Šæ¡ˆä¾‹ï¼Œåˆ†åˆ«æµ‹è¯•ï¼›åŸºæœ¬æ¶ˆæ¯ã€å¹¿æ’­æ¶ˆæ¯ã€è·¯ç”±æ¶ˆæ¯ã€é€šé…ç¬¦æ¶ˆæ¯ã€‚</li></ul>`,25);function L(I,S){const a=e("ExternalLinkIcon");return o(),c("div",null,[u,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),r,s("åšå®¢ï¼š"),n("a",k,[s("https://bugstack.cn"),t(a)])]),d,n("p",null,[s("æœ¬æ–‡çš„å®—æ—¨åœ¨äºé€šè¿‡ç®€å•å¹²å‡€å®è·µçš„æ–¹å¼æ•™ä¼šè¯»è€…ï¼Œä½¿ç”¨ Docker é…ç½® RabbitMQ åœ¨ DDD ç»“æ„ä¸‹éªŒè¯ä½¿ç”¨ã€‚å…³äº MQ çš„åœºæ™¯å†…å®¹å·²ç»åœ¨ "),n("a",m,[s("RocketMQ"),t(a)]),s(" ä¸€èŠ‚ä¸­åšäº†è®²è§£ï¼Œæœ¬æ–‡åªè¦ä¸ºå¤§å®¶æ‰©å±•å¦å¤–ä¸€ç§ MQ çš„ä½¿ç”¨ã€‚æ–¹ä¾¿æœ‰éœ€è¦çš„ä¼™ä¼´å¯ä»¥åšæŠ€æœ¯æ ˆæ›¿æ¢ã€‚")]),n("p",null,[n("a",v,[s("RabbitMQ"),t(a)]),s(" æ˜¯ä¸€ä¸ªç”± Erlang å¼€å‘çš„ AMQP (Advanced Message Queuing Protocol) çš„å¼€æºå®ç°ã€‚éå¸¸è½»é‡ï¼Œç”¨äºéƒ¨ç½²ï¼Œæœ‰è‡ªå·±æä¾›å¥½çš„ç®¡ç†åå°ï¼Œéå¸¸å®¹æ˜“ä¸Šæ‰‹ä½¿ç”¨ã€‚åœ¨åŠŸèƒ½ä¸Šæ”¯æŒè®¢é˜…ã€å¹¿æ’­ã€è·¯ç”±å’Œé€šé…ç¬¦ï¼Œå¯ä»¥é€‚åˆå„ç±»åœºæ™¯è¯‰æ±‚ã€‚")]),b,n("ul",null,[n("li",null,[s("xfg-dev-tech-rabbitmqï¼š"),n("a",g,[s("https://gitcode.net/KnowledgePlanet/road-map/xfg-dev-tech-rabbitmq"),t(a)])]),n("li",null,[s("RabbitMQ Docker å®‰è£…ï¼š"),n("a",h,[s("docs/dev-ops/docker-compose.yml"),t(a)])])]),q,n("p",null,[s("å› ä¸ºæœ¬æ–‡æ˜¯åœ¨ "),n("a",f,[s("RocketMQ"),t(a)]),s(" ä¸€èŠ‚çš„æ‰©å±•ï¼Œæ‰€ä»¥åªè®²è§£ä¸‹æŠ€æœ¯ä½¿ç”¨å³å¯ã€‚")]),n("p",null,[s("æœ¬æ¡ˆä¾‹æ¶‰åŠäº† RabbitMQ çš„ä½¿ç”¨ï¼Œéƒ½å·²ç»åœ¨å·¥ç¨‹ä¸­æä¾›äº†å®‰è£…è„šæœ¬ï¼Œå¯ä»¥æŒ‰éœ€æ‰§è¡Œã€‚â€”â€” å‰ç½®æ¡ä»¶å·²å®‰è£… "),n("a",y,[s("Docker"),t(a)]),s(" ç¯å¢ƒã€‚")]),w,_,n("ul",null,[n("li",null,[s("Mac ç”µè„‘ä¼šæ¯”è¾ƒå¥½å®‰è£…ä¸€äº›ï¼Œç›´æ¥åœ¨ IntelliJ IDEA ç‚¹å‡»å°ç»¿è‰²æŒ‰é’®å³å¯å®Œæˆå®‰è£…ã€‚å®‰è£…å®Œæˆåè¿›å…¥ "),n("a",x,[s("http://localhost:9000/#!/2/docker/containers"),t(a)]),s(" - å¯çœ‹åˆ° RabbitMQ è¿è¡Œã€‚")]),E,Q]),C,n("p",null,[s("ç™»å½• RabbitMQ ç®¡ç†åå°ï¼š"),n("a",R,[s("http://127.0.0.1:15672/#/"),t(a)]),s(" - "),T]),j])}const D=p(l,[["render",L],["__file","rabbitmq.html.vue"]]);export{D as default};
