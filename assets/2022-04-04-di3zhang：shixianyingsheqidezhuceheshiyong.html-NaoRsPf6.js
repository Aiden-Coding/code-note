import{_ as t,r as p,o as c,c as o,a as n,b as s,d as e,e as l}from"./app-3RcBQnkC.js";const i={},u=n("h1",{id:"ã€Šmybatis-æ‰‹æ’¸ä¸“æ ã€‹ç¬¬3ç« -å®ç°æ˜ å°„å™¨çš„æ³¨å†Œå’Œä½¿ç”¨",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ã€Šmybatis-æ‰‹æ’¸ä¸“æ ã€‹ç¬¬3ç« -å®ç°æ˜ å°„å™¨çš„æ³¨å†Œå’Œä½¿ç”¨","aria-hidden":"true"},"#"),s(" ã€ŠMybatis æ‰‹æ’¸ä¸“æ ã€‹ç¬¬3ç« ï¼šå®ç°æ˜ å°„å™¨çš„æ³¨å†Œå’Œä½¿ç”¨")],-1),r=n("br",null,null,-1),d={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},k=n("br",null,null,-1),m={href:"https://mp.weixin.qq.com/s/o6lnWJqU_6FNO8HpxAs9gA",target:"_blank",rel:"noopener noreferrer"},v=n("blockquote",null,[n("p",null,"æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„")],-1),b=n("iframe",{id:"B-Video",src:"//player.bilibili.com/player.html?aid=684642107&bvid=BV1oU4y1y7VC&cid=737663066&page=1",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true",width:"100%",height:"480"}," ",-1),g=l(`<h2 id="ä¸€ã€å‰è¨€" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å‰è¨€" aria-hidden="true">#</a> ä¸€ã€å‰è¨€</h2><p><code>å¦‚ä½•é¢å¯¹å¤æ‚ç³»ç»Ÿçš„è®¾è®¡ï¼Ÿ</code></p><p>æˆ‘ä»¬å¯ä»¥æŠŠ Springã€Mybatisã€Dubbo è¿™æ ·çš„å¤§å‹æ¡†æ¶æˆ–è€…ä¸€äº›å…¬å¸å†…éƒ¨çš„è¾ƒæ ¸å¿ƒé¡¹ç›®ï¼Œéƒ½å¯ä»¥ç§°ä¸ºå¤æ‚çš„ç³»ç»Ÿã€‚è¿™æ ·çš„å·¥ç¨‹ä¹Ÿä¸åœ¨æ˜¯åˆå­¦ç¼–ç¨‹æ‰‹é‡Œçš„ç©å…·é¡¹ç›®ï¼Œæ²¡æœ‰æ‰€è°“çš„CRUDï¼Œæ›´å¤šæ—¶å€™è¦é¢å¯¹çš„éƒ½æ˜¯å¯¹ç³»ç»Ÿåˆ†å±‚çš„ç»“æ„è®¾è®¡å’Œèšåˆé€»è¾‘åŠŸèƒ½çš„å®ç°ï¼Œå†é€šè¿‡å±‚å±‚è½¬æ¢è¿›è¡Œå®ç°å’Œè°ƒç”¨ã€‚</p><p>è¿™å¯¹äºå¾ˆå¤šåˆšä¸Šé“çš„å°ç å†œæ¥è¯´ï¼Œä¼šæ„Ÿè§‰éå¸¸éš¾å—ï¼Œä¸çŸ¥é“è¦ä»å“ªä¸‹æ‰‹ï¼Œä½†åˆæƒ³ç€å¯ä»¥ä¸€å£åƒä¸ªèƒ–å­ã€‚å…¶å®è¿™æ˜¯ä¸ç°å®çš„ï¼Œå› ä¸ºè¿™äº›å¤æ‚ç³»ç»Ÿä¸­çš„æ¡†æ¶ä¸­æœ‰å¤ªå¤šçš„å†…å®¹ä½ è¿˜æ²¡ç”¨äº†è§£å’Œç†Ÿæ‚‰ï¼Œè¶Šæ˜¯ç¡¬æè¶Šéš¾å—ï¼Œä¿¡å¿ƒè¶Šå—æ‰“å‡»ã€‚</p><p>å…¶å®å¯¹äºè§£å†³è¿™ç±»å¤æ‚çš„é¡¹ç›®é—®é¢˜ï¼Œæ ¸å¿ƒåœ¨äºè¦å°†åˆ†æ”¯é—®é¢˜ç‚¹ç¼©å°ï¼Œçªå‡ºä¸»å¹²é“¾è·¯ï¼Œå…·ä½“çš„æ‰‹æ®µåŒ…æ‹¬ï¼šåˆ†æ²»ã€æŠ½è±¡å’ŒçŸ¥è¯†ã€‚è¿ç”¨è®¾è®¡æ¨¡å¼å’Œè®¾è®¡åŸåˆ™ç­‰ç›¸å…³çŸ¥è¯†ï¼ŒæŠŠé—®é¢˜ç©ºé—´åˆç†åˆ‡å‰²ä¸ºè‹¥å¹²å­é—®é¢˜ï¼Œé—®é¢˜è¶Šå°ä¹Ÿå°±è¶Šå®¹æ˜“ç†è§£å’Œå¤„ç†ã€‚å°±åƒä½ å¯ä»¥æŠŠå¾ˆå¤šå†…å®¹åšæˆå•ä¸ªç‹¬ç«‹çš„æ¡ˆä¾‹ä¸€æ ·ï¼Œæœ€ç»ˆåœ¨è¿›è¡Œèšåˆä½¿ç”¨ã€‚</p><h2 id="äºŒã€ç›®æ ‡" tabindex="-1"><a class="header-anchor" href="#äºŒã€ç›®æ ‡" aria-hidden="true">#</a> äºŒã€ç›®æ ‡</h2><p>åœ¨ä¸Šä¸€ç« èŠ‚æˆ‘ä»¬åˆæ­¥çš„äº†è§£äº†æ€ä¹ˆç»™ä¸€ä¸ªæ¥å£ç±»ç”Ÿæˆå¯¹åº”çš„æ˜ å°„å™¨ä»£ç†ï¼Œå¹¶åœ¨ä»£ç†ä¸­å®Œæˆä¸€äº›ç”¨æˆ·å¯¹æ¥å£æ–¹æ³•çš„è°ƒç”¨å¤„ç†ã€‚è™½ç„¶æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†ä¸€ä¸ªæ ¸å¿ƒé€»è¾‘çš„å¤„ç†æ–¹å¼ï¼Œä½†åœ¨ä½¿ç”¨ä¸Šè¿˜æ˜¯æœ‰äº›åˆ€è€•ç«ç§çš„ï¼ŒåŒ…æ‹¬ï¼šéœ€è¦ç¼–ç å‘ŠçŸ¥ MapperProxyFactory è¦å¯¹å“ªä¸ªæ¥å£è¿›è¡Œä»£ç†ï¼Œä»¥åŠè‡ªå·±ç¼–å†™ä¸€ä¸ªå‡çš„ SqlSession å¤„ç†å®é™…è°ƒç”¨æ¥å£æ—¶çš„è¿”å›ç»“æœã€‚</p><p>é‚£ä¹ˆç»“åˆè¿™ä¸¤å—é—®é¢˜ç‚¹ï¼Œæˆ‘ä»¬æœ¬ç« èŠ‚è¦å¯¹æ˜ å°„å™¨çš„æ³¨å†Œæä¾›æ³¨å†Œæœºå¤„ç†ï¼Œæ»¡è¶³ç”¨æˆ·å¯ä»¥åœ¨ä½¿ç”¨çš„æ—¶å€™æä¾›ä¸€ä¸ªåŒ…çš„è·¯å¾„å³å¯å®Œæˆæ‰«æå’Œæ³¨å†Œã€‚ä¸æ­¤åŒæ—¶éœ€è¦å¯¹ SqlSession è¿›è¡Œè§„èŒƒåŒ–å¤„ç†ï¼Œè®©å®ƒå¯ä»¥æŠŠæˆ‘ä»¬çš„æ˜ å°„å™¨ä»£ç†å’Œæ–¹æ³•è°ƒç”¨è¿›è¡ŒåŒ…è£…ï¼Œå»ºç«‹ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ¨¡å‹ç»“æ„ï¼Œä¾¿äºåç»­çš„å†…å®¹çš„æ·»åŠ ã€‚</p><h2 id="ä¸‰ã€è®¾è®¡" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€è®¾è®¡" aria-hidden="true">#</a> ä¸‰ã€è®¾è®¡</h2><p>é‰´äºæˆ‘ä»¬å¸Œæœ›æŠŠæ•´ä¸ªå·¥ç¨‹åŒ…ä¸‹å…³äºæ•°æ®åº“æ“ä½œçš„ DAO æ¥å£ä¸ Mapper æ˜ å°„å™¨å…³è”èµ·æ¥ï¼Œé‚£ä¹ˆå°±éœ€è¦åŒ…è£…ä¸€ä¸ªå¯ä»¥æ‰«æåŒ…è·¯å¾„çš„å®Œæˆæ˜ å°„çš„æ³¨å†Œå™¨ç±»ã€‚</p><p>å½“ç„¶æˆ‘ä»¬è¿˜è¦æŠŠä¸Šä¸€ç« èŠ‚ä¸­ç®€åŒ–çš„ SqlSession è¿›è¡Œå®Œå–„ï¼Œç”± SqlSession å®šä¹‰æ•°æ®åº“å¤„ç†æ¥å£å’Œè·å– Mapper å¯¹è±¡çš„æ“ä½œï¼Œå¹¶æŠŠå®ƒäº¤ç»™æ˜ å°„å™¨ä»£ç†ç±»è¿›è¡Œä½¿ç”¨ã€‚<em>è¿™ä¸€éƒ¨åˆ†æ˜¯å¯¹ä¸Šä¸€ç« èŠ‚å†…å®¹çš„å®Œå–„</em></p><p>æœ‰äº† SqlSession ä»¥åï¼Œä½ å¯ä»¥æŠŠå®ƒç†è§£æˆä¸€ç§åŠŸèƒ½æœåŠ¡ï¼Œæœ‰äº†åŠŸèƒ½æœåŠ¡ä»¥åè¿˜éœ€è¦ç»™è¿™ä¸ªåŠŸèƒ½æœåŠ¡æä¾›ä¸€ä¸ªå·¥å‚ï¼Œæ¥å¯¹å¤–ç»Ÿä¸€æä¾›è¿™ç±»æœåŠ¡ã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨ Mybatis ä¸­éå¸¸å¸¸è§çš„æ“ä½œï¼Œå¼€å¯ä¸€ä¸ª SqlSessionã€‚æ•´ä¸ªè®¾è®¡å¯ä»¥å¦‚å›¾ 3-1</p><p><img src="https://bugstack.cn/images/article/spring/mybatis-220404-01.png" alt="å›¾ 3-1 æ˜ å°„å™¨çš„æ³¨å†Œå’Œä½¿ç”¨"></p><ul><li>ä»¥åŒ…è£…æ¥å£æä¾›æ˜ å°„å™¨ä»£ç†ç±»ä¸ºç›®æ ‡ï¼Œè¡¥å…¨æ˜ å°„å™¨æ³¨å†Œæœº <code>MapperRegistry</code>ï¼Œè‡ªåŠ¨æ‰«æåŒ…ä¸‹æ¥å£å¹¶æŠŠæ¯ä¸ªæ¥å£ç±»æ˜ å°„çš„ä»£ç†ç±»å…¨éƒ¨å­˜å…¥æ˜ å°„å™¨ä»£ç†çš„ HashMap ç¼“å­˜ä¸­ã€‚</li><li>è€Œ SqlSessionã€SqlSessionFactory æ˜¯åœ¨æ­¤æ³¨å†Œæ˜ å°„å™¨ä»£ç†çš„ä¸Šå±‚ä½¿ç”¨æ ‡å‡†å®šä¹‰å’Œå¯¹å¤–æœåŠ¡æä¾›çš„å°è£…ï¼Œä¾¿äºç”¨æˆ·ä½¿ç”¨ã€‚<em>æˆ‘ä»¬æŠŠä½¿ç”¨æ–¹å½“æˆç”¨æˆ·</em> ç»è¿‡è¿™æ ·çš„å°è£…å°±å°±å¯ä»¥æ›´åŠ æ–¹ä¾¿æˆ‘ä»¬åç»­åœ¨æ¡†æ¶ä¸ŠåŠŸèƒ½çš„ç»§ç»­æ‰©å±•äº†ï¼Œä¹Ÿå¸Œæœ›å¤§å®¶å¯ä»¥åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­å¯¹è¿™æ ·çš„è®¾è®¡ç»“æ„æœ‰ä¸€äº›æ€è€ƒï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ è§£å†³ä¸€äº›ä¸šåŠ¡åŠŸèƒ½å¼€å‘è¿‡ç¨‹ä¸­çš„é¢†åŸŸæœåŠ¡åŒ…è£…ã€‚</li></ul><h2 id="å››ã€å®ç°" tabindex="-1"><a class="header-anchor" href="#å››ã€å®ç°" aria-hidden="true">#</a> å››ã€å®ç°</h2><h3 id="_1-å·¥ç¨‹ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>mybatis<span class="token operator">-</span>step<span class="token operator">-</span><span class="token number">02</span>
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â””â”€â”€ java
    â”‚       â””â”€â”€ cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>mybatis
    â”‚           â”œâ”€â”€ binding
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">MapperProxy</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">MapperProxyFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">MapperRegistry</span><span class="token punctuation">.</span>java
    â”‚           â””â”€â”€ session
    â”‚               â”œâ”€â”€ defaults
    â”‚               â”‚   â”œâ”€â”€ <span class="token class-name">DefaultSqlSession</span><span class="token punctuation">.</span>java
    â”‚               â”‚   â””â”€â”€ <span class="token class-name">DefaultSqlSessionFactory</span><span class="token punctuation">.</span>java
    â”‚               â”œâ”€â”€ <span class="token class-name">SqlSession</span><span class="token punctuation">.</span>java
    â”‚               â””â”€â”€ <span class="token class-name">SqlSessionFactory</span><span class="token punctuation">.</span>java
    â””â”€â”€ test
        â””â”€â”€ java
            â””â”€â”€ cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>test<span class="token punctuation">.</span>dao
                â”œâ”€â”€ dao
                â”‚   â”œâ”€â”€ <span class="token class-name">ISchoolDao</span><span class="token punctuation">.</span>java
                â”‚   â””â”€â”€ <span class="token class-name">IUserDao</span><span class="token punctuation">.</span>java
                â””â”€â”€ <span class="token class-name">ApiTest</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å·¥ç¨‹æºç </strong>ï¼š<code>å…¬ä¼—å·ã€Œbugstackè™«æ´æ ˆã€ï¼Œå›å¤ï¼šæ‰‹å†™Mybatisï¼Œè·å–å®Œæ•´æºç </code></p><p>æ˜ å°„å™¨æ ‡å‡†å®šä¹‰å®ç°å…³ç³»ï¼Œå¦‚å›¾ 3-2</p><p><img src="https://bugstack.cn/images/article/spring/mybatis-220404-02.png" alt="å›¾ 3-2 æ˜ å°„å™¨æ ‡å‡†å®šä¹‰å®ç°å…³ç³»"></p><ul><li>MapperRegistry æä¾›åŒ…è·¯å¾„çš„æ‰«æå’Œæ˜ å°„å™¨ä»£ç†ç±»æ³¨å†ŒæœºæœåŠ¡ï¼Œå®Œæˆæ¥å£å¯¹è±¡çš„ä»£ç†ç±»æ³¨å†Œå¤„ç†ã€‚</li><li>SqlSessionã€DefaultSqlSession ç”¨äºå®šä¹‰æ‰§è¡Œ SQL æ ‡å‡†ã€è·å–æ˜ å°„å™¨ä»¥åŠå°†æ¥ç®¡ç†äº‹åŠ¡ç­‰æ–¹é¢çš„æ“ä½œã€‚åŸºæœ¬æˆ‘ä»¬å¹³å¸¸ä½¿ç”¨ Mybatis çš„ API æ¥å£ä¹Ÿéƒ½æ˜¯ä»è¿™ä¸ªæ¥å£ç±»å®šä¹‰çš„æ–¹æ³•è¿›è¡Œä½¿ç”¨çš„ã€‚</li><li>SqlSessionFactory æ˜¯ä¸€ä¸ªç®€å•å·¥å‚æ¨¡å¼ï¼Œç”¨äºæä¾› SqlSession æœåŠ¡ï¼Œå±è”½åˆ›å»ºç»†èŠ‚ï¼Œå»¶è¿Ÿåˆ›å»ºè¿‡ç¨‹ã€‚</li></ul><h3 id="_2-æ˜ å°„å™¨æ³¨å†Œæœº" tabindex="-1"><a class="header-anchor" href="#_2-æ˜ å°„å™¨æ³¨å†Œæœº" aria-hidden="true">#</a> 2. æ˜ å°„å™¨æ³¨å†Œæœº</h3><p><strong>æºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.binding.MapperRegistry</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MapperRegistry</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * å°†å·²æ·»åŠ çš„æ˜ å°„å™¨ä»£ç†åŠ å…¥åˆ° HashMap
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Class</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span> <span class="token class-name">MapperProxyFactory</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> knownMappers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> type<span class="token punctuation">,</span> <span class="token class-name">SqlSession</span> sqlSession<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">MapperProxyFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> mapperProxyFactory <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MapperProxyFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> knownMappers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mapperProxyFactory <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;Type &quot;</span> <span class="token operator">+</span> type <span class="token operator">+</span> <span class="token string">&quot; is not known to the MapperRegistry.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> mapperProxyFactory<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span>sqlSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;Error getting mapper instance. Cause: &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">addMapper</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/* Mapper å¿…é¡»æ˜¯æ¥å£æ‰ä¼šæ³¨å†Œ */</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">isInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hasMapper</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// å¦‚æœé‡å¤æ·»åŠ äº†ï¼ŒæŠ¥é”™</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;Type &quot;</span> <span class="token operator">+</span> type <span class="token operator">+</span> <span class="token string">&quot; is already known to the MapperRegistry.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// æ³¨å†Œæ˜ å°„å™¨ä»£ç†å·¥å‚</span>
            knownMappers<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MapperProxyFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addMappers</span><span class="token punctuation">(</span><span class="token class-name">String</span> packageName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Class</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> mapperSet <span class="token operator">=</span> <span class="token class-name">ClassScanner</span><span class="token punctuation">.</span><span class="token function">scanPackage</span><span class="token punctuation">(</span>packageName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> mapperClass <span class="token operator">:</span> mapperSet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">addMapper</span><span class="token punctuation">(</span>mapperClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>MapperRegistry æ˜ å°„å™¨æ³¨å†Œç±»çš„æ ¸å¿ƒä¸»è¦åœ¨äºæä¾›äº† <code>ClassScanner.scanPackage</code> æ‰«æåŒ…è·¯å¾„ï¼Œè°ƒç”¨ <code>addMapper</code> æ–¹æ³•ï¼Œç»™æ¥å£ç±»åˆ›å»º <code>MapperProxyFactory</code> æ˜ å°„å™¨ä»£ç†ç±»ï¼Œå¹¶å†™å…¥åˆ° knownMappers çš„ HashMap ç¼“å­˜ä¸­ã€‚</li><li>å¦å¤–å°±æ˜¯è¿™ä¸ªç±»ä¹Ÿæä¾›äº†å¯¹åº”çš„ getMapper è·å–æ˜ å°„å™¨ä»£ç†ç±»çš„æ–¹æ³•ï¼Œå…¶å®è¿™æ­¥å°±åŒ…è£…äº†æˆ‘ä»¬ä¸Šä¸€ç« èŠ‚æ‰‹åŠ¨æ“ä½œå®ä¾‹åŒ–çš„è¿‡ç¨‹ï¼Œæ›´åŠ æ–¹ä¾¿åœ¨ DefaultSqlSession ä¸­è·å– Mapper æ—¶è¿›è¡Œä½¿ç”¨ã€‚</li></ul><h3 id="_3-sqlsession-æ ‡å‡†å®šä¹‰å’Œå®ç°" tabindex="-1"><a class="header-anchor" href="#_3-sqlsession-æ ‡å‡†å®šä¹‰å’Œå®ç°" aria-hidden="true">#</a> 3. SqlSession æ ‡å‡†å®šä¹‰å’Œå®ç°</h3><p><strong>æºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.session.SqlSession</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SqlSession</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * Retrieve a single row mapped from the statement key
     * æ ¹æ®æŒ‡å®šçš„SqlIDè·å–ä¸€æ¡è®°å½•çš„å°è£…å¯¹è±¡
     *
     * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span>       the returned object type å°è£…ä¹‹åçš„å¯¹è±¡ç±»å‹
     * <span class="token keyword">@param</span> <span class="token parameter">statement</span> sqlID
     * <span class="token keyword">@return</span> Mapped object å°è£…ä¹‹åçš„å¯¹è±¡
     */</span>
    <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">selectOne</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * Retrieve a single row mapped from the statement key and parameter.
     * æ ¹æ®æŒ‡å®šçš„SqlIDè·å–ä¸€æ¡è®°å½•çš„å°è£…å¯¹è±¡ï¼Œåªä¸è¿‡è¿™ä¸ªæ–¹æ³•å®¹è®¸æˆ‘ä»¬å¯ä»¥ç»™sqlä¼ é€’ä¸€äº›å‚æ•°
     * ä¸€èˆ¬åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œè¿™ä¸ªå‚æ•°ä¼ é€’çš„æ˜¯pojoï¼Œæˆ–è€…Mapæˆ–è€…ImmutableMap
     *
     * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span>       the returned object type
     * <span class="token keyword">@param</span> <span class="token parameter">statement</span> Unique identifier matching the statement to use.
     * <span class="token keyword">@param</span> <span class="token parameter">parameter</span> A parameter object to pass to the statement.
     * <span class="token keyword">@return</span> Mapped object
     */</span>
    <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">selectOne</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * Retrieves a mapper.
     * å¾—åˆ°æ˜ å°„å™¨ï¼Œè¿™ä¸ªå·§å¦™çš„ä½¿ç”¨äº†æ³›å‹ï¼Œä½¿å¾—ç±»å‹å®‰å…¨
     *
     * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span>  the mapper type
     * <span class="token keyword">@param</span> <span class="token parameter">type</span> Mapper interface class
     * <span class="token keyword">@return</span> a mapper bound to this SqlSession
     */</span>
    <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨ SqlSession ä¸­å®šä¹‰ç”¨æ¥æ‰§è¡Œ SQLã€è·å–æ˜ å°„å™¨å¯¹è±¡ä»¥åŠåç»­ç®¡ç†äº‹åŠ¡æ“ä½œçš„æ ‡å‡†æ¥å£ã€‚</li><li>ç›®å‰è¿™ä¸ªæ¥å£ä¸­å¯¹äºæ•°æ®åº“çš„æ“ä½œä»…ä»…åªæä¾›äº† selectOneï¼Œåç»­è¿˜ä¼šæœ‰ç›¸åº”å…¶ä»–æ–¹æ³•çš„å®šä¹‰ã€‚</li></ul><p><strong>æºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.session.defaults</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DefaultSqlSession</span> <span class="token keyword">implements</span> <span class="token class-name">SqlSession</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * æ˜ å°„å™¨æ³¨å†Œæœº
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">MapperRegistry</span> mapperRegistry<span class="token punctuation">;</span>

    <span class="token comment">// çœç•¥æ„é€ å‡½æ•°</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">selectOne</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token string">&quot;ä½ è¢«ä»£ç†äº†ï¼&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;æ–¹æ³•ï¼š&quot;</span> <span class="token operator">+</span> statement <span class="token operator">+</span> <span class="token string">&quot; å…¥å‚ï¼š&quot;</span> <span class="token operator">+</span> parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mapperRegistry<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é€šè¿‡ DefaultSqlSession å®ç°ç±»å¯¹ SqlSession æ¥å£è¿›è¡Œå®ç°ã€‚</li><li>getMapper æ–¹æ³•ä¸­è·å–æ˜ å°„å™¨å¯¹è±¡æ˜¯é€šè¿‡ MapperRegistry ç±»è¿›è¡Œè·å–çš„ï¼Œåç»­è¿™éƒ¨åˆ†ä¼šè¢«é…ç½®ç±»è¿›è¡Œæ›¿æ¢ã€‚</li><li>åœ¨ selectOne ä¸­æ˜¯ä¸€æ®µç®€å•çš„å†…å®¹è¿”å›ï¼Œç›®å‰è¿˜æ²¡æœ‰ä¸æ•°æ®åº“è¿›è¡Œå…³è”ï¼Œè¿™éƒ¨åˆ†åœ¨æˆ‘ä»¬æ¸è¿›å¼çš„å¼€å‘è¿‡ç¨‹ä¸­é€æ­¥å®ç°ã€‚</li></ul><h3 id="_4-sqlsessionfactory-å·¥å‚å®šä¹‰å’Œå®ç°" tabindex="-1"><a class="header-anchor" href="#_4-sqlsessionfactory-å·¥å‚å®šä¹‰å’Œå®ç°" aria-hidden="true">#</a> 4. SqlSessionFactory å·¥å‚å®šä¹‰å’Œå®ç°</h3><p><strong>æºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.session.SqlSessionFactory</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SqlSessionFactory</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * æ‰“å¼€ä¸€ä¸ª session
     * <span class="token keyword">@return</span> SqlSession
     */</span>
   <span class="token class-name">SqlSession</span> <span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™å…¶å®å°±æ˜¯ä¸€ä¸ªç®€å•å·¥å‚çš„å®šä¹‰ï¼Œåœ¨å·¥å‚ä¸­æä¾›æ¥å£å®ç°ç±»çš„èƒ½åŠ›ï¼Œä¹Ÿå°±æ˜¯ SqlSessionFactory å·¥å‚ä¸­æä¾›çš„å¼€å¯ SqlSession çš„èƒ½åŠ›ã€‚</li></ul><p><strong>æºç è¯¦è§</strong>ï¼š<code>cn.bugstack.mybatis.session.defaults.DefaultSqlSessionFactory</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DefaultSqlSessionFactory</span> <span class="token keyword">implements</span> <span class="token class-name">SqlSessionFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">MapperRegistry</span> mapperRegistry<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">DefaultSqlSessionFactory</span><span class="token punctuation">(</span><span class="token class-name">MapperRegistry</span> mapperRegistry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mapperRegistry <span class="token operator">=</span> mapperRegistry<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">SqlSession</span> <span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DefaultSqlSession</span><span class="token punctuation">(</span>mapperRegistry<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é»˜è®¤çš„ç®€å•å·¥å‚å®ç°ï¼Œå¤„ç†å¼€å¯ SqlSession æ—¶ï¼Œå¯¹ DefaultSqlSession çš„åˆ›å»ºä»¥åŠä¼ é€’ mapperRegistryï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ä½¿ç”¨ SqlSession æ—¶è·å–æ¯ä¸ªä»£ç†ç±»çš„æ˜ å°„å™¨å¯¹è±¡äº†ã€‚</li></ul><h2 id="äº”ã€æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#äº”ã€æµ‹è¯•" aria-hidden="true">#</a> äº”ã€æµ‹è¯•</h2><h3 id="_1-äº‹å…ˆå‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#_1-äº‹å…ˆå‡†å¤‡" aria-hidden="true">#</a> 1. äº‹å…ˆå‡†å¤‡</h3><p>åœ¨åŒä¸€ä¸ªåŒ…è·¯å¾„ä¸‹ï¼Œæä¾›2ä¸ªä»¥ä¸Šçš„ Dao æ¥å£ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ISchoolDao</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span> <span class="token function">querySchoolName</span><span class="token punctuation">(</span><span class="token class-name">String</span> uId<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IUserDao</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span> <span class="token function">queryUserName</span><span class="token punctuation">(</span><span class="token class-name">String</span> uId<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Integer</span> <span class="token function">queryUserAge</span><span class="token punctuation">(</span><span class="token class-name">String</span> uId<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-å•å…ƒæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_2-å•å…ƒæµ‹è¯•" aria-hidden="true">#</a> 2. å•å…ƒæµ‹è¯•</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_MapperProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. æ³¨å†Œ Mapper</span>
    <span class="token class-name">MapperRegistry</span> registry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MapperRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    registry<span class="token punctuation">.</span><span class="token function">addMappers</span><span class="token punctuation">(</span><span class="token string">&quot;cn.bugstack.mybatis.test.dao&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 2. ä» SqlSession å·¥å‚è·å– Session</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultSqlSessionFactory</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 3. è·å–æ˜ å°„å™¨å¯¹è±¡</span>
    <span class="token class-name">IUserDao</span> userDao <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">IUserDao</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 4. æµ‹è¯•éªŒè¯</span>
    <span class="token class-name">String</span> res <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">queryUserName</span><span class="token punctuation">(</span><span class="token string">&quot;10001&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœï¼š{}&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨å•å…ƒæµ‹è¯•ä¸­é€šè¿‡æ³¨å†Œæœºæ‰«æåŒ…è·¯å¾„æ³¨å†Œæ˜ å°„å™¨ä»£ç†å¯¹è±¡ï¼Œå¹¶æŠŠæ³¨å†Œæœºä¼ é€’ç»™ SqlSessionFactory å·¥å‚ï¼Œè¿™æ ·å®Œæˆä¸€ä¸ªé“¾æ¥è¿‡ç¨‹ã€‚</li><li>ä¹‹åé€šè¿‡ SqlSession è·å–å¯¹åº” DAO ç±»å‹çš„å®ç°ç±»ï¼Œå¹¶è¿›è¡Œæ–¹æ³•éªŒè¯ã€‚</li></ul><p><strong>æµ‹è¯•ç»“æœ</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">22</span><span class="token operator">:</span><span class="token number">43</span><span class="token operator">:</span><span class="token number">23.254</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼šä½ è¢«ä»£ç†äº†ï¼æ–¹æ³•ï¼šqueryUserName å…¥å‚ï¼š<span class="token punctuation">[</span><span class="token class-name">Ljava</span><span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Object<span class="token punctuation">;</span><span class="token annotation punctuation">@50cbc42f</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é€šè¿‡æµ‹è¯•å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œç›®å‰æˆ‘ä»¬å·²ç»åœ¨ä¸€ä¸ªæœ‰ Mybatis å½±å­çš„æ‰‹å†™ ORM æ¡†æ¶ä¸­ï¼Œå®Œæˆäº†ä»£ç†ç±»çš„æ³¨å†Œå’Œä½¿ç”¨è¿‡ç¨‹ã€‚</li></ul><h2 id="å…­ã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#å…­ã€æ€»ç»“" aria-hidden="true">#</a> å…­ã€æ€»ç»“</h2><ul><li>é¦–å…ˆè¦ä»è®¾è®¡ç»“æ„ä¸Šäº†è§£å·¥å‚æ¨¡å¼å¯¹å…·ä½“åŠŸèƒ½ç»“æ„çš„å°è£…ï¼Œå±è”½è¿‡ç¨‹ç»†èŠ‚ï¼Œé™å®šä¸Šä¸‹æ–‡å…³ç³»ï¼ŒæŠŠå¯¹å¤–çš„ä½¿ç”¨å‡å°‘è€¦åˆã€‚</li><li>ä»è¿™ä¸ªè¿‡ç¨‹ä¸Šè¯»è€…ä¼™ä¼´ä¹Ÿèƒ½å‘ç°ï¼Œä½¿ç”¨ SqlSessionFactory çš„å·¥å‚å®ç°ç±»åŒ…è£…äº† SqlSession çš„æ ‡å‡†å®šä¹‰å®ç°ç±»ï¼Œå¹¶ç”± SqlSession å®Œæˆå¯¹æ˜ å°„å™¨å¯¹è±¡çš„æ³¨å†Œå’Œä½¿ç”¨ã€‚</li><li>æœ¬ç« å­¦ä¹ è¦æ³¨æ„å‡ ä¸ªé‡è¦çš„çŸ¥è¯†ç‚¹ï¼ŒåŒ…æ‹¬ï¼šæ˜ å°„å™¨ã€ä»£ç†ç±»ã€æ³¨å†Œæœºã€æ¥å£æ ‡å‡†ã€å·¥å‚æ¨¡å¼ã€ä¸Šä¸‹æ–‡ã€‚è¿™äº›å·¥ç¨‹å¼€å‘çš„æŠ€å·§éƒ½æ˜¯åœ¨æ‰‹å†™ Mybatis çš„è¿‡ç¨‹ä¸­éå¸¸é‡è¦çš„éƒ¨åˆ†ï¼Œäº†è§£å’Œç†Ÿæ‚‰æ‰èƒ½æ›´å¥½çš„åœ¨è‡ªå·±çš„ä¸šåŠ¡ä¸­è¿›è¡Œä½¿ç”¨ã€‚</li></ul><h2 id="ä¸ƒã€ä¼˜ç§€ä½œä¸š" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€ä¼˜ç§€ä½œä¸š" aria-hidden="true">#</a> ä¸ƒã€ä¼˜ç§€ä½œä¸š</h2>`,52),y={href:"https://t.zsxq.com/08y9Q7qPd",target:"_blank",rel:"noopener noreferrer"},h={href:"https://t.zsxq.com/06IaAMZvF",target:"_blank",rel:"noopener noreferrer"},S={href:"https://t.zsxq.com/06uBau7Qr",target:"_blank",rel:"noopener noreferrer"},q={href:"https://t.zsxq.com/06uBau7Qr",target:"_blank",rel:"noopener noreferrer"},f={href:"https://t.zsxq.com/06AMrzv3j",target:"_blank",rel:"noopener noreferrer"},w={href:"https://t.zsxq.com/086IbEDtl",target:"_blank",rel:"noopener noreferrer"},_={href:"https://t.zsxq.com/08OZaj17G",target:"_blank",rel:"noopener noreferrer"};function M(x,j){const a=p("ExternalLinkIcon");return c(),o("div",null,[u,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),r,s("åšå®¢ï¼š"),n("a",d,[s("https://bugstack.cn"),e(a)]),k,s("åŸæ–‡ï¼š"),n("a",m,[s("https://mp.weixin.qq.com/s/o6lnWJqU_6FNO8HpxAs9gA"),e(a)])]),v,b,g,n("ul",null,[n("li",null,[n("a",y,[s("å®ç°æ˜ å°„å™¨çš„æ³¨å†Œå’Œä½¿ç”¨ @liuc"),e(a)])]),n("li",null,[n("a",h,[s("éœ€è¦å°†daoå±‚æ¥å£ä¸mapper æ˜ å°„å™¨å…³è”èµ·æ¥,éœ€è¦åˆ›å»ºä¸€ä¸ªæ³¨å†Œå™¨ @Alpha"),e(a)])]),n("li",null,[n("a",S,[s("é€šè¿‡å¯¹åº”mapperçš„æ˜ å°„å™¨å·¥å‚å¯ä»¥ç”Ÿæˆç›¸åº”çš„æ˜ å°„å™¨å¯¹è±¡ @W"),e(a)])]),n("li",null,[n("a",q,[s("åˆ›å»ºMapperProxyFactoryçš„ç¼“å­˜å™¨ï¼Œå¹¶ä¸”ä¸ºäº†è§£æ”¾åŒæ‰‹ @W"),e(a)])]),n("li",null,[n("a",f,[s("å®Œæˆæ˜ å°„å™¨çš„æ³¨å†Œä»¥åŠä»£ç è°ƒè¯• @å·"),e(a)])]),n("li",null,[n("a",w,[s("æˆ‘ä»¬è™½ç„¶å¸®Mapperç±»æ¥å£è¿›è¡Œä»£ç†ï¼Œäº¤ç»™ä»£ç†å·¥å‚å»å®ç° @ç¬"),e(a)])]),n("li",null,[n("a",_,[s("é€šè¿‡åŠ¨æ€ä»£ç†çš„æ–¹å¼å®ç° Spring æ ¸å¿ƒçš„ AOP åŠŸèƒ½ã€‚@Homage"),e(a)])])])])}const D=t(i,[["render",M],["__file","2022-04-04-di3zhangï¼šshixianyingsheqidezhuceheshiyong.html.vue"]]);export{D as default};
