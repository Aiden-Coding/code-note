import{_ as p,r as t,o as c,c as l,a as s,b as n,d as e,e as o}from"./app-3RcBQnkC.js";const r={},i=s("h1",{id:"docker-环境配置",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#docker-环境配置","aria-hidden":"true"},"#"),n(" Docker 环境配置")],-1),u=s("br",null,null,-1),d={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},k=s("blockquote",null,[s("p",null,"沉淀、分享、成长，让自己和他人都能有所收获！😄")],-1),m={href:"https://www.docker.com/",target:"_blank",rel:"noopener noreferrer"},v=s("li",null,"介绍：Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任何流行的 Mac、Linux或Windows操作系统的机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。总之它加快构建、共享和运行现代应用程序的速度。",-1),b=o(`<h2 id="一、基础安装" tabindex="-1"><a class="header-anchor" href="#一、基础安装" aria-hidden="true">#</a> 一、基础安装</h2><h3 id="_1-查看系统的内核版本" tabindex="-1"><a class="header-anchor" href="#_1-查看系统的内核版本" aria-hidden="true">#</a> 1. 查看系统的内核版本</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># uname <span class="token operator">-</span>r
<span class="token number">4.18</span><span class="token number">.0</span><span class="token operator">-</span><span class="token number">80.11</span><span class="token number">.2</span><span class="token punctuation">.</span>el8_0<span class="token punctuation">.</span>x86_64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>uname -r</code></li><li>x86 64位系统，如果是32位是不能安装 docker 的</li></ul><h3 id="_2-yum-更新到最新版本" tabindex="-1"><a class="header-anchor" href="#_2-yum-更新到最新版本" aria-hidden="true">#</a> 2. yum 更新到最新版本</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># sudo yum update
<span class="token class-name">Last</span> metadata expiration check<span class="token operator">:</span> <span class="token number">1</span><span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">10</span> ago on <span class="token class-name">Sat</span> <span class="token number">27</span> <span class="token class-name">Nov</span> <span class="token number">2021</span> <span class="token number">04</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">53</span> <span class="token constant">PM</span> <span class="token class-name">CST<span class="token punctuation">.</span>
Dependencies</span> <span class="token class-name"><span class="token namespace">resolved<span class="token punctuation">.</span></span>
Nothing</span> <span class="token keyword">to</span> <span class="token class-name"><span class="token namespace">do<span class="token punctuation">.</span></span>
Complete</span><span class="token operator">!</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>sudo yum update</code></li><li>看到显示 <code>Complete</code> 就代表完成了，整个过程需要 5-10 分钟左右</li></ul><h3 id="_3-安装docker所需的依赖包" tabindex="-1"><a class="header-anchor" href="#_3-安装docker所需的依赖包" aria-hidden="true">#</a> 3. 安装Docker所需的依赖包</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># sudo yum install <span class="token operator">-</span>y yum<span class="token operator">-</span>utils device<span class="token operator">-</span>mapper<span class="token operator">-</span>persistent<span class="token operator">-</span>data lvm2
<span class="token class-name">Last</span> metadata expiration check<span class="token operator">:</span> <span class="token number">1</span><span class="token operator">:</span><span class="token number">16</span><span class="token operator">:</span><span class="token number">16</span> ago on <span class="token class-name">Sat</span> <span class="token number">27</span> <span class="token class-name">Nov</span> <span class="token number">2021</span> <span class="token number">04</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">53</span> <span class="token constant">PM</span> <span class="token class-name">CST<span class="token punctuation">.</span>
Package</span> yum<span class="token operator">-</span>utils<span class="token operator">-</span><span class="token number">4.0</span><span class="token number">.21</span><span class="token operator">-</span><span class="token number">3.</span>el8<span class="token punctuation">.</span>noarch is already <span class="token class-name"><span class="token namespace">installed<span class="token punctuation">.</span></span>
Package</span> device<span class="token operator">-</span>mapper<span class="token operator">-</span>persistent<span class="token operator">-</span>data<span class="token operator">-</span><span class="token number">0.9</span><span class="token number">.0</span><span class="token operator">-</span><span class="token number">4.</span>el8<span class="token punctuation">.</span>x86_64 is already <span class="token class-name"><span class="token namespace">installed<span class="token punctuation">.</span></span>
Package</span> lvm2<span class="token operator">-</span><span class="token number">8</span><span class="token operator">:</span><span class="token number">2.03</span><span class="token number">.12</span><span class="token operator">-</span><span class="token number">10.</span>el8<span class="token punctuation">.</span>x86_64 is already <span class="token class-name"><span class="token namespace">installed<span class="token punctuation">.</span></span>
Dependencies</span> <span class="token class-name"><span class="token namespace">resolved<span class="token punctuation">.</span></span>
Nothing</span> <span class="token keyword">to</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>sudo yum install -y yum-utils device-mapper-persistent-data lvm2</code></li><li>看到显示 <code>Complete</code> 就代表完成了，整个过程需要 1-3 分钟左右</li></ul><h3 id="_4-设置docker的yum的源" tabindex="-1"><a class="header-anchor" href="#_4-设置docker的yum的源" aria-hidden="true">#</a> 4. 设置Docker的yum的源</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># sudo yum<span class="token operator">-</span>config<span class="token operator">-</span>manager <span class="token operator">--</span>add<span class="token operator">-</span>repo https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>download<span class="token punctuation">.</span>docker<span class="token punctuation">.</span>com<span class="token operator">/</span>linux<span class="token operator">/</span>centos<span class="token operator">/</span>docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>repo
<span class="token class-name">Adding</span> repo from<span class="token operator">:</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>download<span class="token punctuation">.</span>docker<span class="token punctuation">.</span>com<span class="token operator">/</span>linux<span class="token operator">/</span>centos<span class="token operator">/</span>docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>repo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</li><li>鉴于国内网络问题，强烈建议使用国内源。以下是阿里云的软件源。<strong>如果是海外如AWS云就不要设置yum源</strong></li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> yum-config-manager <span class="token punctuation">\\</span>
    --add-repo <span class="token punctuation">\\</span>
    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
<span class="token function">sudo</span> <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;s/download.docker.com/mirrors.aliyun.com\\/docker-ce/g&#39;</span> /etc/yum.repos.d/docker-ce.repo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-查看仓库所有docker版本" tabindex="-1"><a class="header-anchor" href="#_5-查看仓库所有docker版本" aria-hidden="true">#</a> 5. 查看仓库所有Docker版本</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># yum list docker<span class="token operator">-</span>ce <span class="token operator">--</span>showduplicates <span class="token operator">|</span> sort <span class="token operator">-</span>r
<span class="token class-name">Installed</span> <span class="token class-name">Packages</span>
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.9</span><span class="token operator">-</span><span class="token number">3.</span>el8                 docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.8</span><span class="token operator">-</span><span class="token number">3.</span>el8                 docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.7</span><span class="token operator">-</span><span class="token number">3.</span>el8                 docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.6</span><span class="token operator">-</span><span class="token number">3.</span>el8                 docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.5</span><span class="token operator">-</span><span class="token number">3.</span>el8                 docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.4</span><span class="token operator">-</span><span class="token number">3.</span>el8                 docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.3</span><span class="token operator">-</span><span class="token number">3.</span>el8                 docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.2</span><span class="token operator">-</span><span class="token number">3.</span>el8                 docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.1</span><span class="token operator">-</span><span class="token number">3.</span>el8                 docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.11</span><span class="token operator">-</span><span class="token number">3.</span>el8                docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.11</span><span class="token operator">-</span><span class="token number">3.</span>el8                <span class="token annotation punctuation">@docker</span><span class="token operator">-</span>ce<span class="token operator">-</span>stable
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.10</span><span class="token operator">-</span><span class="token number">3.</span>el8                docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.0</span><span class="token operator">-</span><span class="token number">3.</span>el8                 docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">19.03</span><span class="token number">.15</span><span class="token operator">-</span><span class="token number">3.</span>el8                docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">19.03</span><span class="token number">.14</span><span class="token operator">-</span><span class="token number">3.</span>el8                docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">19.03</span><span class="token number">.13</span><span class="token operator">-</span><span class="token number">3.</span>el8                docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
<span class="token class-name">Docker</span> <span class="token constant">CE</span> <span class="token class-name">Stable</span> <span class="token operator">-</span> x86_64                       <span class="token number">7.1</span> kB<span class="token operator">/</span>s <span class="token operator">|</span> <span class="token number">3.5</span> kB     <span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>    
<span class="token class-name">Available</span> <span class="token class-name">Packages</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>yum list docker-ce --showduplicates | sort -r</li><li>这里可以看到你能安装的最新版本</li></ul><h3 id="_6-安装docker" tabindex="-1"><a class="header-anchor" href="#_6-安装docker" aria-hidden="true">#</a> 6. 安装Docker</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># sudo yum install docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>安装默认最新版本的 Docker</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># sudo yum install <span class="token generics"><span class="token punctuation">&lt;</span>FQPN<span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>安装指定版本，例如：sudo yum install docker-ce-20.10.11.ce</li></ul><h3 id="_7-安装docker-compose" tabindex="-1"><a class="header-anchor" href="#_7-安装docker-compose" aria-hidden="true">#</a> 7. 安装Docker-Compose</h3><h4 id="_7-1-正常安装" tabindex="-1"><a class="header-anchor" href="#_7-1-正常安装" aria-hidden="true">#</a> 7.1 正常安装</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> <span class="token string">&quot;https://github.com/docker/compose/releases/download/1.29.2/docker-compose-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-s</span><span class="token variable">)</span></span>-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-m</span><span class="token variable">)</span></span>&quot;</span> <span class="token parameter variable">-o</span> /usr/local/bin/docker-compose
<span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/docker-compose
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-2-离线安装" tabindex="-1"><a class="header-anchor" href="#_7-2-离线安装" aria-hidden="true">#</a> 7.2 离线安装</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 下载；docker-compose-\`uname -s\`-\`uname -m\` 查看版本；https://github.com/docker/compose/releases/tag/v2.18.1</span>
<span class="token comment"># 重命名</span>
<span class="token function">mv</span> docker-compose-Linux-x86_64  <span class="token function">docker-compose</span>
<span class="token comment"># 加入执行权限</span>
<span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/docker-compose
<span class="token comment"># 查看docker-compose版本</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-v</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@dev</span><span class="token operator">-</span>ops bin<span class="token punctuation">]</span># sudo chmod <span class="token operator">+</span>x <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>bin<span class="token operator">/</span>docker<span class="token operator">-</span>compose
<span class="token punctuation">[</span>root<span class="token annotation punctuation">@dev</span><span class="token operator">-</span>ops bin<span class="token punctuation">]</span># docker<span class="token operator">-</span>compose <span class="token operator">-</span>v
<span class="token class-name">Docker</span> <span class="token class-name">Compose</span> version v2<span class="token punctuation">.</span><span class="token number">18.1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>安装后就可以使用 compose 命令了；<code>docker-compose -f environment-docker-compose.yml up -d</code></li></ul><h3 id="_8-启动docker并添加开机自启动" tabindex="-1"><a class="header-anchor" href="#_8-启动docker并添加开机自启动" aria-hidden="true">#</a> 8. 启动Docker并添加开机自启动</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># sudo systemctl start docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>启动 Docker</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># systemctl enable docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>设置开机启动 Docker</li></ul><h3 id="_9-查看-docker-版本" tabindex="-1"><a class="header-anchor" href="#_9-查看-docker-版本" aria-hidden="true">#</a> 9. 查看 Docker 版本</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker <span class="token operator">--</span>version
<span class="token class-name">Docker</span> version <span class="token number">20.10</span><span class="token number">.11</span><span class="token punctuation">,</span> build dea9396
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-卸载-docker" tabindex="-1"><a class="header-anchor" href="#_10-卸载-docker" aria-hidden="true">#</a> 10. 卸载 Docker</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># sudo yum remove docker \\
                  docker<span class="token operator">-</span>client \\
                  docker<span class="token operator">-</span>client<span class="token operator">-</span>latest \\
                  docker<span class="token operator">-</span>common \\
                  docker<span class="token operator">-</span>latest \\
                  docker<span class="token operator">-</span>latest<span class="token operator">-</span>logrotate \\
                  docker<span class="token operator">-</span>logrotate \\
                  docker<span class="token operator">-</span>selinux \\
                  docker<span class="token operator">-</span>engine<span class="token operator">-</span>selinux \\
                  docker<span class="token operator">-</span>engine
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-docker-常用命令" tabindex="-1"><a class="header-anchor" href="#_11-docker-常用命令" aria-hidden="true">#</a> 11. Docker 常用命令</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker <span class="token operator">--</span>help				#<span class="token class-name">Docker</span>帮助
<span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker <span class="token operator">--</span>version			#查看<span class="token class-name">Docker</span>版本
<span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker search <span class="token generics"><span class="token punctuation">&lt;</span>image<span class="token punctuation">&gt;</span></span>		#搜索镜像文件，如：docker search mysql
<span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker pull <span class="token generics"><span class="token punctuation">&lt;</span>image<span class="token punctuation">&gt;</span></span>		#拉取镜像文件， 如：docker pull mysql
<span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker images				#查看已经拉取下来的所以镜像文件
<span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker rmi <span class="token generics"><span class="token punctuation">&lt;</span>image<span class="token punctuation">&gt;</span></span>		#删除指定镜像文件
<span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker run <span class="token operator">--</span>name <span class="token generics"><span class="token punctuation">&lt;</span>name<span class="token punctuation">&gt;</span></span> <span class="token operator">-</span>p <span class="token number">80</span><span class="token operator">:</span><span class="token number">8080</span> <span class="token operator">-</span>d <span class="token generics"><span class="token punctuation">&lt;</span>image<span class="token punctuation">&gt;</span></span>		#发布指定镜像文件
<span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker ps					#查看正在运行的所有镜像
<span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker ps <span class="token operator">-</span>a				#查看所有发布的镜像
<span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker rm <span class="token generics"><span class="token punctuation">&lt;</span>image<span class="token punctuation">&gt;</span></span>			#删除执行已发布的镜像
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-设置国内源" tabindex="-1"><a class="header-anchor" href="#_12-设置国内源" aria-hidden="true">#</a> 12. 设置国内源</h3>`,41),h={href:"https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors",target:"_blank",rel:"noopener noreferrer"},g=o(`<p>使用以下命令来设置 Docker 国内源：- 或者你可以通过 <code>vim /etc/docker/daemon.json</code> 进入修改添加 registry-mirrors 内容后重启 Docker</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code>sudo mkdir <span class="token punctuation">-</span>p /etc/docker
sudo tee /etc/docker/daemon.json &lt;&lt;<span class="token punctuation">-</span><span class="token string">&#39;EOF&#39;</span>
<span class="token punctuation">{</span>
  <span class="token key atrule">&quot;registry-mirrors&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;https://***替换为你的地址***.mirror.aliyuncs.com&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
EOF
sudo systemctl daemon<span class="token punctuation">-</span>reload
sudo systemctl restart docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>软件配置</strong></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token punctuation">{</span> <span class="token key atrule">&quot;registry-mirrors&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;https://h1log1d5.mirror.aliyuncs.com&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;http://docker.mirrors.ustc.edu.cn&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;http://hub-mirror.c.163.com&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token key atrule">&quot;builder&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token key atrule">&quot;gc&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token key atrule">&quot;enabled&quot;</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token punctuation">,</span>
      <span class="token key atrule">&quot;defaultKeepStorage&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;20GB&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token key atrule">&quot;experimental&quot;</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token punctuation">,</span>
  <span class="token key atrule">&quot;features&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token key atrule">&quot;buildkit&quot;</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个命令会创建一个 <code>/etc/docker/daemon.json</code> 文件，并将国内源的配置写入其中。然后你只需要重启 Docker 服务即可使配置生效，可以通过运行 <code>sudo systemctl restart docker</code> 命令来重启 Docker 服务。</p><h3 id="_13-远程连接" tabindex="-1"><a class="header-anchor" href="#_13-远程连接" aria-hidden="true">#</a> 13. 远程连接</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vim</span> /lib/systemd/system/docker.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>Description<span class="token operator">=</span>Docker Application Container Engine
<span class="token assign-left variable">Documentation</span><span class="token operator">=</span>http://docs.docker.com
<span class="token assign-left variable">After</span><span class="token operator">=</span>network.target
<span class="token assign-left variable">Wants</span><span class="token operator">=</span>docker-storage-setup.service
<span class="token assign-left variable">Requires</span><span class="token operator">=</span>docker-cleanup.timer

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>notify
<span class="token assign-left variable">NotifyAccess</span><span class="token operator">=</span>main
<span class="token assign-left variable">EnvironmentFile</span><span class="token operator">=</span>-/run/containers/registries.conf
<span class="token assign-left variable">EnvironmentFile</span><span class="token operator">=</span>-/etc/sysconfig/docker
<span class="token assign-left variable">EnvironmentFile</span><span class="token operator">=</span>-/etc/sysconfig/docker-storage
<span class="token assign-left variable">EnvironmentFile</span><span class="token operator">=</span>-/etc/sysconfig/docker-network
<span class="token assign-left variable">Environment</span><span class="token operator">=</span>GOTRACEBACK<span class="token operator">=</span>crash
<span class="token assign-left variable">Environment</span><span class="token operator">=</span>DOCKER_HTTP_HOST_COMPAT<span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">Environment</span><span class="token operator">=</span><span class="token environment constant">PATH</span><span class="token operator">=</span>/usr/libexec/docker:/usr/bin:/usr/sbin
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/bin/dockerd-current <span class="token punctuation">\\</span>
          --add-runtime docker-runc<span class="token operator">=</span>/usr/libexec/docker/docker-runc-current <span class="token punctuation">\\</span>
          --default-runtime<span class="token operator">=</span>docker-runc <span class="token punctuation">\\</span>
          --exec-opt <span class="token assign-left variable">native.cgroupdriver</span><span class="token operator">=</span>systemd <span class="token punctuation">\\</span>
          --userland-proxy-path<span class="token operator">=</span>/usr/libexec/docker/docker-proxy-current <span class="token punctuation">\\</span>
          --init-path<span class="token operator">=</span>/usr/libexec/docker/docker-init-current <span class="token punctuation">\\</span>
          --seccomp-profile<span class="token operator">=</span>/etc/docker/seccomp.json <span class="token punctuation">\\</span>
          <span class="token parameter variable">-H</span> tcp://0.0.0.0:2375 <span class="token parameter variable">-H</span> unix:///var/run/docker.sock <span class="token punctuation">\\</span>
          <span class="token variable">$OPTIONS</span> <span class="token punctuation">\\</span>
          <span class="token variable">$DOCKER_STORAGE_OPTIONS</span> <span class="token punctuation">\\</span>
          <span class="token variable">$DOCKER_NETWORK_OPTIONS</span> <span class="token punctuation">\\</span>
          <span class="token variable">$ADD_REGISTRY</span> <span class="token punctuation">\\</span>
          <span class="token variable">$BLOCK_REGISTRY</span> <span class="token punctuation">\\</span>
          <span class="token variable">$INSECURE_REGISTRY</span> <span class="token punctuation">\\</span>
          <span class="token variable">$REGISTRIES</span>
<span class="token assign-left variable">ExecReload</span><span class="token operator">=</span>/bin/kill <span class="token parameter variable">-s</span> HUP <span class="token variable">$MAINPID</span>
<span class="token assign-left variable">LimitNOFILE</span><span class="token operator">=</span><span class="token number">1048576</span>
<span class="token assign-left variable">LimitNPROC</span><span class="token operator">=</span><span class="token number">1048576</span>
<span class="token assign-left variable">LimitCORE</span><span class="token operator">=</span>infinity
<span class="token assign-left variable">TimeoutStartSec</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">Restart</span><span class="token operator">=</span>on-abnormal
<span class="token assign-left variable">KillMode</span><span class="token operator">=</span>process

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
<span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>添加：<code>-H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock \\</code></li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 加载</span>
systemctl daemon-reload
<span class="token comment"># 重启</span>
systemctl restart <span class="token function">docker</span>
<span class="token comment"># 测试</span>
<span class="token function">curl</span> http://127.0.0.1:2375/info
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>之后你就可以打开 IDEA 的 Services 配置 Docker 了；<code>tcp://180.76.138.**:2375</code> 验证连接后就可以使用了。</li></ul><h3 id="_14-卸载docker" tabindex="-1"><a class="header-anchor" href="#_14-卸载docker" aria-hidden="true">#</a> 14. 卸载Docker</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>/Applications/Docker.app/Contents/MacOS/Docker <span class="token parameter variable">--uninstall</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,13);function _(x,f){const a=t("ExternalLinkIcon");return c(),l("div",null,[i,s("p",null,[n("作者：小傅哥 "),u,n("博客："),s("a",d,[n("https://bugstack.cn"),e(a)])]),k,s("ul",null,[s("li",null,[n("官网："),s("a",m,[n("https://www.docker.com"),e(a)]),n(" - Mac、Windows、Linux")]),v]),b,s("p",null,[n("阿里云提供了镜像源："),s("a",h,[n("https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors"),e(a)]),n(" - 登录后你会获得一个专属的地址。")]),g])}const j=p(r,[["render",_],["__file","docker.html.vue"]]);export{j as default};
