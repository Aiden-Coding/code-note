import{_ as p,r as t,o as c,c as l,a as s,b as n,d as e,e as o}from"./app-3RcBQnkC.js";const r={},i=s("h1",{id:"docker-ç¯å¢ƒé…ç½®",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#docker-ç¯å¢ƒé…ç½®","aria-hidden":"true"},"#"),n(" Docker ç¯å¢ƒé…ç½®")],-1),u=s("br",null,null,-1),d={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},k=s("blockquote",null,[s("p",null,"æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„")],-1),m={href:"https://www.docker.com/",target:"_blank",rel:"noopener noreferrer"},v=s("li",null,"ä»‹ç»ï¼šDocker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„é•œåƒä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Macã€Linuxæˆ–Windowsæ“ä½œç³»ç»Ÿçš„æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚æ€»ä¹‹å®ƒåŠ å¿«æ„å»ºã€å…±äº«å’Œè¿è¡Œç°ä»£åº”ç”¨ç¨‹åºçš„é€Ÿåº¦ã€‚",-1),b=o(`<h2 id="ä¸€ã€åŸºç¡€å®‰è£…" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€åŸºç¡€å®‰è£…" aria-hidden="true">#</a> ä¸€ã€åŸºç¡€å®‰è£…</h2><h3 id="_1-æŸ¥çœ‹ç³»ç»Ÿçš„å†…æ ¸ç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#_1-æŸ¥çœ‹ç³»ç»Ÿçš„å†…æ ¸ç‰ˆæœ¬" aria-hidden="true">#</a> 1. æŸ¥çœ‹ç³»ç»Ÿçš„å†…æ ¸ç‰ˆæœ¬</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># uname <span class="token operator">-</span>r
<span class="token number">4.18</span><span class="token number">.0</span><span class="token operator">-</span><span class="token number">80.11</span><span class="token number">.2</span><span class="token punctuation">.</span>el8_0<span class="token punctuation">.</span>x86_64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>uname -r</code></li><li>x86 64ä½ç³»ç»Ÿï¼Œå¦‚æœæ˜¯32ä½æ˜¯ä¸èƒ½å®‰è£… docker çš„</li></ul><h3 id="_2-yum-æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#_2-yum-æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬" aria-hidden="true">#</a> 2. yum æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># sudo yum update
<span class="token class-name">Last</span> metadata expiration check<span class="token operator">:</span> <span class="token number">1</span><span class="token operator">:</span><span class="token number">15</span><span class="token operator">:</span><span class="token number">10</span> ago on <span class="token class-name">Sat</span> <span class="token number">27</span> <span class="token class-name">Nov</span> <span class="token number">2021</span> <span class="token number">04</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">53</span> <span class="token constant">PM</span> <span class="token class-name">CST<span class="token punctuation">.</span>
Dependencies</span> <span class="token class-name"><span class="token namespace">resolved<span class="token punctuation">.</span></span>
Nothing</span> <span class="token keyword">to</span> <span class="token class-name"><span class="token namespace">do<span class="token punctuation">.</span></span>
Complete</span><span class="token operator">!</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>sudo yum update</code></li><li>çœ‹åˆ°æ˜¾ç¤º <code>Complete</code> å°±ä»£è¡¨å®Œæˆäº†ï¼Œæ•´ä¸ªè¿‡ç¨‹éœ€è¦ 5-10 åˆ†é’Ÿå·¦å³</li></ul><h3 id="_3-å®‰è£…dockeræ‰€éœ€çš„ä¾èµ–åŒ…" tabindex="-1"><a class="header-anchor" href="#_3-å®‰è£…dockeræ‰€éœ€çš„ä¾èµ–åŒ…" aria-hidden="true">#</a> 3. å®‰è£…Dockeræ‰€éœ€çš„ä¾èµ–åŒ…</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># sudo yum install <span class="token operator">-</span>y yum<span class="token operator">-</span>utils device<span class="token operator">-</span>mapper<span class="token operator">-</span>persistent<span class="token operator">-</span>data lvm2
<span class="token class-name">Last</span> metadata expiration check<span class="token operator">:</span> <span class="token number">1</span><span class="token operator">:</span><span class="token number">16</span><span class="token operator">:</span><span class="token number">16</span> ago on <span class="token class-name">Sat</span> <span class="token number">27</span> <span class="token class-name">Nov</span> <span class="token number">2021</span> <span class="token number">04</span><span class="token operator">:</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">53</span> <span class="token constant">PM</span> <span class="token class-name">CST<span class="token punctuation">.</span>
Package</span> yum<span class="token operator">-</span>utils<span class="token operator">-</span><span class="token number">4.0</span><span class="token number">.21</span><span class="token operator">-</span><span class="token number">3.</span>el8<span class="token punctuation">.</span>noarch is already <span class="token class-name"><span class="token namespace">installed<span class="token punctuation">.</span></span>
Package</span> device<span class="token operator">-</span>mapper<span class="token operator">-</span>persistent<span class="token operator">-</span>data<span class="token operator">-</span><span class="token number">0.9</span><span class="token number">.0</span><span class="token operator">-</span><span class="token number">4.</span>el8<span class="token punctuation">.</span>x86_64 is already <span class="token class-name"><span class="token namespace">installed<span class="token punctuation">.</span></span>
Package</span> lvm2<span class="token operator">-</span><span class="token number">8</span><span class="token operator">:</span><span class="token number">2.03</span><span class="token number">.12</span><span class="token operator">-</span><span class="token number">10.</span>el8<span class="token punctuation">.</span>x86_64 is already <span class="token class-name"><span class="token namespace">installed<span class="token punctuation">.</span></span>
Dependencies</span> <span class="token class-name"><span class="token namespace">resolved<span class="token punctuation">.</span></span>
Nothing</span> <span class="token keyword">to</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>sudo yum install -y yum-utils device-mapper-persistent-data lvm2</code></li><li>çœ‹åˆ°æ˜¾ç¤º <code>Complete</code> å°±ä»£è¡¨å®Œæˆäº†ï¼Œæ•´ä¸ªè¿‡ç¨‹éœ€è¦ 1-3 åˆ†é’Ÿå·¦å³</li></ul><h3 id="_4-è®¾ç½®dockerçš„yumçš„æº" tabindex="-1"><a class="header-anchor" href="#_4-è®¾ç½®dockerçš„yumçš„æº" aria-hidden="true">#</a> 4. è®¾ç½®Dockerçš„yumçš„æº</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># sudo yum<span class="token operator">-</span>config<span class="token operator">-</span>manager <span class="token operator">--</span>add<span class="token operator">-</span>repo https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>download<span class="token punctuation">.</span>docker<span class="token punctuation">.</span>com<span class="token operator">/</span>linux<span class="token operator">/</span>centos<span class="token operator">/</span>docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>repo
<span class="token class-name">Adding</span> repo from<span class="token operator">:</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>download<span class="token punctuation">.</span>docker<span class="token punctuation">.</span>com<span class="token operator">/</span>linux<span class="token operator">/</span>centos<span class="token operator">/</span>docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>repo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</li><li>é‰´äºå›½å†…ç½‘ç»œé—®é¢˜ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨å›½å†…æºã€‚ä»¥ä¸‹æ˜¯é˜¿é‡Œäº‘çš„è½¯ä»¶æºã€‚<strong>å¦‚æœæ˜¯æµ·å¤–å¦‚AWSäº‘å°±ä¸è¦è®¾ç½®yumæº</strong></li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> yum-config-manager <span class="token punctuation">\\</span>
    --add-repo <span class="token punctuation">\\</span>
    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
<span class="token function">sudo</span> <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;s/download.docker.com/mirrors.aliyun.com\\/docker-ce/g&#39;</span> /etc/yum.repos.d/docker-ce.repo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-æŸ¥çœ‹ä»“åº“æ‰€æœ‰dockerç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#_5-æŸ¥çœ‹ä»“åº“æ‰€æœ‰dockerç‰ˆæœ¬" aria-hidden="true">#</a> 5. æŸ¥çœ‹ä»“åº“æ‰€æœ‰Dockerç‰ˆæœ¬</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># yum list docker<span class="token operator">-</span>ce <span class="token operator">--</span>showduplicates <span class="token operator">|</span> sort <span class="token operator">-</span>r
<span class="token class-name">Installed</span> <span class="token class-name">Packages</span>
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.9</span><span class="token operator">-</span><span class="token number">3.</span>el8                 docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.8</span><span class="token operator">-</span><span class="token number">3.</span>el8                 docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.7</span><span class="token operator">-</span><span class="token number">3.</span>el8                 docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.6</span><span class="token operator">-</span><span class="token number">3.</span>el8                 docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.5</span><span class="token operator">-</span><span class="token number">3.</span>el8                 docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.4</span><span class="token operator">-</span><span class="token number">3.</span>el8                 docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.3</span><span class="token operator">-</span><span class="token number">3.</span>el8                 docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.2</span><span class="token operator">-</span><span class="token number">3.</span>el8                 docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.1</span><span class="token operator">-</span><span class="token number">3.</span>el8                 docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.11</span><span class="token operator">-</span><span class="token number">3.</span>el8                docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.11</span><span class="token operator">-</span><span class="token number">3.</span>el8                <span class="token annotation punctuation">@docker</span><span class="token operator">-</span>ce<span class="token operator">-</span>stable
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.10</span><span class="token operator">-</span><span class="token number">3.</span>el8                docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">20.10</span><span class="token number">.0</span><span class="token operator">-</span><span class="token number">3.</span>el8                 docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">19.03</span><span class="token number">.15</span><span class="token operator">-</span><span class="token number">3.</span>el8                docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">19.03</span><span class="token number">.14</span><span class="token operator">-</span><span class="token number">3.</span>el8                docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
docker<span class="token operator">-</span>ce<span class="token punctuation">.</span>x86_64               <span class="token number">3</span><span class="token operator">:</span><span class="token number">19.03</span><span class="token number">.13</span><span class="token operator">-</span><span class="token number">3.</span>el8                docker<span class="token operator">-</span>ce<span class="token operator">-</span>stable 
<span class="token class-name">Docker</span> <span class="token constant">CE</span> <span class="token class-name">Stable</span> <span class="token operator">-</span> x86_64                       <span class="token number">7.1</span> kB<span class="token operator">/</span>s <span class="token operator">|</span> <span class="token number">3.5</span> kB     <span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>    
<span class="token class-name">Available</span> <span class="token class-name">Packages</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>yum list docker-ce --showduplicates | sort -r</li><li>è¿™é‡Œå¯ä»¥çœ‹åˆ°ä½ èƒ½å®‰è£…çš„æœ€æ–°ç‰ˆæœ¬</li></ul><h3 id="_6-å®‰è£…docker" tabindex="-1"><a class="header-anchor" href="#_6-å®‰è£…docker" aria-hidden="true">#</a> 6. å®‰è£…Docker</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># sudo yum install docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>å®‰è£…é»˜è®¤æœ€æ–°ç‰ˆæœ¬çš„ Docker</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># sudo yum install <span class="token generics"><span class="token punctuation">&lt;</span>FQPN<span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼šsudo yum install docker-ce-20.10.11.ce</li></ul><h3 id="_7-å®‰è£…docker-compose" tabindex="-1"><a class="header-anchor" href="#_7-å®‰è£…docker-compose" aria-hidden="true">#</a> 7. å®‰è£…Docker-Compose</h3><h4 id="_7-1-æ­£å¸¸å®‰è£…" tabindex="-1"><a class="header-anchor" href="#_7-1-æ­£å¸¸å®‰è£…" aria-hidden="true">#</a> 7.1 æ­£å¸¸å®‰è£…</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> <span class="token string">&quot;https://github.com/docker/compose/releases/download/1.29.2/docker-compose-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-s</span><span class="token variable">)</span></span>-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-m</span><span class="token variable">)</span></span>&quot;</span> <span class="token parameter variable">-o</span> /usr/local/bin/docker-compose
<span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/docker-compose
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-2-ç¦»çº¿å®‰è£…" tabindex="-1"><a class="header-anchor" href="#_7-2-ç¦»çº¿å®‰è£…" aria-hidden="true">#</a> 7.2 ç¦»çº¿å®‰è£…</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># ä¸‹è½½ï¼›docker-compose-\`uname -s\`-\`uname -m\` æŸ¥çœ‹ç‰ˆæœ¬ï¼›https://github.com/docker/compose/releases/tag/v2.18.1</span>
<span class="token comment"># é‡å‘½å</span>
<span class="token function">mv</span> docker-compose-Linux-x86_64  <span class="token function">docker-compose</span>
<span class="token comment"># åŠ å…¥æ‰§è¡Œæƒé™</span>
<span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/docker-compose
<span class="token comment"># æŸ¥çœ‹docker-composeç‰ˆæœ¬</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-v</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@dev</span><span class="token operator">-</span>ops bin<span class="token punctuation">]</span># sudo chmod <span class="token operator">+</span>x <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>bin<span class="token operator">/</span>docker<span class="token operator">-</span>compose
<span class="token punctuation">[</span>root<span class="token annotation punctuation">@dev</span><span class="token operator">-</span>ops bin<span class="token punctuation">]</span># docker<span class="token operator">-</span>compose <span class="token operator">-</span>v
<span class="token class-name">Docker</span> <span class="token class-name">Compose</span> version v2<span class="token punctuation">.</span><span class="token number">18.1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å®‰è£…åå°±å¯ä»¥ä½¿ç”¨ compose å‘½ä»¤äº†ï¼›<code>docker-compose -f environment-docker-compose.yml up -d</code></li></ul><h3 id="_8-å¯åŠ¨dockerå¹¶æ·»åŠ å¼€æœºè‡ªå¯åŠ¨" tabindex="-1"><a class="header-anchor" href="#_8-å¯åŠ¨dockerå¹¶æ·»åŠ å¼€æœºè‡ªå¯åŠ¨" aria-hidden="true">#</a> 8. å¯åŠ¨Dockerå¹¶æ·»åŠ å¼€æœºè‡ªå¯åŠ¨</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># sudo systemctl start docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>å¯åŠ¨ Docker</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># systemctl enable docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>è®¾ç½®å¼€æœºå¯åŠ¨ Docker</li></ul><h3 id="_9-æŸ¥çœ‹-docker-ç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#_9-æŸ¥çœ‹-docker-ç‰ˆæœ¬" aria-hidden="true">#</a> 9. æŸ¥çœ‹ Docker ç‰ˆæœ¬</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker <span class="token operator">--</span>version
<span class="token class-name">Docker</span> version <span class="token number">20.10</span><span class="token number">.11</span><span class="token punctuation">,</span> build dea9396
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-å¸è½½-docker" tabindex="-1"><a class="header-anchor" href="#_10-å¸è½½-docker" aria-hidden="true">#</a> 10. å¸è½½ Docker</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># sudo yum remove docker \\
                  docker<span class="token operator">-</span>client \\
                  docker<span class="token operator">-</span>client<span class="token operator">-</span>latest \\
                  docker<span class="token operator">-</span>common \\
                  docker<span class="token operator">-</span>latest \\
                  docker<span class="token operator">-</span>latest<span class="token operator">-</span>logrotate \\
                  docker<span class="token operator">-</span>logrotate \\
                  docker<span class="token operator">-</span>selinux \\
                  docker<span class="token operator">-</span>engine<span class="token operator">-</span>selinux \\
                  docker<span class="token operator">-</span>engine
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-docker-å¸¸ç”¨å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_11-docker-å¸¸ç”¨å‘½ä»¤" aria-hidden="true">#</a> 11. Docker å¸¸ç”¨å‘½ä»¤</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker <span class="token operator">--</span>help				#<span class="token class-name">Docker</span>å¸®åŠ©
<span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker <span class="token operator">--</span>version			#æŸ¥çœ‹<span class="token class-name">Docker</span>ç‰ˆæœ¬
<span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker search <span class="token generics"><span class="token punctuation">&lt;</span>image<span class="token punctuation">&gt;</span></span>		#æœç´¢é•œåƒæ–‡ä»¶ï¼Œå¦‚ï¼šdocker search mysql
<span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker pull <span class="token generics"><span class="token punctuation">&lt;</span>image<span class="token punctuation">&gt;</span></span>		#æ‹‰å–é•œåƒæ–‡ä»¶ï¼Œ å¦‚ï¼šdocker pull mysql
<span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker images				#æŸ¥çœ‹å·²ç»æ‹‰å–ä¸‹æ¥çš„æ‰€ä»¥é•œåƒæ–‡ä»¶
<span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker rmi <span class="token generics"><span class="token punctuation">&lt;</span>image<span class="token punctuation">&gt;</span></span>		#åˆ é™¤æŒ‡å®šé•œåƒæ–‡ä»¶
<span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker run <span class="token operator">--</span>name <span class="token generics"><span class="token punctuation">&lt;</span>name<span class="token punctuation">&gt;</span></span> <span class="token operator">-</span>p <span class="token number">80</span><span class="token operator">:</span><span class="token number">8080</span> <span class="token operator">-</span>d <span class="token generics"><span class="token punctuation">&lt;</span>image<span class="token punctuation">&gt;</span></span>		#å‘å¸ƒæŒ‡å®šé•œåƒæ–‡ä»¶
<span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker ps					#æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„æ‰€æœ‰é•œåƒ
<span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker ps <span class="token operator">-</span>a				#æŸ¥çœ‹æ‰€æœ‰å‘å¸ƒçš„é•œåƒ
<span class="token punctuation">[</span>root<span class="token annotation punctuation">@CodeGuide</span> <span class="token operator">~</span><span class="token punctuation">]</span># docker rm <span class="token generics"><span class="token punctuation">&lt;</span>image<span class="token punctuation">&gt;</span></span>			#åˆ é™¤æ‰§è¡Œå·²å‘å¸ƒçš„é•œåƒ
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-è®¾ç½®å›½å†…æº" tabindex="-1"><a class="header-anchor" href="#_12-è®¾ç½®å›½å†…æº" aria-hidden="true">#</a> 12. è®¾ç½®å›½å†…æº</h3>`,41),h={href:"https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors",target:"_blank",rel:"noopener noreferrer"},g=o(`<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥è®¾ç½® Docker å›½å†…æºï¼š- æˆ–è€…ä½ å¯ä»¥é€šè¿‡ <code>vim /etc/docker/daemon.json</code> è¿›å…¥ä¿®æ”¹æ·»åŠ  registry-mirrors å†…å®¹åé‡å¯ Docker</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code>sudo mkdir <span class="token punctuation">-</span>p /etc/docker
sudo tee /etc/docker/daemon.json &lt;&lt;<span class="token punctuation">-</span><span class="token string">&#39;EOF&#39;</span>
<span class="token punctuation">{</span>
  <span class="token key atrule">&quot;registry-mirrors&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;https://***æ›¿æ¢ä¸ºä½ çš„åœ°å€***.mirror.aliyuncs.com&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
EOF
sudo systemctl daemon<span class="token punctuation">-</span>reload
sudo systemctl restart docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è½¯ä»¶é…ç½®</strong></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token punctuation">{</span> <span class="token key atrule">&quot;registry-mirrors&quot;</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;https://h1log1d5.mirror.aliyuncs.com&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;http://docker.mirrors.ustc.edu.cn&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;http://hub-mirror.c.163.com&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token key atrule">&quot;builder&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token key atrule">&quot;gc&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token key atrule">&quot;enabled&quot;</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token punctuation">,</span>
      <span class="token key atrule">&quot;defaultKeepStorage&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;20GB&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token key atrule">&quot;experimental&quot;</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token punctuation">,</span>
  <span class="token key atrule">&quot;features&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token key atrule">&quot;buildkit&quot;</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªå‘½ä»¤ä¼šåˆ›å»ºä¸€ä¸ª <code>/etc/docker/daemon.json</code> æ–‡ä»¶ï¼Œå¹¶å°†å›½å†…æºçš„é…ç½®å†™å…¥å…¶ä¸­ã€‚ç„¶åä½ åªéœ€è¦é‡å¯ Docker æœåŠ¡å³å¯ä½¿é…ç½®ç”Ÿæ•ˆï¼Œå¯ä»¥é€šè¿‡è¿è¡Œ <code>sudo systemctl restart docker</code> å‘½ä»¤æ¥é‡å¯ Docker æœåŠ¡ã€‚</p><h3 id="_13-è¿œç¨‹è¿æ¥" tabindex="-1"><a class="header-anchor" href="#_13-è¿œç¨‹è¿æ¥" aria-hidden="true">#</a> 13. è¿œç¨‹è¿æ¥</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vim</span> /lib/systemd/system/docker.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>Description<span class="token operator">=</span>Docker Application Container Engine
<span class="token assign-left variable">Documentation</span><span class="token operator">=</span>http://docs.docker.com
<span class="token assign-left variable">After</span><span class="token operator">=</span>network.target
<span class="token assign-left variable">Wants</span><span class="token operator">=</span>docker-storage-setup.service
<span class="token assign-left variable">Requires</span><span class="token operator">=</span>docker-cleanup.timer

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>notify
<span class="token assign-left variable">NotifyAccess</span><span class="token operator">=</span>main
<span class="token assign-left variable">EnvironmentFile</span><span class="token operator">=</span>-/run/containers/registries.conf
<span class="token assign-left variable">EnvironmentFile</span><span class="token operator">=</span>-/etc/sysconfig/docker
<span class="token assign-left variable">EnvironmentFile</span><span class="token operator">=</span>-/etc/sysconfig/docker-storage
<span class="token assign-left variable">EnvironmentFile</span><span class="token operator">=</span>-/etc/sysconfig/docker-network
<span class="token assign-left variable">Environment</span><span class="token operator">=</span>GOTRACEBACK<span class="token operator">=</span>crash
<span class="token assign-left variable">Environment</span><span class="token operator">=</span>DOCKER_HTTP_HOST_COMPAT<span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">Environment</span><span class="token operator">=</span><span class="token environment constant">PATH</span><span class="token operator">=</span>/usr/libexec/docker:/usr/bin:/usr/sbin
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/bin/dockerd-current <span class="token punctuation">\\</span>
          --add-runtime docker-runc<span class="token operator">=</span>/usr/libexec/docker/docker-runc-current <span class="token punctuation">\\</span>
          --default-runtime<span class="token operator">=</span>docker-runc <span class="token punctuation">\\</span>
          --exec-opt <span class="token assign-left variable">native.cgroupdriver</span><span class="token operator">=</span>systemd <span class="token punctuation">\\</span>
          --userland-proxy-path<span class="token operator">=</span>/usr/libexec/docker/docker-proxy-current <span class="token punctuation">\\</span>
          --init-path<span class="token operator">=</span>/usr/libexec/docker/docker-init-current <span class="token punctuation">\\</span>
          --seccomp-profile<span class="token operator">=</span>/etc/docker/seccomp.json <span class="token punctuation">\\</span>
          <span class="token parameter variable">-H</span> tcp://0.0.0.0:2375 <span class="token parameter variable">-H</span> unix:///var/run/docker.sock <span class="token punctuation">\\</span>
          <span class="token variable">$OPTIONS</span> <span class="token punctuation">\\</span>
          <span class="token variable">$DOCKER_STORAGE_OPTIONS</span> <span class="token punctuation">\\</span>
          <span class="token variable">$DOCKER_NETWORK_OPTIONS</span> <span class="token punctuation">\\</span>
          <span class="token variable">$ADD_REGISTRY</span> <span class="token punctuation">\\</span>
          <span class="token variable">$BLOCK_REGISTRY</span> <span class="token punctuation">\\</span>
          <span class="token variable">$INSECURE_REGISTRY</span> <span class="token punctuation">\\</span>
          <span class="token variable">$REGISTRIES</span>
<span class="token assign-left variable">ExecReload</span><span class="token operator">=</span>/bin/kill <span class="token parameter variable">-s</span> HUP <span class="token variable">$MAINPID</span>
<span class="token assign-left variable">LimitNOFILE</span><span class="token operator">=</span><span class="token number">1048576</span>
<span class="token assign-left variable">LimitNPROC</span><span class="token operator">=</span><span class="token number">1048576</span>
<span class="token assign-left variable">LimitCORE</span><span class="token operator">=</span>infinity
<span class="token assign-left variable">TimeoutStartSec</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">Restart</span><span class="token operator">=</span>on-abnormal
<span class="token assign-left variable">KillMode</span><span class="token operator">=</span>process

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
<span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ·»åŠ ï¼š<code>-H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock \\</code></li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># åŠ è½½</span>
systemctl daemon-reload
<span class="token comment"># é‡å¯</span>
systemctl restart <span class="token function">docker</span>
<span class="token comment"># æµ‹è¯•</span>
<span class="token function">curl</span> http://127.0.0.1:2375/info
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä¹‹åä½ å°±å¯ä»¥æ‰“å¼€ IDEA çš„ Services é…ç½® Docker äº†ï¼›<code>tcp://180.76.138.**:2375</code> éªŒè¯è¿æ¥åå°±å¯ä»¥ä½¿ç”¨äº†ã€‚</li></ul><h3 id="_14-å¸è½½docker" tabindex="-1"><a class="header-anchor" href="#_14-å¸è½½docker" aria-hidden="true">#</a> 14. å¸è½½Docker</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>/Applications/Docker.app/Contents/MacOS/Docker <span class="token parameter variable">--uninstall</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,13);function _(x,f){const a=t("ExternalLinkIcon");return c(),l("div",null,[i,s("p",null,[n("ä½œè€…ï¼šå°å‚…å“¥ "),u,n("åšå®¢ï¼š"),s("a",d,[n("https://bugstack.cn"),e(a)])]),k,s("ul",null,[s("li",null,[n("å®˜ç½‘ï¼š"),s("a",m,[n("https://www.docker.com"),e(a)]),n(" - Macã€Windowsã€Linux")]),v]),b,s("p",null,[n("é˜¿é‡Œäº‘æä¾›äº†é•œåƒæºï¼š"),s("a",h,[n("https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors"),e(a)]),n(" - ç™»å½•åä½ ä¼šè·å¾—ä¸€ä¸ªä¸“å±çš„åœ°å€ã€‚")]),g])}const j=p(r,[["render",_],["__file","docker.html.vue"]]);export{j as default};
