import{_ as t,r as e,o as p,c as o,a as n,b as s,d as c,e as l}from"./app-3RcBQnkC.js";const u={},i=n("h1",{id:"nettyæ¡ˆä¾‹-netty4-1æºç åˆ†æç¯‡å…­ã€Šnettyå¼‚æ­¥æ¶æ„ç›‘å¬ç±»promiseæºç åˆ†æã€‹",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#nettyæ¡ˆä¾‹-netty4-1æºç åˆ†æç¯‡å…­ã€Šnettyå¼‚æ­¥æ¶æ„ç›‘å¬ç±»promiseæºç åˆ†æã€‹","aria-hidden":"true"},"#"),s(" nettyæ¡ˆä¾‹ï¼Œnetty4.1æºç åˆ†æç¯‡å…­ã€ŠNettyå¼‚æ­¥æ¶æ„ç›‘å¬ç±»Promiseæºç åˆ†æã€‹")],-1),k=n("br",null,null,-1),r={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},d=l(`<blockquote><p>æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„</p></blockquote><h2 id="å‰è¨€ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#å‰è¨€ä»‹ç»" aria-hidden="true">#</a> å‰è¨€ä»‹ç»</h2><p>åˆ†æPromiseä¹‹å‰æˆ‘ä»¬å…ˆæ¥çœ‹ä¸¤ä¸ªå•è¯ï¼›Promiseã€Future</p><blockquote><p>Promise v. è®¸è¯º;æ‰¿è¯º;ç­”åº”;ä¿è¯;ä½¿å¾ˆå¯èƒ½;é¢„ç¤º Future n. å°†æ¥;æœªæ¥;æœªæ¥çš„äº‹;å°†æ¥å‘ç”Ÿçš„äº‹;å‰æ™¯;å‰é€”;å‰ç¨‹</p></blockquote><p>ä»–ä»¬çš„å«ä¹‰éƒ½æ˜¯å¯¹æœªæ¥å³å°†è¦å‘ç”Ÿçš„äº‹æƒ…åšç›¸åº”çš„å¤„ç†ï¼Œè¿™ä¹Ÿæ˜¯åœ¨å¼‚æ­¥ç¼–ç¨‹ä¸­éå¸¸å¸¸è§çš„ç±»åã€‚</p><p>Nettyæ˜¯ä¸€ä¸ªå¼‚æ­¥ç½‘ç»œå¤„ç†æ¡†æ¶ï¼Œåœ¨å®ç°ä¸­å¤§é‡ä½¿ç”¨äº†Futureæœºåˆ¶ï¼Œå¹¶åœ¨Javaè‡ªå¸¦Futureçš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†Promiseæœºåˆ¶ã€‚è¿™ä¸¤ä¸ªå®ç°ç±»çš„ç›®çš„éƒ½æ˜¯ä¸ºäº†ä½¿å¼‚æ­¥ç¼–ç¨‹æ›´åŠ æ–¹ä¾¿ä½¿ç”¨ã€‚</p><h2 id="æºç åˆ†æ" tabindex="-1"><a class="header-anchor" href="#æºç åˆ†æ" aria-hidden="true">#</a> æºç åˆ†æ</h2><h3 id="_1ã€äº†è§£javaå¹¶å‘åŒ…ä¸­çš„future" tabindex="-1"><a class="header-anchor" href="#_1ã€äº†è§£javaå¹¶å‘åŒ…ä¸­çš„future" aria-hidden="true">#</a> 1ã€äº†è§£Javaå¹¶å‘åŒ…ä¸­çš„Future</h3><p>javaçš„å¹¶å‘åŒ…ä¸­æä¾›java.util.concurrent.Futureç±»ï¼Œç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œã€‚åœ¨Javaä¸­Futureæ˜¯ä¸€ä¸ªæœªæ¥å®Œæˆçš„å¼‚æ­¥æ“ä½œï¼Œå¯ä»¥è·å¾—æœªæ¥è¿”å›çš„å€¼ã€‚å¦‚ä¸‹æ¡ˆä¾‹ï¼Œè°ƒç”¨ä¸€ä¸ªè·å–ç”¨æˆ·ä¿¡æ¯çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šç«‹åˆ»è¿”å›Futureå¯¹è±¡ï¼Œè°ƒç”¨Future.get()å¯ä»¥åŒæ­¥ç­‰å¾…è€—æ—¶æ–¹æ³•çš„è¿”å›ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨futureçš„cancel()å–æ¶ˆFutureä»»åŠ¡ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">TestFuture</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">TestFuture</span> testFuture <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TestFuture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> testFuture<span class="token punctuation">.</span><span class="token function">queryUserInfo</span><span class="token punctuation">(</span><span class="token string">&quot;10001&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è¿”å›future</span>
        <span class="token class-name">String</span> userInfo <span class="token operator">=</span> future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼š&quot;</span> <span class="token operator">+</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryUserInfo</span><span class="token punctuation">(</span><span class="token class-name">String</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token string">&quot;å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ | ç”¨æˆ·IDï¼š&quot;</span> <span class="token operator">+</span> userId<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> ignored<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>future<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> future<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ã€nettyå®ç°äº†è‡ªå·±çš„future" tabindex="-1"><a class="header-anchor" href="#_2ã€nettyå®ç°äº†è‡ªå·±çš„future" aria-hidden="true">#</a> 2ã€Nettyå®ç°äº†è‡ªå·±çš„Future</h3><p>Nettyé€šè¿‡ç»§æ‰¿javaå¹¶å‘åŒ…çš„Futureæ¥å®šä¹‰è‡ªå·±çš„Futureæ¥å£ï¼Œä¸ºFutureåŠ å…¥çš„åŠŸèƒ½ä¸»è¦æœ‰æ·»åŠ ã€åˆ é™¤ç›‘å¬äº‹ä»¶æ¥å£ï¼Œæœ€åç”±Promiseå®ç°ã€‚</p><blockquote><p>io.netty.util.concurrent.Future.javaä¸­å®šä¹‰äº†ä¸€äº›åˆ—çš„å¼‚æ­¥ç¼–ç¨‹æ–¹æ³• | ç»å¸¸ä¼šä½¿ç”¨çš„&gt;b.bind(port).sync();</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// åªæœ‰IOæ“ä½œå®Œæˆæ—¶æ‰è¿”å›true</span>
<span class="token keyword">boolean</span> <span class="token function">isSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// åªæœ‰å½“cancel(boolean)æˆåŠŸå–æ¶ˆæ—¶æ‰è¿”å›true</span>
<span class="token keyword">boolean</span> <span class="token function">isCancellable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// IOæ“ä½œå‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œè¿”å›å¯¼è‡´IOæ“ä½œä»¥æ­¤çš„åŸå› ï¼Œå¦‚æœæ²¡æœ‰å¼‚å¸¸ï¼Œè¿”å›null</span>
<span class="token class-name">Throwable</span> <span class="token function">cause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å‘Futureæ·»åŠ äº‹ä»¶ï¼Œfutureå®Œæˆæ—¶ï¼Œä¼šæ‰§è¡Œè¿™äº›äº‹ä»¶ï¼Œå¦‚æœaddæ—¶futureå·²ç»å®Œæˆï¼Œä¼šç«‹å³æ‰§è¡Œç›‘å¬äº‹ä»¶</span>
<span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">addListener</span><span class="token punctuation">(</span><span class="token class-name">GenericFutureListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Future</span><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">addListeners</span><span class="token punctuation">(</span><span class="token class-name">GenericFutureListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Future</span><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> listeners<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ç§»é™¤ç›‘å¬äº‹ä»¶ï¼Œfutureå®Œæˆæ—¶ï¼Œä¸ä¼šè§¦å‘</span>
<span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">removeListener</span><span class="token punctuation">(</span><span class="token class-name">GenericFutureListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Future</span><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">removeListeners</span><span class="token punctuation">(</span><span class="token class-name">GenericFutureListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Future</span><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> listeners<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ç­‰å¾…future done</span>
<span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">;</span>
<span class="token comment">// ç­‰å¾…future doneï¼Œä¸å¯æ‰“æ–­</span>
<span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">syncUninterruptibly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ç­‰å¾…futureå®Œæˆ</span>
<span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">;</span>
<span class="token comment">// ç­‰å¾…future å®Œæˆï¼Œä¸å¯æ‰“æ–­</span>
<span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">awaitUninterruptibly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> <span class="token function">await</span><span class="token punctuation">(</span><span class="token keyword">long</span> timeout<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> <span class="token function">await</span><span class="token punctuation">(</span><span class="token keyword">long</span> timeoutMillis<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> <span class="token function">awaitUninterruptibly</span><span class="token punctuation">(</span><span class="token keyword">long</span> timeout<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> <span class="token function">awaitUninterruptibly</span><span class="token punctuation">(</span><span class="token keyword">long</span> timeoutMillis<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ç«‹åˆ»è·å¾—ç»“æœï¼Œå¦‚æœæ²¡æœ‰å®Œæˆï¼Œè¿”å›null</span>
<span class="token class-name">V</span> <span class="token function">getNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å¦‚æœæˆåŠŸå–æ¶ˆï¼Œfutureä¼šå¤±è´¥ï¼Œå¯¼è‡´CancellationException</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">boolean</span> <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> mayInterruptIfRunning<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3ã€promiseæœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_3ã€promiseæœºåˆ¶" aria-hidden="true">#</a> 3ã€Promiseæœºåˆ¶</h3><p>Nettyçš„Futureä¸Javaçš„Futureè™½ç„¶ç±»åç›¸åŒï¼Œä½†åŠŸèƒ½ä¸Šç•¥æœ‰ä¸åŒï¼ŒNettyä¸­å¼•å…¥äº†Promiseæœºåˆ¶ã€‚åœ¨Javaçš„Futureä¸­ï¼Œä¸šåŠ¡é€»è¾‘ä¸ºä¸€ä¸ªCallableæˆ–Runnableå®ç°ç±»ï¼Œè¯¥ç±»çš„call()æˆ–run()æ‰§è¡Œå®Œæ¯•æ„å‘³ç€ä¸šåŠ¡é€»è¾‘çš„å®Œç»“ï¼›è€Œåœ¨Promiseæœºåˆ¶ä¸­ï¼Œå¯ä»¥åœ¨ä¸šåŠ¡é€»è¾‘ä¸­äººå·¥è®¾ç½®ä¸šåŠ¡é€»è¾‘çš„æˆåŠŸä¸å¤±è´¥ï¼Œè¿™æ ·æ›´åŠ æ–¹ä¾¿çš„ç›‘æ§è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ã€‚</p><blockquote><p>io.netty.util.concurrent.Promise.java |</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Promise</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

	<span class="token comment">// è®¾ç½®futureæ‰§è¡Œç»“æœä¸ºæˆåŠŸ</span>
    <span class="token class-name">Promise</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">setSuccess</span><span class="token punctuation">(</span><span class="token class-name">V</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// å°è¯•è®¾ç½®futureæ‰§è¡Œç»“æœä¸ºæˆåŠŸ,è¿”å›æ˜¯å¦è®¾ç½®æˆåŠŸ</span>
    <span class="token keyword">boolean</span> <span class="token function">trySuccess</span><span class="token punctuation">(</span><span class="token class-name">V</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// è®¾ç½®å¤±è´¥</span>
    <span class="token class-name">Promise</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">setFailure</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span> cause<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// å°è¯•è®¾ç½®futureæ‰§è¡Œç»“æœä¸ºå¤±è´¥,è¿”å›æ˜¯å¦è®¾ç½®æˆåŠŸ </span>
    <span class="token keyword">boolean</span> <span class="token function">tryFailure</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span> cause<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// è®¾ç½®ä¸ºä¸èƒ½å–æ¶ˆ</span>
    <span class="token keyword">boolean</span> <span class="token function">setUncancellable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// æºç ä¸­ï¼Œä»¥ä¸‹ä¸ºè¦†ç›–äº†Futureçš„æ–¹æ³•ï¼Œä¾‹å¦‚ï¼›</span>
	
	<span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">addListener</span><span class="token punctuation">(</span><span class="token class-name">GenericFutureListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Future</span><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token annotation punctuation">@Override</span>
    <span class="token class-name">Promise</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">addListener</span><span class="token punctuation">(</span><span class="token class-name">GenericFutureListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Future</span><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> listener<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>TestPromise.java | ä¸€ä¸ªæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„Promiseåˆ—å­ï¼ŒåŠ å…¥ç›‘å¬å†operationCompleteå®Œæˆåï¼Œè·å–æŸ¥è¯¢ä¿¡æ¯</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">TestPromise</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">TestPromise</span> testPromise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TestPromise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Promise</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> promise <span class="token operator">=</span> testPromise<span class="token punctuation">.</span><span class="token function">queryUserInfo</span><span class="token punctuation">(</span><span class="token string">&quot;10001&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        promise<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">GenericFutureListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Future</span><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operationComplete</span><span class="token punctuation">(</span><span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> future<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;addListener.operationComplete &gt; æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯å®Œæˆï¼š &quot;</span> <span class="token operator">+</span> future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">Promise</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryUserInfo</span><span class="token punctuation">(</span><span class="token class-name">String</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">NioEventLoopGroup</span> loop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NioEventLoopGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// åˆ›å»ºä¸€ä¸ªDefaultPromiseå¹¶è¿”å›ï¼Œå°†ä¸šåŠ¡é€»è¾‘æ”¾å…¥çº¿ç¨‹æ± ä¸­æ‰§è¡Œ</span>
        <span class="token class-name">DefaultPromise</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultPromise</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>loop<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        loop<span class="token punctuation">.</span><span class="token function">schedule</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                promise<span class="token punctuation">.</span><span class="token function">setSuccess</span><span class="token punctuation">(</span><span class="token string">&quot;å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ | ç”¨æˆ·IDï¼š&quot;</span> <span class="token operator">+</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> promise<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> ignored<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> promise<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> promise<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹åˆ°ï¼ŒPromiseèƒ½å¤Ÿåœ¨ä¸šåŠ¡é€»è¾‘çº¿ç¨‹ä¸­é€šçŸ¥FutureæˆåŠŸæˆ–å¤±è´¥ï¼Œç”±äºPromiseç»§æ‰¿äº†Nettyçš„Futureï¼Œå› æ­¤å¯ä»¥åŠ å…¥ç›‘å¬äº‹ä»¶ã€‚è€ŒFutureå’ŒPromiseçš„å¥½å¤„åœ¨äºï¼Œè·å–åˆ°Promiseå¯¹è±¡åå¯ä»¥ä¸ºå…¶è®¾ç½®å¼‚æ­¥è°ƒç”¨å®Œæˆåçš„æ“ä½œï¼Œç„¶åç«‹å³ç»§ç»­å»åšå…¶ä»–ä»»åŠ¡ã€‚</p><h3 id="_4ã€promiseç±»ç»„ç»‡ç»“æ„-å¸¸ç”¨æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_4ã€promiseç±»ç»„ç»‡ç»“æ„-å¸¸ç”¨æ–¹æ³•" aria-hidden="true">#</a> 4ã€Promiseç±»ç»„ç»‡ç»“æ„&amp;å¸¸ç”¨æ–¹æ³•</h3><blockquote><p>DefaultChannelPromiseç±»ç»„ç»‡ç»“æ„å›¾ | æ‰¿æ¥Javaå¹¶å‘åŒ…Futureå¹¶å¢å¼ºå®ç°</p></blockquote><p><img src="https://bugstack.cn/assets/images/pic-content/2019/09/netty-code-6-1.png" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ | DefaultChannelPromiseç±»ç»„ç»‡ç»“æ„å›¾"></p><p>Nettyä¸­DefalutPromiseæ˜¯ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„ç±»ï¼Œè¿™æ˜¯Promiseå®ç°çš„åŸºç¡€ã€‚DefaultChannelPromiseæ˜¯DefalutPromiseçš„å­ç±»ï¼ŒåŠ å…¥äº†channelè¿™ä¸ªå±æ€§ã€‚</p><p><strong>DefaultPromise | ä½¿ç”¨</strong> åœ¨Nettyä¸­ä½¿ç”¨åˆ°Promiseçš„åœ°æ–¹ä¼šéå¸¸å¤šï¼Œä¾‹å¦‚åœ¨å‰é¢ä¸€èŠ‚ã€Šä¸€è¡Œç®€å•çš„writeAndFlushéƒ½åšäº†å“ªäº›äº‹ã€‹åˆ†æHeadContext.writeä¸­unsafe.write(msg, promise);ç»“åˆè¿™ä¸€ç« èŠ‚å¯ä»¥ç»§ç»­æ·±å…¥äº†è§£Nettyçš„å¼‚æ­¥æ¡†æ¶åŸç†ã€‚å¦å¤–ï¼ŒæœåŠ¡å™¨/å®¢æˆ·ç«¯å¯åŠ¨æ—¶çš„æ³¨å†Œä»»åŠ¡ï¼Œæœ€ç»ˆä¼šè°ƒç”¨unsafeçš„registerï¼Œè°ƒç”¨è¿‡ç¨‹ä¸­ä¼šä¼ å…¥ä¸€ä¸ªpromiseï¼Œunsafeè¿›è¡Œäº‹ä»¶çš„æ³¨å†Œæ—¶è°ƒç”¨promiseå¯ä»¥è®¾ç½®æˆåŠŸ/å¤±è´¥ã€‚</p><blockquote><p>SingleThreadEventLoop.java | æ³¨å†ŒæœåŠ¡äº‹ä»¶å¾ªç¯ç»„</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">ChannelFuture</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">Channel</span> channel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DefaultChannelPromise</span><span class="token punctuation">(</span>channel<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">ChannelFuture</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">ChannelPromise</span> promise<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">ObjectUtil</span><span class="token punctuation">.</span><span class="token function">checkNotNull</span><span class="token punctuation">(</span>promise<span class="token punctuation">,</span> <span class="token string">&quot;promise&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	promise<span class="token punctuation">.</span><span class="token function">channel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unsafe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> promise<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> promise<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>DefaultPromise | å®ç°</strong> DefaultChannelPromiseæä¾›çš„åŠŸèƒ½å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼›</p><ul><li>ä¸ºè°ƒç”¨è€…æä¾›get()å’ŒaddListener()ç”¨äºè·å–Futureä»»åŠ¡æ‰§è¡Œç»“æœå’Œæ·»åŠ ç›‘å¬äº‹ä»¶ã€‚</li><li>ä¸ºä¸šåŠ¡å¤„ç†ä»»åŠ¡æä¾›setSuccess()ç­‰æ–¹æ³•è®¾ç½®ä»»åŠ¡çš„æˆåŠŸæˆ–å¤±è´¥ã€‚</li></ul><blockquote><p>AbstractFuture.java | get()æ–¹æ³•</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">V</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">,</span> <span class="token class-name">ExecutionException</span> <span class="token punctuation">{</span>
        <span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Throwable</span> cause <span class="token operator">=</span> <span class="token function">cause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cause <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">getNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cause <span class="token keyword">instanceof</span> <span class="token class-name">CancellationException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token punctuation">(</span><span class="token class-name">CancellationException</span><span class="token punctuation">)</span> cause<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">(</span>cause<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">V</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">long</span> timeout<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">,</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">,</span> <span class="token class-name">TimeoutException</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">await</span><span class="token punctuation">(</span>timeout<span class="token punctuation">,</span> unit<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Throwable</span> cause <span class="token operator">=</span> <span class="token function">cause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>cause <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token function">getNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>cause <span class="token keyword">instanceof</span> <span class="token class-name">CancellationException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token punctuation">(</span><span class="token class-name">CancellationException</span><span class="token punctuation">)</span> cause<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">(</span>cause<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TimeoutException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>DefaultPromiseçˆ¶ç±»AbstractFutureæä¾›äº†ä¸¤ä¸ªgetæ–¹æ³•ï¼›1ã€æ— å‚æ•°çš„getä¼šé˜»å¡ç­‰å¾…ï¼›2ã€æœ‰å‚æ•°çš„getä¼šç­‰å¾…æŒ‡å®šäº‹ä»¶ï¼Œè‹¥æœªç»“æŸæŠ›å‡ºè¶…æ—¶å¼‚å¸¸ã€‚</p><hr><blockquote><p>DefaultPromise.java | DefaultPromise.await()æ–¹æ³•</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">Promise</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Interrupt</span>
	<span class="token comment">// åˆ¤æ–­Futureä»»åŠ¡æ˜¯å¦ç»“æŸï¼Œå†…éƒ¨æ ¹æ®resultæ˜¯å¦ä¸ºnullåˆ¤æ–­ï¼ŒsetSuccessæˆ–setFailureæ—¶ä¼šé€šè¿‡CASä¿®æ”¹result</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	<span class="token comment">// çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">interrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">(</span>toS
    <span class="token punctuation">}</span>
	<span class="token comment">// æ£€æŸ¥å½“å‰çº¿ç¨‹æ˜¯å¦ä¸çº¿ç¨‹æ± è¿è¡Œçš„çº¿ç¨‹æ˜¯ä¸€ä¸ª</span>
    <span class="token function">checkDeadLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isDone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		   <span class="token comment">/* waitersè®¡æ•°åŠ 1
			* private void incWaiters() {
			*   if (waiters == Short.MAX_VALUE) {
			*       throw new IllegalStateException(&quot;too many waiters: &quot; + this);
			*   }
			*   ++waiters;
			* }
			*/</span>
            <span class="token function">incWaiters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
				<span class="token comment">// Objectçš„æ–¹æ³•ï¼Œè®©å‡ºCPUï¼ŒåŠ å…¥ç­‰å¾…é˜Ÿåˆ—</span>
                <span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
				<span class="token comment">// waitersè®¡æ•°å‡1</span>
                <span class="token function">decWaiters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>await(long timeout, TimeUnit unit)ä¸awiteç±»ä¼¼ï¼Œåªæ˜¯è°ƒç”¨äº†Objectå¯¹è±¡çš„wait(long timeout, int nanos)æ–¹æ³•awaitUninterruptibly()æ–¹æ³•åœ¨å†…éƒ¨catchä½äº†ç­‰å¾…çº¿ç¨‹çš„ä¸­æ–­å¼‚å¸¸ï¼Œå› æ­¤ä¸ä¼šæŠ›å‡ºä¸­æ–­å¼‚å¸¸ã€‚</p><hr><blockquote><p>DefaultPromise.java | DefaultPromise.addListener0() / DefaultPromise.removeListener0()</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">addListener0</span><span class="token punctuation">(</span><span class="token class-name">GenericFutureListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Future</span><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> listener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>listeners <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        listeners <span class="token operator">=</span> listener<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>listeners <span class="token keyword">instanceof</span> <span class="token class-name">DefaultFutureListeners</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">DefaultFutureListeners</span><span class="token punctuation">)</span> listeners<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        listeners <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultFutureListeners</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">GenericFutureListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> listeners<span class="token punctuation">,</span> listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">removeListener0</span><span class="token punctuation">(</span><span class="token class-name">GenericFutureListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Future</span><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> listener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>listeners <span class="token keyword">instanceof</span> <span class="token class-name">DefaultFutureListeners</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">DefaultFutureListeners</span><span class="token punctuation">)</span> listeners<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>listeners <span class="token operator">==</span> listener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        listeners <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>addListener0æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œå°†ä¼ å…¥çš„å›è°ƒç±»ä¼ å…¥åˆ°listenerså¯¹è±¡ä¸­ï¼Œå¦‚æœç›‘å¬å¤šäº1ä¸ªï¼Œä¼šåˆ›å»ºDefaultFutureListenerså¯¹è±¡å°†å›è°ƒæ–¹æ³•ä¿å­˜åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ã€‚</p></li><li><p>removeListener0ä¼šå°†listenersè®¾ç½®ä¸ºnull(åªæœ‰ä¸€ä¸ªæ—¶)æˆ–ä»æ•°ç»„ä¸­ç§»é™¤(å¤šä¸ªå›è°ƒæ—¶)ã€‚</p></li></ul><hr><blockquote><p>DefaultPromise.java | DefaultPromise.notifyListener0() é€šçŸ¥ä¾¦å¬å™¨</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rawtypes&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">notifyListener0</span><span class="token punctuation">(</span><span class="token class-name">Future</span> future<span class="token punctuation">,</span> <span class="token class-name">GenericFutureListener</span> l<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        l<span class="token punctuation">.</span><span class="token function">operationComplete</span><span class="token punctuation">(</span>future<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isWarnEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            logger<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;An exception was thrown by &quot;</span> <span class="token operator">+</span> l<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;.operationComplete()&quot;</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>åœ¨æ·»åŠ ç›‘å¬å™¨æ—¶ï¼Œå¦‚æœä»»åŠ¡åˆšå¥½æ‰§è¡Œå®Œæ¯•,åˆ™ä¼šç«‹å³è§¦å‘ç›‘å¬äº‹ä»¶ï¼Œè§¦å‘ç›‘å¬é€šè¿‡notifyListeners()å®ç°ã€‚</p></li><li><p>addListenerå’ŒsetSuccesséƒ½ä¼šè°ƒç”¨notifyListeners()å’ŒPromiseå†…çš„çº¿ç¨‹æ± å½“å‰æ‰§è¡Œçš„çº¿ç¨‹æ˜¯åŒä¸€ä¸ªçº¿ç¨‹ï¼Œåˆ™æ”¾åœ¨çº¿ç¨‹æ± ä¸­æ‰§è¡Œï¼Œå¦åˆ™æäº¤åˆ°çº¿ç¨‹æ± å»æ‰§è¡Œï¼›ä¾‹å¦‚ï¼Œmainçº¿ç¨‹ä¸­è°ƒç”¨addListeneræ—¶ä»»åŠ¡å®Œæˆï¼ŒnotifyListeners()æ‰§è¡Œå›è°ƒï¼Œä¼šæäº¤åˆ°çº¿ç¨‹æ± ä¸­æ‰§è¡Œï¼›è€Œå¦‚æœæ˜¯æ‰§è¡ŒFutureä»»åŠ¡çš„çº¿ç¨‹æ± ä¸­setSuccess()æ—¶è°ƒç”¨notifyListeners()ï¼Œä¼šæ”¾åœ¨å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œã€‚</p></li><li><p>å†…éƒ¨ç»´æŠ¤äº†notifyingListenersç”¨æ¥è®°å½•æ˜¯å¦å·²ç»è§¦å‘è¿‡ç›‘å¬äº‹ä»¶ï¼Œåªæœ‰æœªè§¦å‘è¿‡ä¸”ç›‘å¬åˆ—è¡¨ä¸ä¸ºç©ºï¼Œæ‰ä¼šä¾æ¬¡ä¾¿åˆ©å¹¶è°ƒç”¨operationComplete</p></li></ul><hr><blockquote><p>DefaultPromise.java | DefaultPromise.setSuccess0()ã€setFailure0() å”¤èµ·ç­‰å¾…çº¿ç¨‹é€šçŸ¥æˆåŠŸ/å¤±è´¥</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// è®¾ç½®æˆåŠŸåå”¤é†’ç­‰å¾…çº¿ç¨‹</span>
<span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">setSuccess0</span><span class="token punctuation">(</span><span class="token class-name">V</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">setValue0</span><span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token constant">SUCCESS</span> <span class="token operator">:</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// è®¾ç½®æˆåŠŸåå”¤é†’ç­‰å¾…çº¿ç¨‹</span>
<span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">setFailure0</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span> cause<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">setValue0</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CauseHolder</span><span class="token punctuation">(</span><span class="token function">checkNotNull</span><span class="token punctuation">(</span>cause<span class="token punctuation">,</span> <span class="token string">&quot;cause&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// é€šçŸ¥æˆåŠŸæ—¶å°†ç»“æœä¿å­˜åœ¨å˜é‡resultï¼Œé€šçŸ¥å¤±è´¥æ—¶ï¼Œä½¿ç”¨CauseHolderåŒ…è£…Throwableèµ‹å€¼ç»™result</span>
<span class="token comment">// RESULT_UPDATER æ˜¯ä¸€ä¸ªä½¿ç”¨CASæ›´æ–°å†…éƒ¨å±æ€§resultçš„ç±»ï¼Œ</span>
<span class="token comment">// å¦‚æœresultä¸ºnullæˆ–UNCANCELLABLEï¼Œæ›´æ–°ä¸ºæˆåŠŸ/å¤±è´¥ç»“æœï¼›UNCANCELLABLEæ˜¯ä¸å¯å–æ¶ˆçŠ¶æ€</span>
<span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">setValue0</span><span class="token punctuation">(</span><span class="token class-name">Object</span> objResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">RESULT_UPDATER</span><span class="token punctuation">.</span><span class="token function">compareAndSet</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> objResult<span class="token punctuation">)</span> <span class="token operator">||</span>
        <span class="token constant">RESULT_UPDATER</span><span class="token punctuation">.</span><span class="token function">compareAndSet</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token constant">UNCANCELLABLE</span><span class="token punctuation">,</span> objResult<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// æ£€æŸ¥æ˜¯å¦æœ‰æœåŠ¡ï¼Œå¦‚æœæœ‰ï¼Œé€šçŸ¥ä»–ä»¬ã€‚</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">checkNotifyWaiters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">notifyListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// é€šçŸ¥</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Futureä»»åŠ¡åœ¨æ‰§è¡Œå®Œæˆåè°ƒç”¨setSuccess()æˆ–setFailure()é€šçŸ¥Futureæ‰§è¡Œç»“æœï¼›ä¸»è¦é€»è¾‘æ˜¯ï¼šä¿®æ”¹resultçš„å€¼ï¼Œè‹¥æœ‰ç­‰å¾…çº¿ç¨‹åˆ™å”¤é†’ï¼Œé€šçŸ¥ç›‘å¬äº‹ä»¶ã€‚</p><hr><p><strong>DefaultChannelPromiseå®ç°</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * The default <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">ChannelPromise</span></span><span class="token punctuation">}</span> implementation.  It is recommended to use <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">Channel</span><span class="token punctuation">#</span><span class="token function">newPromise</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span> to create
 * a new <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">ChannelPromise</span></span><span class="token punctuation">}</span> rather than calling the constructor explicitly.
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DefaultChannelPromise</span> <span class="token keyword">extends</span> <span class="token class-name">DefaultPromise</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">ChannelPromise</span><span class="token punctuation">,</span> <span class="token class-name">FlushCheckpoint</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Channel</span> channel<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">long</span> checkpoint<span class="token punctuation">;</span>
	
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»ç»§æ‰¿å…³ç³»å¯ä»¥çœ‹åˆ°DefaultChannelPromiseæ˜¯DefaultPromiseçš„å®ç°ç±»ï¼Œå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªé€šé“å˜é‡Channelã€‚</li><li>å¦å¤–è¿˜å®ç°äº†FlushCheckpointæ¥å£ï¼Œç»™ChannelFlushPromiseNotifierä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†ChannelFutureæ³¨å†Œåˆ°ChannelFlushPromiseNotifierç±»ï¼Œå½“æœ‰æ•°æ®å†™å…¥æˆ–åˆ°è¾¾checkpointæ—¶ä½¿ç”¨ã€‚</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">interface</span> <span class="token class-name">FlushCheckpoint</span> <span class="token punctuation">{</span>
    <span class="token keyword">long</span> <span class="token function">flushCheckpoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">flushCheckpoint</span><span class="token punctuation">(</span><span class="token keyword">long</span> checkpoint<span class="token punctuation">)</span>
    <span class="token class-name">ChannelPromise</span> <span class="token function">promise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¾®ä¿¡æœç´¢ã€Œ<strong>bugstackè™«æ´æ ˆ</strong>ã€å…¬ä¼—å·ï¼Œå…³æ³¨åå›å¤ã€Œ<strong>rpcæ¡ˆä¾‹æºç </strong>ã€è·å–æœ¬æ–‡æºç &amp;æ›´å¤šåŸåˆ›ä¸“é¢˜æ¡ˆä¾‹ï¼</p>`,55);function m(v,b){const a=e("ExternalLinkIcon");return p(),o("div",null,[i,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),k,s("åšå®¢ï¼š"),n("a",r,[s("https://bugstack.cn"),c(a)])]),d])}const y=t(u,[["render",m],["__file","2019-09-15-nettyanliï¼Œnetty4.1yuanmafenxipianliuã€ŠNettyyibujiagoujiantingleiPromiseyuanmafenxiã€‹.html.vue"]]);export{y as default};
