import{_ as p,r as c,o,c as l,a as n,b as s,d as e,e as t}from"./app-3RcBQnkC.js";const i={},u=n("h1",{id:"é‡å­¦-java-è®¾è®¡æ¨¡å¼-å®æˆ˜è§‚å¯Ÿè€…æ¨¡å¼ã€Œæ¨¡æ‹Ÿç±»ä¼¼å°å®¢è½¦æŒ‡æ ‡æ‘‡å·è¿‡ç¨‹-ç›‘å¬æ¶ˆæ¯é€šçŸ¥ç”¨æˆ·ä¸­ç­¾åœºæ™¯ã€",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#é‡å­¦-java-è®¾è®¡æ¨¡å¼-å®æˆ˜è§‚å¯Ÿè€…æ¨¡å¼ã€Œæ¨¡æ‹Ÿç±»ä¼¼å°å®¢è½¦æŒ‡æ ‡æ‘‡å·è¿‡ç¨‹-ç›‘å¬æ¶ˆæ¯é€šçŸ¥ç”¨æˆ·ä¸­ç­¾åœºæ™¯ã€","aria-hidden":"true"},"#"),s(" é‡å­¦ Java è®¾è®¡æ¨¡å¼ï¼šå®æˆ˜è§‚å¯Ÿè€…æ¨¡å¼ã€Œæ¨¡æ‹Ÿç±»ä¼¼å°å®¢è½¦æŒ‡æ ‡æ‘‡å·è¿‡ç¨‹ï¼Œç›‘å¬æ¶ˆæ¯é€šçŸ¥ç”¨æˆ·ä¸­ç­¾åœºæ™¯ã€")],-1),r=n("br",null,null,-1),d={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},k=n("blockquote",null,[n("p",null,"æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„")],-1),v=n("iframe",{id:"B-Video",src:"//player.bilibili.com/player.html?aid=596495360&bvid=BV13B4y1y7HB&cid=716068865&page=1",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true",width:"100%",height:"480"}," ",-1),m=t('<h2 id="ä¸€ã€å‰è¨€" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å‰è¨€" aria-hidden="true">#</a> ä¸€ã€å‰è¨€</h2><p><code>çŸ¥é“çš„è¶Šå¤šä¸çŸ¥é“çš„å°±è¶Šå¤š</code></p><p>ç¼–ç¨‹å¼€å‘è¿™æ¡è·¯ä¸Šçš„çŸ¥è¯†æ˜¯æ— ç©·æ— å°½çš„ï¼Œå°±åƒä»¥å‰ä½ æ•¢è¯´ç²¾é€šJavaï¼Œåˆ°åæ¥å­¦åˆ°è¶Šæ¥è¶Šå¤šåªæƒ³å†™äº†è§£Javaï¼Œè¿‡äº†å‡ å¹´ç°åœ¨å¯èƒ½æƒ³è¯´æ‡‚ä¸€ç‚¹ç‚¹Javaã€‚å½“è§†é‡å’Œæ ¼å±€çš„æ‰©å¤§ï¼Œä¼šè®©æˆ‘ä»¬è¶Šæ¥è¶Šå‘ç°åŸæ¥çš„çœ‹æ³•æ˜¯å¤šä¹ˆæµ…æ˜¾ï¼Œè¿™å°±åƒç«™åœ¨åœ°çƒçœ‹åœ°çƒå’Œç«™åœ¨å®‡å®™çœ‹åœ°çƒä¸€æ ·ã€‚ä½†æ­£å› ä¸ºèƒ¸æ€€å’Œçœ¼ç•Œçš„æå‡è®©æˆ‘ä»¬æœ‰äº†æ›´å¤šçš„è®¤è¯†ï¼Œä¹Ÿé€æ¸å­¦ä¼šäº†æ›´å¤šçš„æŠ€èƒ½ã€‚è™½ç„¶ä¸çŸ¥é“çš„è¶Šæ¥è¶Šå¤šï¼Œä½†ä¹Ÿå› æ­¤ç»™è‡ªå·±å¡«å……äº†æ›´å¤šçš„æŠ€æœ¯æ ˆï¼Œè®©è‡ªå·±è¶Šæ¥è¶Šå¼ºå¤§ã€‚</p><p><code>æ‹’ç»å­¦ä¹ çš„æƒ°æ€§å¾ˆå¯æ€•</code></p><p>ç°åœ¨ä¸ä»¥å‰ä¸ä¸€æ ·ï¼Œèµ„æ–™å¤šã€é€”å¾„å¹¿ï¼Œåœ¨è¿™ä¸­é—´å¤¹æ‚çš„å¹¿å‘Šä¹Ÿéå¸¸å¤šã€‚è¿™å°±è®©å¾ˆå¤šåˆå­¦è€…å¾ˆéš¾æ‰¾åˆ°è‡ªå·±è¦çš„çŸ¥è¯†ï¼Œæœ€åçœ‹åˆ°æœ‰äººæ¨èç›¸å…³å­¦ä¹ èµ„æ–™ç«‹åˆ»å±è”½ã€åˆ é™¤ï¼Œä½†åŒæ—¶æŠ€æœ¯ä¼˜ç§€çš„èµ„æ–™ä¹Ÿä¸èƒ½è®©éœ€è¦çš„äººçœ‹è§äº†ã€‚ä¹…è€Œä¹…ä¹‹æŠŠæ›´å¤šçš„æ—¶é—´ç²¾åŠ›éƒ½æ”¾åœ¨æ¸¸æˆã€å¨±ä¹ã€å½±éŸ³ä¸Šï¼Œé€‚å½“çš„æ”¾æ¾æ˜¯å¯ä»¥çš„ï¼Œä½†å¾€å¾€æ²‰è¿·ä»¥åå°±å¾ˆéš¾å‡ºæ¥ï¼Œå› æ­¤éœ€è¦åšå¥½ä¸€äº›å¯ä»¥è®©è‡ªå·±æˆé•¿çš„è®¡åˆ’ï¼Œç¨æœ‰å…‹åˆ¶ã€‚</p><p><code>å¹³è¡¡å¥½è½¯ä»¶è®¾è®¡å’Œå®ç°æˆæœ¬çš„åº¦Â°</code></p><p>æœ‰æ—¶å€™ä¸€ä¸ªè½¯ä»¶çš„æ¶æ„è®¾è®¡éœ€è¦ç¬¦åˆå½“å‰æ¡ä»¶ä¸‹çš„å„é¡¹å› ç´ ï¼Œå¾€å¾€ä¸èƒ½å› ä¸ºå¿ƒä¸­æƒ³å½“ç„¶çš„æœ‰æŸä¸ªè“å›¾ï¼Œå°±å»å¼€å§‹æ‰§è¡Œã€‚ä¹Ÿè®¸è™½ç„¶ä½ çš„è®¾è®¡æ˜¯éå¸¸ä¼˜ç§€çš„ï¼Œä½†æ˜¯æ”¾åœ¨å½“å‰ç¯å¢ƒä¸‹å¾ˆéš¾æ»¡è¶³ä¸šåŠ¡çš„æ—¶é—´è¦æ±‚ï¼Œå½“ä¸€ä¸ªä¸šåŠ¡çš„åŸºæœ¬è¯‰æ±‚ä¸èƒ½æ»¡è¶³åï¼Œå°±å¾ˆéš¾æ‹‰åŠ¨å¸‚åœºã€‚æ²¡æœ‰äº§å“çš„DAUæ”¯æ’‘ï¼Œæœ€åæ•´ä¸ªç ”å‘çš„é¡¹ç›®ä¹Ÿä¼šå› æ­¤åœæ»ã€‚ä½†ç ”å‘åˆä¸èƒ½ä¸€å›¢ä¹±éº»çš„å†™ä»£ç ï¼Œå› æ­¤éœ€è¦æ‰¾å¥½ä¸€ä¸ªé€‚åˆçš„åº¦ï¼Œæ¯”å¦‚å¯ä»¥æ­å»ºè‰¯å¥½çš„åœ°åŸºï¼Œå®ç°ä¸Šå¯æ‰©å±•ã€‚ä½†åœ¨å…·ä½“çš„åŠŸèƒ½ä¸Šå¯ä»¥å…ˆç®€åŒ–å®ç°ï¼Œéšç€æ´»ä¸‹æ¥äº†å†ç»§ç»­å®Œå–„è¿­ä»£ã€‚</p><h2 id="äºŒã€å¼€å‘ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#äºŒã€å¼€å‘ç¯å¢ƒ" aria-hidden="true">#</a> äºŒã€å¼€å‘ç¯å¢ƒ</h2>',8),b=n("li",null,"JDK 1.8",-1),g=n("li",null,"Idea + Maven",-1),h=n("strong",null,"å…¬ä¼—å·",-1),y={href:"https://bugstack.cn/assets/images/qrcode.png",target:"_blank",rel:"noopener noreferrer"},w=n("code",null,"bugstackè™«æ´æ ˆ",-1),f=n("code",null,"æºç ä¸‹è½½",-1),_=t('<table><thead><tr><th>å·¥ç¨‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>itstack-demo-design-18-00</td><td>åœºæ™¯æ¨¡æ‹Ÿå·¥ç¨‹ï¼›æ¨¡æ‹Ÿä¸€ä¸ªå°å®¢è½¦æ‘‡å·æ¥å£</td></tr><tr><td>itstack-demo-design-18-01</td><td>ä½¿ç”¨ä¸€å¨ä»£ç å®ç°ä¸šåŠ¡éœ€æ±‚</td></tr><tr><td>itstack-demo-design-18-02</td><td>é€šè¿‡è®¾è®¡æ¨¡å¼ä¼˜åŒ–æ”¹é€ ä»£ç ï¼Œäº§ç”Ÿå¯¹æ¯”æ€§ä»è€Œå­¦ä¹ </td></tr></tbody></table><h2 id="ä¸‰ã€è§‚å¯Ÿè€…æ¨¡å¼ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€è§‚å¯Ÿè€…æ¨¡å¼ä»‹ç»" aria-hidden="true">#</a> ä¸‰ã€è§‚å¯Ÿè€…æ¨¡å¼ä»‹ç»</h2><p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-18-01.png" alt="è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå›¾ç‰‡æ¥è‡ª refactoringguru.cn"></p>',3),L={href:"https://refactoringguru.cn/design-patterns/observer",target:"_blank",rel:"noopener noreferrer"},M=t(`<p>ç®€å•æ¥è®²è§‚å¯Ÿè€…ğŸ•µæ¨¡å¼ï¼Œå°±æ˜¯å½“ä¸€ä¸ªè¡Œä¸ºå‘ç”Ÿæ—¶ä¼ é€’ä¿¡æ¯ç»™å¦å¤–ä¸€ä¸ªç”¨æˆ·æ¥æ”¶åšå‡ºç›¸åº”çš„å¤„ç†ï¼Œä¸¤è€…ä¹‹é—´æ²¡æœ‰ç›´æ¥çš„è€¦åˆå…³è”ã€‚ä¾‹å¦‚ï¼›ç‹™å‡»æ‰‹ã€æäº‘é¾™ã€‚</p><p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-18-02.png" alt="æäº‘é¾™ç»™ä½ ç«–å¤§æ‹‡æŒ‡"></p><p>é™¤äº†ç”Ÿæ´»ä¸­çš„åœºæ™¯å¤–ï¼Œåœ¨æˆ‘ä»¬ç¼–ç¨‹å¼€å‘ä¸­ä¹Ÿä¼šå¸¸ç”¨åˆ°ä¸€äº›è§‚å¯Ÿè€…çš„æ¨¡å¼æˆ–è€…ç»„ä»¶ï¼Œä¾‹å¦‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„MQæœåŠ¡ï¼Œè™½ç„¶MQæœåŠ¡æ˜¯æœ‰ä¸€ä¸ªé€šçŸ¥ä¸­å¿ƒå¹¶ä¸æ˜¯æ¯ä¸€ä¸ªç±»æœåŠ¡è¿›è¡Œé€šçŸ¥ï¼Œä½†æ•´ä½“ä¸Šä¹Ÿå¯ä»¥ç®—ä½œæ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„æ€è·¯è®¾è®¡ã€‚å†æ¯”å¦‚å¯èƒ½æœ‰åšè¿‡çš„ä¸€äº›ç±»ä¼¼äº‹ä»¶ç›‘å¬æ€»çº¿ï¼Œè®©ä¸»çº¿æœåŠ¡ä¸å…¶ä»–è¾…çº¿ä¸šåŠ¡æœåŠ¡åˆ†ç¦»ï¼Œä¸ºäº†ä½¿ç³»ç»Ÿé™ä½è€¦åˆå’Œå¢å¼ºæ‰©å±•æ€§ï¼Œä¹Ÿä¼šä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼è¿›è¡Œå¤„ç†ã€‚</p><h2 id="å››ã€æ¡ˆä¾‹åœºæ™¯æ¨¡æ‹Ÿ" tabindex="-1"><a class="header-anchor" href="#å››ã€æ¡ˆä¾‹åœºæ™¯æ¨¡æ‹Ÿ" aria-hidden="true">#</a> å››ã€æ¡ˆä¾‹åœºæ™¯æ¨¡æ‹Ÿ</h2><p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-18-03.png" alt="åœºæ™¯æ¨¡æ‹Ÿï¼›å°å®¢è½¦æŒ‡æ ‡æ‘‡å·é€šçŸ¥åœºæ™¯"></p><p><strong>åœ¨æœ¬æ¡ˆä¾‹ä¸­æˆ‘ä»¬æ¨¡æ‹Ÿæ¯æ¬¡å°å®¢è½¦æŒ‡æ ‡æ‘‡å·äº‹ä»¶é€šçŸ¥åœºæ™¯(çœŸå®çš„ä¸ä¼šç”±å®˜ç½‘ç»™ä½ å‘æ¶ˆæ¯)</strong></p><p>å¯èƒ½å¤§éƒ¨åˆ†äººçœ‹åˆ°è¿™ä¸ªæ¡ˆä¾‹ä¸€å®šä¼šæƒ³åˆ°è‡ªå·±æ¯æ¬¡æ‘‡å·éƒ½ä¸ä¸­çš„åœºæ™¯ï¼Œæ”¶åˆ°ä¸€ä¸ªé—æ†¾çš„çŸ­ä¿¡é€šçŸ¥ã€‚å½“ç„¶ç›®å‰çš„æ‘‡å·ç³»ç»Ÿå¹¶ä¸ä¼šç»™ä½ å‘çŸ­ä¿¡ï¼Œè€Œæ˜¯ç”±ç™¾åº¦æˆ–è€…ä¸€äº›å…¶ä»–æ’ä»¶å‘çš„çŸ­ä¿¡ã€‚é‚£ä¹ˆå‡å¦‚è¿™ä¸ªç±»ä¼¼çš„æ‘‡å·åŠŸèƒ½å¦‚æœç”±ä½ æ¥å¼€å‘ï¼Œå¹¶ä¸”éœ€è¦å¯¹å¤–éƒ¨çš„ç”¨æˆ·åšä¸€äº›äº‹ä»¶é€šçŸ¥ä»¥åŠéœ€è¦åœ¨ä¸»æµç¨‹å¤–å†æ·»åŠ ä¸€äº›é¢å¤–çš„è¾…åŠ©æµç¨‹æ—¶è¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ</p><p>åŸºæœ¬å¾ˆå¤šäººå¯¹äºè¿™æ ·çš„é€šçŸ¥äº‹ä»¶ç±»çš„å®ç°å¾€å¾€æ¯”è¾ƒç²—çŠ·ï¼Œç›´æ¥åœ¨ç±»é‡Œé¢å°±æ·»åŠ äº†ã€‚1æ˜¯è€ƒè™‘ğŸ¤”è¿™å¯èƒ½ä¸ä¼šæ€ä¹ˆæ‰©å±•ï¼Œ2æ˜¯å‹æ ¹å°±æ²¡è€ƒè™‘ğŸ˜„è¿‡ã€‚ä½†å¦‚æœä½ æœ‰ä»”ç»†æ€è€ƒè¿‡ä½ çš„æ ¸å¿ƒç±»åŠŸèƒ½ä¼šå‘ç°ï¼Œè¿™é‡Œé¢æœ‰ä¸€äº›æ ¸å¿ƒä¸»é“¾è·¯ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†æ˜¯è¾…åŠ©åŠŸèƒ½ã€‚æ¯”å¦‚å®Œæˆäº†æŸä¸ªè¡Œä¸ºåéœ€è¦è§¦å‘MQç»™å¤–éƒ¨ï¼Œä»¥åŠåšä¸€äº›æ¶ˆæ¯PUSHç»™ç”¨æˆ·ç­‰ï¼Œè¿™äº›éƒ½ä¸ç®—åšæ˜¯æ ¸å¿ƒæµç¨‹é“¾è·¯ï¼Œæ˜¯å¯ä»¥é€šè¿‡äº‹ä»¶é€šçŸ¥çš„æ–¹å¼è¿›è¡Œå¤„ç†ã€‚</p><p>é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä½¿ç”¨è¿™æ ·çš„è®¾è®¡æ¨¡å¼æ¥ä¼˜åŒ–é‡æ„æ­¤åœºæ™¯ä¸‹çš„ä»£ç ã€‚</p><h3 id="_1-åœºæ™¯æ¨¡æ‹Ÿå·¥ç¨‹" tabindex="-1"><a class="header-anchor" href="#_1-åœºæ™¯æ¨¡æ‹Ÿå·¥ç¨‹" aria-hidden="true">#</a> 1. åœºæ™¯æ¨¡æ‹Ÿå·¥ç¨‹</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>design<span class="token operator">-</span><span class="token number">18</span><span class="token operator">-</span><span class="token number">00</span>
â””â”€â”€ src
    â””â”€â”€ main
        â””â”€â”€ java
            â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design
                â””â”€â”€ <span class="token class-name">MinibusTargetService</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™é‡Œæä¾›çš„æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿå°å®¢è½¦æ‘‡å·çš„æœåŠ¡æ¥å£ã€‚</li></ul><h3 id="_2-åœºæ™¯ç®€è¿°" tabindex="-1"><a class="header-anchor" href="#_2-åœºæ™¯ç®€è¿°" aria-hidden="true">#</a> 2. åœºæ™¯ç®€è¿°</h3><h4 id="_2-1-æ‘‡å·æœåŠ¡æ¥å£" tabindex="-1"><a class="header-anchor" href="#_2-1-æ‘‡å·æœåŠ¡æ¥å£" aria-hidden="true">#</a> 2.1 æ‘‡å·æœåŠ¡æ¥å£</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MinibusTargetService</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * æ¨¡æ‹Ÿæ‘‡å·ï¼Œä½†ä¸æ˜¯æ‘‡å·ç®—æ³•
     *
     * <span class="token keyword">@param</span> <span class="token parameter">uId</span> ç”¨æˆ·ç¼–å·
     * <span class="token keyword">@return</span> ç»“æœ
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">lottery</span><span class="token punctuation">(</span><span class="token class-name">String</span> uId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>uId<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;æ­å–œä½ ï¼Œç¼–ç &quot;</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>uId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">&quot;åœ¨æœ¬æ¬¡æ‘‡å·ä¸­ç­¾&quot;</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">&quot;å¾ˆé—æ†¾ï¼Œç¼–ç &quot;</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>uId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">&quot;åœ¨æœ¬æ¬¡æ‘‡å·æœªä¸­ç­¾æˆ–æ‘‡å·èµ„æ ¼å·²è¿‡æœŸ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>éå¸¸ç®€å•çš„ä¸€ä¸ªæ¨¡æ‹Ÿæ‘‡å·æ¥å£ï¼Œä¸çœŸå®å…¬å¹³çš„æ‘‡å·æ˜¯æœ‰å·®åˆ«çš„ã€‚</li></ul><h2 id="äº”ã€ç”¨ä¸€å¨å¨ä»£ç å®ç°" tabindex="-1"><a class="header-anchor" href="#äº”ã€ç”¨ä¸€å¨å¨ä»£ç å®ç°" aria-hidden="true">#</a> äº”ã€ç”¨ä¸€å¨å¨ä»£ç å®ç°</h2><p><code>è¿™é‡Œæˆ‘ä»¬å…ˆä½¿ç”¨æœ€ç²—æš´çš„æ–¹å¼æ¥å®ç°åŠŸèƒ½</code></p><p>æŒ‰ç…§éœ€æ±‚éœ€è¦åœ¨åŸæœ‰çš„æ‘‡å·æ¥å£ä¸­æ·»åŠ MQæ¶ˆæ¯å‘é€ä»¥åŠçŸ­æ¶ˆæ¯é€šçŸ¥åŠŸèƒ½ï¼Œå¦‚æœæ˜¯æœ€ç›´æ¥çš„æ–¹å¼é‚£ä¹ˆå¯ä»¥ç›´æ¥åœ¨æ–¹æ³•ä¸­è¡¥å……åŠŸèƒ½å³å¯ã€‚</p><h3 id="_1-å·¥ç¨‹ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>design<span class="token operator">-</span><span class="token number">18</span><span class="token operator">-</span><span class="token number">01</span>
â””â”€â”€ src
    â””â”€â”€ main
        â””â”€â”€ java
            â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design
                â”œâ”€â”€ <span class="token class-name">LotteryResult</span><span class="token punctuation">.</span>java
                â”œâ”€â”€ <span class="token class-name">LotteryService</span><span class="token punctuation">.</span>java
                â””â”€â”€ <span class="token class-name">LotteryServiceImpl</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™æ®µä»£ç æ¥å£ä¸­åŒ…æ‹¬äº†ä¸‰éƒ¨åˆ†å†…å®¹ï¼›è¿”å›å¯¹è±¡(<code>LotteryResult</code>)ã€å®šä¹‰æ¥å£(<code>LotteryService</code>)ã€å…·ä½“å®ç°(<code>LotteryServiceImpl</code>)ã€‚</li></ul><h3 id="_2-ä»£ç å®ç°" tabindex="-1"><a class="header-anchor" href="#_2-ä»£ç å®ç°" aria-hidden="true">#</a> 2. ä»£ç å®ç°</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LotteryServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">LotteryService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">LotteryServiceImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">MinibusTargetService</span> minibusTargetService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MinibusTargetService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">LotteryResult</span> <span class="token function">doDraw</span><span class="token punctuation">(</span><span class="token class-name">String</span> uId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ‘‡å·</span>
        <span class="token class-name">String</span> lottery <span class="token operator">=</span> minibusTargetService<span class="token punctuation">.</span><span class="token function">lottery</span><span class="token punctuation">(</span>uId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å‘çŸ­ä¿¡</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;ç»™ç”¨æˆ· {} å‘é€çŸ­ä¿¡é€šçŸ¥(çŸ­ä¿¡)ï¼š{}&quot;</span><span class="token punctuation">,</span> uId<span class="token punctuation">,</span> lottery<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å‘MQæ¶ˆæ¯</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è®°å½•ç”¨æˆ· {} æ‘‡å·ç»“æœ(MQ)ï¼š{}&quot;</span><span class="token punctuation">,</span> uId<span class="token punctuation">,</span> lottery<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ç»“æœ</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LotteryResult</span><span class="token punctuation">(</span>uId<span class="token punctuation">,</span> lottery<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»ä»¥ä¸Šçš„æ–¹æ³•å®ç°ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ•´ä½“è¿‡ç¨‹åŒ…æ‹¬ä¸‰éƒ¨åˆ†ï¼›æ‘‡å·ã€å‘çŸ­ä¿¡ã€å‘MQæ¶ˆæ¯ï¼Œè€Œè¿™éƒ¨åˆ†éƒ½æ˜¯é¡ºåºè°ƒç”¨çš„ã€‚</li><li>é™¤äº†<code>æ‘‡å·</code>æ¥å£è°ƒç”¨å¤–ï¼Œåé¢çš„ä¸¤éƒ¨åˆ†éƒ½æ˜¯éæ ¸å¿ƒä¸»é“¾è·¯åŠŸèƒ½ï¼Œè€Œä¸”ä¼šéšç€åç»­çš„ä¸šåŠ¡éœ€æ±‚å‘å±•è€Œä¸æ–­çš„è°ƒæ•´å’Œæ‰©å……ï¼Œåœ¨è¿™æ ·çš„å¼€å‘æ–¹å¼ä¸‹å°±éå¸¸ä¸åˆ©äºç»´æŠ¤ã€‚</li></ul><h3 id="_3-æµ‹è¯•éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_3-æµ‹è¯•éªŒè¯" aria-hidden="true">#</a> 3. æµ‹è¯•éªŒè¯</h3><h4 id="_3-1-ç¼–å†™æµ‹è¯•ç±»" tabindex="-1"><a class="header-anchor" href="#_3-1-ç¼–å†™æµ‹è¯•ç±»" aria-hidden="true">#</a> 3.1 ç¼–å†™æµ‹è¯•ç±»</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">LotteryService</span> lotteryService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LotteryServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">LotteryResult</span> result <span class="token operator">=</span> lotteryService<span class="token punctuation">.</span><span class="token function">doDraw</span><span class="token punctuation">(</span><span class="token string">&quot;2765789109876&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœï¼š{}&quot;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æµ‹è¯•è¿‡ç¨‹ä¸­æä¾›å¯¹æ‘‡å·æœåŠ¡æ¥å£çš„è°ƒç”¨ã€‚</li></ul><h4 id="_3-2-æµ‹è¯•ç»“æœ" tabindex="-1"><a class="header-anchor" href="#_3-2-æµ‹è¯•ç»“æœ" aria-hidden="true">#</a> 3.2 æµ‹è¯•ç»“æœ</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">22</span><span class="token operator">:</span><span class="token number">02</span><span class="token operator">:</span><span class="token number">24.520</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span></span>LotteryServiceImpl</span> <span class="token operator">-</span> ç»™ç”¨æˆ· <span class="token number">2765789109876</span> å‘é€çŸ­ä¿¡é€šçŸ¥<span class="token punctuation">(</span>çŸ­ä¿¡<span class="token punctuation">)</span>ï¼šå¾ˆé—æ†¾ï¼Œç¼–ç <span class="token number">2765789109876</span>åœ¨æœ¬æ¬¡æ‘‡å·æœªä¸­ç­¾æˆ–æ‘‡å·èµ„æ ¼å·²è¿‡æœŸ
<span class="token number">22</span><span class="token operator">:</span><span class="token number">02</span><span class="token operator">:</span><span class="token number">24.523</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span></span>LotteryServiceImpl</span> <span class="token operator">-</span> è®°å½•ç”¨æˆ· <span class="token number">2765789109876</span> æ‘‡å·ç»“æœ<span class="token punctuation">(</span><span class="token constant">MQ</span><span class="token punctuation">)</span>ï¼šå¾ˆé—æ†¾ï¼Œç¼–ç <span class="token number">2765789109876</span>åœ¨æœ¬æ¬¡æ‘‡å·æœªä¸­ç­¾æˆ–æ‘‡å·èµ„æ ¼å·²è¿‡æœŸ
<span class="token number">22</span><span class="token operator">:</span><span class="token number">02</span><span class="token operator">:</span><span class="token number">24.606</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼š<span class="token punctuation">{</span><span class="token string">&quot;dateTime&quot;</span><span class="token operator">:</span><span class="token number">1598764144524</span><span class="token punctuation">,</span><span class="token string">&quot;msg&quot;</span><span class="token operator">:</span><span class="token string">&quot;å¾ˆé—æ†¾ï¼Œç¼–ç 2765789109876åœ¨æœ¬æ¬¡æ‘‡å·æœªä¸­ç­¾æˆ–æ‘‡å·èµ„æ ¼å·²è¿‡æœŸ&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;uId&quot;</span><span class="token operator">:</span><span class="token string">&quot;2765789109876&quot;</span><span class="token punctuation">}</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»æµ‹è¯•ç»“æœä¸Šæ˜¯ç¬¦åˆé¢„æœŸçš„ï¼Œä¹Ÿæ˜¯å¹³å¸¸å¼€å‘ä»£ç çš„æ–¹å¼ï¼Œè¿˜æ˜¯éå¸¸ç®€å•çš„ã€‚</li></ul><h2 id="å…­ã€è§‚å¯Ÿè€…æ¨¡å¼é‡æ„ä»£ç " tabindex="-1"><a class="header-anchor" href="#å…­ã€è§‚å¯Ÿè€…æ¨¡å¼é‡æ„ä»£ç " aria-hidden="true">#</a> å…­ã€è§‚å¯Ÿè€…æ¨¡å¼é‡æ„ä»£ç </h2><p><code>æ¥ä¸‹æ¥ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼æ¥è¿›è¡Œä»£ç ä¼˜åŒ–ï¼Œä¹Ÿç®—æ˜¯ä¸€æ¬¡å¾ˆå°çš„é‡æ„ã€‚</code></p><h3 id="_1-å·¥ç¨‹ç»“æ„-1" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„-1" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>design<span class="token operator">-</span><span class="token number">18</span><span class="token operator">-</span><span class="token number">02</span>
â””â”€â”€ src
    â””â”€â”€ main
        â””â”€â”€ java
            â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design
                â”œâ”€â”€ event
                â”‚    â”œâ”€â”€ listener
                â”‚    â”‚    â”œâ”€â”€ <span class="token class-name">EventListener</span><span class="token punctuation">.</span>java
                â”‚    â”‚    â”œâ”€â”€ <span class="token class-name">MessageEventListener</span><span class="token punctuation">.</span>java
                â”‚    â”‚    â””â”€â”€ <span class="token class-name">MQEventListener</span><span class="token punctuation">.</span>java
                â”‚    â””â”€â”€ <span class="token class-name">EventManager</span><span class="token punctuation">.</span>java
                â”œâ”€â”€ <span class="token class-name">LotteryResult</span><span class="token punctuation">.</span>java
                â”œâ”€â”€ <span class="token class-name">LotteryService</span><span class="token punctuation">.</span>java
                â””â”€â”€ <span class="token class-name">LotteryServiceImpl</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è§‚å¯Ÿè€…æ¨¡å¼æ¨¡å‹ç»“æ„</strong></p><p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-18-04.png" alt="è§‚å¯Ÿè€…æ¨¡å¼æ¨¡å‹ç»“æ„"></p><ul><li>ä»ä¸Šå›¾å¯ä»¥åˆ†ä¸ºä¸‰å¤§å—çœ‹ï¼›<code>äº‹ä»¶ç›‘å¬</code>ã€<code>äº‹ä»¶å¤„ç†</code>ã€<code>å…·ä½“çš„ä¸šåŠ¡æµç¨‹</code>ï¼Œå¦å¤–åœ¨ä¸šåŠ¡æµç¨‹ä¸­ <code>LotteryService</code> å®šä¹‰çš„æ˜¯æŠ½è±¡ç±»ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥é€šè¿‡æŠ½è±¡ç±»å°†äº‹ä»¶åŠŸèƒ½å±è”½ï¼Œå¤–éƒ¨ä¸šåŠ¡æµç¨‹å¼€å‘è€…ä¸éœ€è¦çŸ¥é“å…·ä½“çš„é€šçŸ¥æ“ä½œã€‚</li><li>å³ä¸‹è§’åœ†åœˆå›¾è¡¨ç¤ºçš„æ˜¯æ ¸å¿ƒæµç¨‹ä¸éæ ¸å¿ƒæµç¨‹çš„ç»“æ„ï¼Œä¸€èˆ¬åœ¨å¼€å‘ä¸­ä¼šæŠŠä¸»çº¿æµç¨‹å¼€å‘å®Œæˆåï¼Œå†ä½¿ç”¨é€šçŸ¥çš„æ–¹å¼å¤„ç†è¾…åŠ©æµç¨‹ã€‚ä»–ä»¬å¯ä»¥æ˜¯å¼‚æ­¥çš„ï¼Œåœ¨MQä»¥åŠå®šæ—¶ä»»åŠ¡çš„å¤„ç†ä¸‹ï¼Œä¿è¯æœ€ç»ˆä¸€è‡´æ€§ã€‚</li></ul><h3 id="_2-ä»£ç å®ç°-1" tabindex="-1"><a class="header-anchor" href="#_2-ä»£ç å®ç°-1" aria-hidden="true">#</a> 2. ä»£ç å®ç°</h3><h4 id="_2-1-äº‹ä»¶ç›‘å¬æ¥å£å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#_2-1-äº‹ä»¶ç›‘å¬æ¥å£å®šä¹‰" aria-hidden="true">#</a> 2.1 äº‹ä»¶ç›‘å¬æ¥å£å®šä¹‰</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EventListener</span> <span class="token punctuation">{</span>

    <span class="token keyword">void</span> <span class="token function">doEvent</span><span class="token punctuation">(</span><span class="token class-name">LotteryResult</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ¥å£ä¸­å®šä¹‰äº†åŸºæœ¬çš„äº‹ä»¶ç±»ï¼Œè¿™é‡Œå¦‚æœæ–¹æ³•çš„å…¥å‚ä¿¡æ¯ç±»å‹æ˜¯å˜åŒ–çš„å¯ä»¥ä½¿ç”¨æ³›å‹<code>&lt;T&gt;</code></li></ul><h4 id="_2-2-ä¸¤ä¸ªç›‘å¬äº‹ä»¶çš„å®ç°" tabindex="-1"><a class="header-anchor" href="#_2-2-ä¸¤ä¸ªç›‘å¬äº‹ä»¶çš„å®ç°" aria-hidden="true">#</a> 2.2 ä¸¤ä¸ªç›‘å¬äº‹ä»¶çš„å®ç°</h4><p><strong>çŸ­æ¶ˆæ¯äº‹ä»¶</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageEventListener</span> <span class="token keyword">implements</span> <span class="token class-name">EventListener</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">MessageEventListener</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doEvent</span><span class="token punctuation">(</span><span class="token class-name">LotteryResult</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;ç»™ç”¨æˆ· {} å‘é€çŸ­ä¿¡é€šçŸ¥(çŸ­ä¿¡)ï¼š{}&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span><span class="token function">getuId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span><span class="token function">getMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>MQå‘é€äº‹ä»¶</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MQEventListener</span> <span class="token keyword">implements</span> <span class="token class-name">EventListener</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">MQEventListener</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doEvent</span><span class="token punctuation">(</span><span class="token class-name">LotteryResult</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è®°å½•ç”¨æˆ· {} æ‘‡å·ç»“æœ(MQ)ï¼š{}&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span><span class="token function">getuId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span><span class="token function">getMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»¥ä¸Šæ˜¯ä¸¤ä¸ªäº‹ä»¶çš„å…·ä½“å®ç°ï¼Œç›¸å¯¹æ¥è¯´éƒ½æ¯”è¾ƒç®€å•ã€‚å¦‚æœæ˜¯å®é™…çš„ä¸šåŠ¡å¼€å‘é‚£ä¹ˆä¼šéœ€è¦è°ƒç”¨å¤–éƒ¨æ¥å£ä»¥åŠæ§åˆ¶å¼‚å¸¸çš„å¤„ç†ã€‚</li><li>åŒæ—¶æˆ‘ä»¬ä¸Šé¢æåˆ°äº‹ä»¶æ¥å£æ·»åŠ æ³›å‹ï¼Œå¦‚æœæœ‰éœ€è¦é‚£ä¹ˆåœ¨äº‹ä»¶çš„å®ç°ä¸­å°±å¯ä»¥æŒ‰ç…§ä¸åŒçš„ç±»å‹è¿›è¡ŒåŒ…è£…äº‹ä»¶å†…å®¹ã€‚</li></ul><h4 id="_2-3-äº‹ä»¶å¤„ç†ç±»" tabindex="-1"><a class="header-anchor" href="#_2-3-äº‹ä»¶å¤„ç†ç±»" aria-hidden="true">#</a> 2.3 äº‹ä»¶å¤„ç†ç±»</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EventManager</span> <span class="token punctuation">{</span>

    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Enum</span><span class="token punctuation">&lt;</span><span class="token class-name">EventType</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">EventListener</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> listeners <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">EventManager</span><span class="token punctuation">(</span><span class="token class-name">Enum</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">EventType</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> operations<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Enum</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">EventType</span><span class="token punctuation">&gt;</span></span> operation <span class="token operator">:</span> operations<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>listeners<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>operation<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">EventType</span> <span class="token punctuation">{</span>
        <span class="token constant">MQ</span><span class="token punctuation">,</span> <span class="token class-name">Message</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * è®¢é˜…
     * <span class="token keyword">@param</span> <span class="token parameter">eventType</span> äº‹ä»¶ç±»å‹
     * <span class="token keyword">@param</span> <span class="token parameter">listener</span>  ç›‘å¬
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token class-name">Enum</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">EventType</span><span class="token punctuation">&gt;</span></span> eventType<span class="token punctuation">,</span> <span class="token class-name">EventListener</span> listener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">EventListener</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> listeners<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>eventType<span class="token punctuation">)</span><span class="token punctuation">;</span>
        users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * å–æ¶ˆè®¢é˜…
     * <span class="token keyword">@param</span> <span class="token parameter">eventType</span> äº‹ä»¶ç±»å‹
     * <span class="token keyword">@param</span> <span class="token parameter">listener</span>  ç›‘å¬
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token class-name">Enum</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">EventType</span><span class="token punctuation">&gt;</span></span> eventType<span class="token punctuation">,</span> <span class="token class-name">EventListener</span> listener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">EventListener</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> listeners<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>eventType<span class="token punctuation">)</span><span class="token punctuation">;</span>
        users<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * é€šçŸ¥
     * <span class="token keyword">@param</span> <span class="token parameter">eventType</span> äº‹ä»¶ç±»å‹
     * <span class="token keyword">@param</span> <span class="token parameter">result</span>    ç»“æœ
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">Enum</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">EventType</span><span class="token punctuation">&gt;</span></span> eventType<span class="token punctuation">,</span> <span class="token class-name">LotteryResult</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">EventListener</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> listeners<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>eventType<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">EventListener</span> listener <span class="token operator">:</span> users<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            listener<span class="token punctuation">.</span><span class="token function">doEvent</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ•´ä¸ªå¤„ç†çš„å®ç°ä¸Šæä¾›äº†ä¸‰ä¸ªä¸»è¦æ–¹æ³•ï¼›è®¢é˜…(<code>subscribe</code>)ã€å–æ¶ˆè®¢é˜…(<code>unsubscribe</code>)ã€é€šçŸ¥(<code>notify</code>)ã€‚è¿™ä¸‰ä¸ªæ–¹æ³•åˆ†åˆ«ç”¨äºå¯¹ç›‘å¬æ—¶é—´çš„æ·»åŠ å’Œä½¿ç”¨ã€‚</li><li>å¦å¤–å› ä¸ºäº‹ä»¶æœ‰ä¸åŒçš„ç±»å‹ï¼Œè¿™é‡Œä½¿ç”¨äº†æšä¸¾çš„æ–¹å¼è¿›è¡Œå¤„ç†ï¼Œä¹Ÿæ–¹ä¾¿è®©å¤–éƒ¨åœ¨è§„å®šä¸‹ä½¿ç”¨äº‹ä»¶ï¼Œè€Œä¸è‡³äºä¹±ä¼ ä¿¡æ¯(<code>EventType.MQ</code>ã€<code>EventType.Message</code>)ã€‚</li></ul><h4 id="_2-4-ä¸šåŠ¡æŠ½è±¡ç±»æ¥å£" tabindex="-1"><a class="header-anchor" href="#_2-4-ä¸šåŠ¡æŠ½è±¡ç±»æ¥å£" aria-hidden="true">#</a> 2.4 ä¸šåŠ¡æŠ½è±¡ç±»æ¥å£</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">LotteryService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">EventManager</span> eventManager<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">LotteryService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        eventManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventManager</span><span class="token punctuation">(</span><span class="token class-name">EventManager<span class="token punctuation">.</span>EventType</span><span class="token punctuation">.</span><span class="token constant">MQ</span><span class="token punctuation">,</span> <span class="token class-name">EventManager<span class="token punctuation">.</span>EventType<span class="token punctuation">.</span>Message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        eventManager<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token class-name">EventManager<span class="token punctuation">.</span>EventType</span><span class="token punctuation">.</span><span class="token constant">MQ</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MQEventListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        eventManager<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token class-name">EventManager<span class="token punctuation">.</span>EventType<span class="token punctuation">.</span>Message</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MessageEventListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">LotteryResult</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token class-name">String</span> uId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">LotteryResult</span> lotteryResult <span class="token operator">=</span> <span class="token function">doDraw</span><span class="token punctuation">(</span>uId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// éœ€è¦ä»€ä¹ˆé€šçŸ¥å°±ç»™è°ƒç”¨ä»€ä¹ˆæ–¹æ³•</span>
        eventManager<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">EventManager<span class="token punctuation">.</span>EventType</span><span class="token punctuation">.</span><span class="token constant">MQ</span><span class="token punctuation">,</span> lotteryResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
        eventManager<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">EventManager<span class="token punctuation">.</span>EventType<span class="token punctuation">.</span>Message</span><span class="token punctuation">,</span> lotteryResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> lotteryResult<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">abstract</span> <span class="token class-name">LotteryResult</span> <span class="token function">doDraw</span><span class="token punctuation">(</span><span class="token class-name">String</span> uId<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™ç§ä½¿ç”¨æŠ½è±¡ç±»çš„æ–¹å¼å®šä¹‰å®ç°æ–¹æ³•ï¼Œå¯ä»¥åœ¨æ–¹æ³•ä¸­æ‰©å±•éœ€è¦çš„é¢å¤–è°ƒç”¨ã€‚å¹¶æä¾›æŠ½è±¡ç±»<code>abstract LotteryResult doDraw(String uId)</code>ï¼Œè®©ç±»çš„ç»§æ‰¿è€…å®ç°ã€‚</li><li>åŒæ—¶æ–¹æ³•çš„å®šä¹‰ä½¿ç”¨çš„æ˜¯<code>protected</code>ï¼Œä¹Ÿå°±æ˜¯ä¿è¯å°†æ¥å¤–éƒ¨çš„è°ƒç”¨æ–¹ä¸ä¼šè°ƒç”¨åˆ°æ­¤æ–¹æ³•ï¼Œåªæœ‰è°ƒç”¨åˆ°<code>draw(String uId)</code>ï¼Œæ‰èƒ½è®©æˆ‘ä»¬å®Œæˆäº‹ä»¶é€šçŸ¥ã€‚</li><li>æ­¤ç§æ–¹å¼çš„å®ç°å°±æ˜¯åœ¨æŠ½è±¡ç±»ä¸­å†™å¥½ä¸€ä¸ªåŸºæœ¬çš„æ–¹æ³•ï¼Œåœ¨æ–¹æ³•ä¸­å®Œæˆæ–°å¢é€»è¾‘çš„åŒæ—¶ï¼Œå†å¢åŠ æŠ½è±¡ç±»çš„ä½¿ç”¨ã€‚è€Œè¿™ä¸ªæŠ½è±¡ç±»çš„å®šä¹‰ä¼šæœ‰ç»§æ‰¿è€…å®ç°ã€‚</li><li>å¦å¤–åœ¨æ„é€ å‡½æ•°ä¸­æä¾›äº†å¯¹äº‹ä»¶çš„å®šä¹‰ï¼›<code>eventManager.subscribe(EventManager.EventType.MQ, new MQEventListener())</code>ã€‚</li><li>åœ¨ä½¿ç”¨çš„æ—¶å€™ä¹Ÿæ˜¯ä½¿ç”¨æšä¸¾çš„æ–¹å¼è¿›è¡Œé€šçŸ¥ä½¿ç”¨ï¼Œä¼ äº†ä»€ä¹ˆç±»å‹<code>EventManager.EventType.MQ</code>ï¼Œå°±ä¼šæ‰§è¡Œä»€ä¹ˆäº‹ä»¶é€šçŸ¥ï¼ŒæŒ‰éœ€æ·»åŠ ã€‚</li></ul><h4 id="_2-5-ä¸šåŠ¡æ¥å£å®ç°ç±»" tabindex="-1"><a class="header-anchor" href="#_2-5-ä¸šåŠ¡æ¥å£å®ç°ç±»" aria-hidden="true">#</a> 2.5 ä¸šåŠ¡æ¥å£å®ç°ç±»</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LotteryServiceImpl</span> <span class="token keyword">extends</span> <span class="token class-name">LotteryService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">MinibusTargetService</span> minibusTargetService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MinibusTargetService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">LotteryResult</span> <span class="token function">doDraw</span><span class="token punctuation">(</span><span class="token class-name">String</span> uId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ‘‡å·</span>
        <span class="token class-name">String</span> lottery <span class="token operator">=</span> minibusTargetService<span class="token punctuation">.</span><span class="token function">lottery</span><span class="token punctuation">(</span>uId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ç»“æœ</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LotteryResult</span><span class="token punctuation">(</span>uId<span class="token punctuation">,</span> lottery<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç°åœ¨å†çœ‹ä¸šåŠ¡æµç¨‹çš„å®ç°ä¸­å¯ä»¥çœ‹åˆ°å·²ç»éå¸¸ç®€å•äº†ï¼Œæ²¡æœ‰é¢å¤–çš„è¾…åŠ©æµç¨‹ï¼Œåªæœ‰æ ¸å¿ƒæµç¨‹çš„å¤„ç†ã€‚</li></ul><h3 id="_3-æµ‹è¯•éªŒè¯-1" tabindex="-1"><a class="header-anchor" href="#_3-æµ‹è¯•éªŒè¯-1" aria-hidden="true">#</a> 3. æµ‹è¯•éªŒè¯</h3><h4 id="_3-1-ç¼–å†™æµ‹è¯•ç±»-1" tabindex="-1"><a class="header-anchor" href="#_3-1-ç¼–å†™æµ‹è¯•ç±»-1" aria-hidden="true">#</a> 3.1 ç¼–å†™æµ‹è¯•ç±»</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">LotteryService</span> lotteryService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LotteryServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">LotteryResult</span> result <span class="token operator">=</span> lotteryService<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token string">&quot;2765789109876&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœï¼š{}&quot;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»è°ƒç”¨ä¸Šæ¥çœ‹å‡ ä¹æ²¡æœ‰åŒºåˆ«ï¼Œä½†æ˜¯è¿™æ ·çš„å®ç°æ–¹å¼å°±å¯ä»¥éå¸¸æ–¹ä¾¿çš„ç»´æŠ¤ä»£ç ä»¥åŠæ‰©å±•æ–°çš„éœ€æ±‚ã€‚</li></ul><h4 id="_3-2-æµ‹è¯•ç»“æœ-1" tabindex="-1"><a class="header-anchor" href="#_3-2-æµ‹è¯•ç»“æœ-1" aria-hidden="true">#</a> 3.2 æµ‹è¯•ç»“æœ</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">23</span><span class="token operator">:</span><span class="token number">56</span><span class="token operator">:</span><span class="token number">07.597</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>d<span class="token punctuation">.</span>d<span class="token punctuation">.</span>e<span class="token punctuation">.</span>listener<span class="token punctuation">.</span></span>MQEventListener</span> <span class="token operator">-</span> è®°å½•ç”¨æˆ· <span class="token number">2765789109876</span> æ‘‡å·ç»“æœ<span class="token punctuation">(</span><span class="token constant">MQ</span><span class="token punctuation">)</span>ï¼šå¾ˆé—æ†¾ï¼Œç¼–ç <span class="token number">2765789109876</span>åœ¨æœ¬æ¬¡æ‘‡å·æœªä¸­ç­¾æˆ–æ‘‡å·èµ„æ ¼å·²è¿‡æœŸ
<span class="token number">23</span><span class="token operator">:</span><span class="token number">56</span><span class="token operator">:</span><span class="token number">07.600</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>d<span class="token punctuation">.</span>d<span class="token punctuation">.</span>e<span class="token punctuation">.</span>l<span class="token punctuation">.</span></span>MessageEventListener</span> <span class="token operator">-</span> ç»™ç”¨æˆ· <span class="token number">2765789109876</span> å‘é€çŸ­ä¿¡é€šçŸ¥<span class="token punctuation">(</span>çŸ­ä¿¡<span class="token punctuation">)</span>ï¼šå¾ˆé—æ†¾ï¼Œç¼–ç <span class="token number">2765789109876</span>åœ¨æœ¬æ¬¡æ‘‡å·æœªä¸­ç­¾æˆ–æ‘‡å·èµ„æ ¼å·²è¿‡æœŸ
<span class="token number">23</span><span class="token operator">:</span><span class="token number">56</span><span class="token operator">:</span><span class="token number">07.698</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼š<span class="token punctuation">{</span><span class="token string">&quot;dateTime&quot;</span><span class="token operator">:</span><span class="token number">1599737367591</span><span class="token punctuation">,</span><span class="token string">&quot;msg&quot;</span><span class="token operator">:</span><span class="token string">&quot;å¾ˆé—æ†¾ï¼Œç¼–ç 2765789109876åœ¨æœ¬æ¬¡æ‘‡å·æœªä¸­ç­¾æˆ–æ‘‡å·èµ„æ ¼å·²è¿‡æœŸ&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;uId&quot;</span><span class="token operator">:</span><span class="token string">&quot;2765789109876&quot;</span><span class="token punctuation">}</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»æµ‹è¯•ç»“æœä¸Šçœ‹æ»¡è¶³ğŸ˜Œæˆ‘ä»¬çš„é¢„æœŸï¼Œè™½ç„¶ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½†åªæœ‰æˆ‘ä»¬çŸ¥é“äº†è®¾è®¡æ¨¡å¼çš„é­…åŠ›æ‰€åœ¨ã€‚</li></ul><h2 id="ä¸ƒã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€æ€»ç»“" aria-hidden="true">#</a> ä¸ƒã€æ€»ç»“</h2><ul><li>ä»æˆ‘ä»¬æœ€åŸºæœ¬çš„è¿‡ç¨‹å¼å¼€å‘ä»¥åŠåæ¥ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼é¢å‘å¯¹è±¡å¼€å‘ï¼Œå¯ä»¥çœ‹åˆ°è®¾è®¡æ¨¡å¼æ”¹é€ åï¼Œæ‹†åˆ†å‡ºäº†æ ¸å¿ƒæµç¨‹ä¸è¾…åŠ©æµç¨‹çš„ä»£ç ã€‚ä¸€èˆ¬ä»£ç ä¸­çš„æ ¸å¿ƒæµç¨‹ä¸ä¼šç»å¸¸å˜åŒ–ã€‚ä½†è¾…åŠ©æµç¨‹ä¼šéšç€ä¸šåŠ¡çš„å„ç§å˜åŒ–è€Œå˜åŒ–ï¼ŒåŒ…æ‹¬ï¼›<code>è¥é”€</code>ã€<code>è£‚å˜</code>ã€<code>ä¿ƒæ´»</code>ç­‰ç­‰ï¼Œå› æ­¤ä½¿ç”¨è®¾è®¡æ¨¡å¼æ¶è®¾ä»£ç å°±æ˜¾å¾—éå¸¸æœ‰å¿…è¦ã€‚</li><li>æ­¤ç§è®¾è®¡æ¨¡å¼ä»ç»“æ„ä¸Šæ˜¯æ»¡è¶³å¼€é—­åŸåˆ™çš„ï¼Œå½“ä½ éœ€è¦æ–°å¢å…¶ä»–çš„ç›‘å¬äº‹ä»¶æˆ–è€…ä¿®æ”¹ç›‘å¬é€»è¾‘ï¼Œæ˜¯ä¸éœ€è¦æ”¹åŠ¨äº‹ä»¶å¤„ç†ç±»çš„ã€‚ä½†æ˜¯å¯èƒ½ä½ ä¸èƒ½æ§åˆ¶è°ƒç”¨é¡ºåºä»¥åŠéœ€è¦åšä¸€äº›äº‹ä»¶ç»“æœçš„è¿”å›ç»§ç»­æ“ä½œï¼Œæ‰€ä»¥ä½¿ç”¨çš„è¿‡ç¨‹æ—¶éœ€è¦è€ƒè™‘åœºæ™¯çš„åˆç†æ€§ã€‚</li><li>ä»»ä½•ä¸€ç§è®¾è®¡æ¨¡å¼æœ‰æ—¶å€™éƒ½ä¸æ˜¯å•ç‹¬ä½¿ç”¨çš„ï¼Œéœ€è¦ç»“åˆå…¶ä»–æ¨¡å¼å…±åŒå»ºè®¾ã€‚å¦å¤–è®¾è®¡æ¨¡å¼çš„ä½¿ç”¨æ˜¯ä¸ºäº†è®©ä»£ç æ›´åŠ æ˜“äºæ‰©å±•å’Œç»´æŠ¤ï¼Œä¸èƒ½å› ä¸ºæ·»åŠ è®¾è®¡æ¨¡å¼è€ŒæŠŠç»“æ„å¤„ç†æ›´åŠ å¤æ‚ä»¥åŠéš¾ä»¥ç»´æŠ¤ã€‚è¿™æ ·çš„åˆç†ä½¿ç”¨çš„ç»éªŒéœ€è¦å¤§é‡çš„å®é™…æ“ä½œç»ƒä¹ è€Œæ¥ã€‚</li></ul>`,67);function E(j,x){const a=c("ExternalLinkIcon");return o(),l("div",null,[u,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),r,s("åšå®¢ï¼š"),n("a",d,[s("https://bugstack.cn"),e(a)])]),k,v,m,n("ol",null,[b,g,n("li",null,[s("æ¶‰åŠå·¥ç¨‹ä¸‰ä¸ªï¼Œå¯ä»¥é€šè¿‡å…³æ³¨"),h,s("ï¼š"),n("a",y,[w,e(a)]),s("ï¼Œå›å¤"),f,s("è·å–(æ‰“å¼€è·å–çš„é“¾æ¥ï¼Œæ‰¾åˆ°åºå·18)")])]),_,n("ul",null,[n("li",null,[s("å›¾ç‰‡æ¥è‡ªï¼š"),n("a",L,[s("https://refactoringguru.cn/design-patterns/observer"),e(a)])])]),M])}const q=p(i,[["render",E],["__file","2020-06-30-zhongxue Java shejimoshiã€Šshizhanguanchazhemoshiã€‹.html.vue"]]);export{q as default};
