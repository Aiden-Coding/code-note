import{_ as o,r as p,o as l,c as i,a as n,b as s,d as e,e as t}from"./app-3RcBQnkC.js";const r={},c=n("h1",{id:"ã€éƒ¨ç½²æ•™ç¨‹ã€‘chatglm-6b-å¼€æºåŒè¯­å¯¹è¯è¯­è¨€æ¨¡å‹",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ã€éƒ¨ç½²æ•™ç¨‹ã€‘chatglm-6b-å¼€æºåŒè¯­å¯¹è¯è¯­è¨€æ¨¡å‹","aria-hidden":"true"},"#"),s(" ã€éƒ¨ç½²æ•™ç¨‹ã€‘ChatGLM-6B å¼€æºåŒè¯­å¯¹è¯è¯­è¨€æ¨¡å‹")],-1),d=n("br",null,null,-1),u={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},m=n("blockquote",null,[n("p",null,"æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„")],-1),v={href:"https://github.com/THUDM/ChatGLM-6B",target:"_blank",rel:"noopener noreferrer"},b=t('<p><img src="https://bugstack.cn/images/article/algorithm/model/model-3-01.png" alt=""></p><p>ChatGLM-6B æ˜¯æ¸…åå¼€æºçš„ä¸€ä¸ªå°å‹å¯¹è¯æ¨¡å‹ï¼Œè®©å¤§å®¶å¯ä»¥åœ¨è‡ªå·±éƒ¨ç½²èµ·æ¥è·‘ä¸€è·‘çœ‹çœ‹æ•ˆæœã€‚ä½†å¯¹äºæœ¬èº«ä¸æ˜¯ä»äº‹æ­¤ç±»å·¥ä½œçš„å…¶ä»–ç ”å‘ä¼™ä¼´æ¥è¯´ï¼Œéƒ¨ç½²è¿™ä¸ªä¸œè¥¿å¤šåŠéƒ½ä¼šå¡åœ¨ç¯å¢ƒä¸Šã€‚æ‰€ä»¥å°å‚…å“¥åœ¨<code>æœ¬åœ°/äº‘æœåŠ¡</code>éƒ¨ç½²ä½“éªŒåï¼ŒæŠŠç›¸å…³ç»éªŒåˆ†äº«ä¸‹ï¼Œè®©æœ‰éœ€è¦çš„ä¼™ä¼´ä¹Ÿå¯ä»¥å°å°é²œã€‚</p><h2 id="ä¸€ã€æ¨¡å‹ç®€è¿°" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€æ¨¡å‹ç®€è¿°" aria-hidden="true">#</a> ä¸€ã€æ¨¡å‹ç®€è¿°</h2><p>ChatGLM å‚è€ƒäº† ChatGPT çš„è®¾è®¡æ€è·¯ï¼Œåœ¨åƒäº¿åŸºåº§æ¨¡å‹ GLM-130B ä¸­æ³¨å…¥äº†ä»£ç é¢„è®­ç»ƒï¼Œé€šè¿‡æœ‰ç›‘ç£å¾®è°ƒï¼ˆSupervised Fine-Tuningï¼‰ç­‰æŠ€æœ¯å®ç°äººç±»æ„å›¾å¯¹é½ã€‚2022å¹´11æœˆï¼Œæ–¯å¦ç¦å¤§å­¦å¤§æ¨¡å‹ä¸­å¿ƒå¯¹å…¨çƒ30ä¸ªä¸»æµå¤§æ¨¡å‹è¿›è¡Œäº†å…¨æ–¹ä½çš„è¯„æµ‹ï¼Œ<strong>GLM-130B æ˜¯äºšæ´²å”¯ä¸€å…¥é€‰çš„å¤§æ¨¡å‹ğŸ‘ğŸ»</strong>ã€‚</p><p><img src="https://bugstack.cn/images/article/algorithm/model/model-3-02.png" alt=""></p><p>åŒæ—¶ ChatGLM å›¢é˜Ÿä¸ºä¸ç¤¾åŒºä¸€èµ·æ›´å¥½åœ°æ¨åŠ¨å¤§æ¨¡å‹æŠ€æœ¯çš„å‘å±•ï¼Œæ¸…åå¼€æºäº† ChatGLM-6B æ¨¡å‹ã€‚å®ƒæ˜¯ä¸€ä¸ªåˆå…·ä¸­æ–‡é—®ç­”å’Œå¯¹è¯åŠŸèƒ½çš„å°å‹æ¨¡å‹ï¼Œå¯ä»¥è®©å¤§å®¶å³ä½¿åœ¨æœ¬åœ°å’Œä¸€äº›å°å‹çš„æœåŠ¡å™¨ä¸Šå°±å¯ä»¥éƒ¨ç½²ä½“éªŒã€‚</p>',6),k={href:"https://github.com/THUDM/ChatGLM-6B",target:"_blank",rel:"noopener noreferrer"},h={href:"https://chatglm.cn/blog",target:"_blank",rel:"noopener noreferrer"},g=n("li",null,[s("èµ„æºï¼šè‡ªå·±è®­ç»ƒçš„è¯ï¼Œå»ºè®®"),n("code",null,"10æ ¸ã€64gå†…å­˜ã€22gæ˜¾å­˜")],-1),_=t('<h2 id="äºŒã€åŸºç¡€ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#äºŒã€åŸºç¡€ç¯å¢ƒ" aria-hidden="true">#</a> äºŒã€åŸºç¡€ç¯å¢ƒ</h2><h3 id="_1-æœåŠ¡é…ç½®" tabindex="-1"><a class="header-anchor" href="#_1-æœåŠ¡é…ç½®" aria-hidden="true">#</a> 1. æœåŠ¡é…ç½®</h3><p>ChatGLM-6B è™½ç„¶å·²ç»æ˜¯å¾ˆæ¸©é¦¨æä¾›çš„ï¼Œèƒ½æœ€ä½³æ”¯æŒå¯¹è¯çš„æœ€å°æ¨¡å‹äº†ï¼Œä½†å®é™…éƒ¨ç½²çš„æ—¶å€™ä»éœ€è¦ä¸€ä¸ªä¸å°çš„æœåŠ¡å™¨<code>32Gå†…å­˜</code>é…ç½®æˆ–è€…æœ‰è¾ƒå¥½çš„<code>16G NVIDIA</code>æ˜¾å¡ã€‚å¯èƒ½å°±æ€•å¤§å®¶éƒ¨ç½²èµ·æ¥ï¼Œæ‰€ä»¥å®˜ç½‘ä¸Šä¹Ÿæä¾›äº†æ›´ä½æˆæœ¬çš„éƒ¨ç½²æ–¹æ¡ˆï¼ŒINT8å’ŒINT4 æ•°æ®æ¨¡å‹ã€‚æ•´ä½“æ‰€éœ€ç©ºé—´å¦‚ä¸‹ï¼›</p><table><thead><tr><th><strong>é‡åŒ–ç­‰çº§</strong></th><th><strong>æœ€ä½ GPU æ˜¾å­˜</strong>ï¼ˆæ¨ç†ï¼‰</th><th><strong>æœ€ä½ GPU æ˜¾å­˜</strong>ï¼ˆé«˜æ•ˆå‚æ•°å¾®è°ƒï¼‰</th></tr></thead><tbody><tr><td>FP16ï¼ˆæ— é‡åŒ–ï¼‰</td><td>13 GB</td><td>14 GB</td></tr><tr><td>INT8</td><td>8 GB</td><td>9 GB</td></tr><tr><td>INT4</td><td>6 GB</td><td>7 GB</td></tr></tbody></table><p>å°å‚…å“¥è‡ªå·±ä¹Ÿæ˜¯åœ¨ <code>Mac M1</code>ã€<code>è½»é‡äº‘ä¸»æœº</code>ï¼Œè¿˜æœ‰ä¸€ä¸ªä¸“é—¨ç”¨äºæµ‹è¯•<code>AIGCçš„æœåŠ¡å™¨</code>ä¸Šï¼Œéƒ½åšäº†æµ‹è¯•éªŒè¯ï¼Œè¿™æ ·ä¹Ÿèƒ½é¿å…å¤§å®¶èµ°å¼¯è·¯ã€‚å°±åƒæˆ‘åœ¨ä¸€æ¬¾8Gå†…å­˜çš„è½»é‡äº‘ä¸»æœºä¸Šï¼Œéƒ¨ç½² INT4 æ¨¡å‹ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼›</p><p><img src="https://bugstack.cn/images/article/algorithm/model/model-3-03.png" alt=""></p><p>ğŸ˜‚ æ‰€ä»¥åˆ«ä¹°ä¸€äº›é…ç½®ä¸ä½³çš„æœºå™¨ï¼Œå¦åˆ™ä½ æ ¹æœ¬è·‘ä¸èµ·æ¥ï¼Œè¿˜æµªè´¹é’±ã€‚</p><h3 id="_2-å·¥ç¨‹ä»£ç " tabindex="-1"><a class="header-anchor" href="#_2-å·¥ç¨‹ä»£ç " aria-hidden="true">#</a> 2. å·¥ç¨‹ä»£ç </h3><p><img src="https://bugstack.cn/images/article/algorithm/model/model-3-04.png" alt=""></p>',9),f=n("strong",null,"æºç ",-1),y={href:"https://github.com/THUDM/ChatGLM-6B",target:"_blank",rel:"noopener noreferrer"},x=t(`<h3 id="_3-ç®—æ³•æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_3-ç®—æ³•æ¨¡å‹" aria-hidden="true">#</a> 3. ç®—æ³•æ¨¡å‹</h3><p>åœ¨ ChatGLM-6B ä¸­æœ‰ä¸€æ®µä»£ç æ˜¯é…ç½®æ¨¡å‹åœ°å€çš„ï¼Œé™¤äº†è¯´æ˜çš„Macç”µè„‘ï¼Œç†è®ºä¸Šæ¥è¯´å®ƒå¯ä»¥è‡ªåŠ¨ä¸‹è½½ã€‚ä½†è¿™äº›æ¨¡å‹å¤ªå¤§äº†ï¼Œæ‰€ä»¥æœ€å¥½æ˜¯æå‰ä¸‹è½½åˆ°æœ¬åœ°ä½¿ç”¨ã€‚</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token operator">//</span> web_demo2<span class="token punctuation">.</span>py éƒ¨åˆ†ä»£ç 
tokenizer <span class="token operator">=</span> AutoTokenizer<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span><span class="token string">&quot;/Users/xfg/develop/github/chatglm-6b&quot;</span><span class="token punctuation">,</span> trust_remote_code<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
model <span class="token operator">=</span> AutoModel<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span><span class="token string">&quot;/Users/xfg/develop/github/chatglm-6b&quot;</span><span class="token punctuation">,</span> trust_remote_code<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>half<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://bugstack.cn/images/article/algorithm/model/model-3-05.png" alt=""></p>`,4),w=n("strong",null,"å®˜ç½‘",-1),M={href:"https://huggingface.co/",target:"_blank",rel:"noopener noreferrer"},D={href:"https://huggingface.co/THUDM/chatglm-6b/tree/main",target:"_blank",rel:"noopener noreferrer"},T={href:"https://huggingface.co/THUDM/chatglm-6b-int4/tree/main",target:"_blank",rel:"noopener noreferrer"},G={href:"https://huggingface.co/THUDM/chatglm-6b-int8/tree/main",target:"_blank",rel:"noopener noreferrer"},U={href:"https://huggingface.co/THUDM/visualglm-6b/tree/main",target:"_blank",rel:"noopener noreferrer"},L={href:"https://cloud.tsinghua.edu.cn/d/674208019e314311ab5c/?p=%2F&mode=list",target:"_blank",rel:"noopener noreferrer"},B=n("strong",null,"æ³¨æ„",-1),C={href:"https://cloud.tsinghua.edu.cn/d/674208019e314311ab5c/?p=%2Fchatglm-6b&mode=list",target:"_blank",rel:"noopener noreferrer"},I={href:"https://cloud.tsinghua.edu.cn/d/674208019e314311ab5c/?p=%2Fchatglm-6b-int4&mode=list",target:"_blank",rel:"noopener noreferrer"},q={href:"https://cloud.tsinghua.edu.cn/d/674208019e314311ab5c/?p=%2Fchatglm-6b-int8&mode=list",target:"_blank",rel:"noopener noreferrer"},P=n("h3",{id:"_4-è½¯ä»¶ç‰ˆæœ¬",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_4-è½¯ä»¶ç‰ˆæœ¬","aria-hidden":"true"},"#"),s(" 4. è½¯ä»¶ç‰ˆæœ¬")],-1),A=n("div",{align:"center"},[n("img",{src:"https://bugstack.cn/images/article/algorithm/model/model-3-06.png?raw=true",width:"650px"})],-1),R={href:"https://developer.apple.com/metal/pytorch/",target:"_blank",rel:"noopener noreferrer"},H={href:"https://developer.apple.com/metal/pytorch",target:"_blank",rel:"noopener noreferrer"},E=n("li",null,"Python 3.10.8 æˆ–æ›´é«˜ç‰ˆæœ¬ - å› ä¸ºæœ‰äº›èŠå¤©çš„ç•Œé¢æ¨¡å—ï¼Œéœ€è¦è¿™ä¸ªç‰ˆæœ¬ã€‚",-1),N=t(`<h3 id="_5-è½¯ä»¶å¸è½½" tabindex="-1"><a class="header-anchor" href="#_5-è½¯ä»¶å¸è½½" aria-hidden="true">#</a> 5. è½¯ä»¶å¸è½½</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 1. å¸è½½ python3/python æ³¨æ„å…ˆçœ‹ä¸‹ç‰ˆæœ¬ python -V ç¡®è®¤ä¸‹åç§°æ˜¯ python è¿˜æ˜¯ python3 ä»¥åŠ pip</span>
<span class="token function">whereis</span> python3 <span class="token operator">|</span><span class="token function">xargs</span> <span class="token function">rm</span> <span class="token parameter variable">-frv</span>
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /usr/local/bin/python3 /usr/local/bin/pip3
<span class="token comment"># 2. å¸è½½ openssl - å¦‚æœå®‰è£…äº†è€ç‰ˆæœ¬çš„pythonï¼Œåˆå®‰è£…æ–°çš„ï¼Œå¯èƒ½éœ€è¦å¸è½½ ssl é‡æ–°å®‰è£…</span>
<span class="token function">whereis</span> openssl <span class="token operator">|</span><span class="token function">xargs</span> <span class="token function">rm</span> <span class="token parameter variable">-frv</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¦‚æœä½ çš„ç”µè„‘æˆ–è€…æœåŠ¡å™¨ä¹‹å‰å·²ç»å®‰è£…äº† python é‚£ä¹ˆå¯ä»¥å…ˆæŠŠå®ƒå¸è½½æ‰ã€‚</li></ul><h2 id="ä¸‰ã€ç¯å¢ƒé…ç½®-æœåŠ¡å™¨ç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€ç¯å¢ƒé…ç½®-æœåŠ¡å™¨ç‰ˆæœ¬" aria-hidden="true">#</a> ä¸‰ã€ç¯å¢ƒé…ç½® - æœåŠ¡å™¨ç‰ˆæœ¬</h2><p>ä»¥èƒ½è¿è¡Œèµ· ChatGLM-6B åªéœ€è¦ä»¥ä¸‹5ä¸ªæ­¥éª¤ï¼›</p><div align="center"><img src="https://bugstack.cn/images/article/algorithm/model/model-3-07.png?raw=true" width="650px"></div>`,6),j={href:"https://github.com/THUDM/ChatGLM-6B",target:"_blank",rel:"noopener noreferrer"},S=n("code",null,"[2023/05/17] å‘å¸ƒ",-1),z={href:"https://github.com/THUDM/VisualGLM-6B/",target:"_blank",rel:"noopener noreferrer"},V=n("code",null,"ä¸€ä¸ªæ”¯æŒå›¾åƒç†è§£çš„å¤šæ¨¡æ€å¯¹è¯è¯­è¨€æ¨¡å‹ã€‚",-1),F=t(`<h3 id="æ­¥éª¤1-ç¯å¢ƒå®‰è£…" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤1-ç¯å¢ƒå®‰è£…" aria-hidden="true">#</a> æ­¥éª¤1ï¼šç¯å¢ƒå®‰è£…</h3><h4 id="_1-openssl" tabindex="-1"><a class="header-anchor" href="#_1-openssl" aria-hidden="true">#</a> 1. openssl</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code># <span class="token number">1.</span> å¸è½½openssl

whereis openssl <span class="token operator">|</span>xargs rm <span class="token operator">-</span>frv

# <span class="token number">2.</span> å®˜ç½‘ä¸‹è½½opensslç¼–è¯‘å®‰è£…

wget http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>openssl<span class="token punctuation">.</span>org<span class="token operator">/</span>source<span class="token operator">/</span>openssl<span class="token operator">-</span><span class="token number">1.1</span><span class="token number">.1</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz
tar zxf openssl<span class="token operator">-</span><span class="token number">1.1</span><span class="token number">.1</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz
cd openssl<span class="token operator">-</span><span class="token number">1.1</span><span class="token number">.1</span>
<span class="token punctuation">.</span>/config <span class="token operator">--</span>prefix<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>openssl shared zlib
make <span class="token operator">&amp;&amp;</span> make install 

# <span class="token number">3.</span> è®¾ç½®ç¯å¢ƒå˜é‡ <span class="token constant">LD_LIBRARY_PATH</span>

echo <span class="token string">&quot;export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/openssl/lib&quot;</span> <span class="token operator">&gt;&gt;</span>  <span class="token operator">/</span>etc<span class="token operator">/</span>profile
source <span class="token operator">/</span>etc<span class="token operator">/</span>profile

# <span class="token number">4.</span> å¸è½½é‡æ–°ç¼–è¯‘å®‰è£…python3

whereis python3 <span class="token operator">|</span>xargs rm <span class="token operator">-</span>frv
rm <span class="token operator">-</span>rf <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>bin<span class="token operator">/</span>python3 <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>bin<span class="token operator">/</span>pip3
mkdir <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>python3
<span class="token punctuation">.</span>/configure <span class="token operator">--</span>prefix<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>python3 <span class="token operator">--</span>enable<span class="token operator">-</span>optimizations <span class="token operator">--</span><span class="token keyword">with</span><span class="token operator">-</span>openssl<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>openssl
make <span class="token operator">-</span>j8 <span class="token operator">&amp;&amp;</span> make install
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-python-3-10" tabindex="-1"><a class="header-anchor" href="#_2-python-3-10" aria-hidden="true">#</a> 2. Python 3.10</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>cd <span class="token operator">~</span>

# <span class="token number">1.</span>ä¸‹è½½<span class="token class-name">Python</span>å®‰è£…åŒ…
wget https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>python<span class="token punctuation">.</span>org<span class="token operator">/</span>ftp<span class="token operator">/</span>python<span class="token operator">/</span><span class="token number">3.10</span><span class="token number">.8</span><span class="token operator">/</span><span class="token class-name">Python</span><span class="token operator">-</span><span class="token number">3.10</span><span class="token number">.8</span><span class="token punctuation">.</span>tgz

# <span class="token number">2.</span>å°†å®‰è£…åŒ…ç§»åŠ¨åˆ°<span class="token operator">/</span>usr<span class="token operator">/</span>localæ–‡ä»¶å¤¹ä¸‹
mv <span class="token class-name">Python</span><span class="token operator">-</span><span class="token number">3.10</span><span class="token number">.8</span><span class="token punctuation">.</span>tgz <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>

# <span class="token number">3.</span>åœ¨localç›®å½•ä¸‹åˆ›å»º<span class="token class-name">Python3</span>ç›®å½•
mkdir <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>python3

# <span class="token number">4.</span>è¿›å…¥çš„<span class="token class-name">Python</span>å®‰è£…åŒ…å‹ç¼©åŒ…æ‰€åœ¨çš„ç›®å½•
cd <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>

# <span class="token number">5.</span>è§£å‹å®‰è£…åŒ…
tar <span class="token operator">-</span>xvf <span class="token class-name">Python</span><span class="token operator">-</span><span class="token number">3.10</span><span class="token number">.8</span><span class="token punctuation">.</span>tgz

# <span class="token number">6.</span>è¿›å…¥è§£å‹åçš„ç›®å½•
cd <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span><span class="token class-name">Python</span><span class="token operator">-</span><span class="token number">3.10</span><span class="token number">.8</span><span class="token operator">/</span>

# <span class="token number">7.</span>é…ç½®å®‰è£…ç›®å½•
<span class="token punctuation">.</span>/configure <span class="token operator">--</span>prefix<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>python3

# <span class="token number">8.</span>ç¼–è¯‘æºç 
make

# <span class="token number">9.</span>æ‰§è¡Œæºç å®‰è£…
make install

# <span class="token number">10.</span>åˆ›å»ºè½¯è¿æ¥
ln <span class="token operator">-</span>s <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>python3<span class="token operator">/</span>bin<span class="token operator">/</span>python3 <span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>python3

# <span class="token number">11.</span> æµ‹è¯•
python3 <span class="token operator">-</span><span class="token class-name">V</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-å®‰è£…pip3" tabindex="-1"><a class="header-anchor" href="#_3-å®‰è£…pip3" aria-hidden="true">#</a> 3. å®‰è£…pip3</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>cd <span class="token operator">~</span>

# <span class="token number">1.</span>ä¸‹è½½
wget https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>bootstrap<span class="token punctuation">.</span>pypa<span class="token punctuation">.</span>io<span class="token operator">/</span>get<span class="token operator">-</span>pip<span class="token punctuation">.</span>py

# <span class="token number">2.</span>å®‰è£…ï¼›æ³¨æ„å’±ä»¬å®‰è£…äº† python3 æ‰€ä»¥æ˜¯ pyhton3 get<span class="token operator">-</span>pip<span class="token punctuation">.</span>py
python3 get<span class="token operator">-</span>pip<span class="token punctuation">.</span>py
  
# <span class="token number">3.</span>æŸ¥æ‰¾pipå®‰è£…è·¯å¾„
find <span class="token operator">/</span> <span class="token operator">-</span>name pip
  
# <span class="token number">4.</span>å°†pipæ·»åŠ åˆ°ç³»ç»Ÿå‘½ä»¤
ln <span class="token operator">-</span>s  <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>python<span class="token operator">/</span>bin<span class="token operator">/</span>pip <span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>pip  
  
# <span class="token number">5.</span>æµ‹è¯•
pip <span class="token operator">-</span><span class="token class-name">V</span>
  
# <span class="token number">6.</span>æ›´æ¢æºï¼Œå¦‚æœä¸æ›´æ¢é‚£ä¹ˆä½¿ç”¨ pip ä¸‹è½½è½¯ä»¶ä¼šå¾ˆæ…¢
pip config set global<span class="token punctuation">.</span>index<span class="token operator">-</span>url https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pypi<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>simple
pip config set install<span class="token punctuation">.</span>trusted<span class="token operator">-</span>host mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com
pip config list
  
# pipå›½å†…é•œåƒæºï¼š

# é˜¿é‡Œäº‘â€ƒhttp<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com<span class="token operator">/</span>pypi<span class="token operator">/</span>simple<span class="token operator">/</span>
# ä¸­å›½ç§‘æŠ€å¤§å­¦ â€ƒhttps<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pypi<span class="token punctuation">.</span>mirrors<span class="token punctuation">.</span>ustc<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>simple<span class="token operator">/</span>
# è±†ç“£â€ƒhttp<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pypi<span class="token punctuation">.</span>douban<span class="token punctuation">.</span>com<span class="token operator">/</span>simple
# <span class="token class-name">Python</span>å®˜æ–¹â€ƒhttps<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pypi<span class="token punctuation">.</span>python<span class="token punctuation">.</span>org<span class="token operator">/</span>simple<span class="token operator">/</span>
# v2exâ€ƒhttp<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pypi<span class="token punctuation">.</span>v2ex<span class="token punctuation">.</span>com<span class="token operator">/</span>simple<span class="token operator">/</span>
# ä¸­å›½ç§‘å­¦é™¢ â€ƒhttp<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pypi<span class="token punctuation">.</span>mirrors<span class="token punctuation">.</span>opencas<span class="token punctuation">.</span>cn<span class="token operator">/</span>simple<span class="token operator">/</span>
# æ¸…åå¤§å­¦â€ƒhttps<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>pypi<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>simple<span class="token operator">/</span>  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-å®‰è£…git" tabindex="-1"><a class="header-anchor" href="#_4-å®‰è£…git" aria-hidden="true">#</a> 4. å®‰è£…git</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>cd <span class="token operator">~</span>

# <span class="token number">1.</span>å®‰è£…å‰é¦–å…ˆå¾—å®‰è£…ä¾èµ–ç¯å¢ƒ
yum install <span class="token operator">-</span>y perl<span class="token operator">-</span>devel

# <span class="token number">2.</span>ä¸‹è½½æºç åŒ…åˆ° <span class="token class-name">CentOS</span> æœåŠ¡å™¨åè¿›è¡Œè§£å‹
wget https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>edge<span class="token punctuation">.</span>kernel<span class="token punctuation">.</span>org<span class="token operator">/</span>pub<span class="token operator">/</span>software<span class="token operator">/</span>scm<span class="token operator">/</span>git<span class="token operator">/</span>git<span class="token operator">-</span><span class="token number">2.9</span><span class="token number">.5</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz

tar <span class="token operator">-</span>zxf git<span class="token operator">-</span><span class="token number">2.9</span><span class="token number">.5</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz

cd git<span class="token operator">-</span><span class="token number">2.9</span><span class="token number">.5</span>

# <span class="token number">3.</span>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è¿›è¡Œç¼–è¯‘å®‰è£… 

<span class="token punctuation">.</span>/configure <span class="token operator">--</span>prefix<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>git

make <span class="token operator">&amp;&amp;</span> make install

# <span class="token number">4.</span>æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡
vim <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>bashrc

export <span class="token constant">PATH</span><span class="token operator">=</span><span class="token string">&quot;/usr/local/git/bin:$PATH&quot;</span>

# <span class="token number">5.</span>ä½¿é…ç½®ç”Ÿæ•ˆ
source <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>bashrc

# <span class="token number">6.</span>æµ‹è¯•
git version

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ­¥éª¤2-ä»£ç ä¸‹è½½" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤2-ä»£ç ä¸‹è½½" aria-hidden="true">#</a> æ­¥éª¤2ï¼šä»£ç ä¸‹è½½</h3><p>åœ¨LinuxæœåŠ¡å™¨ï¼Œå¯ä»¥ç›´æ¥åœ¨ cd ~ ç›®å½•ä¸‹æ‰§è¡Œï¼›<code>git clone git://github.com/THUDM/ChatGLM-6B.git</code></p><h3 id="æ­¥éª¤3-æ¨¡å‹ä¸‹è½½" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤3-æ¨¡å‹ä¸‹è½½" aria-hidden="true">#</a> æ­¥éª¤3ï¼šæ¨¡å‹ä¸‹è½½</h3>`,12),$={href:"https://huggingface.co/THUDM/chatglm-6b/tree/main",target:"_blank",rel:"noopener noreferrer"},O={href:"https://cloud.tsinghua.edu.cn/d/fb9f16d6dc8f482596c2/",target:"_blank",rel:"noopener noreferrer"},Y=n("code",null,"ç›®å½•ï¼šåŸºç¡€ç¯å¢ƒ",-1),W=t(`<p>æœ¬åœ°ç›´æ¥ç¯å¢ƒç›´æ¥ä¸‹è½½ï¼Œç½‘ç»œç¯å¢ƒå¯ä»¥é€šè¿‡ SFTP - Termius ä¼ åˆ°ä¸€ä¸ª <code>ChatGLM-6B/data</code> ç›®å½•ä¸‹ã€‚æˆ–è€…ç›´æ¥é€šè¿‡ <code>wget http://...</code> è¿™æ ·çš„å‘½ä»¤æ–¹å¼ç›´æ¥ä¸‹è½½æ¨¡å‹ã€‚<strong>ä¼šéœ€è¦è¾ƒé•¿çš„è€—æ—¶</strong></p><h3 id="æ­¥éª¤4-å®‰è£…é…ç½®" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤4-å®‰è£…é…ç½®" aria-hidden="true">#</a> æ­¥éª¤4ï¼šå®‰è£…é…ç½®</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code># sudo su <span class="token operator">-</span> åˆ‡æ¢åˆ°root æˆ–è€…é€šè¿‡ sudo æ‰§è¡Œã€‚é•œåƒå¯ä»¥æ¢ä¸€æ¢ï¼Œçœ‹çœ‹å“ªä¸ªå¿«ç”¨å“ªä¸ªã€‚
sudo pip install <span class="token operator">-</span>r requirements<span class="token punctuation">.</span>txt <span class="token operator">-</span>i https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirror<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com<span class="token operator">/</span>pypi<span class="token operator">/</span>simple

# æ‰§è¡ŒæˆåŠŸæ¡ˆä¾‹ <span class="token operator">-</span> è¿‡ç¨‹è¾ƒé•¿
  
  <span class="token class-name">Looking</span> in indexes<span class="token operator">:</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirror<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com<span class="token operator">/</span>pypi<span class="token operator">/</span>simple
<span class="token class-name">Collecting</span> protobuf
  <span class="token class-name">Downloading</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirror<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com<span class="token operator">/</span>pypi<span class="token operator">/</span>packages<span class="token operator">/</span><span class="token number">06</span><span class="token operator">/</span><span class="token number">38</span><span class="token operator">/</span>e72c556c25aaaaafca75018d2d0ebc50c5ab80983dd4def086624fba43f2<span class="token operator">/</span>protobuf<span class="token operator">-</span><span class="token number">4.23</span><span class="token number">.0</span><span class="token operator">-</span>cp37<span class="token operator">-</span>abi3<span class="token operator">-</span>manylinux2014_x86_64<span class="token punctuation">.</span>whl <span class="token punctuation">(</span><span class="token number">304</span> kB<span class="token punctuation">)</span>
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” <span class="token number">304.5</span><span class="token operator">/</span><span class="token number">304.5</span> <span class="token constant">KB</span> <span class="token number">19.4</span> <span class="token constant">MB</span><span class="token operator">/</span>s eta <span class="token number">0</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>
<span class="token class-name">Collecting</span> transformers<span class="token operator">==</span><span class="token number">4.27</span><span class="token number">.1</span>
  <span class="token class-name">Downloading</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirror<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com<span class="token operator">/</span>pypi<span class="token operator">/</span>packages<span class="token operator">/</span><span class="token number">6d</span><span class="token operator">/</span><span class="token number">9</span>b<span class="token operator">/</span><span class="token number">2f</span><span class="token number">536f</span><span class="token number">9e73390209</span>e0b27b74691355dac494b7ec8154f3012fdc6debbae7<span class="token operator">/</span>transformers<span class="token operator">-</span><span class="token number">4.27</span><span class="token number">.1</span><span class="token operator">-</span>py3<span class="token operator">-</span>none<span class="token operator">-</span>any<span class="token punctuation">.</span>whl <span class="token punctuation">(</span><span class="token number">6.7</span> <span class="token constant">MB</span><span class="token punctuation">)</span>
     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” <span class="token number">6.7</span><span class="token operator">/</span><span class="token number">6.7</span> <span class="token constant">MB</span> <span class="token number">10.4</span> <span class="token constant">MB</span><span class="token operator">/</span>s eta <span class="token number">0</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¯¹äºæœ¬åœ°çš„ç½‘ç»œå’Œæ™®é€šçš„æœåŠ¡å™¨ï¼Œè¿™ä¸ªæ­¥éª¤ä¼šæ‰§è¡Œè¾ƒé•¿çš„æ—¶é—´ã€‚å¦‚æœæ‰§è¡Œå¤±è´¥äº†ï¼Œåœ¨æ­¤ç»§ç»­æ‰§è¡Œå°±å¯ä»¥ï¼Œç›´è‡³å¾—åˆ°ä¸Šå¤©çš„çœ·é¡¾ï¼Œä½ æˆåŠŸäº†ï¼ï¼ï¼</li></ul><h3 id="æ­¥éª¤5-å¯åŠ¨æ‰§è¡Œ" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤5-å¯åŠ¨æ‰§è¡Œ" aria-hidden="true">#</a> æ­¥éª¤5ï¼šå¯åŠ¨æ‰§è¡Œ</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code># åˆ‡æ¢åˆ° <span class="token class-name">ChatGLM</span><span class="token operator">-</span><span class="token number">6</span>B å·¥ç¨‹ç›®å½•ï¼Œæ‰§è¡Œ
python3 <span class="token operator">-</span>m streamlit run <span class="token punctuation">.</span>/web_demo2<span class="token punctuation">.</span>py <span class="token operator">--</span>server<span class="token punctuation">.</span>port <span class="token number">7397</span> <span class="token operator">--</span>server<span class="token punctuation">.</span>address <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span>

# æ‰§è¡Œç»“æœ <span class="token operator">-</span> æˆåŠŸåæœ‰è¿™æ ·çš„æ•ˆæœ
<span class="token class-name">Collecting</span> usage <span class="token class-name"><span class="token namespace">statistics<span class="token punctuation">.</span></span> To</span> deactivate<span class="token punctuation">,</span> set browser<span class="token punctuation">.</span>gatherUsageStats <span class="token keyword">to</span> <span class="token class-name">False<span class="token punctuation">.</span>


  You</span> can now view your <span class="token class-name">Streamlit</span> app in your browser<span class="token punctuation">.</span>

  <span class="token constant">URL</span><span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token operator">:</span><span class="token number">7397</span>

<span class="token class-name">Explicitly</span> passing a \`revision\` is encouraged when loading a model <span class="token keyword">with</span> <span class="token namespace">custom</span> code <span class="token keyword">to</span> <span class="token namespace">ensure</span> no malicious code has been contributed in a newer <span class="token class-name"><span class="token namespace">revision<span class="token punctuation">.</span></span>
Explicitly</span> passing a \`revision\` is encouraged when loading a configuration <span class="token keyword">with</span> <span class="token namespace">custom</span> code <span class="token keyword">to</span> <span class="token namespace">ensure</span> no malicious code has been contributed in a newer <span class="token class-name"><span class="token namespace">revision<span class="token punctuation">.</span></span>
Explicitly</span> passing a \`revision\` is encouraged when loading a model <span class="token keyword">with</span> <span class="token namespace">custom</span> code <span class="token keyword">to</span> <span class="token namespace">ensure</span> no malicious code has been contributed in a newer <span class="token class-name"><span class="token namespace">revision<span class="token punctuation">.</span></span>
Loading</span> checkpoint shards<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> <span class="token number">8</span><span class="token operator">/</span><span class="token number">8</span> <span class="token punctuation">[</span><span class="token number">01</span><span class="token operator">:</span><span class="token number">30</span><span class="token operator">&lt;</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span><span class="token punctuation">,</span> <span class="token number">11.35</span>s<span class="token operator">/</span>it<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä½ å¯ä»¥æŒ‡å®šç«¯å£ï¼Œå¹¶å¯¹ç«¯å£å¼€æ”¾è®¿é—®æƒé™ã€‚ä¹‹åå°±å¯ä»¥åé—®åœ°å€ï¼›<code>http://ä½ çš„æœåŠ¡å™¨åœ°å€:ç«¯å£</code></li><li>åˆæ¬¡ä½¿ç”¨çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œæ¨¡å‹çš„å¯åŠ¨ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªé˜¶æ®µï¼Œå¾ˆå¤šé…ç½®ä¸ä½³çš„æœåŠ¡å™¨æ˜¯æ²¡æ³•å¯åŠ¨æˆåŠŸçš„ã€‚</li></ul><h2 id="å››ã€ç¯å¢ƒé…ç½®-aigcç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#å››ã€ç¯å¢ƒé…ç½®-aigcç‰ˆæœ¬" aria-hidden="true">#</a> å››ã€ç¯å¢ƒé…ç½® - AIGCç‰ˆæœ¬</h2><p>è¿™æ˜¯ä¸€ä¸ª<code>é’èƒ½åŠ›</code>ç‰ˆæœ¬ï¼Œä½ åªéœ€è¦èŠ±é’±åˆ°ä½ï¼Œä½“éªŒä¸ªå‡ å°æ—¶ï¼Œé‚£ä¹ˆè¿™ä¸ªæ˜¯æœ€èŠ‚çœæˆæœ¬çš„ã€‚ä½ å¯ä»¥é€šè¿‡æˆ‘çš„é‚€è¯·é“¾æ¥è¿›å…¥ï¼Œè¿™æ ·ä¼šå¾—åˆ°ä¸€äº›ä½¿ç”¨é…é¢ï¼Œå¯èƒ½ä¸éœ€è¦èŠ±é’±ã€‚</p><h3 id="_1-æ³¨å†ŒæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_1-æ³¨å†ŒæœåŠ¡" aria-hidden="true">#</a> 1. æ³¨å†ŒæœåŠ¡</h3>`,10),K={href:"https://www.lanrui-ai.com/register?invitation_code=3931177594",target:"_blank",rel:"noopener noreferrer"},Z={href:"https://www.lanrui-ai.com/console/workspace",target:"_blank",rel:"noopener noreferrer"},X=t(`<h3 id="_2-é€‰æ‹©æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_2-é€‰æ‹©æœåŠ¡" aria-hidden="true">#</a> 2. é€‰æ‹©æœåŠ¡</h3><div align="center"><img src="https://bugstack.cn/images/article/algorithm/model/model-3-08.png?raw=true" width="950px"></div><ul><li>ï¿¥1.90/æ—¶ï¼Œä¸ç¡®å®šä¸€ç›´æœ‰ã€‚åŒé…ç½®çš„4.9å…ƒæ¯å°æ—¶ã€‚ä»ä½ è´­ä¹°å¯åŠ¨å¼€å§‹è®¡è´¹ï¼Œå®‰è£…ç¯å¢ƒè¾ƒå¥½æ—¶ï¼Œæ•´ä¸ªè¿‡ç¨‹éœ€è¦å¤§æ¦‚éœ€è¦20å…ƒå·¦å³ï¼Œèƒ½ä½“éªŒåˆ°ã€‚</li></ul><h3 id="_3-é…ç½®ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#_3-é…ç½®ç¯å¢ƒ" aria-hidden="true">#</a> 3. é…ç½®ç¯å¢ƒ</h3><div align="center"><img src="https://bugstack.cn/images/article/algorithm/model/model-3-09.png?raw=true" width="950px"></div><ul><li>åˆ›å»ºæœåŠ¡åï¼Œè¿è¡Œé•œåƒé€‰æ‹©ï¼›pytorch -&gt; cuda æœ€åè¿™ä¸ªç‰ˆæœ¬ã€‚</li><li>é¢„è®­ç»ƒæ¨¡å‹é€‰æ‹© chatglm-6b è¿™æ ·ä½ ä¹Ÿä¸éœ€è¦è‡ªå·±ä¸‹è½½æ¨¡å‹æ•°æ®äº†ã€‚</li></ul><h3 id="_4-æ§åˆ¶å¹³å°" tabindex="-1"><a class="header-anchor" href="#_4-æ§åˆ¶å¹³å°" aria-hidden="true">#</a> 4. æ§åˆ¶å¹³å°</h3><div align="center"><img src="https://bugstack.cn/images/article/algorithm/model/model-3-10.png?raw=true" width="950px"></div><div align="center"><img src="https://bugstack.cn/images/article/algorithm/model/model-3-11.png?raw=true" width="950px"></div><ul><li>ä»å·¥ä½œç©ºé—´è¿›å…¥åˆ°æ§åˆ¶å°ï¼Œä½ å¯ä»¥åˆ†åˆ«<code>ä» data çœ‹åˆ° ChatGLM-6B çš„ä»£ç </code> åœ¨<code>imported_models çœ‹åˆ°é¢„è®­ç»ƒæ¨¡å‹ chatglm-6b</code></li></ul><div align="center"><img src="https://bugstack.cn/images/article/algorithm/model/model-3-12.png?raw=true" width="950px"></div><ul><li>æ£€æŸ¥å·¥ç¨‹ web_demo2.py ä¸­åŠ è½½æ¨¡å‹çš„è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œå¦‚æœä¸å¯¹éœ€è¦ä¿®æ”¹ã€‚</li><li>å¦‚æœä½ çš„æœåŠ¡ä¸­ï¼Œæ²¡æœ‰é»˜è®¤ä¸‹è½½æˆ–è€…éœ€è¦é‡æ–°ä¸‹è½½ã€‚é‚£ä¹ˆä½ å¯ä»¥å®‰è£… git æŒ‡ä»¤ï¼Œä¸‹è½½ä»£ç åˆ° data ä»“åº“å³å¯ã€‚</li></ul><h3 id="_5-åˆå§‹é…ç½®" tabindex="-1"><a class="header-anchor" href="#_5-åˆå§‹é…ç½®" aria-hidden="true">#</a> 5. åˆå§‹é…ç½®</h3><div align="center"><img src="https://bugstack.cn/images/article/algorithm/model/model-3-13.png?raw=true" width="950px"></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>user<span class="token annotation punctuation">@lsp</span><span class="token operator">-</span>ws<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>data$ sudo su
root<span class="token annotation punctuation">@lsp</span><span class="token operator">-</span>ws<span class="token operator">:</span><span class="token operator">/</span>home<span class="token operator">/</span>user<span class="token operator">/</span>data# cd <span class="token class-name">ChatGLM</span><span class="token operator">-</span><span class="token number">6</span>B<span class="token operator">/</span>
root<span class="token annotation punctuation">@lsp</span><span class="token operator">-</span>ws<span class="token operator">:</span><span class="token operator">/</span>home<span class="token operator">/</span>user<span class="token operator">/</span>data<span class="token operator">/</span><span class="token class-name">ChatGLM</span><span class="token operator">-</span><span class="token number">6</span>B# pip install <span class="token operator">-</span>r requirements<span class="token punctuation">.</span>txt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™ä¸ªå®‰è£…é€Ÿåº¦ä¼šéå¸¸å¿«ï¼Œå‡ ä¹ä¸éœ€è¦å¤ªä¹…çš„ç­‰å¾…ã€‚</li></ul><h3 id="_6-å¯åŠ¨æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_6-å¯åŠ¨æœåŠ¡" aria-hidden="true">#</a> 6. å¯åŠ¨æœåŠ¡</h3><div align="center"><img src="https://bugstack.cn/images/article/algorithm/model/model-3-14.png?raw=true" width="950px"></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>python3 <span class="token operator">-</span>m streamlit run <span class="token punctuation">.</span>/web_demo2<span class="token punctuation">.</span>py <span class="token operator">--</span>server<span class="token punctuation">.</span>port <span class="token number">27777</span> <span class="token operator">--</span>server<span class="token punctuation">.</span>address <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>å¦å¤– ChatGLM-6B è¿˜æä¾›äº†å‘½ä»¤è¡Œæµ‹è¯• <code>python cli_demo.py</code> å’Œ API å¯åŠ¨ <code>python api.py</code></li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>curl <span class="token operator">-</span><span class="token class-name">X</span> <span class="token constant">POST</span> <span class="token string">&quot;http://127.0.0.1:8000&quot;</span> \\
     <span class="token operator">-</span><span class="token class-name">H</span> &#39;<span class="token class-name">Content</span><span class="token operator">-</span><span class="token class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json&#39; \\
     <span class="token operator">-</span>d &#39;<span class="token punctuation">{</span><span class="token string">&quot;prompt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ä½ å¥½&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;history&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span>&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-è®¿é—®æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_7-è®¿é—®æœåŠ¡" aria-hidden="true">#</a> 7. è®¿é—®æœåŠ¡</h3><div align="center"><img src="https://bugstack.cn/images/article/algorithm/model/model-3-15.png?raw=true" width="950px"></div><ul><li>å›åˆ°æ§åˆ¶å°å¤åˆ¶è°ƒè¯•åœ°å€ï¼Œå³å¯è®¿é—®ï¼›</li></ul><div align="center"><img src="https://bugstack.cn/images/article/algorithm/model/model-3-16.png?raw=true" width="650px"></div><ul><li>å¦‚æœä½ æŠ¥é”™äº†ï¼Œé‚£ä¹ˆåœ¨æ§åˆ¶å°æ‰§è¡Œå®‰è£…å³å¯ã€‚</li><li><code>control + c</code> åœæ­¢æœåŠ¡ï¼Œæ‰§è¡Œ <code>pip install icetk</code></li><li>å†æ¬¡æ‰§è¡Œæ­¥éª¤6å¯åŠ¨æœåŠ¡ï¼Œç°åœ¨åœ¨è®¿é—®ã€‚<code>python3 -m streamlit run ./web_demo2.py --server.port 27777 --server.address 0.0.0.0</code></li></ul><div align="center"><img src="https://bugstack.cn/images/article/algorithm/model/model-3-17.png?raw=true" width="650px"></div><ul><li>åˆæ¬¡è¿è¡Œï¼Œå®ƒä¼šåŠ è½½æ¨¡å‹ã€‚åœ¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°åŠ è½½çš„æ¨¡å‹è¿›åº¦ï¼Œå¤§æ¦‚å‡ åˆ†é’Ÿå°±åŠ è½½å¥½äº†ã€‚</li></ul><div align="center"><img src="https://bugstack.cn/images/article/algorithm/model/model-3-18.png?raw=true" width="650px"></div><ul><li>çœ‹åˆ°æ§åˆ¶å°çš„æ¨¡å‹åŠ è½½å®Œæ¯•åï¼Œå†æ¬¡ç‚¹å‡»ä¸‹<strong>å‘é€</strong> å¥½äº†ï¼Œåˆ°ä½ ä¹Ÿå¯ä»¥æµ‹è¯•ä¸‹å‘é€å…¶ä»–çš„å†…å®¹ï¼Œè¿›è¡Œä½“éªŒã€‚</li></ul><h2 id="äº”ã€ç¯å¢ƒé…ç½®-docker-ç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#äº”ã€ç¯å¢ƒé…ç½®-docker-ç‰ˆæœ¬" aria-hidden="true">#</a> äº”ã€ç¯å¢ƒé…ç½® - Docker ç‰ˆæœ¬</h2>`,31),J={href:"https://www.luckzym.com/posts/e95da08c/",target:"_blank",rel:"noopener noreferrer"},Q=t(`<h3 id="_1-ç¼–å†™dockerfileæ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_1-ç¼–å†™dockerfileæ–‡ä»¶" aria-hidden="true">#</a> 1. ç¼–å†™<code>DockerFile</code>æ–‡ä»¶</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># è®¾ç½®åŸºç¡€æ˜ åƒ
FROM nvidia/cuda:11.8.0-cudnn8-devel-ubuntu22.04

# å®šä¹‰æ„å»ºå‚æ•°
# ä¾‹å¦‚ARG USER=testä¸ºUSERå˜é‡è®¾ç½®é»˜è®¤å€¼&quot;test&quot;ã€‚
ARG USER=test
ARG PASSWORD=\${USER}123$

# å¤„ç†è®¨åŒçš„ Python 3 ç¼–ç é—®é¢˜
ENV LANG C.UTF-8
ENV DEBIAN_FRONTEND noninteractive
ENV MPLLOCALFREETYPE 1

# æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨å¹¶å®‰è£…è½¯ä»¶å±æ€§é€šç”¨åŒ…
RUN apt-get update &amp;&amp; apt-get install -y software-properties-common

# æ·»åŠ Python ppaï¼Œä»¥ä¾¿åç»­å®‰è£…Pythonç‰ˆæœ¬
RUN add-apt-repository ppa:deadsnakes/ppa

# å®‰è£…Ubuntuçš„å¸¸ç”¨è½¯ä»¶åŒ…ï¼ŒåŒ…æ‹¬wgetã€vimã€curlã€zipã€unzipç­‰
RUN apt-get update &amp;&amp; apt-get install -y \\
    build-essential \\
    git \\
    wget \\
    vim \\
    curl \\
    zip \\
    zlib1g-dev \\
    unzip \\
    pkg-config \\
    libgl-dev \\
    libblas-dev \\
    liblapack-dev \\
    python3-tk \\
    python3-wheel \\
    graphviz \\
    libhdf5-dev \\
    python3.9 \\
    python3.9-dev \\
    python3.9-distutils \\
    openssh-server \\
    swig \\
    apt-transport-https \\
    lsb-release \\
    libpng-dev \\
    ca-certificates &amp;&amp;\\
    apt-get clean &amp;&amp;\\
    ln -s /usr/bin/python3.9 /usr/local/bin/python &amp;&amp;\\
    ln -s /usr/bin/python3.9 /usr/local/bin/python3 &amp;&amp;\\
    curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py &amp;&amp;\\
    python3 get-pip.py &amp;&amp;\\
    rm get-pip.py &amp;&amp;\\
    # æ¸…ç†APTç¼“å­˜ä»¥å‡å°Dockeré•œåƒå¤§å°
    rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*

# è®¾ç½®æ—¶åŒº
ENV TZ=Asia/Seoul
RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime &amp;&amp; echo $TZ &gt; /etc/timezone

# ä¸ºåº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªç”¨æˆ·
RUN useradd --create-home --shell /bin/bash --groups sudo \${USER}
RUN echo \${USER}:\${PASSWORD} | chpasswd
USER \${USER}
ENV HOME /home/\${USER}
WORKDIR $HOME

# å®‰è£…ä¸€äº›Pythonåº“ï¼Œä¾‹å¦‚numpyã€matplotlibã€scipyç­‰
RUN python3 -m pip --no-cache-dir install \\
    blackcellmagic\\
    pytest \\
    pytest-cov \\
    numpy \\
    matplotlib \\
    scipy \\
    pandas \\
    jupyter \\
    scikit-learn \\
    scikit-image \\
    seaborn \\
    graphviz \\
    gpustat \\
    h5py \\
    gitpython \\
    ptvsd \\
    Pillow==6.1.0 \\
    opencv-python

# å®‰è£…PyTorchå’ŒDataJointç­‰å…¶ä»–åº“
# å…¶ä¸­torch==1.13.1è¡¨ç¤ºå®‰è£…ç‰ˆæœ¬ä¸º1.13.1çš„PyTorch
RUN python3 -m pip --no-cache-dir install \\
    torch==1.13.1 \\
    torchvision==0.14.1 \\
    torchaudio==0.13.1 \\
    &#39;jupyterlab&gt;=2&#39;

RUN python3 -m pip --no-cache-dir install datajoint==0.12.9

# è®¾ç½®ç¯å¢ƒå˜é‡LD_LIBRARY_PATHï¼Œä»¥ä¾¿æ”¯æŒæ€§èƒ½åˆ†æåº“
ENV LD_LIBRARY_PATH /usr/local/cuda/extras/CUPTI/lib64:\${LD_LIBRARY_PATH}

# å¯åŠ¨sshæœåŠ¡å™¨ï¼Œæ‰“å¼€22å·ç«¯å£
USER root

RUN mkdir /var/run/sshd
EXPOSE 22
CMD [&quot;/usr/sbin/sshd&quot;, &quot;-D&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-ç¼–å†™docker-composeæ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_2-ç¼–å†™docker-composeæ–‡ä»¶" aria-hidden="true">#</a> 2. ç¼–å†™<code>Docker-Compose</code>æ–‡ä»¶</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>version: &quot;3.9&quot;
services:
  nvidia:
    build: .        # å‘Šè¯‰Docker Composeåœ¨å½“å‰ç›®å½•ä¸­æŸ¥æ‰¾Dockerfileå¹¶æ„å»ºé•œåƒ
    runtime: nvidia # å¯ç”¨nvidia-container-runtimeä½œä¸ºDockerå®¹å™¨çš„å‚æ•°ï¼Œä»è€Œå®ç°å¯¹GPUçš„æ”¯æŒ
    environment:
      - NVIDIA_VISIBLE_DEVICES=all  # è®¾ç½®æ‰€æœ‰å¯ç”¨çš„GPUè®¾å¤‡
    ports:
      - &quot;22:22&quot;         # port for ssh
      - &quot;80:80&quot;         # port for Web
      - &quot;8000:8000&quot;     # port for API
    tty: true           # åˆ›å»ºä¸€ä¸ªä¼ªç»ˆç«¯ä»¥ä¿æŒå®¹å™¨è¿è¡ŒçŠ¶æ€
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-æ­å»ºæ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#_3-æ­å»ºæ­¥éª¤" aria-hidden="true">#</a> 3. æ­å»ºæ­¥éª¤</h3><h4 id="_3-1-å‡†å¤‡dockerå®¹å™¨-aiæ¨¡å‹æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_3-1-å‡†å¤‡dockerå®¹å™¨-aiæ¨¡å‹æ–‡ä»¶" aria-hidden="true">#</a> 3.1 å‡†å¤‡Dockerå®¹å™¨&amp;AIæ¨¡å‹æ–‡ä»¶</h4><ul><li>ä¿®æ”¹<code>Docker Compose</code>æ–‡ä»¶ï¼Œæ·»åŠ <code>volumes</code>è·¯å¾„</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>version: &quot;3.9&quot;
services:
  nvidia:
    build: .        # å‘Šè¯‰Docker Composeåœ¨å½“å‰ç›®å½•ä¸­æŸ¥æ‰¾Dockerfileå¹¶æ„å»ºé•œåƒ
    runtime: nvidia # å¯ç”¨nvidia-container-runtimeä½œä¸ºDockerå®¹å™¨çš„å‚æ•°ï¼Œä»è€Œå®ç°å¯¹GPUçš„æ”¯æŒ
    environment:
      - NVIDIA_VISIBLE_DEVICES=all  # è®¾ç½®æ‰€æœ‰å¯ç”¨çš„GPUè®¾å¤‡
    ports:
      - &quot;22:22&quot;         # port for ssh
      - &quot;80:80&quot;         # port for Web
      - &quot;8000:8000&quot;     # port for API
    tty: true           # åˆ›å»ºä¸€ä¸ªä¼ªç»ˆç«¯ä»¥ä¿æŒå®¹å™¨è¿è¡ŒçŠ¶æ€
    # æ·»åŠ ä¸€ä¸ªå’Œå®¿ä¸»æœºè¿æ¥çš„è·¯å¾„
    volumes:
      - ./:/data
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä¸‹è½½å¯¹åº”çš„AIæ¨¡å—æ–‡ä»¶</li></ul><p>ä»<code>Hugging Face Hub</code>ä¸‹è½½æ‰€éœ€è¦çš„æ¨¡å‹ï¼Œç”±äºæˆ‘ä½¿ç”¨çš„æ˜¾å¡åªæœ‰<code>8G</code>æ˜¾å­˜ï¼Œæ‰€ä»¥ç›´æ¥ä¸‹è½½äº†<code>INT4</code>é‡åŒ–åçš„æ¨¡å‹ã€‚</p>`,10),nn=n("p",null,[n("strong",null,"AIæ¨¡å‹ä¸‹è½½åœ°å€ï¼š")],-1),sn={href:"https://huggingface.co/THUDM/chatglm-6b",target:"_blank",rel:"noopener noreferrer"},an={href:"https://huggingface.co/THUDM/chatglm-6b-int4",target:"_blank",rel:"noopener noreferrer"},en={href:"https://huggingface.co/THUDM/chatglm-6b-int8",target:"_blank",rel:"noopener noreferrer"},tn=n("code",null,"Git",-1),on=n("code",null,"Git",-1),pn={href:"https://docs.github.com/zh/repositories/working-with-files/managing-large-files/installing-git-large-file-storage",target:"_blank",rel:"noopener noreferrer"},ln=t(`<p>ä»“åº“å­˜å‚¨çš„åœ°æ–¹å°±æ”¾åœ¨æˆ‘å½“å‰åˆ›å»º<code>Docker Compose</code>æ–‡ä»¶ç›®å½•ä¸‹ï¼Œè¿™æ ·åˆšå¥½å¯ä»¥åˆ©ç”¨<code>volumes</code>å°†å…¶æ˜ å°„è¿›å®¹å™¨ä¸­ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># Make sure you have git-lfs installed (https://git-lfs.com)
git lfs install
git clone https://huggingface.co/THUDM/chatglm-6b-int4

# if you want to clone without large files â€“ just their pointers
# prepend your git clone with the following env var:
GIT_LFS_SKIP_SMUDGE=1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-å‡†å¤‡chatglm-6bå¹¶è¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#_3-2-å‡†å¤‡chatglm-6bå¹¶è¿è¡Œ" aria-hidden="true">#</a> 3.2 å‡†å¤‡ChatGLM-6Bå¹¶è¿è¡Œ</h4><ul><li>æ‹‰å–å®˜æ–¹<code>ChatGLM-6B</code>é¡¹ç›®ä»“åº“æ–‡ä»¶</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>git clone https://github.com/THUDM/ChatGLM-6B.git
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä»“åº“å­˜å‚¨çš„åœ°æ–¹ä¾æ—§æ˜¯å½“å‰åˆ›å»º<code>Docker Compose</code>æ–‡ä»¶ç›®å½•ã€‚å¦‚æœå¤§å®¶ä¸å¸Œæœ›å­˜æ”¾åœ¨è¯¥ç›®å½•ä¸‹å¯ä»¥è‡ªè¡Œä¿®æ”¹ä¸€ä¸‹<code>Docker Compose</code>ä¸­çš„<code>volumes</code>æ˜ å°„è·¯å¾„ã€‚</p><ul><li>æ‹‰èµ·è¯¥æ·±åº¦å­¦ä¹ <code>Docker</code>å®¹å™¨</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>docker-compose up --build -d
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>è¿›å…¥å®¹å™¨ä¸­</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># æŸ¥çœ‹åˆšåˆšå¯åŠ¨çš„æ·±åº¦å­¦ä¹ å®¹å™¨çš„IDå·
docker ps

# è¿›å…¥å®¹å™¨å†…éƒ¨
docker exec -it xxxxxxx /bin/bash # xxxxxxx æ˜¯PSåå®¹å™¨çš„CONTAINER IDå·
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å®‰è£…é¡¹ç›®ä¾èµ–</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># cdåˆ°åˆšåˆšæ‹–æ‹½ä¸‹æ¥çš„é¡¹ç›®ä»“åº“ä¸­

cd /data/ChatGLM-6B

# å®‰è£…é¡¹ç›®ä¾èµ–æ–‡ä»¶

pip install -r requirements.txt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä¿®æ”¹æœ¬åœ°AIæ¨¡å‹è·¯å¾„</li></ul><p>åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨å®˜æ–¹æä¾›çš„å‘½ä»¤è¡ŒDemoç¨‹åºæ¥åšæµ‹è¯•ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># æ‰“å¼€cli_demo.pyæ–‡ä»¶å¯¹å…¶è¿›è¡Œä¿®æ”¹
VI cli_demo.py

# ä¿®æ”¹ç¬¬6ã€ç¬¬7è¡Œçš„ä»£ç ï¼Œå°†åŸæœ‰çš„æ¨¡å‹åç§°ä¿®æ”¹ä¸ºæœ¬åœ°AIæ¨¡å‹è·¯å¾„
# ä¿®æ”¹ç»“æœå¦‚ä¸‹,å…¶ä¸­/data/chatglm-6b-int4ä¸ºä½ æœ¬åœ°AIæ¨¡å‹çš„è·¯å¾„åœ°å€
tokenizer = AutoTokenizer.from_pretrained(&quot;/data/chatglm-6b-int4&quot;, trust_remote_code=True)
model = AutoModel.from_pretrained(&quot;/data/chatglm-6b-int4&quot;, trust_remote_code=True).half().cuda()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿è¡Œä»“åº“ä¸­å‘½ä»¤è¡ŒDemoç¨‹åºï¼š</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>python cli_demo.py
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸å‡ºæ„å¤–ï¼Œåœ¨å‘½ä»¤æ‰§è¡Œå®Œä¹‹åä½ å°†å¯ä»¥ä½“éªŒåˆ°æ¸…åå¼€æºçš„ChatGLM-6Bè‡ªç„¶è¯­è¨€æ¨¡å‹äº†ã€‚</p>`,18);function rn(cn,dn){const a=p("ExternalLinkIcon");return l(),i("div",null,[c,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),d,s("åšå®¢ï¼š"),n("a",u,[s("https://bugstack.cn"),e(a)])]),m,n("p",null,[n("a",v,[s("ChatGLM-6B"),e(a)]),s(" å¼€æºåŒè¯­å¯¹è¯è¯­è¨€æ¨¡å‹ï¼Œå¤ªç‰›çš®äº†ï¼æˆ‘è¦èƒ½åšä¸€ä¸ªè¿™ä¸ªæ°´å¹³çš„ä¸œè¥¿ï¼Œæˆ‘å°±AIåˆ›ä¸šï¼Œèèµ„ã€èµšé’±ã€å‘è´¢ï¼Œèººå¹³å»ï¼å“ˆå“ˆå“ˆï¼â€”â€” çœŸå¥½ï¼Œçœ‹åˆ°è¿™æ ·ä¸€ä¸ªä¸œè¥¿ï¼Œæ„Ÿè§‰çœ‹åˆ°äº†å›½å†… AI çš„å¸Œæœ›ï¼æ„Ÿè°¢æ¸…å ChatGLM å›¢é˜Ÿã€‚")]),b,n("ul",null,[n("li",null,[s("æºç ï¼š"),n("a",k,[s("https://github.com/THUDM/ChatGLM-6B"),e(a)]),s(" - è¿™é‡Œæœ‰æœ€æ–°æ›´æ–°çš„å†…å®¹å’Œéƒ¨ç½²è¯´æ˜")]),n("li",null,[s("ç¤¾åŒºï¼š"),n("a",h,[s("https://chatglm.cn/blog"),e(a)]),s(" - è¿™é‡Œæœ‰æ›´å…¨é¢çš„ä»‹ç»ä¿¡æ¯")]),g]),_,n("p",null,[f,s("ï¼š"),n("a",y,[s("https://github.com/THUDM/ChatGLM-6B"),e(a)]),s(" - æ— è®ºä½ ä½¿ç”¨å“ªç§éƒ¨ç½²æ–¹å¼ï¼Œéƒ½éœ€è¦æŠŠä»£ç ä¸‹è½½åˆ°å¯¹åº”çš„æœåŠ¡ä¸Šã€‚")]),x,n("p",null,[w,s("ï¼š"),n("a",M,[s("https://huggingface.co/"),e(a)]),s(" - æä¾›æ¨¡å‹ä¸‹è½½ï¼ŒæŒ‰ç…§ä½ çš„éœ€è¦ä¸‹è½½å¯¹åº”çš„æµ‹è¯•æ¨¡å‹åˆ°æœåŠ¡å™¨ä¸Šï¼›")]),n("ul",null,[n("li",null,[s("chatglm-6bï¼š"),n("a",D,[s("https://huggingface.co/THUDM/chatglm-6b/tree/main"),e(a)])]),n("li",null,[s("chatglm-6b-int4ï¼š"),n("a",T,[s("https://huggingface.co/THUDM/chatglm-6b-int4/tree/main"),e(a)])]),n("li",null,[s("chatglm-6b-int8ï¼š"),n("a",G,[s("https://huggingface.co/THUDM/chatglm-6b-int8/tree/main"),e(a)])]),n("li",null,[s("visualglm-6bï¼š"),n("a",U,[s("https://huggingface.co/THUDM/visualglm-6b/tree/main"),e(a)]),s(" - ç”¨äºå›¾å½¢è¯†åˆ«çš„æ¨¡å‹ï¼Œåœ¨é•œåƒä¸­è¿˜æ²¡æœ‰ã€‚")])]),n("p",null,[s("é•œåƒï¼š"),n("a",L,[s("https://cloud.tsinghua.edu.cn/d/674208019e314311ab5c/?p=%2F&mode=list"),e(a)]),s(" - é•œåƒçš„ä¸‹è½½é€Ÿåº¦æ¯”è¾ƒå¿«ã€‚"),B,s("ï¼šé•œåƒä¸­æ²¡æœ‰åŸºç¡€çš„å†…å®¹ï¼Œéœ€è¦ä»å®˜ç½‘ä¸‹è½½ã€‚")]),n("ul",null,[n("li",null,[s("chatglm-6bï¼š"),n("a",C,[s("https://cloud.tsinghua.edu.cn/d/674208019e314311ab5c/?p=%2Fchatglm-6b&mode=list"),e(a)])]),n("li",null,[s("chatglm-6b-int4ï¼š"),n("a",I,[s("https://cloud.tsinghua.edu.cn/d/674208019e314311ab5c/?p=%2Fchatglm-6b-int4&mode=list"),e(a)])]),n("li",null,[s("chatglm-6b-int8ï¼š"),n("a",q,[s("https://cloud.tsinghua.edu.cn/d/674208019e314311ab5c/?p=%2Fchatglm-6b-int8&mode=list"),e(a)])])]),P,A,n("ul",null,[n("li",null,[n("a",R,[s("macOS 12.3 æˆ–æ›´é«˜ç‰ˆæœ¬"),e(a)]),s(" - "),n("a",H,[s("https://developer.apple.com/metal/pytorch"),e(a)])]),E]),N,n("p",null,[s("åªè¦ä½ èƒ½æŒ‰ç…§é¡ºåºï¼Œæ­£ç¡®çš„æ‰§è¡Œè¿™äº›æ­¥éª¤ï¼Œå°±å¯ä»¥è¿è¡Œèµ· ChatGLM-6B æ¨¡å‹ï¼Œæ¥ä¸‹æ¥å°±è·Ÿç€å°å‚…å“¥çš„æ­¥éª¤æ‰§è¡Œå§ã€‚æ³¨æ„å¦‚æœä½ éœ€è¦ç»˜å›¾èƒ½åŠ›ï¼Œå¯ä»¥åœ¨æœ¬æ–‡å­¦ä¹ åã€‚æŒ‰ç…§å®˜ç½‘ä»‹ç»ï¼Œæ›¿æ¢ä¸‹æ¨¡å‹é‡æ–°å¯åŠ¨å³å¯ï¼›"),n("a",j,[s("https://github.com/THUDM/ChatGLM-6B"),e(a)]),s(" - "),S,s(),n("a",z,[s("VisualGLM-6B"),e(a)]),s(),V]),F,n("p",null,[s("å¯ä»¥ä»å®˜ç½‘ï¼š"),n("a",$,[s("https://huggingface.co/THUDM/chatglm-6b/tree/main"),e(a)]),s(" æˆ–è€…æ¸…åçš„é•œåƒä»“åº“ä¸‹è½½ "),n("a",O,[s("https://cloud.tsinghua.edu.cn/d/fb9f16d6dc8f482596c2/"),e(a)]),s(" - å¦‚æœä½ éœ€è¦å…¶ä»–æ¨¡å‹ï¼Œå¯ä»¥åœ¨"),Y,s("ä¸­æ‰¾åˆ°ã€‚")]),W,n("p",null,[s("åœ°å€ï¼š"),n("a",K,[s("https://www.lanrui-ai.com/register?invitation_code=3931177594"),e(a)])]),n("p",null,[s("åå°ï¼š"),n("a",Z,[s("https://www.lanrui-ai.com/console/workspace"),e(a)])]),X,n("p",null,[s("åœ¨å®˜ç½‘çš„åœ°å€ä¸­è¿˜çœ‹åˆ°äº†ä¸€ä¸ª Docker çš„é…ç½®æ–¹å¼ï¼Œæˆ‘æŠŠå®ƒå¼•å…¥è¿‡æ¥ï¼Œæ–¹ä¾¿æœ‰éœ€è¦çš„ä¼™ä¼´è¿›è¡Œæ“ä½œã€‚åŸæ–‡åœ°å€ï¼š"),n("a",J,[s("https://www.luckzym.com/posts/e95da08c/"),e(a)])]),Q,n("blockquote",null,[nn,n("ul",null,[n("li",null,[n("a",sn,[s("THUDM/chatglm-6b"),e(a)])]),n("li",null,[n("a",an,[s("THUDM/chatglm-6b-int4"),e(a)])]),n("li",null,[n("a",en,[s("THUDM/chatglm-6b-int8"),e(a)])])])]),n("p",null,[s("è¿™é‡Œæ¨èä½¿ç”¨"),tn,s("å·¥å…·è¿›è¡Œæ‹–æ‹½å¯¹åº”çš„ä»“åº“ï¼Œåœ¨æ‹–æ‹½å‰è®°å¾—ç»™"),on,s("å·¥å…·å®‰è£…ä¸Š"),n("a",pn,[s("Git LFS"),e(a)]),s("ã€‚")]),ln])}const mn=o(r,[["render",rn],["__file","2023-05-21-chatglm-6b.html.vue"]]);export{mn as default};
