import{_ as p,r as t,o as e,c as o,a as s,b as n,d as c,e as l}from"./app-3RcBQnkC.js";const i={},r=s("h1",{id:"æºç åˆ†æ-å’‹å˜-ä½ çš„ideaè¿‡æœŸäº†å§-åŠ ä¸ªjaråŒ…å°±ç ´è§£äº†-ä¸ºä»€ä¹ˆ",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#æºç åˆ†æ-å’‹å˜-ä½ çš„ideaè¿‡æœŸäº†å§-åŠ ä¸ªjaråŒ…å°±ç ´è§£äº†-ä¸ºä»€ä¹ˆ","aria-hidden":"true"},"#"),n(" æºç åˆ†æ | å’‹å˜ï¼Ÿä½ çš„IDEAè¿‡æœŸäº†å§ï¼åŠ ä¸ªJaråŒ…å°±ç ´è§£äº†ï¼Œä¸ºä»€ä¹ˆï¼Ÿ")],-1),u=s("br",null,null,-1),k={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},d=l(`<blockquote><p>æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„</p></blockquote><h2 id="ä¸€ã€å‰è¨€ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å‰è¨€ä»‹ç»" aria-hidden="true">#</a> ä¸€ã€å‰è¨€ä»‹ç»</h2><p>2020å¹´äº†ï¼Œå¯¹äºä¸€ä¸ªç¨‹åºçŒ¿æ¥è¯´ï¼›</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">2020</span> <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">+</span> <span class="token number">996</span> <span class="token operator">|</span> <span class="token number">404</span> <span class="token operator">+</span> <span class="token number">404</span> <span class="token operator">+</span> <span class="token number">404</span> <span class="token operator">+</span> <span class="token number">404</span> <span class="token operator">+</span> <span class="token number">404</span>
<span class="token number">2021</span> <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">+</span> <span class="token number">997</span>
<span class="token number">2022</span> <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">+</span> <span class="token number">9106</span>
<span class="token number">2023</span> <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">+</span> <span class="token number">9107</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token number">20</span>xx <span class="token operator">=</span> ä»ä»Šå¹´å¼€å§‹å¯æ€•
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ä½ è¿‡äº†å…ƒæ—¦ï¼Œçˆ½äº†å‘¨æœ«ï¼Œæ¸…æ—©ä¸Šç­ï¼Œæ‹¿èµ·æ¯å­ï¼ŒåŠ ç‚¹æ–°(è–ª)æ°´ï¼Œæ‰“å¼€ç”µè„‘ï¼Œæ”¶èµ·çƒ¦æ¼ï¼Œç¿˜èµ·å°è„šï¼Œä¸Šæ‰¬å˜´è§’ã€‚ä¸€åˆ‡å°±ç»ªéƒ½å‡†å¤‡å¥½ï¼Œå¥½ï¼æ’¸ä»£ç ï¼å•Šï¼ï¼ï¼IDEA duang duang duangï¼Œè¿‡æœŸäº†ï¼</p><p><img src="https://bugstack.cn/assets/images/pic-content/2019/11/itstack-demo-code-idea-03.png" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ &amp; IDEA è¿‡æœŸ"></p><p>è„‘ç“œä¸€çƒ­èµ¶ç´§æœç´¢ç ´è§£ç ï¼›</p><ul><li>ç¬¬ä¸€ä¸ªï¼Œå¤±è´¥</li><li>ç¬¬äºŒä¸ªï¼Œå¤±è´¥</li><li>ç¬¬ä¸‰ä¸ªï¼Œå¤±è´¥</li><li>...</li><li>ç¬¬Nä¸ªï¼Œç»ˆäºï¼Œç ´è§£äº†ä¸‰ä¸ªæœˆï¼Œå…ˆç”¨ç€ï¼Œå…ˆç”¨ç€ï¼Œä»¥åå†è¯´ï¼</li></ul><p>å¯èƒ½å¤§éƒ¨åˆ†ä¼™ä¼´éƒ½åœ¨æœå„ç§ä¸€å †ä¸€å¤§ä¸²çš„ç ´è§£ç å¾€é‡Œé¢ç²˜ï¼Œä¸€ä¸ªä¸ªè¯•åˆ°æœ€åç»ˆäºè¿‡äº†ã€‚ä½†ä¹Ÿæœ‰ä¸€éƒ¨åˆ†è€å¸æœºæ˜¯ä¸æœç ´è§£ç çš„ï¼Œä»–ä»¬ä½¿ç”¨jaråŒ…ç ´è§£ï¼Œæœ‰æ•ˆæœŸ100å¹´ã€‚</p><p>é‚£ä¹ˆï¼æœ¬æ–‡å¹¶ä¸å¼•å¯¼ç”¨æˆ·éƒ½å»ä½¿ç”¨ç ´è§£ç‰ˆï¼ŒåƒIDEAè¿™ä¹ˆä¼˜ç§€ï¼Œå…¶å®ç»™ä½ æä¾›äº†å¾ˆå¤šé€‰æ‹©ï¼›</p><ol><li>å¦‚æœä½ æ˜¯å­¦ç”Ÿå¯ä»¥å…è´¹ä½¿ç”¨</li><li>åˆ†ä¸ºç¤¾åŒºåŠå’Œæ——èˆ°ç‰ˆï¼Œä½ å¯ä»¥ä½¿ç”¨ç¤¾åŒºç‰ˆ Free, open-source</li><li>ä¸€èˆ¬å¤§å…¬å¸éƒ½æ˜¯æœ‰æ­£ç‰ˆæˆæƒçš„ï¼Œå¯ä»¥ä½¿ç”¨</li><li>å¦‚æœä½ æœ‰å¼€æºé¡¹ç›®ä¹Ÿå¯ä»¥ç”³è¯· IDEA æˆæƒ</li></ol><p>æ‰€ä»¥ï¼Œä¸ªäººå¼€å‘ä½¿ç”¨ç¤¾åŒºç‰ˆæœ¬å³å¯ï¼Œä¸è¦ä½¿ç”¨ç ´è§£ã€‚</p><p>å¥½ï¼å›å½’æ­£é¢˜ï¼Œæœ¬æ–‡ä¸»è¦è®²è§£æ˜¯ä¸ºä»€ä¹ˆæ”¾ä¸ªJaråŒ…å°±èƒ½ç ´è§£ï¼Œæœ€ååœ¨ä½¿ç”¨ä¸€ä¸ªjarè¿›è¡Œç ´è§£æ¼”ç¤ºã€‚åœ¨ä»¥ä¸‹ç« èŠ‚ä¸­ä½ å¯ä»¥å­¦ä¹ åˆ°å¦‚ä¸‹çŸ¥è¯†ï¼›</p><ul><li>Java Agent éç¡¬ç¼–ç å¼ä»£ç†ç±»ï¼Œè¿™ä¹Ÿå°±æ˜¯å¸¸è¯´çš„æ¢é’ˆæŠ€æœ¯</li><li>ASM å­—èŠ‚ç ç¼–ç¨‹ç®€å•ä½¿ç”¨</li><li>å·¥ç¨‹æ‰“åŒ…é¢å¤–åŠ è½½å…¶ä»– jar æ–¹æ³•</li><li>æœ€åæ˜¯ä¸€ä¸ªç ´è§£æ¼”ç¤ºï¼Œä»…é€‚åˆä¸ªäººå­¦ä¹ ä½¿ç”¨</li></ul><h2 id="äºŒã€æ¡ˆä¾‹å·¥ç¨‹" tabindex="-1"><a class="header-anchor" href="#äºŒã€æ¡ˆä¾‹å·¥ç¨‹" aria-hidden="true">#</a> äºŒã€æ¡ˆä¾‹å·¥ç¨‹</h2><p>æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹å·¥ç¨‹æ¥æ¨¡æ‹Ÿç ´è§£è¿‡ç¨‹æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Œå…¶å®æ¯ä¸ªç‰ˆæœ¬çš„IDEAéƒ½åœ¨å¢å¼ºé˜²æŠ¤æœºåˆ¶ï¼Œç ´è§£ä¹Ÿè¶Šæ¥è¶Šéš¾ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>code<span class="token operator">-</span>idea
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â”œâ”€â”€ java
    â”‚   â”‚   â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo
    â”‚   â”‚       â””â”€â”€ <span class="token class-name">JetbrainsCrack</span><span class="token punctuation">.</span>java
    â”‚   â””â”€â”€ resources	
    â”‚       â””â”€â”€ <span class="token constant">META</span><span class="token operator">-</span><span class="token constant">INF</span>	
    â”‚           â””â”€â”€ <span class="token constant">MANIFEST</span><span class="token punctuation">.</span><span class="token constant">MF</span>
    â””â”€â”€ test
         â””â”€â”€ java
             â”œâ”€â”€ com<span class="token punctuation">.</span>jetbrains<span class="token punctuation">.</span>ls<span class="token punctuation">.</span>newLicenses
             â”‚   â””â”€â”€ <span class="token class-name">DecodeCertificates</span><span class="token punctuation">.</span>java			 
             â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>test
                 â””â”€â”€ <span class="token class-name">ApiTest</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¸‰ã€ç¯å¢ƒé…ç½®" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€ç¯å¢ƒé…ç½®" aria-hidden="true">#</a> ä¸‰ã€ç¯å¢ƒé…ç½®</h2><ol><li>JDK 1.8</li><li>IDEA 2019.3.1</li><li>asm-all 3.3.1</li></ol><h2 id="å››ã€ä»£ç è®²è¿°" tabindex="-1"><a class="header-anchor" href="#å››ã€ä»£ç è®²è¿°" aria-hidden="true">#</a> å››ã€ä»£ç è®²è¿°</h2><p>åœ¨æ¡ˆä¾‹ä¸­æˆ‘ä»¬æ¨¡æ‹Ÿ IDEA æœ‰ä¸€ä¸ª DecodeCertificates ç±»ï¼Œç”¨äºåšæˆæƒç æ ¡éªŒã€‚ä¹‹åé€šè¿‡æˆ‘ä»¬çš„ java agent ç¼–ç¨‹æ¨¡æ‹Ÿæˆæƒè¢«ç ´è§£ã€‚</p><h3 id="_1-java-agent-ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#_1-java-agent-ä»‹ç»" aria-hidden="true">#</a> 1. Java Agent ä»‹ç»</h3><p>åœ¨ JDK1.5 ä»¥åï¼ŒJVM æä¾›äº† agent æŠ€æœ¯æ„å»ºä¸€ä¸ªç‹¬ç«‹äºåº”ç”¨ç¨‹åºçš„ä»£ç†ç¨‹åºï¼ˆå³ä¸ºAgentï¼‰ï¼Œç”¨æ¥ååŠ©ç›‘æµ‹ã€è¿è¡Œç”šè‡³æ›¿æ¢å…¶ä»–JVMä¸Šçš„ç¨‹åºã€‚ä½¿ç”¨å®ƒå¯ä»¥å®ç°è™šæ‹Ÿæœºçº§åˆ«çš„AOPåŠŸèƒ½ã€‚</p><h3 id="_2-asm-ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#_2-asm-ä»‹ç»" aria-hidden="true">#</a> 2. ASM ä»‹ç»</h3><p>ASM æ˜¯ä¸€ä¸ª JAVA å­—èŠ‚ç åˆ†æã€åˆ›å»ºå’Œä¿®æ”¹çš„å¼€æºåº”ç”¨æ¡†æ¶ã€‚åœ¨ ASM ä¸­æä¾›äº†è¯¸å¤šçš„APIç”¨äºå¯¹ç±»çš„å†…å®¹è¿›è¡Œå­—èŠ‚ç æ“ä½œçš„æ–¹æ³•ã€‚ä¸ä¼ ç»Ÿçš„ BCEL å’Œ SERL ä¸åŒï¼Œåœ¨ ASM ä¸­æä¾›äº†æ›´ä¸ºä¼˜é›…å’Œçµæ´»çš„æ“ä½œå­—èŠ‚ç çš„æ–¹å¼ã€‚ç›®å‰ ASM å·²è¢«å¹¿æ³›çš„å¼€æºåº”ç”¨æ¶æ„æ‰€ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼šSpringã€Hibernate ç­‰ã€‚</p><h3 id="_3-å¼€å§‹æˆ‘ä»¬çš„æ¨¡æ‹Ÿç ´è§£ä¹‹è·¯" tabindex="-1"><a class="header-anchor" href="#_3-å¼€å§‹æˆ‘ä»¬çš„æ¨¡æ‹Ÿç ´è§£ä¹‹è·¯" aria-hidden="true">#</a> 3. å¼€å§‹æˆ‘ä»¬çš„æ¨¡æ‹Ÿç ´è§£ä¹‹è·¯</h3><blockquote><p>JetbrainsCrack.java &amp; Agent æ“ä½œç±»</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * åšå®¢ï¼šhttp://bugstack.cn
 * å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ | æ›´å¤šåŸå¤„ä¼˜è´¨å¹²è´§
 * Agent ç±»ï¼Œæ‰€æœ‰ç¨‹åºå¯åŠ¨åªè¦é…ç½®äº† -javaagent: éƒ½ä¼šèµ°åˆ° premain æ–¹æ³•
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JetbrainsCrack</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">premain</span><span class="token punctuation">(</span><span class="token class-name">String</span> args<span class="token punctuation">,</span> <span class="token class-name">Instrumentation</span> inst<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;**************************************&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;*       å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ       *&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;*     åšå®¢ï¼šhttps://bugstack.cn      *&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;*   ä½ ç”¨å‰‘ï¼Œæˆ‘ç”¨åˆ€ï¼Œå¥½çš„ä»£ç éƒ½å¾ˆçƒ§ï¼ *&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;**************************************&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        inst<span class="token punctuation">.</span><span class="token function">addTransformer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MethodEntryTransformer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MethodEntryTransformer</span> <span class="token keyword">implements</span> <span class="token class-name">ClassFileTransformer</span> <span class="token punctuation">{</span>

        <span class="token keyword">private</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">MethodEntryTransformer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">transform</span><span class="token punctuation">(</span><span class="token class-name">ClassLoader</span> loader<span class="token punctuation">,</span> <span class="token class-name">String</span> className<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> classBeingRedefined<span class="token punctuation">,</span> <span class="token class-name">ProtectionDomain</span> protectionDomain<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> classfileBuffer<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalClassFormatException</span> <span class="token punctuation">{</span>

            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>className<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;com/jetbrains/ls/newLicenses/DecodeCertificates&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">ClassReader</span> cr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassReader</span><span class="token punctuation">(</span>classfileBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">ClassNode</span> cn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    cr<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>cn<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MethodNode</span><span class="token punctuation">&gt;</span></span> methodNodes <span class="token operator">=</span> cn<span class="token punctuation">.</span>methods<span class="token punctuation">;</span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">MethodNode</span> methodNode <span class="token operator">:</span> methodNodes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;decodeLicense&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>methodNode<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token class-name">InsnList</span> insns <span class="token operator">=</span> methodNode<span class="token punctuation">.</span>instructions<span class="token punctuation">;</span>
                            <span class="token comment">//æ¸…é™¤æŒ‡ä»¤</span>
                            insns<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            insns<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VarInsnNode</span><span class="token punctuation">(</span><span class="token class-name">Opcodes</span><span class="token punctuation">.</span><span class="token constant">ALOAD</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å°†æœ¬åœ°æŒ‡å®šçš„å¼•ç”¨å­˜å…¥æ ˆä¸­</span>
                            insns<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InsnNode</span><span class="token punctuation">(</span><span class="token class-name">Opcodes</span><span class="token punctuation">.</span><span class="token constant">ARETURN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// ä»æ–¹æ³•ä¸­è¿”å›å¼•ç”¨ç±»å‹çš„æ•°æ®</span>
                            <span class="token comment">// è®¿é—®ç»“æŸ</span>
                            methodNode<span class="token punctuation">.</span><span class="token function">visitEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token class-name">ClassWriter</span> cw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassWriter</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            cn<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>cw<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> cw<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token comment">// è¾“å‡ºå­—èŠ‚ç åˆ°Class</span>
                            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">outputClazz</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token comment">// è¿”å›æœ€æ–°å­—èŠ‚ç </span>
                            <span class="token keyword">return</span> cw<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> classfileBuffer<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">return</span> classfileBuffer<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">outputClazz</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// è¾“å‡ºç±»å­—èŠ‚ç </span>
            <span class="token class-name">FileOutputStream</span> out <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;ASMDecodeCertificates.class&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;ASMç±»è¾“å‡ºè·¯å¾„ï¼š{}&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> out<span class="token punctuation">)</span> <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨è¿™ä¸ªç±»ä¸­å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª premain æ–¹æ³•ï¼Œè¿™ä¸ªæ˜¯åœ¨è¢« java agent å¤„ç†åçš„ç¨‹åºå…¥å£ï¼Œæ‰€æœ‰ä¿¡æ¯ç±»å’Œæ–¹æ³•éƒ½ä¼šåˆ°è¿™ä¸ªå…¥å£</li><li>ä¹‹åæˆ‘ä»¬ä½¿ç”¨ inst.addTransformer(new MethodEntryTransformer()); æ·»åŠ æˆ‘ä»¬è‡ªå·±çš„å¤„ç†é€»è¾‘ï¼Œè¿™ä¸ªé€»è¾‘ä¹Ÿæ˜¯ç”¨å­—èŠ‚ç ç¼–ç¨‹æŠ€æœ¯ä»£ç†ç±»çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¹³æ—¶å¼€å‘ä¸­é‚£äº›ä¸éœ€ç¡¬ç¼–ç å°±å¯ä»¥ç›‘æ§æ–¹æ³•æ‰§è¡Œæ—¶é•¿çš„é€»è¾‘ä¸€æ ·</li><li>MethodEntryTransformer å®ç°äº† ClassFileTransformer çš„ transform æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯çœŸæ­£æ“ä½œå­—èŠ‚ç çš„è¿‡ç¨‹ã€‚ <ul><li>åœ¨è¿™ä¸ªç±»æ–¹æ³•ä¸­é¦–å…ˆéœ€è¦æ‰¾åˆ°æˆ‘ä»¬çš„æˆæƒç æ ¡éªŒç±» com/jetbrains/ls/newLicenses/DecodeCertificates ï¼Œæ¯ä¸€ä¸ªç‰ˆæœ¬çš„IDEAä¸ä¸€æ ·ï¼ŒåŒæ—¶æˆæƒé€»è¾‘æ ¡éªŒä¹Ÿä¸ä¸€æ ·</li><li>ç´§æ¥ç€åœ¨æ‰¾åˆ°æˆæƒæ ¡éªŒç±»é‡Œé¢çš„æ ¡éªŒæ–¹æ³•ï¼Œif (&quot;decodeLicense&quot;.equals(methodNode.name))</li><li>æ¥ä¸‹æ¥å°±éœ€è¦å¯¹å­—èŠ‚ç è¿›è¡Œå¤„ç†äº†ï¼Œè¿™é‡Œé¢çš„å¤„ç†è¿‡ç¨‹æ¯”è¾ƒç²—æš´ï¼Œç›´æ¥å°†åŸæ¥æ–¹æ³•é‡Œçš„æŒ‡ä»¤å†…å®¹æ¸…ç©ºã€‚ç„¶åä½¿ç”¨ new VarInsnNode(Opcodes.ALOAD, 1) å°†æœ¬åœ°æŒ‡å®šçš„å¼•ç”¨å­˜å…¥æ ˆä¸­</li><li>ä¹‹åå°†æˆ‘ä»¬çš„å…¥å‚å†…å®¹ç›´æ¥è¿”å›ï¼Œnew InsnNode(Opcodes.ARETURN)ï¼Œä»æ–¹æ³•ä¸­è¿”å›å¼•ç”¨ç±»å‹çš„æ•°æ®ã€‚åœ¨ä»¥å¾€æ—§ç‰ˆæœ¬çš„ IDEA ç ´è§£ä¸­æ¯”è¾ƒç®€å•ï¼Œç›´æ¥æŠŠæœ€ç»ˆéœ€è¦çš„ç ´è§£å†…å®¹è¿”å›å³å¯ï¼Œé‡Œé¢æè¿°äº† IDEA å„ä¸ªè½¯ä»¶çš„ä½¿ç”¨æœŸé™</li><li>æœ€ç»ˆå°†æˆ‘ä»¬å¤„ç†åçš„å­—èŠ‚ç è¿”å›ç»™æ–¹æ³•ï¼Œreturn cw.toByteArray();è¿™ä¸ªæ—¶å€™è™½ç„¶ä½ å¤§çˆ·è¿˜æ˜¯ä½ å¤§çˆ·ï¼Œä½†ä½ å¤§å¨˜å·²ç»ä¸æ˜¯ä½ å¤§å¨˜äº†</li></ul></li><li>ä¸ºäº†æµ‹è¯•çš„éªŒè¯æˆ‘ä»¬å°†å˜æ›´åçš„å­—èŠ‚ç ä»£ç (å¤§å¨˜)è¾“å‡ºåˆ°å·¥ç¨‹ç›®å½•ä¸‹ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ª class æ–‡ä»¶ï¼Œä¸‹æ–‡æµ‹è¯•æ—¶å€™éªŒè¯</li></ul><h3 id="_4-decodecertificates-java-æ¨¡æ‹Ÿ-ideaiu-15-0-1-è½¯ä»¶æˆæƒç æ ¡éªŒç±»" tabindex="-1"><a class="header-anchor" href="#_4-decodecertificates-java-æ¨¡æ‹Ÿ-ideaiu-15-0-1-è½¯ä»¶æˆæƒç æ ¡éªŒç±»" aria-hidden="true">#</a> 4. DecodeCertificates.java &amp; æ¨¡æ‹Ÿ ideaIU-15.0.1 è½¯ä»¶æˆæƒç æ ¡éªŒç±»</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DecodeCertificates</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">decodeLicense</span><span class="token punctuation">(</span><span class="token class-name">String</span> usingKey<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ¨¡æ‹Ÿæ ¡éªŒæˆæƒç </span>
        <span class="token keyword">return</span> <span class="token string">&quot;usingKey is errorï¼š&quot;</span><span class="token operator">+</span> usingKey<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™ä¸ªç±»æ¯”è¾ƒç®€å•åªæ˜¯æ¨¡æ‹Ÿæœ‰è¿™ä¹ˆä¸ªæ–¹æ³•ç”¨äºæ ¡éªŒæˆæƒç </li></ul><h3 id="_5-apitest-java-æµ‹è¯•ç±»" tabindex="-1"><a class="header-anchor" href="#_5-apitest-java-æµ‹è¯•ç±»" aria-hidden="true">#</a> 5. ApiTest.java &amp; æµ‹è¯•ç±»</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * åšå®¢ï¼šhttp://bugstack.cn
 * å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ | æ›´å¤šåŸå¤„ä¼˜è´¨å¹²è´§
 * æµ‹è¯•ç±»é…ç½® VM å‚æ•°
 * Idea VM optionsï¼š-javaagent:E:\\itstack\\GIT\\itstack.org\\itstack-demo-code\\itstack-demo-code-idea\\target\\itstack-demo-code-idea-1.0-SNAPSHOT.jar
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApiTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">ApiTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">DecodeCertificates</span> decodeCertificates <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DecodeCertificates</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ¨¡æ‹ŸusingKeyï¼šè®¤è´­æœ‰æ•ˆæœŸè‡³2089å¹´7æœˆ8æ—¥</span>
        <span class="token class-name">String</span> license <span class="token operator">=</span> decodeCertificates<span class="token punctuation">.</span><span class="token function">decodeLicense</span><span class="token punctuation">(</span><span class="token string">&quot;Subscription is active until July 8, 2089&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœï¼š{}&quot;</span><span class="token punctuation">,</span> license<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-manifest-mf-é…ç½®å¼•å¯¼å¯åŠ¨æ—¶åŠ è½½" tabindex="-1"><a class="header-anchor" href="#_6-manifest-mf-é…ç½®å¼•å¯¼å¯åŠ¨æ—¶åŠ è½½" aria-hidden="true">#</a> 6. MANIFEST.MF é…ç½®å¼•å¯¼å¯åŠ¨æ—¶åŠ è½½</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Manifest</span><span class="token operator">-</span><span class="token class-name">Version</span><span class="token operator">:</span> <span class="token number">1.0</span>
<span class="token class-name">Premain</span><span class="token operator">-</span><span class="token class-name">Class</span><span class="token operator">:</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span></span>JetbrainsCrack</span>
<span class="token class-name">Can</span><span class="token operator">-</span><span class="token class-name">Redefine</span><span class="token operator">-</span><span class="token class-name">Classes</span><span class="token operator">:</span> <span class="token boolean">true</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-pom-é…ç½®æ‰“åŒ…æ—¶åŠ å…¥asmåŒ…" tabindex="-1"><a class="header-anchor" href="#_7-pom-é…ç½®æ‰“åŒ…æ—¶åŠ å…¥asmåŒ…" aria-hidden="true">#</a> 7. POM é…ç½®æ‰“åŒ…æ—¶åŠ å…¥ASMåŒ…</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> å°†javassiståŒ…æ‰“åŒ…åˆ°<span class="token class-name">Agent</span>ä¸­ <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>plugin<span class="token punctuation">&gt;</span></span>
    <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>maven<span class="token punctuation">.</span>plugins<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>maven<span class="token operator">-</span>shade<span class="token operator">-</span>plugin<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>executions<span class="token punctuation">&gt;</span></span>
        <span class="token generics"><span class="token punctuation">&lt;</span>execution<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span>phase<span class="token punctuation">&gt;</span></span><span class="token keyword">package</span><span class="token operator">&lt;</span><span class="token operator">/</span>phase<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>goals<span class="token punctuation">&gt;</span></span>
                <span class="token generics"><span class="token punctuation">&lt;</span>goal<span class="token punctuation">&gt;</span></span>shade<span class="token operator">&lt;</span><span class="token operator">/</span>goal<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>goals<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>execution<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>executions<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>configuration<span class="token punctuation">&gt;</span></span>
        <span class="token generics"><span class="token punctuation">&lt;</span>artifactSet<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span>includes<span class="token punctuation">&gt;</span></span>
                <span class="token generics"><span class="token punctuation">&lt;</span>include<span class="token punctuation">&gt;</span></span>asm<span class="token operator">:</span>asm<span class="token operator">-</span>all<span class="token operator">:</span>jar<span class="token operator">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>include<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>includes<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>artifactSet<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>plugin<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="äº”ã€å·¥ç¨‹æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#äº”ã€å·¥ç¨‹æµ‹è¯•" aria-hidden="true">#</a> äº”ã€å·¥ç¨‹æµ‹è¯•</h2><ol><li><p>å…ˆå•çº¯çš„ç›´æ¥è¿è¡ŒApiTest.java ï¼Œæµ‹è¯•ç»“æœå¦‚ä¸‹(æ¨¡æ‹Ÿè¿”å›æˆæƒä¸å¯ç”¨)ï¼›</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">21</span><span class="token operator">:</span><span class="token number">23</span><span class="token operator">:</span><span class="token number">46.101</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼šusingKey is errorï¼š<span class="token class-name">Subscription</span> is active until <span class="token class-name">July</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">2089</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>ç¬¬äºŒæ­¥æµ‹è¯•å‰å…ˆæ‰“åŒ…ä¸‹å·¥ç¨‹ï¼Œè¿™ä¸ªæ—¶å€™ä½ ä¼šçœ‹åˆ°å¦‚ä¸‹ç»“æœï¼›</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span><span class="token constant">INFO</span><span class="token punctuation">]</span> <span class="token operator">--</span><span class="token operator">-</span> maven<span class="token operator">-</span>install<span class="token operator">-</span>plugin<span class="token operator">:</span><span class="token number">2.4</span><span class="token operator">:</span>install <span class="token punctuation">(</span><span class="token keyword">default</span><span class="token operator">-</span>install<span class="token punctuation">)</span> @ itstack<span class="token operator">-</span>demo<span class="token operator">-</span>code<span class="token operator">-</span>idea <span class="token operator">--</span><span class="token operator">-</span>
<span class="token punctuation">[</span><span class="token constant">INFO</span><span class="token punctuation">]</span> <span class="token class-name">Installing</span> <span class="token class-name">E</span><span class="token operator">:</span>\\itstack\\<span class="token constant">GIT</span>\\itstack<span class="token punctuation">.</span>org\\itstack<span class="token operator">-</span>demo<span class="token operator">-</span>code\\itstack<span class="token operator">-</span>demo<span class="token operator">-</span>code<span class="token operator">-</span>idea\\target\\itstack<span class="token operator">-</span>demo<span class="token operator">-</span>code<span class="token operator">-</span>idea<span class="token operator">-</span><span class="token number">1.0</span><span class="token operator">-</span><span class="token constant">SNAPSHOT</span><span class="token punctuation">.</span>jar <span class="token keyword">to</span> <span class="token class-name">D</span><span class="token operator">:</span>\\<span class="token class-name">Program</span> <span class="token class-name">Files</span> <span class="token punctuation">(</span>x86<span class="token punctuation">)</span>\\apache<span class="token operator">-</span>maven<span class="token operator">-</span><span class="token number">3.6</span><span class="token number">.2</span>\\repository\\org\\itstack\\demo\\itstack<span class="token operator">-</span>demo<span class="token operator">-</span>code<span class="token operator">-</span>idea\\<span class="token number">1.0</span><span class="token operator">-</span><span class="token constant">SNAPSHOT</span>\\itstack<span class="token operator">-</span>demo<span class="token operator">-</span>code<span class="token operator">-</span>idea<span class="token operator">-</span><span class="token number">1.0</span><span class="token operator">-</span><span class="token constant">SNAPSHOT</span><span class="token punctuation">.</span>jar
<span class="token punctuation">[</span><span class="token constant">INFO</span><span class="token punctuation">]</span> <span class="token class-name">Installing</span> <span class="token class-name">E</span><span class="token operator">:</span>\\itstack\\<span class="token constant">GIT</span>\\itstack<span class="token punctuation">.</span>org\\itstack<span class="token operator">-</span>demo<span class="token operator">-</span>code\\itstack<span class="token operator">-</span>demo<span class="token operator">-</span>code<span class="token operator">-</span>idea\\dependency<span class="token operator">-</span>reduced<span class="token operator">-</span>pom<span class="token punctuation">.</span>xml <span class="token keyword">to</span> <span class="token class-name">D</span><span class="token operator">:</span>\\<span class="token class-name">Program</span> <span class="token class-name">Files</span> <span class="token punctuation">(</span>x86<span class="token punctuation">)</span>\\apache<span class="token operator">-</span>maven<span class="token operator">-</span><span class="token number">3.6</span><span class="token number">.2</span>\\repository\\org\\itstack\\demo\\itstack<span class="token operator">-</span>demo<span class="token operator">-</span>code<span class="token operator">-</span>idea\\<span class="token number">1.0</span><span class="token operator">-</span><span class="token constant">SNAPSHOT</span>\\itstack<span class="token operator">-</span>demo<span class="token operator">-</span>code<span class="token operator">-</span>idea<span class="token operator">-</span><span class="token number">1.0</span><span class="token operator">-</span><span class="token constant">SNAPSHOT</span><span class="token punctuation">.</span>pom
<span class="token punctuation">[</span><span class="token constant">INFO</span><span class="token punctuation">]</span> <span class="token class-name">Installing</span> <span class="token class-name">E</span><span class="token operator">:</span>\\itstack\\<span class="token constant">GIT</span>\\itstack<span class="token punctuation">.</span>org\\itstack<span class="token operator">-</span>demo<span class="token operator">-</span>code\\itstack<span class="token operator">-</span>demo<span class="token operator">-</span>code<span class="token operator">-</span>idea\\target\\itstack<span class="token operator">-</span>demo<span class="token operator">-</span>code<span class="token operator">-</span>idea<span class="token operator">-</span><span class="token number">1.0</span><span class="token operator">-</span><span class="token constant">SNAPSHOT</span><span class="token operator">-</span>sources<span class="token punctuation">.</span>jar <span class="token keyword">to</span> <span class="token class-name">D</span><span class="token operator">:</span>\\<span class="token class-name">Program</span> <span class="token class-name">Files</span> <span class="token punctuation">(</span>x86<span class="token punctuation">)</span>\\apache<span class="token operator">-</span>maven<span class="token operator">-</span><span class="token number">3.6</span><span class="token number">.2</span>\\repository\\org\\itstack\\demo\\itstack<span class="token operator">-</span>demo<span class="token operator">-</span>code<span class="token operator">-</span>idea\\<span class="token number">1.0</span><span class="token operator">-</span><span class="token constant">SNAPSHOT</span>\\itstack<span class="token operator">-</span>demo<span class="token operator">-</span>code<span class="token operator">-</span>idea<span class="token operator">-</span><span class="token number">1.0</span><span class="token operator">-</span><span class="token constant">SNAPSHOT</span><span class="token operator">-</span>sources<span class="token punctuation">.</span>jar
<span class="token punctuation">[</span><span class="token constant">INFO</span><span class="token punctuation">]</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token punctuation">[</span><span class="token constant">INFO</span><span class="token punctuation">]</span> <span class="token constant">BUILD</span> <span class="token constant">SUCCESS</span>
<span class="token punctuation">[</span><span class="token constant">INFO</span><span class="token punctuation">]</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token punctuation">[</span><span class="token constant">INFO</span><span class="token punctuation">]</span> <span class="token class-name">Total</span> time<span class="token operator">:</span>  <span class="token number">3.080</span> s
<span class="token punctuation">[</span><span class="token constant">INFO</span><span class="token punctuation">]</span> <span class="token class-name">Finished</span> at<span class="token operator">:</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">05</span><span class="token constant">T23</span><span class="token operator">:</span><span class="token number">25</span><span class="token operator">:</span><span class="token number">08</span><span class="token operator">+</span><span class="token number">08</span><span class="token operator">:</span><span class="token number">00</span>
<span class="token punctuation">[</span><span class="token constant">INFO</span><span class="token punctuation">]</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><ul><li>è¿™é‡Œçš„ itstack-demo-code-idea-1.0-SNAPSHOT.jar å°±æ˜¯æˆ‘ä»¬çš„ Agent åŒ…ï¼ŒæŒ‰å®é™…æƒ…å†µå¤åˆ¶è‡ªå·±çš„è·¯å¾„</li></ul><ol start="3"><li><p>é…ç½® VM optionsï¼š-javaagent:E:\\itstack\\GIT\\itstack.org\\itstack-demo-code\\itstack-demo-code-idea\\target\\itstack-demo-code-idea-1.0-SNAPSHOT.jar</p><p><img src="https://bugstack.cn/assets/images/pic-content/2019/11/itstack-demo-code-idea-02.png" alt="å¾®ä¿¡å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ &amp; IDEA VM options"></p></li><li><p>è¿è¡Œ ApiTest æµ‹è¯•ï¼Œæ­£ç¡®ç»“æœå¦‚ä¸‹ï¼›</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">23</span><span class="token operator">:</span><span class="token number">29</span><span class="token operator">:</span><span class="token number">42.803</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼šusingKey is errorï¼š<span class="token class-name">Subscription</span> is active until <span class="token class-name">July</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">2089</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><ul><li>è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ä½ ä½¿ç”¨ jar åŒ…ç ´è§£ IDEA çš„è¿‡ç¨‹ï¼Œäº†è§£è¿™ä¸ªæŠ€æœ¯ç‚¹å¯ä»¥ç”¨åœ¨å¾ˆå¤šä¸éœ€è¦ç¡¬ç¼–ç å°±èƒ½åšåˆ°çš„æœåŠ¡ä¸­ï¼Œæ¯”å¦‚ç›‘æ§ï¼Œè°ƒè¯•ç­‰</li></ul><ol start="5"><li>åˆ«å¿˜äº†æˆ‘ä»¬è¿˜åœ¨ Agent ä¸­è¾“å‡ºäº†æ–°çš„å­—èŠ‚ç ï¼Œçœ‹çœ‹è¿™ä¸ªæ—¶å€™çš„ç±»æ˜¯ä»€ä¹ˆæ ·(ä½ å¤§çˆ·è¿˜æ˜¯ä½ å¤§çˆ·ï¼Œä½†ä½ å¤§å¨˜å¯ä¸æ˜¯ä½ å¤§å¨˜äº†)</li></ol><blockquote><p>è¢«ä»£ç†å‰</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DecodeCertificates</span> <span class="token punctuation">{</span>

	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">decodeLicense</span><span class="token punctuation">(</span><span class="token class-name">String</span> usingKey<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// æ¨¡æ‹Ÿæ ¡éªŒæˆæƒç </span>
		<span class="token keyword">return</span> <span class="token string">&quot;usingKey is errorï¼š&quot;</span><span class="token operator">+</span> usingKey<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>è¢«ä»£ç†å</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jetbrains<span class="token punctuation">.</span>ls<span class="token punctuation">.</span>newLicenses</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DecodeCertificates</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token class-name">DecodeCertificates</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">decodeLicense</span><span class="token punctuation">(</span><span class="token class-name">String</span> usingKey<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> usingKey<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å…­ã€ç»¼ä¸Šæ€»ç»“" tabindex="-1"><a class="header-anchor" href="#å…­ã€ç»¼ä¸Šæ€»ç»“" aria-hidden="true">#</a> å…­ã€ç»¼ä¸Šæ€»ç»“</h2><ul><li>å»ºè®®ä¸ªäººä½¿ç”¨ç¤¾åŒºç‰ˆå³å¯ï¼Œä¸è¦å°è¯•ç ´è§£å°Šé‡IDEAï¼Œæœ¬æ–‡åªä¸ºå­¦ä¹  javaagent æŠ€æœ¯</li><li>ASM è¿™ä¸ªä¸œè¥¿ç‰¹åˆ«å¼ºå¤§ï¼Œå…¶å®å­—èŠ‚ç ç¼–ç¨‹è¿˜æœ‰ javassistï¼Œåœ¨ä¸€èµ· RPC æ¡†æ¶ä¸­æœ‰éå¸¸å¤šçš„ä½¿ç”¨</li><li>å…³äº java agent æˆ‘å·²ç»ä¸“é¢˜æ–¹å¼å†™è¿‡æ¡ˆä¾‹æ–‡ç« ï¼Œå¯ä»¥å‚è€ƒï¼›https://bugstack.cn/itstack-demo-agent/itstack-demo-agent.html</li></ul>`,50);function m(v,b){const a=t("ExternalLinkIcon");return e(),o("div",null,[r,s("p",null,[n("ä½œè€…ï¼šå°å‚…å“¥ "),u,n("åšå®¢ï¼š"),s("a",k,[n("https://bugstack.cn"),c(a)])]),d])}const h=p(i,[["render",m],["__file","2020-01-06-_yuanmafenxi_zhaleï¼ŸnideIDEAguoqiliaobaï¼jiageJarbaojiupojieliaoï¼Œweishimeï¼Ÿ.html.vue"]]);export{h as default};
