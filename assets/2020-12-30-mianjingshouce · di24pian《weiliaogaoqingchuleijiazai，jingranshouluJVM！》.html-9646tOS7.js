import{_ as e,r as o,o as c,c as l,a as n,b as s,d as p,e as t}from"./app-3RcBQnkC.js";const u={},i=n("h1",{id:"é¢ç»æ‰‹å†Œ-Â·-ç¬¬24ç¯‡ã€Šä¸ºäº†ææ¸…æ¥šç±»åŠ è½½-ç«Ÿç„¶æ‰‹æ’¸jvm-ã€‹",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#é¢ç»æ‰‹å†Œ-Â·-ç¬¬24ç¯‡ã€Šä¸ºäº†ææ¸…æ¥šç±»åŠ è½½-ç«Ÿç„¶æ‰‹æ’¸jvm-ã€‹","aria-hidden":"true"},"#"),s(" é¢ç»æ‰‹å†Œ Â· ç¬¬24ç¯‡ã€Šä¸ºäº†ææ¸…æ¥šç±»åŠ è½½ï¼Œç«Ÿç„¶æ‰‹æ’¸JVMï¼ã€‹")],-1),k=n("br",null,null,-1),r={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},m=t(`<blockquote><p>æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„</p></blockquote><h2 id="ä¸€ã€å‰è¨€" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å‰è¨€" aria-hidden="true">#</a> ä¸€ã€å‰è¨€</h2><p><code>å­¦ä¹ ï¼Œä¸çŸ¥é“ä»å“ªä¸‹æ‰‹ï¼Ÿ</code></p><p>å½“å­¦ä¹ ä¸€ä¸ªæ–°çŸ¥è¯†ä¸çŸ¥é“ä»å“ªä¸‹æ‰‹çš„æ—¶å€™ï¼Œæœ€æœ‰æ•ˆçš„åŠæ³•æ˜¯æ¢³ç†è¿™ä¸ªçŸ¥è¯†ç»“æ„çš„è„‰ç»œä¿¡æ¯ï¼Œæ±‡æ€»å‡ºä¸€æ•´å¼ çš„æ€ç»´å¯¼å‡ºã€‚æ¥ä¸‹æ¥å°±æ˜¯æŒ‰ç…§æ€ç»´å¯¼å›¾çš„çŸ¥è¯†ç»“æ„ï¼Œä¸€ä¸ªä¸ªå­¦ä¹ ç›¸åº”çš„çŸ¥è¯†ç‚¹ï¼Œå¹¶æ±‡æ€»è®°å½•ã€‚</p><p>å°±åƒJVMçš„å­¦ä¹ ï¼Œå¯ä»¥è¯´å®ƒåŒ…æ‹¬äº†éå¸¸å¤šçš„å†…å®¹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåºå¤§çš„çŸ¥è¯†ä½“ç³»ã€‚ä¾‹å¦‚ï¼š<code>ç±»åŠ è½½</code>ã€<code>åŠ è½½å™¨</code>ã€<code>ç”Ÿå‘½å‘¨æœŸ</code>ã€<code>æ€§èƒ½ä¼˜åŒ–</code>ã€<code>è°ƒä¼˜å‚æ•°</code>ã€<code>è°ƒä¼˜å·¥å…·</code>ã€<code>ä¼˜åŒ–æ–¹æ¡ˆ</code>ã€<code>å†…å­˜åŒºåŸŸ</code>ã€<code>è™šæ‹Ÿæœºæ ˆ</code>ã€<code>ç›´æ¥å†…å­˜</code>ã€<code>å†…å­˜æº¢å‡º</code>ã€<code>å…ƒç©ºé—´</code>ã€<code>åƒåœ¾å›æ”¶</code>ã€<code>å¯è¾¾æ€§åˆ†æ</code>ã€<code>æ ‡è®°æ¸…é™¤</code>ã€<code>å›æ”¶è¿‡ç¨‹</code>ç­‰ç­‰ã€‚å¦‚æœæ²¡æœ‰æ¢³ç†çš„ä¸€å¤´æ‰è¿›å»ï¼Œä¸œä¸€æ¦”å¤´è¥¿ä¸€æ£’å­ï¼Œå¾ˆå®¹æ˜“é€ æˆå­¦ä¹ ææƒ§æ„Ÿã€‚</p><p>å¦‚å›¾ 24-1 æ˜¯ JVM çŸ¥è¯†æ¡†æ¶æ¢³ç†ï¼Œåç»­æˆ‘ä»¬ä¼šæŒ‰ç…§è¿™ä¸ªç»“æ„é™†ç»­è®²è§£æ¯ä¸€å—å†…å®¹ã€‚</p><p><img src="https://bugstack.cn/assets/images/2020/interview/interview-24-1.png" alt="å›¾ 24-1 JVM çŸ¥è¯†æ¡†æ¶"></p><h2 id="äºŒã€é¢è¯•é¢˜" tabindex="-1"><a class="header-anchor" href="#äºŒã€é¢è¯•é¢˜" aria-hidden="true">#</a> äºŒã€é¢è¯•é¢˜</h2><p><code>è°¢é£æœºï¼Œå°è®°ï¼</code>ï¼Œå¾ˆå¤šçŸ¥è¯†æ ¹æœ¬å°±æ˜¯èƒŒèƒŒèƒŒï¼Œä¹Ÿæ²¡æ³•æ“ä½œï¼Œéš¾å­¦ï¼</p><p><strong>è°¢é£æœº</strong>ï¼šå¤§å“¥ï¼Œä½ é—®æˆ‘ä¸¤ä¸ªJVMé—®é¢˜ï¼Œæˆ‘çœ‹çœ‹æˆ‘è‡ªå·±è¿˜è¡Œä¸ï¼</p><p><strong>é¢è¯•å®˜</strong>ï¼šå•Šï¼Ÿå—¯ï¼å¾€æ­»äº†é—®è¿˜æ˜¯ï¼Ÿ</p><p><strong>è°¢é£æœº</strong>ï¼šå°±å°±å°±ï¼Œéƒ½è¡Œï¼ä½ çœ‹ç€æ¥ï¼</p><p><strong>é¢è¯•å®˜</strong>ï¼šå•Šï¼Œé‚£ JVM åŠ è½½è¿‡ç¨‹éƒ½æ˜¯ä»€ä¹ˆæ­¥éª¤ï¼Ÿ</p><p><strong>è°¢é£æœº</strong>ï¼šå·´æ‹‰å·´æ‹‰ï¼ŒåŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£æã€åˆå§‹åŒ–ã€ä½¿ç”¨ã€å¸è½½ï¼</p><p><strong>é¢è¯•å®˜</strong>ï¼šå—¯ï¼ŒèƒŒçš„æŒºå¥½ï¼<em>æˆ‘æ€€ç–‘ä½ æ²¡æ“ä½œè¿‡ï¼</em> é‚£åŠ è½½çš„æ—¶å€™ï¼ŒJVM è§„èŒƒè§„å®šä»ç¬¬å‡ ä½å¼€å§‹æ˜¯è§£æå¸¸é‡æ± ï¼Œä»¥åŠæ•°æ®ç±»å‹æ˜¯å¦‚ä½•å®šä¹‰çš„ï¼Œu1ã€u2ã€u4ï¼Œæ˜¯æ€ä¹ˆä¸ªç©æ„ï¼Ÿ</p><p><strong>è°¢é£æœº</strong>ï¼šæ¡è‰ï¼ç®—äº†ï¼Œå‘Šè¯‰æˆ‘çœ‹å•¥å§ï¼</p><h2 id="ä¸‰ã€ç±»åŠ è½½è¿‡ç¨‹æè¿°" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€ç±»åŠ è½½è¿‡ç¨‹æè¿°" aria-hidden="true">#</a> ä¸‰ã€ç±»åŠ è½½è¿‡ç¨‹æè¿°</h2><p><img src="https://bugstack.cn/assets/images/2020/interview/interview-24-2.png" alt="å›¾ 24-2 JVM ç±»åŠ è½½è¿‡ç¨‹"></p><p><strong>JVM ç±»åŠ è½½è¿‡ç¨‹åˆ†ä¸º</strong>ï¼Œ<code>åŠ è½½</code>ã€<code>é“¾æ¥</code>ã€<code>åˆå§‹åŒ–</code>ã€<code>ä½¿ç”¨</code>å’Œ<code>å¸è½½</code>è¿™äº”ä¸ªé˜¶æ®µï¼Œåœ¨é“¾æ¥ä¸­åˆåŒ…æ‹¬ï¼š<code>éªŒè¯</code>ã€<code>å‡†å¤‡</code>ã€<code>è§£æ</code>ã€‚</p><ul><li><strong>åŠ è½½</strong>ï¼šJava è™šæ‹Ÿæœºè§„èŒƒå¯¹ class æ–‡ä»¶æ ¼å¼è¿›è¡Œäº†ä¸¥æ ¼çš„è§„åˆ™ï¼Œä½†å¯¹äºä»å“ªé‡ŒåŠ è½½ class æ–‡ä»¶ï¼Œå´éå¸¸è‡ªç”±ã€‚Java è™šæ‹Ÿæœºå®ç°å¯ä»¥ä»æ–‡ä»¶ç³»ç»Ÿè¯»å–ã€ä»JAR(æˆ–ZIP)å‹ç¼©åŒ…ä¸­æå– class æ–‡ä»¶ã€‚é™¤æ­¤ä¹‹å¤–ä¹Ÿå¯ä»¥é€šè¿‡ç½‘ç»œä¸‹è½½ã€æ•°æ®åº“åŠ è½½ï¼Œç”šè‡³æ˜¯è¿è¡Œæ—¶ç›´æ¥ç”Ÿæˆçš„ class æ–‡ä»¶ã€‚</li><li><strong>é“¾æ¥</strong>ï¼šåŒ…æ‹¬äº†ä¸‰ä¸ªé˜¶æ®µï¼› <ul><li>éªŒè¯ï¼Œç¡®ä¿è¢«åŠ è½½ç±»çš„æ­£ç¡®æ€§ï¼ŒéªŒè¯å­—èŠ‚æµæ˜¯å¦ç¬¦åˆ class æ–‡ä»¶è§„èŒƒï¼Œä¾‹é­”æ•° 0xCAFEBABEï¼Œä»¥åŠç‰ˆæœ¬å·ç­‰ã€‚</li><li>å‡†å¤‡ï¼Œä¸ºç±»çš„é™æ€å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®å˜é‡åˆå§‹å€¼ç­‰</li><li>è§£æï¼Œè§£æåŒ…æ‹¬è§£æå‡ºå¸¸é‡æ± æ•°æ®å’Œå±æ€§è¡¨ä¿¡æ¯ï¼Œè¿™é‡Œä¼šåŒ…æ‹¬ ConstantPool ç»“æ„ä½“ä»¥åŠ AttributeInfo æ¥å£ç­‰ã€‚</li></ul></li><li><strong>åˆå§‹åŒ–</strong>ï¼šç±»åŠ è½½å®Œæˆçš„æœ€åä¸€æ­¥å°±æ˜¯åˆå§‹åŒ–ï¼Œç›®çš„å°±æ˜¯ä¸ºæ ‡è®°å¸¸é‡å€¼çš„å­—æ®µèµ‹å€¼ï¼Œä»¥åŠæ‰§è¡Œ <code>&lt;clinit&gt;</code> æ–¹æ³•çš„è¿‡ç¨‹ã€‚<em>JVMè™šæ‹Ÿæœºé€šè¿‡é”çš„æ–¹å¼ç¡®ä¿ clinit ä»…è¢«æ‰§è¡Œä¸€æ¬¡</em></li><li><strong>ä½¿ç”¨</strong>ï¼šç¨‹åºä»£ç æ‰§è¡Œä½¿ç”¨é˜¶æ®µã€‚</li><li><strong>å¸è½½</strong>ï¼šç¨‹åºä»£ç é€€å‡ºã€å¼‚å¸¸ã€ç»“æŸç­‰ã€‚</li></ul><h2 id="å››ã€å†™ä¸ªä»£ç åŠ è½½ä¸‹" tabindex="-1"><a class="header-anchor" href="#å››ã€å†™ä¸ªä»£ç åŠ è½½ä¸‹" aria-hidden="true">#</a> å››ã€å†™ä¸ªä»£ç åŠ è½½ä¸‹</h2><p>JVM ä¹‹æ‰€ä»¥ä¸å¥½æŒæ¡ï¼Œä¸»è¦æ˜¯å› ä¸ºä¸å¥½å®æ“ã€‚è™šæ‹Ÿæœºæ˜¯ C++ å†™çš„ï¼Œå¾ˆå¤š Java ç¨‹åºå‘˜æ ¹æœ¬å°±ä¸ä¼šå»è¯»ï¼Œæˆ–è€…è¯»ä¸æ‡‚ã€‚é‚£ä¹ˆï¼Œä¹Ÿå°±æ²¡åŠæ³•å®å®åœ¨åœ¨çš„ä½“ä¼šåˆ°ï¼Œåˆ°åº•æ˜¯æ€ä¹ˆåŠ è½½çš„ï¼ŒåŠ è½½çš„æ—¶å€™éƒ½å¹²äº†å•¥ã€‚<em>åªæœ‰çœ‹åˆ°ä»£ç ï¼Œæˆ‘æ‰è§‰å¾—è‡ªå·±å­¦ä¼šäº†ï¼</em></p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¿™é‡Œè¦æ‰‹åŠ¨å†™ä¸€ä¸‹ï¼ŒJVM è™šæ‹Ÿæœºçš„éƒ¨åˆ†ä»£ç ï¼Œä¹Ÿå°±æ˜¯ç±»åŠ è½½çš„è¿‡ç¨‹ã€‚é€šè¿‡ Java ä»£ç æ¥å®ç° Java è™šæ‹Ÿæœºçš„éƒ¨åˆ†åŠŸèƒ½ï¼Œè®©å¼€å‘ Java ä»£ç çš„ç¨‹åºå‘˜æ›´å®¹æ˜“ç†è§£è™šæ‹Ÿæœºçš„æ‰§è¡Œè¿‡ç¨‹ã€‚</p><h3 id="_1-æ¡ˆä¾‹å·¥ç¨‹" tabindex="-1"><a class="header-anchor" href="#_1-æ¡ˆä¾‹å·¥ç¨‹" aria-hidden="true">#</a> 1. æ¡ˆä¾‹å·¥ç¨‹</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>interview<span class="token operator">-</span><span class="token number">24</span>
â”œâ”€â”€ pom<span class="token punctuation">.</span>xml
â””â”€â”€ src
    â””â”€â”€ main
    â”‚    â””â”€â”€ java
    â”‚        â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>interview<span class="token punctuation">.</span>jvm
    â”‚             â”œâ”€â”€ classpath
    â”‚             â”‚   â”œâ”€â”€ impl
    â”‚             â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">CompositeEntry</span><span class="token punctuation">.</span>java
    â”‚             â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">DirEntry</span><span class="token punctuation">.</span>java 
    â”‚             â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">WildcardEntry</span><span class="token punctuation">.</span>java 
    â”‚             â”‚   â”‚   â””â”€â”€ <span class="token class-name">ZipEntry</span><span class="token punctuation">.</span>java    
    â”‚             â”‚   â”œâ”€â”€ <span class="token class-name">Classpath</span><span class="token punctuation">.</span>java
    â”‚             â”‚   â””â”€â”€ <span class="token class-name">Entry</span><span class="token punctuation">.</span>java    
    â”‚             â”œâ”€â”€ <span class="token class-name">Cmd</span><span class="token punctuation">.</span>java
    â”‚             â””â”€â”€ <span class="token class-name">Main</span><span class="token punctuation">.</span>java
    â””â”€â”€ test
         â””â”€â”€ java
             â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>interview<span class="token punctuation">.</span>jvm<span class="token punctuation">.</span>test
                 â””â”€â”€ <span class="token class-name">HelloWorld</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä»¥ä¸Š</strong>ï¼Œå·¥ç¨‹ç»“æ„å°±æ˜¯æŒ‰ç…§ JVM è™šæ‹Ÿæœºè§„èŒƒï¼Œä½¿ç”¨ Java ä»£ç å®ç° JVM ä¸­åŠ è½½ class æ–‡ä»¶éƒ¨åˆ†å†…å®¹ã€‚å½“ç„¶è¿™éƒ¨åˆ†è¿˜ä¸åŒ…æ‹¬è§£æï¼Œå› ä¸ºè§£æéƒ¨åˆ†çš„ä»£ç éå¸¸åºå¤§ï¼Œæˆ‘ä»¬å…ˆä»æŠŠ .class æ–‡ä»¶åŠ è½½è¯»å–å¼€å§‹äº†è§£ã€‚</p><h3 id="_2-ä»£ç è®²è§£" tabindex="-1"><a class="header-anchor" href="#_2-ä»£ç è®²è§£" aria-hidden="true">#</a> 2. ä»£ç è®²è§£</h3><h4 id="_2-1-å®šä¹‰ç±»è·¯å¾„æ¥å£-entry" tabindex="-1"><a class="header-anchor" href="#_2-1-å®šä¹‰ç±»è·¯å¾„æ¥å£-entry" aria-hidden="true">#</a> 2.1 å®šä¹‰ç±»è·¯å¾„æ¥å£(Entry)</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Entry</span> <span class="token punctuation">{</span>

    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">readClass</span><span class="token punctuation">(</span><span class="token class-name">String</span> className<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>
    
    <span class="token keyword">static</span> <span class="token class-name">Entry</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//File.pathSeparatorï¼›è·¯å¾„åˆ†éš”ç¬¦(win\\linux)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token class-name">File</span><span class="token punctuation">.</span>pathSeparator<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CompositeEntry</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WildcardEntry</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&quot;.jar&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> path<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&quot;.JAR&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span>
                path<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&quot;.zip&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> path<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&quot;.ZIP&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ZipEntry</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DirEntry</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ¥å£ä¸­æä¾›äº†æ¥å£æ–¹æ³• <code>readClass</code> å’Œé™æ€æ–¹æ³• <code>create(String path)</code>ã€‚</li><li>jdk1.8 æ˜¯å¯ä»¥åœ¨æ¥å£ä¸­ç¼–å†™é™æ€æ–¹æ³•çš„ï¼Œåœ¨è®¾è®¡ä¸Šå±äºè¡¥å…¨äº†æŠ½è±¡ç±»çš„ç±»ä¼¼åŠŸèƒ½ã€‚è¿™ä¸ªé™æ€æ–¹æ³•ä¸»è¦æ˜¯æŒ‰ç…§ä¸åŒçš„è·¯å¾„åœ°å€ç±»å‹ï¼Œæä¾›ä¸åŒçš„è§£ææ–¹æ³•ã€‚åŒ…æ‹¬ï¼šCompositeEntryã€WildcardEntryã€ZipEntryã€DirEntryï¼Œè¿™å››ç§ã€‚<em>æ¥ä¸‹æ¥åˆ†åˆ«çœ‹æ¯ä¸€ç§çš„å…·ä½“å®ç°</em></li></ul><h4 id="_2-2-ç›®å½•å½¢å¼è·¯å¾„-direntry" tabindex="-1"><a class="header-anchor" href="#_2-2-ç›®å½•å½¢å¼è·¯å¾„-direntry" aria-hidden="true">#</a> 2.2 ç›®å½•å½¢å¼è·¯å¾„(DirEntry)</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DirEntry</span> <span class="token keyword">implements</span> <span class="token class-name">Entry</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Path</span> absolutePath<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">DirEntry</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//è·å–ç»å¯¹è·¯å¾„</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>absolutePath <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">readClass</span><span class="token punctuation">(</span><span class="token class-name">String</span> className<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">readAllBytes</span><span class="token punctuation">(</span>absolutePath<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>absolutePath<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç›®å½•å½¢å¼çš„é€šè¿‡è¯»å–ç»å¯¹è·¯å¾„ä¸‹çš„æ–‡ä»¶ï¼Œé€šè¿‡ <code>Files.readAllBytes</code> æ–¹å¼è·å–å­—èŠ‚ç ã€‚</li></ul><h4 id="_2-3-å‹ç¼©åŒ…å½¢å¼è·¯å¾„-zipentry" tabindex="-1"><a class="header-anchor" href="#_2-3-å‹ç¼©åŒ…å½¢å¼è·¯å¾„-zipentry" aria-hidden="true">#</a> 2.3 å‹ç¼©åŒ…å½¢å¼è·¯å¾„(ZipEntry)</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZipEntry</span> <span class="token keyword">implements</span> <span class="token class-name">Entry</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Path</span> absolutePath<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ZipEntry</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//è·å–ç»å¯¹è·¯å¾„</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>absolutePath <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">readClass</span><span class="token punctuation">(</span><span class="token class-name">String</span> className<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">FileSystem</span> zipFs <span class="token operator">=</span> <span class="token class-name">FileSystems</span><span class="token punctuation">.</span><span class="token function">newFileSystem</span><span class="token punctuation">(</span>absolutePath<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">readAllBytes</span><span class="token punctuation">(</span>zipFs<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>absolutePath<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å…¶å®å‹ç¼©åŒ…å½¢å¼ä¸ç›®å½•å½¢å¼ï¼Œåªæœ‰åœ¨æ–‡ä»¶è¯»å–ä¸Šæœ‰åŒ…è£…å·®åˆ«è€Œå·²ã€‚<code>FileSystems.newFileSystem</code></li></ul><h4 id="_2-4-æ··åˆå½¢å¼è·¯å¾„-compositeentry" tabindex="-1"><a class="header-anchor" href="#_2-4-æ··åˆå½¢å¼è·¯å¾„-compositeentry" aria-hidden="true">#</a> 2.4 æ··åˆå½¢å¼è·¯å¾„(CompositeEntry)</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CompositeEntry</span> <span class="token keyword">implements</span> <span class="token class-name">Entry</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Entry</span><span class="token punctuation">&gt;</span></span> entryList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">CompositeEntry</span><span class="token punctuation">(</span><span class="token class-name">String</span> pathList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> paths <span class="token operator">=</span> pathList<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token class-name">File</span><span class="token punctuation">.</span>pathSeparator<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> path <span class="token operator">:</span> paths<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            entryList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Entry</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">readClass</span><span class="token punctuation">(</span><span class="token class-name">String</span> className<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Entry</span> entry <span class="token operator">:</span> entryList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> entry<span class="token punctuation">.</span><span class="token function">readClass</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ignored<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//ignored</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IOException</span><span class="token punctuation">(</span><span class="token string">&quot;class not found &quot;</span> <span class="token operator">+</span> className<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> strs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span>entryList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> entryList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            strs<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> entryList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token class-name">File</span><span class="token punctuation">.</span>pathSeparator<span class="token punctuation">,</span> strs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>File.pathSeparator</code>ï¼Œæ˜¯ä¸€ä¸ªåˆ†éš”ç¬¦å±æ€§ï¼Œwin/linux æœ‰ä¸åŒçš„ç±»å‹ï¼Œæ‰€ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•è¿›è¡Œåˆ†å‰²è·¯å¾„ã€‚</li><li>åˆ†å‰²åçš„è·¯å¾„è£…åˆ° List é›†åˆä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹å±äºæ‹†åˆ†è·¯å¾„ã€‚</li></ul><h4 id="_2-5-é€šé…ç¬¦ç±»å‹è·¯å¾„-wildcardentry" tabindex="-1"><a class="header-anchor" href="#_2-5-é€šé…ç¬¦ç±»å‹è·¯å¾„-wildcardentry" aria-hidden="true">#</a> 2.5 é€šé…ç¬¦ç±»å‹è·¯å¾„(WildcardEntry)</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WildcardEntry</span> <span class="token keyword">extends</span> <span class="token class-name">CompositeEntry</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">WildcardEntry</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token function">toPathList</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">toPathList</span><span class="token punctuation">(</span><span class="token class-name">String</span> wildcardPath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> baseDir <span class="token operator">=</span> wildcardPath<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// remove *</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">walk</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>baseDir<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">Files</span><span class="token operator">::</span><span class="token function">isRegularFile</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Path</span><span class="token operator">::</span><span class="token function">toString</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>p <span class="token operator">-&gt;</span> p<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&quot;.jar&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> p<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&quot;.JAR&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">joining</span><span class="token punctuation">(</span><span class="token class-name">File</span><span class="token punctuation">.</span>pathSeparator<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™ä¸ªç±»å±äºæ··åˆå½¢å¼è·¯å¾„å¤„ç†ç±»çš„å­ç±»ï¼Œå”¯ä¸€æä¾›çš„æ–¹æ³•å°±æ˜¯æŠŠç±»è·¯å¾„è§£æå‡ºæ¥ã€‚</li></ul><h4 id="_2-6-ç±»è·¯å¾„è§£æ-classpath" tabindex="-1"><a class="header-anchor" href="#_2-6-ç±»è·¯å¾„è§£æ-classpath" aria-hidden="true">#</a> 2.6 ç±»è·¯å¾„è§£æ(Classpath)</h4><p><code>å¯åŠ¨ç±»è·¯å¾„</code>ã€<code>æ‰©å±•ç±»è·¯å¾„</code>ã€<code>ç”¨æˆ·ç±»è·¯å¾„</code>ï¼Œç†Ÿæ‚‰å—ï¼Ÿæ˜¯ä¸ç»å¸¸çœ‹åˆ°è¿™å‡ å¥è¯ï¼Œé‚£ä¹ˆæ—¶å€™æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ</p><p>æœ‰äº†ä¸Šé¢æˆ‘ä»¬åšçš„ä¸€äº›åŸºç¡€ç±»çš„å·¥ä½œï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç±»è§£æçš„å®é™…è°ƒç”¨è¿‡ç¨‹ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Classpath</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Entry</span> bootstrapClasspath<span class="token punctuation">;</span>  <span class="token comment">//å¯åŠ¨ç±»è·¯å¾„</span>
    <span class="token keyword">private</span> <span class="token class-name">Entry</span> extensionClasspath<span class="token punctuation">;</span>  <span class="token comment">//æ‰©å±•ç±»è·¯å¾„</span>
    <span class="token keyword">private</span> <span class="token class-name">Entry</span> userClasspath<span class="token punctuation">;</span>       <span class="token comment">//ç”¨æˆ·ç±»è·¯å¾„</span>

    <span class="token keyword">public</span> <span class="token class-name">Classpath</span><span class="token punctuation">(</span><span class="token class-name">String</span> jreOption<span class="token punctuation">,</span> <span class="token class-name">String</span> cpOption<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//å¯åŠ¨ç±»&amp;æ‰©å±•ç±» &quot;C:\\Program Files\\Java\\jdk1.8.0_161\\jre&quot;</span>
        <span class="token function">bootstrapAndExtensionClasspath</span><span class="token punctuation">(</span>jreOption<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//ç”¨æˆ·ç±» F:\\..\\org\\itstack\\demo\\test\\HelloWorld</span>
        <span class="token function">parseUserClasspath</span><span class="token punctuation">(</span>cpOption<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">bootstrapAndExtensionClasspath</span><span class="token punctuation">(</span><span class="token class-name">String</span> jreOption<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
        <span class="token class-name">String</span> jreDir <span class="token operator">=</span> <span class="token function">getJreDir</span><span class="token punctuation">(</span>jreOption<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//..jre/lib/*</span>
        <span class="token class-name">String</span> jreLibPath <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>jreDir<span class="token punctuation">,</span> <span class="token string">&quot;lib&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token class-name">File</span><span class="token punctuation">.</span>separator <span class="token operator">+</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">;</span>
        bootstrapClasspath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WildcardEntry</span><span class="token punctuation">(</span>jreLibPath<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//..jre/lib/ext/*</span>
        <span class="token class-name">String</span> jreExtPath <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>jreDir<span class="token punctuation">,</span> <span class="token string">&quot;lib&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ext&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token class-name">File</span><span class="token punctuation">.</span>separator <span class="token operator">+</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">;</span>
        extensionClasspath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WildcardEntry</span><span class="token punctuation">(</span>jreExtPath<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">getJreDir</span><span class="token punctuation">(</span><span class="token class-name">String</span> jreOption<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>jreOption <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>jreOption<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> jreOption<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;./jre&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">&quot;./jre&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">String</span> jh <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getenv</span><span class="token punctuation">(</span><span class="token string">&quot;JAVA_HOME&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>jh <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>jh<span class="token punctuation">,</span> <span class="token string">&quot;jre&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;Can not find JRE folder!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">parseUserClasspath</span><span class="token punctuation">(</span><span class="token class-name">String</span> cpOption<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cpOption <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            cpOption <span class="token operator">=</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        userClasspath <span class="token operator">=</span> <span class="token class-name">Entry</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>cpOption<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">readClass</span><span class="token punctuation">(</span><span class="token class-name">String</span> className<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        className <span class="token operator">=</span> className <span class="token operator">+</span> <span class="token string">&quot;.class&quot;</span><span class="token punctuation">;</span>

        <span class="token comment">//[readClass]å¯åŠ¨ç±»è·¯å¾„</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> bootstrapClasspath<span class="token punctuation">.</span><span class="token function">readClass</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ignored<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//ignored</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//[readClass]æ‰©å±•ç±»è·¯å¾„</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> extensionClasspath<span class="token punctuation">.</span><span class="token function">readClass</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ignored<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//ignored</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//[readClass]ç”¨æˆ·ç±»è·¯å¾„</span>
        <span class="token keyword">return</span> userClasspath<span class="token punctuation">.</span><span class="token function">readClass</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¯åŠ¨ç±»è·¯å¾„ï¼ŒbootstrapClasspath.readClass(className);</li><li>æ‰©å±•ç±»è·¯å¾„ï¼ŒextensionClasspath.readClass(className);</li><li>ç”¨æˆ·ç±»è·¯å¾„ï¼ŒuserClasspath.readClass(className);</li><li>è¿™å›å°±çœ‹åˆ°å®ƒä»¬å…·ä½“åœ¨å“ªä½¿ç”¨äº†å§ï¼æœ‰äº†å…·ä½“çš„ä»£ç ä¹Ÿå°±æ–¹ä¾¿ç†è§£äº†</li></ul><h4 id="_2-7-åŠ è½½ç±»æµ‹è¯•éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_2-7-åŠ è½½ç±»æµ‹è¯•éªŒè¯" aria-hidden="true">#</a> 2.7 åŠ è½½ç±»æµ‹è¯•éªŒè¯</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">startJVM</span><span class="token punctuation">(</span><span class="token class-name">Cmd</span> cmd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Classpath</span> cp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Classpath</span><span class="token punctuation">(</span>cmd<span class="token punctuation">.</span>jre<span class="token punctuation">,</span> cmd<span class="token punctuation">.</span>classpath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;classpathï¼š%s classï¼š%s argsï¼š%s\\n&quot;</span><span class="token punctuation">,</span> cp<span class="token punctuation">,</span> cmd<span class="token punctuation">.</span><span class="token function">getMainClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cmd<span class="token punctuation">.</span><span class="token function">getAppArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//è·å–className</span>
    <span class="token class-name">String</span> className <span class="token operator">=</span> cmd<span class="token punctuation">.</span><span class="token function">getMainClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> classData <span class="token operator">=</span> cp<span class="token punctuation">.</span><span class="token function">readClass</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>classData<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Could not find or load main class &quot;</span> <span class="token operator">+</span> cmd<span class="token punctuation">.</span><span class="token function">getMainClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µå°±æ˜¯ä½¿ç”¨ Classpath ç±»è¿›è¡Œç±»è·¯å¾„åŠ è½½ï¼Œè¿™é‡Œæˆ‘ä»¬æµ‹è¯•åŠ è½½ java.lang.String ç±»ã€‚<em>ä½ å¯ä»¥åŠ è½½å…¶ä»–çš„ç±»ï¼Œæˆ–è€…è‡ªå·±å†™çš„ç±»</em></p><ul><li>é…ç½®IDEAï¼Œprogram arguments å‚æ•°ï¼š<code>-Xjre &quot;C:\\Program Files\\Java\\jdk1.8.0_161\\jre&quot; java.lang.String</code></li><li>å¦å¤–è¿™é‡Œè¯»å–å‡ºçš„ class æ–‡ä»¶ä¿¡æ¯ï¼Œæ‰“å°çš„æ˜¯ byte ç±»å‹ä¿¡æ¯ã€‚</li></ul><p><strong>æµ‹è¯•ç»“æœ</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">54</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">70</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">66</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">52</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">37</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">33</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">61</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">89</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">112</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">81</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">73</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">106</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">118</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">103</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">79</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">,</span> <span class="token number">106</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">116</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">106</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">118</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">103</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">83</span><span class="token punctuation">,</span> <span class="token number">116</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">105</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">103</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">86</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">91</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™å—éƒ¨åˆ†æˆªå–çš„ç¨‹åºè¿è¡Œæ‰“å°ç»“æœï¼Œå°±æ˜¯è¯»å–çš„ class æ–‡ä»¶ä¿¡æ¯ï¼Œåªä¸è¿‡æš‚æ—¶è¿˜ä¸èƒ½çœ‹å‡ºä»€ä¹ˆã€‚<em>æ¥ä¸‹æ¥æˆ‘ä»¬å†æŠŠå®ƒç¿»è¯‘è¿‡æ¥ï¼</em></p><h2 id="äº”ã€è§£æå­—èŠ‚ç æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#äº”ã€è§£æå­—èŠ‚ç æ–‡ä»¶" aria-hidden="true">#</a> äº”ã€è§£æå­—èŠ‚ç æ–‡ä»¶</h2><p>JVM åœ¨æŠŠ class æ–‡ä»¶åŠ è½½å®Œæˆåï¼Œæ¥ä¸‹æ¥å°±è¿›å…¥<code>é“¾æ¥</code>çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬äº†å†…å®¹çš„æ ¡éªŒã€å‡†å¤‡å’Œè§£æï¼Œå…¶å®å°±æ˜¯æŠŠ byte ç±»å‹ class ç¿»è¯‘è¿‡æ¥ï¼Œåšç›¸åº”çš„æ“ä½œã€‚</p>`,56),d={href:"https://bugstack.cn/itstack-demo-jvm/itstack-demo-jvm.html",target:"_blank",rel:"noopener noreferrer"},v=t(`<h3 id="_1-æå–éƒ¨åˆ†å­—èŠ‚ç " tabindex="-1"><a class="header-anchor" href="#_1-æå–éƒ¨åˆ†å­—èŠ‚ç " aria-hidden="true">#</a> 1. æå–éƒ¨åˆ†å­—èŠ‚ç </h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//å–éƒ¨åˆ†å­—èŠ‚ç ï¼šjava.lang.String</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> classData <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token operator">-</span><span class="token number">54</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">70</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">66</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">52</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">37</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">33</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">83</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">86</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">87</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">83</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">77</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">49</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">73</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">106</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">118</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">103</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">79</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">,</span> <span class="token number">106</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">116</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span>
        <span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">106</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">118</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">103</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">83</span><span class="token punctuation">,</span> <span class="token number">116</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">105</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">103</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">86</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">91</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">91</span><span class="token punctuation">,</span> <span class="token number">67</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">67</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">67</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">68</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">,</span>
        <span class="token number">106</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">118</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">103</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">83</span><span class="token punctuation">,</span> <span class="token number">116</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">105</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">103</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">73</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">67</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>java.lang.String è§£æå‡ºæ¥çš„å­—èŠ‚ç å†…å®¹è¾ƒå¤šï¼Œå½“ç„¶åŒ…æ‹¬çš„å†…å®¹ä¹Ÿå¤šï¼Œæ¯”å¦‚é­”æ•°ã€ç‰ˆæœ¬ã€ç±»ã€å¸¸é‡ã€æ–¹æ³•ç­‰ç­‰ã€‚æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œåªæˆªå–éƒ¨åˆ†è¿›è¡Œè¿›è¡Œè§£æã€‚</li></ul><h3 id="_2-è§£æé­”æ•°å¹¶æ ¡éªŒ" tabindex="-1"><a class="header-anchor" href="#_2-è§£æé­”æ•°å¹¶æ ¡éªŒ" aria-hidden="true">#</a> 2. è§£æé­”æ•°å¹¶æ ¡éªŒ</h3><p>å¾ˆå¤šæ–‡ä»¶æ ¼å¼éƒ½ä¼šè§„å®šæ»¡è¶³è¯¥æ ¼å¼çš„æ–‡ä»¶å¿…é¡»ä»¥æŸå‡ ä¸ªå›ºå®šå­—èŠ‚å¼€å¤´ï¼Œè¿™å‡ ä¸ªå­—èŠ‚ä¸»è¦èµ·åˆ°æ ‡è¯†ä½œç”¨ï¼Œå«ä½œé­”æ•°(magic number)ã€‚</p><p>ä¾‹å¦‚ï¼›</p><ul><li>PDFæ–‡ä»¶ä»¥4å­—èŠ‚â€œ%PDFâ€(0x25ã€0x50ã€0x44ã€0x46)å¼€å¤´ï¼Œ</li><li>ZIPæ–‡ä»¶ä»¥2å­—èŠ‚â€œPKâ€(0x50ã€0x4B)å¼€å¤´</li><li>classæ–‡ä»¶ä»¥4å­—èŠ‚â€œ0xCAFEBABEâ€å¼€å¤´</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">readAndCheckMagic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\\r\\n------------ æ ¡éªŒé­”æ•° ------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//ä»classå­—èŠ‚ç ä¸­è¯»å–å‰å››ä½</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> magic_byte <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>classData<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> magic_byte<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//å°†4ä½byteå­—èŠ‚è½¬æˆ16è¿›åˆ¶å­—ç¬¦ä¸²</span>
    <span class="token class-name">String</span> magic_hex_str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> magic_byte<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;magic_hex_strï¼š&quot;</span> <span class="token operator">+</span> magic_hex_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//byte_magic_str æ˜¯16è¿›åˆ¶çš„å­—ç¬¦ä¸²ï¼Œcafebabeï¼Œå› ä¸ºjavaä¸­æ²¡æœ‰æ— ç¬¦å·æ•´å‹ï¼Œæ‰€ä»¥å¦‚æœæƒ³è¦æ— ç¬¦å·åªèƒ½æ”¾åˆ°æ›´é«˜ä½ä¸­</span>
    <span class="token keyword">long</span> magic_unsigned_int32 <span class="token operator">=</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token function">parseLong</span><span class="token punctuation">(</span>magic_hex_str<span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;magic_unsigned_int32ï¼š&quot;</span> <span class="token operator">+</span> magic_unsigned_int32<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//é­”æ•°æ¯”å¯¹ï¼Œä¸€ç§é€šè¿‡å­—ç¬¦ä¸²æ¯”å¯¹ï¼Œå¦å¤–ä¸€ç§ä½¿ç”¨å‡è®¾çš„æ— ç¬¦å·16è¿›åˆ¶æ¯”è¾ƒã€‚å¦‚æœä½¿ç”¨æ— ç¬¦å·æ¯”è¾ƒéœ€è¦å°†0xCAFEBABE &amp; 0x0FFFFFFFFLä¸è¿ç®—</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;0xCAFEBABE &amp; 0x0FFFFFFFFLï¼š&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">0xCAFEBABE</span> <span class="token operator">&amp;</span> <span class="token number">0</span>x0FFFFFFFFL<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>magic_unsigned_int32 <span class="token operator">==</span> <span class="token punctuation">(</span><span class="token number">0xCAFEBABE</span> <span class="token operator">&amp;</span> <span class="token number">0</span>x0FFFFFFFFL<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;classå­—èŠ‚ç é­”æ•°æ— ç¬¦å·16è¿›åˆ¶æ•°å€¼ä¸€è‡´æ ¡éªŒé€šè¿‡&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;classå­—èŠ‚ç é­”æ•°æ— ç¬¦å·16è¿›åˆ¶æ•°å€¼ä¸€è‡´æ ¡éªŒæ‹’ç»&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¯»å–å­—èŠ‚ç ä¸­çš„å‰å››ä½ï¼Œ<code>-54, -2, -70, -66</code>ï¼Œå°†è¿™å››ä½è½¬æ¢ä¸º16è¿›åˆ¶ã€‚</li><li>å› ä¸º java ä¸­æ˜¯æ²¡æœ‰æ— ç¬¦å·æ•´å‹çš„ï¼Œæ‰€ä»¥åªèƒ½ç”¨æ›´é«˜ä½å­˜æ”¾ã€‚</li><li>è§£æåå°±æ˜¯é­”æ•°çš„å¯¹æ¯”ï¼Œçœ‹æ˜¯å¦ä¸ CAFEBABE ä¸€è‡´ã€‚</li></ul><p><strong>æµ‹è¯•ç»“æœ</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> æ ¡éªŒé­”æ•° <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
magic_hex_strï¼šcafebabe
magic_unsigned_int32ï¼š<span class="token number">3405691582</span>
<span class="token number">0xCAFEBABE</span> <span class="token operator">&amp;</span> <span class="token number">0</span>x0FFFFFFFFLï¼š<span class="token number">3405691582</span>
<span class="token keyword">class</span>å­—èŠ‚ç é­”æ•°æ— ç¬¦å·<span class="token number">16</span>è¿›åˆ¶æ•°å€¼ä¸€è‡´æ ¡éªŒé€šè¿‡
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-è§£æç‰ˆæœ¬å·ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#_3-è§£æç‰ˆæœ¬å·ä¿¡æ¯" aria-hidden="true">#</a> 3. è§£æç‰ˆæœ¬å·ä¿¡æ¯</h3><p>åˆšæ‰æˆ‘ä»¬å·²ç»è¯»å–äº†4ä½é­”æ•°ä¿¡æ¯ï¼Œæ¥ä¸‹æ¥å†è¯»å–2ä½ï¼Œæ˜¯ç‰ˆæœ¬ä¿¡æ¯ã€‚</p><p>é­”æ•°ä¹‹åæ˜¯classæ–‡ä»¶çš„æ¬¡ç‰ˆæœ¬å·å’Œä¸»ç‰ˆæœ¬å·ï¼Œéƒ½æ˜¯u2ç±»å‹ã€‚å‡è®¾æŸclassæ–‡ä»¶çš„ä¸»ç‰ˆæœ¬å·æ˜¯Mï¼Œæ¬¡ç‰ˆæœ¬å·æ˜¯mï¼Œé‚£ä¹ˆå®Œæ•´çš„ç‰ˆæœ¬å·å¯ä»¥è¡¨ç¤ºæˆâ€œM.mâ€çš„å½¢å¼ã€‚æ¬¡ç‰ˆæœ¬å·åªåœ¨J2SE 1.2ä¹‹å‰ç”¨è¿‡ï¼Œä»1.2å¼€å§‹åŸºæœ¬ä¸Šå°±æ²¡æœ‰ä»€ä¹ˆç”¨äº†(éƒ½æ˜¯0)ã€‚ä¸»ç‰ˆæœ¬å·åœ¨J2SE 1.2ä¹‹å‰æ˜¯45ï¼Œä»1.2å¼€å§‹ï¼Œæ¯æ¬¡æœ‰å¤§ç‰ˆæœ¬çš„Javaç‰ˆæœ¬å‘å¸ƒï¼Œéƒ½ä¼šåŠ 1ï½›45ã€46ã€47ã€48ã€49ã€50ã€51ã€52ï½</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">readAndCheckVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\\r\\n------------ æ ¡éªŒç‰ˆæœ¬å· ------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//ä»classå­—èŠ‚ç ç¬¬4ä½å¼€å§‹è¯»å–ï¼Œè¯»å–2ä½</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> minor_byte <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>classData<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> minor_byte<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//å°†2ä½byteå­—èŠ‚è½¬æˆ16è¿›åˆ¶å­—ç¬¦ä¸²</span>
    <span class="token class-name">String</span> minor_hex_str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> minor_byte<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;minor_hex_strï¼š&quot;</span> <span class="token operator">+</span> minor_hex_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//minor_unsigned_int32 è½¬æˆæ— ç¬¦å·16è¿›åˆ¶</span>
    <span class="token keyword">int</span> minor_unsigned_int32 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>minor_hex_str<span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;minor_unsigned_int32ï¼š&quot;</span> <span class="token operator">+</span> minor_unsigned_int32<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//ä»classå­—èŠ‚ç ç¬¬6ä½å¼€å§‹è¯»å–ï¼Œè¯»å–2ä½</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> major_byte <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>classData<span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> major_byte<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//å°†2ä½byteå­—èŠ‚è½¬æˆ16è¿›åˆ¶å­—ç¬¦ä¸²</span>
    <span class="token class-name">String</span> major_hex_str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> major_byte<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;major_hex_strï¼š&quot;</span> <span class="token operator">+</span> major_hex_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//major_unsigned_int32 è½¬æˆæ— ç¬¦å·16è¿›åˆ¶</span>
    <span class="token keyword">int</span> major_unsigned_int32 <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>major_hex_str<span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;major_unsigned_int32ï¼š&quot;</span> <span class="token operator">+</span> major_unsigned_int32<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç‰ˆæœ¬å·ï¼š&quot;</span> <span class="token operator">+</span> major_unsigned_int32 <span class="token operator">+</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">+</span> minor_unsigned_int32<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™é‡Œæœ‰ä¸€ä¸ªå°æŠ€å·§ï¼Œclass æ–‡ä»¶è§£æå‡ºæ¥æ˜¯ä¸€æ•´ç‰‡çš„å†…å®¹ï¼ŒJVM éœ€è¦æŒ‰ç…§è™šæ‹Ÿæœºè§„èŒƒï¼Œä¸€æ®µä¸€æ®µçš„è§£æå‡ºæ‰€æœ‰çš„ä¿¡æ¯ã€‚</li><li>åŒæ ·è¿™é‡Œæˆ‘ä»¬éœ€è¦æŠŠ2ä½byteè½¬æ¢ä¸º16è¿›åˆ¶ä¿¡æ¯ï¼Œå¹¶ç»§ç»­ä»ç¬¬6ä½ç»§ç»­è¯»å–2ä½ä¿¡æ¯ã€‚ç»„åˆå‡ºæ¥çš„æ‰æ˜¯ç‰ˆæœ¬ä¿¡æ¯ã€‚</li></ul><p><strong>æµ‹è¯•ç»“æœ</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> æ ¡éªŒç‰ˆæœ¬å· <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
minor_hex_strï¼š<span class="token number">0</span>
minor_unsigned_int32ï¼š<span class="token number">0</span>
major_hex_strï¼š<span class="token number">34</span>
major_unsigned_int32ï¼š<span class="token number">52</span>
ç‰ˆæœ¬å·ï¼š<span class="token number">52.0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-è§£æå…¨éƒ¨å†…å®¹å¯¹ç…§" tabindex="-1"><a class="header-anchor" href="#_4-è§£æå…¨éƒ¨å†…å®¹å¯¹ç…§" aria-hidden="true">#</a> 4. è§£æå…¨éƒ¨å†…å®¹å¯¹ç…§</h3><p>æŒ‰ç…§ JVM çš„åŠ è½½è¿‡ç¨‹ï¼Œå…¶å®è¿œä¸æ­¢é­”æ•°å’Œç‰ˆæœ¬å·ä¿¡æ¯ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–å†…å®¹ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥æŠŠæµ‹è¯•ç»“æœå±•ç¤ºå‡ºæ¥ï¼Œæ–¹ä¾¿å¤§å®¶æœ‰ä¸€ä¸ªå­¦ä¹ ç»“æœçš„æ¯”å¯¹å°è±¡ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>classpathï¼š<span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>jvm<span class="token punctuation">.</span>classpath<span class="token punctuation">.</span></span>Classpath</span><span class="token annotation punctuation">@4bf558aa</span> <span class="token keyword">class</span>ï¼š<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>String</span> argsï¼š<span class="token keyword">null</span>
version<span class="token operator">:</span> <span class="token number">52.0</span>
constants countï¼š<span class="token number">540</span>
access flagsï¼š<span class="token number">0x31</span>
<span class="token keyword">this</span> <span class="token keyword">class</span>ï¼šjava<span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span>
<span class="token keyword">super</span> <span class="token keyword">class</span>ï¼šjava<span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">Object</span>
interfacesï¼š<span class="token punctuation">[</span>java<span class="token operator">/</span>io<span class="token operator">/</span><span class="token class-name">Serializable</span><span class="token punctuation">,</span> java<span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">Comparable</span><span class="token punctuation">,</span> java<span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">CharSequence</span><span class="token punctuation">]</span>
fields countï¼š<span class="token number">5</span>
value 		 <span class="token punctuation">[</span><span class="token class-name">C</span>
hash 		 <span class="token class-name">I</span>
serialVersionUID 		 <span class="token class-name">J</span>
serialPersistentFields 		 <span class="token punctuation">[</span><span class="token class-name">Ljava</span><span class="token operator">/</span>io<span class="token operator">/</span><span class="token class-name">ObjectStreamField</span><span class="token punctuation">;</span>
<span class="token constant">CASE_INSENSITIVE_ORDER</span> 		 <span class="token class-name">Ljava</span><span class="token operator">/</span>util<span class="token operator">/</span><span class="token class-name">Comparator</span><span class="token punctuation">;</span>
methods count<span class="token operator">:</span> <span class="token number">94</span>
<span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span> 		 <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token class-name">V</span>
<span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span> 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">V</span>
<span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span> 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">C</span><span class="token punctuation">)</span><span class="token class-name">V</span>
<span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span> 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">CII</span><span class="token punctuation">)</span><span class="token class-name">V</span>
<span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span> 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">III</span><span class="token punctuation">)</span><span class="token class-name">V</span>
<span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span> 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">BIII</span><span class="token punctuation">)</span><span class="token class-name">V</span>
<span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span> 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">BI</span><span class="token punctuation">)</span><span class="token class-name">V</span>
checkBounds 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">BII</span><span class="token punctuation">)</span><span class="token class-name">V</span>
<span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span> 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">BIILjava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">V</span>
<span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span> 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">BIILjava</span><span class="token operator">/</span>nio<span class="token operator">/</span>charset<span class="token operator">/</span><span class="token class-name">Charset</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">V</span>
<span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span> 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">BLjava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">V</span>
<span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span> 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">BLjava</span><span class="token operator">/</span>nio<span class="token operator">/</span>charset<span class="token operator">/</span><span class="token class-name">Charset</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">V</span>
<span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span> 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">BII</span><span class="token punctuation">)</span><span class="token class-name">V</span>
<span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span> 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">B</span><span class="token punctuation">)</span><span class="token class-name">V</span>
<span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span> 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">StringBuffer</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">V</span>
<span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span> 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">StringBuilder</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">V</span>
<span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span> 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">CZ</span><span class="token punctuation">)</span><span class="token class-name">V</span>
length 		 <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token class-name">I</span>
isEmpty 		 <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token class-name">Z</span>
charAt 		 <span class="token punctuation">(</span><span class="token class-name">I</span><span class="token punctuation">)</span><span class="token class-name">C</span>
codePointAt 		 <span class="token punctuation">(</span><span class="token class-name">I</span><span class="token punctuation">)</span><span class="token class-name">I</span>
codePointBefore 		 <span class="token punctuation">(</span><span class="token class-name">I</span><span class="token punctuation">)</span><span class="token class-name">I</span>
codePointCount 		 <span class="token punctuation">(</span><span class="token constant">II</span><span class="token punctuation">)</span><span class="token class-name">I</span>
offsetByCodePoints 		 <span class="token punctuation">(</span><span class="token constant">II</span><span class="token punctuation">)</span><span class="token class-name">I</span>
getChars 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">CI</span><span class="token punctuation">)</span><span class="token class-name">V</span>
getChars 		 <span class="token punctuation">(</span><span class="token constant">II</span><span class="token punctuation">[</span><span class="token constant">CI</span><span class="token punctuation">)</span><span class="token class-name">V</span>
getBytes 		 <span class="token punctuation">(</span><span class="token constant">II</span><span class="token punctuation">[</span><span class="token constant">BI</span><span class="token punctuation">)</span><span class="token class-name">V</span>
getBytes 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token class-name">B</span>
getBytes 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>nio<span class="token operator">/</span>charset<span class="token operator">/</span><span class="token class-name">Charset</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token class-name">B</span>
getBytes 		 <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token class-name">B</span>
equals 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">Object</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">Z</span>
contentEquals 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">StringBuffer</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">Z</span>
nonSyncContentEquals 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">AbstractStringBuilder</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">Z</span>
contentEquals 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">CharSequence</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">Z</span>
equalsIgnoreCase 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">Z</span>
compareTo 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">I</span>
compareToIgnoreCase 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">I</span>
regionMatches 		 <span class="token punctuation">(</span><span class="token class-name">ILjava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token constant">II</span><span class="token punctuation">)</span><span class="token class-name">Z</span>
regionMatches 		 <span class="token punctuation">(</span><span class="token class-name">ZILjava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token constant">II</span><span class="token punctuation">)</span><span class="token class-name">Z</span>
startsWith 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token class-name">I</span><span class="token punctuation">)</span><span class="token class-name">Z</span>
startsWith 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">Z</span>
endsWith 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">Z</span>
hashCode 		 <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token class-name">I</span>
indexOf 		 <span class="token punctuation">(</span><span class="token class-name">I</span><span class="token punctuation">)</span><span class="token class-name">I</span>
indexOf 		 <span class="token punctuation">(</span><span class="token constant">II</span><span class="token punctuation">)</span><span class="token class-name">I</span>
indexOfSupplementary 		 <span class="token punctuation">(</span><span class="token constant">II</span><span class="token punctuation">)</span><span class="token class-name">I</span>
lastIndexOf 		 <span class="token punctuation">(</span><span class="token class-name">I</span><span class="token punctuation">)</span><span class="token class-name">I</span>
lastIndexOf 		 <span class="token punctuation">(</span><span class="token constant">II</span><span class="token punctuation">)</span><span class="token class-name">I</span>
lastIndexOfSupplementary 		 <span class="token punctuation">(</span><span class="token constant">II</span><span class="token punctuation">)</span><span class="token class-name">I</span>
indexOf 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">I</span>
indexOf 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token class-name">I</span><span class="token punctuation">)</span><span class="token class-name">I</span>
indexOf 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">CIILjava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token class-name">I</span><span class="token punctuation">)</span><span class="token class-name">I</span>
indexOf 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">CII</span><span class="token punctuation">[</span><span class="token constant">CIII</span><span class="token punctuation">)</span><span class="token class-name">I</span>
lastIndexOf 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">I</span>
lastIndexOf 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token class-name">I</span><span class="token punctuation">)</span><span class="token class-name">I</span>
lastIndexOf 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">CIILjava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token class-name">I</span><span class="token punctuation">)</span><span class="token class-name">I</span>
lastIndexOf 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">CII</span><span class="token punctuation">[</span><span class="token constant">CIII</span><span class="token punctuation">)</span><span class="token class-name">I</span>
substring 		 <span class="token punctuation">(</span><span class="token class-name">I</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
substring 		 <span class="token punctuation">(</span><span class="token constant">II</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
subSequence 		 <span class="token punctuation">(</span><span class="token constant">II</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">CharSequence</span><span class="token punctuation">;</span>
concat 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
replace 		 <span class="token punctuation">(</span><span class="token constant">CC</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
matches 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">Z</span>
contains 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">CharSequence</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">Z</span>
replaceFirst 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
replaceAll 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
replace 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">CharSequence</span><span class="token punctuation">;</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">CharSequence</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
split 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token class-name">I</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
split 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
join 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">CharSequence</span><span class="token punctuation">;</span><span class="token punctuation">[</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">CharSequence</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
join 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">CharSequence</span><span class="token punctuation">;</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">Iterable</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
toLowerCase 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>util<span class="token operator">/</span><span class="token class-name">Locale</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
toLowerCase 		 <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
toUpperCase 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>util<span class="token operator">/</span><span class="token class-name">Locale</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
toUpperCase 		 <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
trim 		 <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
toString 		 <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
toCharArray 		 <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token class-name">C</span>
format 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">[</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">Object</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
format 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>util<span class="token operator">/</span><span class="token class-name">Locale</span><span class="token punctuation">;</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">[</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">Object</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
valueOf 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">Object</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
valueOf 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">C</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
valueOf 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">CII</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
copyValueOf 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token constant">CII</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
copyValueOf 		 <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">C</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
valueOf 		 <span class="token punctuation">(</span><span class="token class-name">Z</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
valueOf 		 <span class="token punctuation">(</span><span class="token class-name">C</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
valueOf 		 <span class="token punctuation">(</span><span class="token class-name">I</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
valueOf 		 <span class="token punctuation">(</span><span class="token class-name">J</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
valueOf 		 <span class="token punctuation">(</span><span class="token class-name">F</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
valueOf 		 <span class="token punctuation">(</span><span class="token class-name">D</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
intern 		 <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span>
compareTo 		 <span class="token punctuation">(</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">Object</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">I</span>
<span class="token generics"><span class="token punctuation">&lt;</span>clinit<span class="token punctuation">&gt;</span></span> 		 <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token class-name">V</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,21),b={href:"https://github.com/fuzhengwei/itstack-demo-jvm",target:"_blank",rel:"noopener noreferrer"},g=n("h2",{id:"å…­ã€æ€»ç»“",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#å…­ã€æ€»ç»“","aria-hidden":"true"},"#"),s(" å…­ã€æ€»ç»“")],-1),h=n("ul",null,[n("li",null,"å­¦ä¹  JVM æœ€å¤§çš„é—®é¢˜æ˜¯ä¸å¥½å®è·µï¼Œæ‰€ä»¥æœ¬æ–‡ä»¥æ¡ˆä¾‹å®æ“çš„æ–¹å¼ï¼Œå­¦ä¹  JVM çš„åŠ è½½è§£æè¿‡ç¨‹ã€‚ä¹Ÿè®©æ›´å¤šçš„å¯¹ JVM æ„Ÿå…´è¶£çš„ç ”å‘ï¼Œèƒ½æ›´å¥½çš„æ¥è§¦åˆ° JVM å¹¶æ·±å…¥çš„å­¦ä¹ ã€‚"),n("li",null,"æœ‰äº†ä»¥ä¸Šè¿™æ®µä»£ç ï¼Œå¤§å®¶å¯ä»¥å‚ç…§ JVM è™šæ‹Ÿæœºè§„èŒƒï¼Œåœ¨è°ƒè¯•Javaç‰ˆæœ¬çš„JVMï¼Œè¿™æ ·å°±å¯ä»¥éå¸¸å®¹æ˜“ç†è§£æ•´ä¸ªJVMçš„åŠ è½½è¿‡ç¨‹ï¼Œéƒ½åšäº†ä»€ä¹ˆã€‚"),n("li",null,"å¦‚æœå¤§å®¶éœ€è¦æ–‡ç« ä¸­ä¸€äº›åŸå›¾ xmind æˆ–è€…æºç ï¼Œå¯ä»¥æ·»åŠ ä½œè€…å°å‚…å“¥(fustack)ï¼Œæˆ–è€…å…³æ³¨å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆè¿›è¡Œè·å–ã€‚å¥½äº†ï¼Œæœ¬ç« èŠ‚å°±æ‰¯åˆ°è¿™ï¼Œåç»­è¿˜æœ‰å¾ˆå¤šåŠªåŠ›ï¼ŒæŒç»­åŸåˆ›ï¼Œæ„Ÿè°¢å¤§å®¶çš„æ”¯æŒï¼")],-1);function y(j,f){const a=o("ExternalLinkIcon");return c(),l("div",null,[i,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),k,s("åšå®¢ï¼š"),n("a",r,[s("https://bugstack.cn"),p(a)])]),m,n("p",null,[s("æ•´ä¸ªè¿™ä¸ªè¿‡ç¨‹å†…å®¹ç›¸å¯¹è¾ƒå¤šï¼Œè¿™é‡Œåªåšéƒ¨åˆ†é€»è¾‘çš„å®ç°å’Œè®²è§£ã€‚å¦‚æœè¯»è€…æ„Ÿå…´è¶£å¯ä»¥é˜…è¯»å°å‚…å“¥çš„"),n("a",d,[s("ã€Šç”¨Javaå®ç°JVMã€‹"),p(a)]),s("ä¸“æ ã€‚")]),v,n("ul",null,[n("li",null,[s("å¦‚æœå¤§å®¶å¯¹è¿™éƒ¨åˆ†éªŒè¯ã€å‡†å¤‡ã€è§£æï¼Œçš„å®ç°è¿‡ç¨‹æ„Ÿå…´è¶£ï¼Œå¯ä»¥å‚ç…§è¿™éƒ¨åˆ†ç”¨Javaå®ç°çš„JVMæºç ï¼š"),n("a",b,[s("https://github.com/fuzhengwei/itstack-demo-jvm"),p(a)])])]),g,h])}const S=e(u,[["render",y],["__file","2020-12-30-mianjingshouce Â· di24pianã€Šweiliaogaoqingchuleijiazaiï¼ŒjingranshouluJVMï¼ã€‹.html.vue"]]);export{S as default};
