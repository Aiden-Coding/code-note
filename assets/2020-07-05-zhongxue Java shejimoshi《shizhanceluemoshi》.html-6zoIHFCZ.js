import{_ as p,r as c,o,c as l,a as n,b as s,d as e,e as t}from"./app-3RcBQnkC.js";const i={},u=n("h1",{id:"é‡å­¦-java-è®¾è®¡æ¨¡å¼-å®æˆ˜ç­–ç•¥æ¨¡å¼ã€Œæ¨¡æ‹Ÿå¤šç§è¥é”€ç±»å‹ä¼˜æƒ åˆ¸-æŠ˜æ‰£é‡‘é¢è®¡ç®—ç­–ç•¥åœºæ™¯ã€",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#é‡å­¦-java-è®¾è®¡æ¨¡å¼-å®æˆ˜ç­–ç•¥æ¨¡å¼ã€Œæ¨¡æ‹Ÿå¤šç§è¥é”€ç±»å‹ä¼˜æƒ åˆ¸-æŠ˜æ‰£é‡‘é¢è®¡ç®—ç­–ç•¥åœºæ™¯ã€","aria-hidden":"true"},"#"),s(" é‡å­¦ Java è®¾è®¡æ¨¡å¼ï¼šå®æˆ˜ç­–ç•¥æ¨¡å¼ã€Œæ¨¡æ‹Ÿå¤šç§è¥é”€ç±»å‹ä¼˜æƒ åˆ¸ï¼ŒæŠ˜æ‰£é‡‘é¢è®¡ç®—ç­–ç•¥åœºæ™¯ã€")],-1),d=n("br",null,null,-1),k={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},r=n("blockquote",null,[n("p",null,"æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„")],-1),m=n("iframe",{id:"B-Video",src:"//player.bilibili.com/player.html?aid=213924695&bvid=BV1oa411E7Fj&cid=717980624&page=1",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true",width:"100%",height:"480"}," ",-1),v=t('<h2 id="ä¸€ã€å‰è¨€" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å‰è¨€" aria-hidden="true">#</a> ä¸€ã€å‰è¨€</h2><p><code>æ–‡æ— ç¬¬ä¸€ï¼Œæ­¦æ— ç¬¬äºŒ</code></p><p>ä¸åŒæ–¹å‘ä½†åŒæ ·åŠªåŠ›çš„äººï¼Œéƒ½æœ‰è‡ªèº«çš„ä»·å€¼å’Œäº®ç‚¹ï¼Œä¹Ÿéƒ½æ˜¯å¯ä»¥äº’ç›¸å­¦ä¹ çš„ã€‚ä¸è¦å¤ªè¿‡äºç”¨è‡ªå·±æ‰‹é‡Œçš„çŸ›å»æ”»å‡»åˆ«äººçš„ç›¾ğŸ›¡ï¼Œå“ªæ€•ä¸€æ—¶äº‰è¾©è¿‡äº†ä¹Ÿå¤šåŠå¯èƒ½æ˜¯ä½ è¢«å®‰æ”¾çš„è§’è‰²ä¸åŒã€‚å–åˆ«äººä¹‹å¼ºè¡¥è‡ªå·±ä¹‹å¼±ï¼ŒçŸ›ä¸ç›¾çš„ç»“åˆå¯èƒ½å°±æ˜¯å¦å…‹ã€‚</p><p><code>èƒ½æŠŠå¤æ‚çš„çŸ¥è¯†è®²çš„ç®€å•å¾ˆé‡è¦</code></p><p>åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬çœ‹è¿‡å¾ˆå¤šèµ„æ–™ã€è§†é¢‘ã€æ–‡æ¡£ç­‰ï¼Œå› ä¸ºç°åœ¨èµ„æ–™è§†é¢‘éƒ½è¾ƒå¤šæ‰€ä»¥å¾€å¾€ä¸€ä¸ªçŸ¥è¯†ç‚¹ä¼šæœ‰å¤šç§å¤šæ ·çš„è§†é¢‘å½¢å¼è®²è§£ã€‚é™¤äº†æ¨å¹¿è¥é”€ä»¥å¤–ï¼Œç¡®å®æœ‰å¾ˆå¤šäººçš„è§†é¢‘è®²è§£éå¸¸ä¼˜ç§€ï¼Œä¾‹å¦‚ææ°¸ä¹è€å¸ˆçš„çŸ­è§†é¢‘è¯¾ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªé»‘æ¿ä¸ŠæŠŠé‚£ä¹ˆå¤æ‚çš„çŸ¥è¯†ï¼Œè®²è§£çš„é‚£ä¹ˆå®¹æ˜“ç†è§£ï¼Œé‚£ä¹ˆé€å½»ã€‚è€Œæˆ‘ä»¬å­¦ä¹ ç¼–ç¨‹çš„äººä¹Ÿæ˜¯ï¼Œä¸åªæ˜¯è¦å­¦ä¼šæŠŠçŸ¥è¯†ç‚¹è®²æ˜ç™½ï¼Œä¹Ÿè¦å†™æ˜ç™½ã€‚</p><p><code>ğŸ™‰æå‡è‡ªå·±çš„çœ¼ç•Œäº¤å¾€æ›´å¤šåŒå¥½</code></p><p>æœ‰æ—¶å€™åœˆå­å¾ˆé‡è¦ï¼Œå°±åƒä¸Šå­¦æœŸé—´å¤§å®¶éƒ½ä¼šå‘ç°ç­é‡Œæœ‰è¿™æ ·ä¸€ç±»å­¦ç”ŸğŸ‘©â€ğŸ“ä¸æ€ä¹ˆå¬è¯¾ï¼Œä½†æ˜¯å°±æ˜¯å­¦ä¹ å¥½ã€‚é‚£å‡å¦‚è®©ä»–å›å®¶å‘†ç€ï¼Œä¸èƒ½åœ¨è¯¾å ‚é‡Œå‘¢ï¼Ÿç±»ä¼¼çš„åœˆå­è¿˜æœ‰ï¼›å›¾ä¹¦é¦†ã€ç½‘å§ã€è½¦å‹ç¾¤ã€æŠ€æœ¯ç¾¤ç­‰ç­‰ï¼Œéƒ½å¯ä»¥ç»™ä½ å¸¦æ¥åŒç±»çˆ±å¥½çš„äººæ‰€åˆ†äº«å‡ºæ¥çš„æŠ€èƒ½æˆ–è€…å¤§å®¶ä¸€èµ·çƒ˜æ‰˜å‡ºçš„æ°›å›´å¸®ä½ æˆé•¿ã€‚</p><h2 id="äºŒã€å¼€å‘ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#äºŒã€å¼€å‘ç¯å¢ƒ" aria-hidden="true">#</a> äºŒã€å¼€å‘ç¯å¢ƒ</h2>',8),b=n("li",null,"JDK 1.8",-1),g=n("li",null,"Idea + Maven",-1),h=n("strong",null,"å…¬ä¼—å·",-1),w={href:"https://bugstack.cn/assets/images/qrcode.png",target:"_blank",rel:"noopener noreferrer"},y=n("code",null,"bugstackè™«æ´æ ˆ",-1),f=n("code",null,"æºç ä¸‹è½½",-1),D=t('<table><thead><tr><th>å·¥ç¨‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>itstack-demo-design-20-01</td><td>ä½¿ç”¨ä¸€å¨ä»£ç å®ç°ä¸šåŠ¡éœ€æ±‚</td></tr><tr><td>itstack-demo-design-20-02</td><td>é€šè¿‡è®¾è®¡æ¨¡å¼ä¼˜åŒ–æ”¹é€ ä»£ç ï¼Œäº§ç”Ÿå¯¹æ¯”æ€§ä»è€Œå­¦ä¹ </td></tr></tbody></table><h2 id="ä¸‰ã€ç­–ç•¥æ¨¡å¼ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€ç­–ç•¥æ¨¡å¼ä»‹ç»" aria-hidden="true">#</a> ä¸‰ã€ç­–ç•¥æ¨¡å¼ä»‹ç»</h2><p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-20-01.png" alt="ç­–ç•¥æ¨¡å¼ï¼Œå›¾ç‰‡æ¥è‡ª refactoringguru.cn"></p>',3),_={href:"https://refactoringguru.cn/design-patterns/strategy",target:"_blank",rel:"noopener noreferrer"},x=t(`<p>ç­–ç•¥æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºæ¨¡å¼ï¼Œä¹Ÿæ˜¯æ›¿ä»£å¤§é‡<code>ifelse</code>çš„åˆ©å™¨ã€‚å®ƒæ‰€èƒ½å¸®ä½ è§£å†³çš„æ˜¯åœºæ™¯ï¼Œä¸€èˆ¬æ˜¯å…·æœ‰åŒç±»å¯æ›¿ä»£çš„è¡Œä¸ºé€»è¾‘ç®—æ³•åœºæ™¯ã€‚æ¯”å¦‚ï¼›ä¸åŒç±»å‹çš„äº¤æ˜“æ–¹å¼(ä¿¡ç”¨å¡ã€æ”¯ä»˜å®ã€å¾®ä¿¡)ã€ç”Ÿæˆå”¯ä¸€IDç­–ç•¥(UUIDã€DBè‡ªå¢ã€DB+Redisã€é›ªèŠ±ç®—æ³•ã€Leafç®—æ³•)ç­‰ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼è¿›è¡Œè¡Œä¸ºåŒ…è£…ï¼Œä¾›ç»™å¤–éƒ¨ä½¿ç”¨ã€‚</p><p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-20-02.png" alt="è¯¸è‘›äº®é”¦å›Šå¦™è®¡"></p><p>ç­–ç•¥æ¨¡å¼ä¹Ÿæœ‰ç‚¹åƒä¸‰å›½æ¼”ä¹‰ä¸­è¯¸è‘›äº®ç»™åˆ˜å…³å¼ çš„é”¦å›Šï¼›</p><ul><li>ç¬¬ä¸€ä¸ªé”¦å›Šï¼šè§ä¹”å›½è€ï¼Œå¹¶æŠŠåˆ˜å¤‡å¨¶äº²çš„äº‹æƒ…æå¾—ä¸œå´äººå°½çš†çŸ¥ã€‚</li><li>ç¬¬äºŒä¸ªé”¦å›Šï¼šç”¨è°è¨€ï¼ˆæ›¹æ“æ‰“è†å·ï¼‰éª—æ³¡åœ¨æ¸©æŸ”ä¹¡é‡Œçš„åˆ˜å¤‡å›å»ã€‚</li><li>ç¬¬ä¸‰ä¸ªé”¦å›Šï¼šè®©å­™å¤«äººæ‘†å¹³ä¸œå´çš„è¿½å…µï¼Œå¥¹æ˜¯å­™æƒå¦¹å¦¹ï¼Œä¸œå´å°†é¢†æƒ§å¥¹ä¸‰åˆ†ã€‚</li></ul><h2 id="å››ã€æ¡ˆä¾‹åœºæ™¯æ¨¡æ‹Ÿ" tabindex="-1"><a class="header-anchor" href="#å››ã€æ¡ˆä¾‹åœºæ™¯æ¨¡æ‹Ÿ" aria-hidden="true">#</a> å››ã€æ¡ˆä¾‹åœºæ™¯æ¨¡æ‹Ÿ</h2><p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-20-03.png" alt="åœºæ™¯æ¨¡æ‹Ÿï¼›å•†å“æ”¯ä»˜ä½¿ç”¨è¥é”€ä¼˜æƒ åˆ¸"></p><p><strong>åœ¨æœ¬æ¡ˆä¾‹ä¸­æˆ‘ä»¬æ¨¡æ‹Ÿåœ¨è´­ä¹°å•†å“æ—¶å€™ä½¿ç”¨çš„å„ç§ç±»å‹ä¼˜æƒ åˆ¸(æ»¡å‡ã€ç›´å‡ã€æŠ˜æ‰£ã€nå…ƒè´­)</strong></p><p>è¿™ä¸ªåœºæ™¯å‡ ä¹ä¹Ÿæ˜¯å¤§å®¶çš„ä¸€ä¸ªæ—¥å¸¸è´­ç‰©çœé’±æ¸ é“ï¼Œè´­ä¹°å•†å“çš„æ—¶å€™éƒ½å¸Œæœ›æ‰¾ä¸€äº›ä¼˜æƒ åˆ¸ï¼Œè®©è´­ä¹°çš„å•†å“æ›´åŠ å®æƒ ã€‚è€Œä¸”åˆ°äº†å¤§ä¿ƒçš„æ—¶å€™å°±ä¼šæœ‰æ›´å¤šçš„ä¼˜æƒ åˆ¸éœ€è¦è®¡ç®—é‚£äº›å•†å“ä¸€èµ·è´­ä¹°æ›´åŠ ä¼˜æƒ ï¼ï¼ï¼</p><p>è¿™æ ·çš„åœºæ™¯æœ‰æ—¶å€™ç”¨æˆ·ç”¨èµ·æ¥è¿˜æ˜¯è›®çˆ½çš„ï¼Œä½†æ˜¯æœ€åˆè¿™æ ·åŠŸèƒ½çš„è®¾å®šä»¥åŠäº§å“çš„ä¸æ–­è¿­ä»£ï¼Œå¯¹äºç¨‹åºå‘˜ğŸ‘¨â€ğŸ’»â€å¼€å‘è¿˜æ˜¯ä¸å¤ªå®¹æ˜“çš„ã€‚å› ä¸ºè¿™é‡ŒåŒ…æ‹¬äº†å¾ˆå¤šçš„è§„åˆ™å’Œä¼˜æƒ é€»è¾‘ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¨¡æ‹Ÿå…¶ä¸­çš„ä¸€ä¸ªè®¡ç®—ä¼˜æƒ çš„æ–¹å¼ï¼Œä½¿ç”¨ç­–ç•¥æ¨¡å¼æ¥å®ç°ã€‚</p><h2 id="äº”ã€ç”¨ä¸€å¨å¨ä»£ç å®ç°" tabindex="-1"><a class="header-anchor" href="#äº”ã€ç”¨ä¸€å¨å¨ä»£ç å®ç°" aria-hidden="true">#</a> äº”ã€ç”¨ä¸€å¨å¨ä»£ç å®ç°</h2><p><code>è¿™é‡Œæˆ‘ä»¬å…ˆä½¿ç”¨æœ€ç²—æš´çš„æ–¹å¼æ¥å®ç°åŠŸèƒ½</code></p><p>å¯¹äºä¼˜æƒ åˆ¸çš„è®¾è®¡æœ€åˆå¯èƒ½éå¸¸ç®€å•ï¼Œå°±æ˜¯ä¸€ä¸ªé‡‘é¢çš„æŠµæ‰£ï¼Œä¹Ÿæ²¡æœ‰ç°åœ¨è¿™ä¹ˆå¤šç§ç±»å‹ã€‚æ‰€ä»¥å¦‚æœæ²¡æœ‰è¿™æ ·åœºæ™¯çš„ç»éªŒè¯ï¼Œå¾€å¾€è®¾è®¡ä¸Šä¹Ÿæ˜¯éå¸¸ç®€å•çš„ã€‚ä½†éšç€äº§å“åŠŸèƒ½çš„ä¸æ–­è¿­ä»£ï¼Œå¦‚æœç¨‹åºæœ€åˆè®¾è®¡çš„ä¸å…·å¤‡å¾ˆå¥½çš„æ‰©å±•æ€§ï¼Œé‚£ä¹ˆå¾€åå°±ä¼šè¶Šæ¥è¶Šæ··ä¹±ã€‚</p><h3 id="_1-å·¥ç¨‹ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>design<span class="token operator">-</span><span class="token number">20</span><span class="token operator">-</span><span class="token number">01</span>
â””â”€â”€ src
    â””â”€â”€ main
        â””â”€â”€ java
            â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design
                â””â”€â”€ <span class="token class-name">CouponDiscountService</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>ä¸€å¨å¨</code>å·¥ç¨‹çš„ç»“æ„å¾ˆç®€å•ï¼Œä¹Ÿæ˜¯æœ€ç›´æ¥çš„é¢å‘è¿‡ç¨‹å¼€å‘æ–¹å¼ã€‚</li></ul><h3 id="_2-ä»£ç å®ç°" tabindex="-1"><a class="header-anchor" href="#_2-ä»£ç å®ç°" aria-hidden="true">#</a> 2. ä»£ç å®ç°</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * åšå®¢ï¼šhttps://bugstack.cn - æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼
 * å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ
 * Create by å°å‚…å“¥(fustack) @2020
 * ä¼˜æƒ åˆ¸æŠ˜æ‰£è®¡ç®—æ¥å£
 * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
 * ä¼˜æƒ åˆ¸ç±»å‹ï¼›
 * 1. ç›´å‡åˆ¸
 * 2. æ»¡å‡åˆ¸
 * 3. æŠ˜æ‰£åˆ¸
 * 4. nå…ƒè´­
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CouponDiscountService</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">discountAmount</span><span class="token punctuation">(</span><span class="token keyword">int</span> type<span class="token punctuation">,</span> <span class="token keyword">double</span> typeContent<span class="token punctuation">,</span> <span class="token keyword">double</span> skuPrice<span class="token punctuation">,</span> <span class="token keyword">double</span> typeExt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 1. ç›´å‡åˆ¸</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">==</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> skuPrice <span class="token operator">-</span> typeContent<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 2. æ»¡å‡åˆ¸</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">==</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>skuPrice <span class="token operator">&lt;</span> typeExt<span class="token punctuation">)</span> <span class="token keyword">return</span> skuPrice<span class="token punctuation">;</span>
            <span class="token keyword">return</span> skuPrice <span class="token operator">-</span> typeContent<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 3. æŠ˜æ‰£åˆ¸</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">==</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> skuPrice <span class="token operator">*</span> typeContent<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 4. nå…ƒè´­</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">==</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> typeContent<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token number">0D</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»¥ä¸Šæ˜¯ä¸åŒç±»å‹çš„ä¼˜æƒ åˆ¸è®¡ç®—æŠ˜æ‰£åçš„å®é™…é‡‘é¢ã€‚</li><li>å…¥å‚åŒ…æ‹¬ï¼›ä¼˜æƒ åˆ¸ç±»å‹ã€ä¼˜æƒ åˆ¸é‡‘é¢ã€å•†å“é‡‘é¢ï¼Œå› ä¸ºæœ‰äº›ä¼˜æƒ åˆ¸æ˜¯æ»¡å¤šå°‘å‡å°‘å¤šå°‘ï¼Œæ‰€ä»¥å¢åŠ äº†<code>typeExt</code>ç±»å‹ã€‚è¿™ä¹Ÿæ˜¯æ–¹æ³•çš„ä¸å¥½æ‰©å±•æ€§é—®é¢˜ã€‚</li><li>æœ€åæ˜¯æ•´ä¸ªçš„æ–¹æ³•ä½“ä¸­å¯¹ä¼˜æƒ åˆ¸æŠµæ‰£é‡‘é¢çš„å®ç°ï¼Œæœ€å¼€å§‹å¯èƒ½æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„ä¼˜æƒ åˆ¸ï¼Œåé¢éšç€äº§å“åŠŸèƒ½çš„å¢åŠ ï¼Œä¸æ–­çš„æ‰©å±•<code>if</code>è¯­å¥ã€‚å®é™…çš„ä»£ç å¯èƒ½è¦æ¯”è¿™ä¸ªå¤šå¾ˆå¤šã€‚</li></ul><h2 id="å…­ã€ç­–ç•¥æ¨¡å¼é‡æ„ä»£ç " tabindex="-1"><a class="header-anchor" href="#å…­ã€ç­–ç•¥æ¨¡å¼é‡æ„ä»£ç " aria-hidden="true">#</a> å…­ã€ç­–ç•¥æ¨¡å¼é‡æ„ä»£ç </h2><p><code>æ¥ä¸‹æ¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼æ¥è¿›è¡Œä»£ç ä¼˜åŒ–ï¼Œä¹Ÿç®—æ˜¯ä¸€æ¬¡å¾ˆå°çš„é‡æ„ã€‚</code></p><p>ä¸ä¸Šé¢é¢å‘æµç¨‹å¼çš„å¼€å‘è¿™é‡Œä¼šä½¿ç”¨è®¾è®¡æ¨¡å¼ï¼Œä¼˜æƒ ä»£ç ç»“æ„ï¼Œå¢å¼ºæ•´ä½“çš„æ‰©å±•æ€§ã€‚</p><h3 id="_1-å·¥ç¨‹ç»“æ„-1" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„-1" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>design<span class="token operator">-</span><span class="token number">20</span><span class="token operator">-</span><span class="token number">02</span>
â””â”€â”€ src
    â””â”€â”€ main
        â””â”€â”€ java
            â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design
                â”œâ”€â”€ event
                â”‚    â””â”€â”€ <span class="token class-name">MJCouponDiscount</span><span class="token punctuation">.</span>java
                â”‚    â””â”€â”€ <span class="token class-name">NYGCouponDiscount</span><span class="token punctuation">.</span>java
                â”‚    â””â”€â”€ <span class="token class-name">ZJCouponDiscount</span><span class="token punctuation">.</span>java
                â”‚    â””â”€â”€ <span class="token class-name">ZKCouponDiscount</span><span class="token punctuation">.</span>java
                â”œâ”€â”€ <span class="token class-name">Context</span><span class="token punctuation">.</span>java
                â””â”€â”€ <span class="token class-name">ICouponDiscount</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç­–ç•¥æ¨¡å¼æ¨¡å‹ç»“æ„</strong></p><p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-20-04.png" alt="ç­–ç•¥æ¨¡å¼æ¨¡å‹ç»“æ„"></p><ul><li>æ•´ä½“çš„ç»“æ„æ¨¡å¼å¹¶ä¸å¤æ‚ï¼Œä¸»è¦ä½“ç°çš„ä¸åŒç±»å‹çš„ä¼˜æƒ åˆ¸åœ¨è®¡ç®—ä¼˜æƒ åˆ¸æ–¹å¼çš„ä¸åŒè®¡ç®—ç­–ç•¥ã€‚</li><li>è¿™é‡ŒåŒ…æ‹¬ä¸€ä¸ªæ¥å£ç±»(<code>ICouponDiscount</code>)ä»¥åŠå››ç§ä¼˜æƒ åˆ¸ç±»å‹çš„å®ç°æ–¹å¼ã€‚</li><li>æœ€åæä¾›äº†ç­–ç•¥æ¨¡å¼çš„ä¸Šä¸‹æ§åˆ¶ç±»å¤„ç†ï¼Œæ•´ä½“çš„ç­–ç•¥æœåŠ¡ã€‚</li></ul><h3 id="_2-ä»£ç å®ç°-1" tabindex="-1"><a class="header-anchor" href="#_2-ä»£ç å®ç°-1" aria-hidden="true">#</a> 2. ä»£ç å®ç°</h3><h4 id="_2-1-ä¼˜æƒ åˆ¸æ¥å£" tabindex="-1"><a class="header-anchor" href="#_2-1-ä¼˜æƒ åˆ¸æ¥å£" aria-hidden="true">#</a> 2.1 ä¼˜æƒ åˆ¸æ¥å£</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ICouponDiscount</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * ä¼˜æƒ åˆ¸é‡‘é¢è®¡ç®—
     * <span class="token keyword">@param</span> <span class="token parameter">couponInfo</span> åˆ¸æŠ˜æ‰£ä¿¡æ¯ï¼›ç›´å‡ã€æ»¡å‡ã€æŠ˜æ‰£ã€Nå…ƒè´­
     * <span class="token keyword">@param</span> <span class="token parameter">skuPrice</span>   skué‡‘é¢
     * <span class="token keyword">@return</span>           ä¼˜æƒ åé‡‘é¢
     */</span>
    <span class="token class-name">BigDecimal</span> <span class="token function">discountAmount</span><span class="token punctuation">(</span><span class="token class-name">T</span> couponInfo<span class="token punctuation">,</span> <span class="token class-name">BigDecimal</span> skuPrice<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å®šä¹‰äº†ä¼˜æƒ åˆ¸æŠ˜æ‰£æ¥å£ï¼Œä¹Ÿå¢åŠ äº†æ³›å‹ç”¨äºä¸åŒç±»å‹çš„æ¥å£å¯ä»¥ä¼ é€’ä¸åŒçš„ç±»å‹å‚æ•°ã€‚</li><li>æ¥å£ä¸­åŒ…æ‹¬å•†å“é‡‘é¢ä»¥åŠå‡ºå‚è¿”å›æœ€ç»ˆæŠ˜æ‰£åçš„é‡‘é¢ï¼Œè¿™é‡Œåœ¨å®é™…å¼€å‘ä¸­ä¼šæ¯”ç°åœ¨çš„æ¥å£å‚æ•°å¤šä¸€äº›ï¼Œä½†æ ¸å¿ƒé€»è¾‘æ˜¯è¿™äº›ã€‚</li></ul><h4 id="_2-2-ä¼˜æƒ åˆ¸æ¥å£å®ç°" tabindex="-1"><a class="header-anchor" href="#_2-2-ä¼˜æƒ åˆ¸æ¥å£å®ç°" aria-hidden="true">#</a> 2.2 ä¼˜æƒ åˆ¸æ¥å£å®ç°</h4><p><strong>æ»¡å‡</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MJCouponDiscount</span> <span class="token keyword">implements</span> <span class="token class-name">ICouponDiscount</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span>  <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * æ»¡å‡è®¡ç®—
     * 1. åˆ¤æ–­æ»¡è¶³xå…ƒå-nå…ƒï¼Œå¦åˆ™ä¸å‡
     * 2. æœ€ä½æ”¯ä»˜é‡‘é¢1å…ƒ
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">BigDecimal</span> <span class="token function">discountAmount</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> couponInfo<span class="token punctuation">,</span> <span class="token class-name">BigDecimal</span> skuPrice<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> x <span class="token operator">=</span> couponInfo<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> o <span class="token operator">=</span> couponInfo<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// å°äºå•†å“é‡‘é¢æ¡ä»¶çš„ï¼Œç›´æ¥è¿”å›å•†å“åŸä»·</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>skuPrice<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> skuPrice<span class="token punctuation">;</span>
        <span class="token comment">// å‡å»ä¼˜æƒ é‡‘é¢åˆ¤æ–­</span>
        <span class="token class-name">BigDecimal</span> discountAmount <span class="token operator">=</span> skuPrice<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>discountAmount<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">BigDecimal</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">.</span><span class="token constant">ONE</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> discountAmount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç›´å‡</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZJCouponDiscount</span> <span class="token keyword">implements</span> <span class="token class-name">ICouponDiscount</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span>  <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * ç›´å‡è®¡ç®—
     * 1. ä½¿ç”¨å•†å“ä»·æ ¼å‡å»ä¼˜æƒ ä»·æ ¼
     * 2. æœ€ä½æ”¯ä»˜é‡‘é¢1å…ƒ
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">BigDecimal</span> <span class="token function">discountAmount</span><span class="token punctuation">(</span><span class="token class-name">Double</span> couponInfo<span class="token punctuation">,</span> <span class="token class-name">BigDecimal</span> skuPrice<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BigDecimal</span> discountAmount <span class="token operator">=</span> skuPrice<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>couponInfo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>discountAmount<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">BigDecimal</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">.</span><span class="token constant">ONE</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> discountAmount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æŠ˜æ‰£</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZKCouponDiscount</span> <span class="token keyword">implements</span> <span class="token class-name">ICouponDiscount</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>


    <span class="token doc-comment comment">/**
     * æŠ˜æ‰£è®¡ç®—
     * 1. ä½¿ç”¨å•†å“ä»·æ ¼ä¹˜ä»¥æŠ˜æ‰£æ¯”ä¾‹ï¼Œä¸ºæœ€åæ”¯ä»˜é‡‘é¢
     * 2. ä¿ç•™ä¸¤ä½å°æ•°
     * 3. æœ€ä½æ”¯ä»˜é‡‘é¢1å…ƒ
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">BigDecimal</span> <span class="token function">discountAmount</span><span class="token punctuation">(</span><span class="token class-name">Double</span> couponInfo<span class="token punctuation">,</span> <span class="token class-name">BigDecimal</span> skuPrice<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BigDecimal</span> discountAmount <span class="token operator">=</span> skuPrice<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>couponInfo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setScale</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">.</span><span class="token constant">ROUND_HALF_UP</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>discountAmount<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">BigDecimal</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">.</span><span class="token constant">ONE</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> discountAmount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Nå…ƒè´­</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NYGCouponDiscount</span> <span class="token keyword">implements</span> <span class="token class-name">ICouponDiscount</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * nå…ƒè´­è´­ä¹°
     * 1. æ— è®ºåŸä»·å¤šå°‘é’±éƒ½å›ºå®šé‡‘é¢è´­ä¹°
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">BigDecimal</span> <span class="token function">discountAmount</span><span class="token punctuation">(</span><span class="token class-name">Double</span> couponInfo<span class="token punctuation">,</span> <span class="token class-name">BigDecimal</span> skuPrice<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>couponInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»¥ä¸Šæ˜¯å››ç§ä¸åŒç±»å‹çš„ä¼˜æƒ åˆ¸è®¡ç®—æŠ˜æ‰£é‡‘é¢çš„ç­–ç•¥æ–¹å¼ï¼Œå¯ä»¥ä»ä»£ç ä¸­çœ‹åˆ°æ¯ä¸€ç§ä¼˜æƒ æ–¹å¼çš„ä¼˜æƒ é‡‘é¢ã€‚</li></ul><h4 id="_2-3-ç­–ç•¥æ§åˆ¶ç±»" tabindex="-1"><a class="header-anchor" href="#_2-3-ç­–ç•¥æ§åˆ¶ç±»" aria-hidden="true">#</a> 2.3 ç­–ç•¥æ§åˆ¶ç±»</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">ICouponDiscount</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> couponDiscount<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token class-name">ICouponDiscount</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> couponDiscount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>couponDiscount <span class="token operator">=</span> couponDiscount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">BigDecimal</span> <span class="token function">discountAmount</span><span class="token punctuation">(</span><span class="token class-name">T</span> couponInfo<span class="token punctuation">,</span> <span class="token class-name">BigDecimal</span> skuPrice<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> couponDiscount<span class="token punctuation">.</span><span class="token function">discountAmount</span><span class="token punctuation">(</span>couponInfo<span class="token punctuation">,</span> skuPrice<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç­–ç•¥æ¨¡å¼çš„æ§åˆ¶ç±»ä¸»è¦æ˜¯å¤–éƒ¨å¯ä»¥ä¼ é€’ä¸åŒçš„ç­–ç•¥å®ç°ï¼Œåœ¨é€šè¿‡ç»Ÿä¸€çš„æ–¹æ³•æ‰§è¡Œä¼˜æƒ ç­–ç•¥è®¡ç®—ã€‚</li><li>å¦å¤–è¿™é‡Œä¹Ÿå¯ä»¥åŒ…è£…æˆmapç»“æ„ï¼Œè®©å¤–éƒ¨åªéœ€è¦å¯¹åº”çš„æ³›å‹ç±»å‹å³å¯ä½¿ç”¨ç›¸åº”çš„æœåŠ¡ã€‚</li></ul><h3 id="_3-æµ‹è¯•éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_3-æµ‹è¯•éªŒè¯" aria-hidden="true">#</a> 3. æµ‹è¯•éªŒè¯</h3><h4 id="_3-1-ç¼–å†™æµ‹è¯•ç±»-ç›´å‡ä¼˜æƒ " tabindex="-1"><a class="header-anchor" href="#_3-1-ç¼–å†™æµ‹è¯•ç±»-ç›´å‡ä¼˜æƒ " aria-hidden="true">#</a> 3.1 ç¼–å†™æµ‹è¯•ç±»(ç›´å‡ä¼˜æƒ )</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_zj</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ç›´å‡ï¼›100-10ï¼Œå•†å“100å…ƒ</span>
    <span class="token class-name">Context</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ZJCouponDiscount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BigDecimal</span> discountAmount <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">discountAmount</span><span class="token punctuation">(</span><span class="token number">10D</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœï¼šç›´å‡ä¼˜æƒ åé‡‘é¢ {}&quot;</span><span class="token punctuation">,</span> discountAmount<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æµ‹è¯•ç»“æœ</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">15</span><span class="token operator">:</span><span class="token number">43</span><span class="token operator">:</span><span class="token number">22.035</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼šç›´å‡ä¼˜æƒ åé‡‘é¢ <span class="token number">90</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-ç¼–å†™æµ‹è¯•ç±»-æ»¡å‡ä¼˜æƒ " tabindex="-1"><a class="header-anchor" href="#_3-2-ç¼–å†™æµ‹è¯•ç±»-æ»¡å‡ä¼˜æƒ " aria-hidden="true">#</a> 3.2 ç¼–å†™æµ‹è¯•ç±»(æ»¡å‡ä¼˜æƒ )</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_mj</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ»¡100å‡10ï¼Œå•†å“100å…ƒ</span>
    <span class="token class-name">Context</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MJCouponDiscount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> mapReq <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mapReq<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mapReq<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;n&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;10&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BigDecimal</span> discountAmount <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">discountAmount</span><span class="token punctuation">(</span>mapReq<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœï¼šæ»¡å‡ä¼˜æƒ åé‡‘é¢ {}&quot;</span><span class="token punctuation">,</span> discountAmount<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æµ‹è¯•ç»“æœ</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">15</span><span class="token operator">:</span><span class="token number">43</span><span class="token operator">:</span><span class="token number">42.695</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼šæ»¡å‡ä¼˜æƒ åé‡‘é¢ <span class="token number">90</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-3-ç¼–å†™æµ‹è¯•ç±»-æŠ˜æ‰£ä¼˜æƒ " tabindex="-1"><a class="header-anchor" href="#_3-3-ç¼–å†™æµ‹è¯•ç±»-æŠ˜æ‰£ä¼˜æƒ " aria-hidden="true">#</a> 3.3 ç¼–å†™æµ‹è¯•ç±»(æŠ˜æ‰£ä¼˜æƒ )</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_zk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æŠ˜æ‰£9æŠ˜ï¼Œå•†å“100å…ƒ</span>
    <span class="token class-name">Context</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ZKCouponDiscount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BigDecimal</span> discountAmount <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">discountAmount</span><span class="token punctuation">(</span><span class="token number">0.9D</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœï¼šæŠ˜æ‰£9æŠ˜åé‡‘é¢ {}&quot;</span><span class="token punctuation">,</span> discountAmount<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æµ‹è¯•ç»“æœ</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">15</span><span class="token operator">:</span><span class="token number">44</span><span class="token operator">:</span><span class="token number">05.602</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼šæŠ˜æ‰£<span class="token number">9</span>æŠ˜åé‡‘é¢ <span class="token number">90.00</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-4-ç¼–å†™æµ‹è¯•ç±»-nå…ƒè´­ä¼˜æƒ " tabindex="-1"><a class="header-anchor" href="#_3-4-ç¼–å†™æµ‹è¯•ç±»-nå…ƒè´­ä¼˜æƒ " aria-hidden="true">#</a> 3.4 ç¼–å†™æµ‹è¯•ç±»(nå…ƒè´­ä¼˜æƒ )</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_nyg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// nå…ƒè´­ï¼›100-10ï¼Œå•†å“100å…ƒ</span>
    <span class="token class-name">Context</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">NYGCouponDiscount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BigDecimal</span> discountAmount <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">discountAmount</span><span class="token punctuation">(</span><span class="token number">90D</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœï¼šnå…ƒè´­ä¼˜æƒ åé‡‘é¢ {}&quot;</span><span class="token punctuation">,</span> discountAmount<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æµ‹è¯•ç»“æœ</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">15</span><span class="token operator">:</span><span class="token number">44</span><span class="token operator">:</span><span class="token number">24.700</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼šnå…ƒè´­ä¼˜æƒ åé‡‘é¢ <span class="token number">90</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»¥ä¸Šå››ç»„æµ‹è¯•åˆ†åˆ«éªŒè¯äº†ä¸åŒç±»å‹ä¼˜æƒ åˆ¸çš„ä¼˜æƒ ç­–ç•¥ï¼Œæµ‹è¯•ç»“æœæ˜¯æ»¡è¶³æˆ‘ä»¬çš„é¢„æœŸã€‚</li><li>è¿™é‡Œå››ç§ä¼˜æƒ åˆ¸æœ€ç»ˆéƒ½æ˜¯åœ¨åŸä»·<code>100å…ƒ</code>ä¸ŠæŠ˜æ‰£<code>10å…ƒ</code>ï¼Œæœ€ç»ˆæ”¯ä»˜<code>90å…ƒ</code>ã€‚</li></ul><h2 id="ä¸ƒã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€æ€»ç»“" aria-hidden="true">#</a> ä¸ƒã€æ€»ç»“</h2><ul><li>ä»¥ä¸Šçš„ç­–ç•¥æ¨¡å¼æ¡ˆä¾‹ç›¸å¯¹æ¥è¯´ä¸å¹¶ä¸å¤æ‚ï¼Œä¸»è¦çš„é€»è¾‘éƒ½æ˜¯ä½“ç°åœ¨å…³äºä¸åŒç§ç±»ä¼˜æƒ åˆ¸çš„è®¡ç®—æŠ˜æ‰£ç­–ç•¥ä¸Šã€‚ç»“æ„ç›¸å¯¹æ¥è¯´ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œåœ¨å®é™…çš„å¼€å‘ä¸­è¿™æ ·çš„è®¾è®¡æ¨¡å¼ä¹Ÿæ˜¯éå¸¸å¸¸ç”¨çš„ã€‚å¦å¤–è¿™æ ·çš„è®¾è®¡ä¸å‘½ä»¤æ¨¡å¼ã€é€‚é…å™¨æ¨¡å¼ç»“æ„ç›¸ä¼¼ï¼Œä½†æ˜¯æ€è·¯æ˜¯æœ‰å·®å¼‚çš„ã€‚</li><li>é€šè¿‡ç­–ç•¥è®¾è®¡æ¨¡å¼çš„ä½¿ç”¨å¯ä»¥æŠŠæˆ‘ä»¬æ–¹æ³•ä¸­çš„ifè¯­å¥ä¼˜åŒ–æ‰ï¼Œå¤§é‡çš„ifè¯­å¥ä½¿ç”¨ä¼šè®©ä»£ç éš¾ä»¥æ‰©å±•ï¼Œä¹Ÿä¸å¥½ç»´æŠ¤ï¼ŒåŒæ—¶åœ¨åæœŸé‡åˆ°å„ç§é—®é¢˜ä¹Ÿå¾ˆéš¾ç»´æŠ¤ã€‚åœ¨ä½¿ç”¨è¿™æ ·çš„è®¾è®¡æ¨¡å¼åå¯ä»¥å¾ˆå¥½çš„æ»¡è¶³éš”ç¦»æ€§ä¸å’Œæ‰©å±•æ€§ï¼Œå¯¹äºä¸æ–­æ–°å¢çš„éœ€æ±‚ä¹Ÿéå¸¸æ–¹ä¾¿æ‰¿æ¥ã€‚</li><li><code>ç­–ç•¥æ¨¡å¼</code>ã€<code>é€‚é…å™¨æ¨¡å¼</code>ã€<code>ç»„åˆæ¨¡å¼</code>ç­‰ï¼Œåœ¨ä¸€äº›ç»“æ„ä¸Šæ˜¯æ¯”è¾ƒç›¸ä¼¼çš„ï¼Œä½†æ˜¯æ¯ä¸€ä¸ªæ¨¡å¼æ˜¯æœ‰è‡ªå·±çš„é€»è¾‘ç‰¹ç‚¹ï¼Œåœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­æœ€ä½³çš„æ–¹å¼æ˜¯ç»è¿‡è¾ƒå¤šçš„å®è·µæ¥å¸å–ç»éªŒï¼Œä¸ºåç»­çš„ç ”å‘è®¾è®¡æä¾›æ›´å¥½çš„æŠ€æœ¯è¾“å‡ºã€‚</li></ul>`,63);function j(B,C){const a=c("ExternalLinkIcon");return o(),l("div",null,[u,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),d,s("åšå®¢ï¼š"),n("a",k,[s("https://bugstack.cn"),e(a)])]),r,m,v,n("ol",null,[b,g,n("li",null,[s("æ¶‰åŠå·¥ç¨‹ä¸‰ä¸ªï¼Œå¯ä»¥é€šè¿‡å…³æ³¨"),h,s("ï¼š"),n("a",w,[y,e(a)]),s("ï¼Œå›å¤"),f,s("è·å–(æ‰“å¼€è·å–çš„é“¾æ¥ï¼Œæ‰¾åˆ°åºå·18)")])]),D,n("ul",null,[n("li",null,[s("å›¾ç‰‡æ¥è‡ªï¼š"),n("a",_,[s("https://refactoringguru.cn/design-patterns/strategy"),e(a)])])]),x])}const I=p(i,[["render",j],["__file","2020-07-05-zhongxue Java shejimoshiã€Šshizhanceluemoshiã€‹.html.vue"]]);export{I as default};
