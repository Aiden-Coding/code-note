import{_ as p,r as o,o as c,c as l,a as n,b as s,d as e,e as t}from"./app-3RcBQnkC.js";const i={},u=n("h1",{id:"é‡å­¦-java-è®¾è®¡æ¨¡å¼-å®æˆ˜ä»£ç†æ¨¡å¼ã€Œæ¨¡æ‹Ÿmybatis-springä¸­å®šä¹‰daoæ¥å£-ä½¿ç”¨ä»£ç†ç±»æ–¹å¼æ“ä½œæ•°æ®åº“åŸç†å®ç°åœºæ™¯ã€",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#é‡å­¦-java-è®¾è®¡æ¨¡å¼-å®æˆ˜ä»£ç†æ¨¡å¼ã€Œæ¨¡æ‹Ÿmybatis-springä¸­å®šä¹‰daoæ¥å£-ä½¿ç”¨ä»£ç†ç±»æ–¹å¼æ“ä½œæ•°æ®åº“åŸç†å®ç°åœºæ™¯ã€","aria-hidden":"true"},"#"),s(" é‡å­¦ Java è®¾è®¡æ¨¡å¼ï¼šå®æˆ˜ä»£ç†æ¨¡å¼ã€Œæ¨¡æ‹Ÿmybatis-springä¸­å®šä¹‰DAOæ¥å£ï¼Œä½¿ç”¨ä»£ç†ç±»æ–¹å¼æ“ä½œæ•°æ®åº“åŸç†å®ç°åœºæ™¯ã€")],-1),r=n("br",null,null,-1),k={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},d=n("blockquote",null,[n("p",null,"æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„")],-1),m=n("iframe",{id:"B-Video",src:"//player.bilibili.com/player.html?aid=383394282&bvid=BV1YZ4y117S7&cid=583161672&page=1",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true",width:"100%",height:"480"}," ",-1),v=t('<h2 id="ä¸€ã€å‰è¨€" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å‰è¨€" aria-hidden="true">#</a> ä¸€ã€å‰è¨€</h2><p><code>éš¾ä»¥è·¨è¶Šçš„ç“¶é¢ˆæœŸï¼ŒæŠŠä½ æ‹¿ææ»´æ­»æ­»çš„ï¼</code></p><p>ç¼–ç¨‹å¼€å‘å­¦ä¹ è¿‡ç¨‹ä¸­é‡åˆ°çš„ç“¶é¢ˆæœŸï¼Œå¾€å¾€æ˜¯ç”±äºçœ‹ä¸åˆ°å‰è¿›çš„æ–¹å‘ã€‚è¿™ä¸ªæ—¶å€™ä½ ç‰¹åˆ«å¸Œæœ›èƒ½æœ‰äººå‘Šè¯‰ä½ ï¼Œä½ è¿˜æ¬ ç¼ºäº›ä»€ä¹ˆæœç€å“ªä¸ªæ–¹å‘åŠªåŠ›ã€‚è€Œå¯¼è‡´è¿™ä¸€é—®é¢˜çš„ä¸»è¦åŸå› æ˜¯ç”±äºæ—¥å¸¸çš„ä¸šåŠ¡å¼€å‘å¤ªè¿‡äºå¤åˆ¶è¿‡å»ï¼Œæ—¥å¤ä¸€æ—¥çš„é‡å¤ã€‚æ²¡æœ‰å¤ªå¤šçš„æŒ‘æˆ˜ï¼Œä¹Ÿæ²¡å‚ä¸è¿‡è¾ƒå¤§ä½“é‡çš„ä¸šåŠ¡åœºæ™¯ï¼Œé™¤äº†è¿™äº›å¼€å‘åœºæ™¯å› ç´ å¤–ï¼Œè¿˜æœ‰ç¼ºå°‘ç»„å†…çš„æŠ€æœ¯æ°›å›´å’ŒæŠ€æœ¯åˆ†äº«ï¼Œæ²¡æœ‰äººåšä¼ æ’­å’Œå¸ƒé“è€…ï¼Œä¹Ÿç¼ºå°‘è‡ªå·±å¯¹å„é¡¹æŠ€æœ¯å­¦ä¹ çš„çƒ­æƒ…ï¼Œä»è€Œå¯¼è‡´ä¸€ç›´æ¸¸è¡åœ¨ç“¶é¢ˆä¹‹ä¸‹ï¼Œéš¾ä»¥æå‡ã€‚</p><p><code>å°å…¬å¸ä¸å¤§å…¬å¸ï¼Œé€‰æ‹©å“ªä¸ªï¼Ÿ</code></p><p>åˆ¨é™¤æ‰è–ªèµ„ä»¥å¤–ä½ ä¼šé€‰æ‹©ä»€ä¹ˆï¼Œæ˜¯ä¸æœ‰äººå»ºè®®å°å…¬å¸ï¼Œå› ä¸ºå¯ä»¥æ¥è§¦åˆ°å„ä¸ªç¯å¢ƒï¼Œä¹Ÿæœ‰äººå»ºè®®å¤§å…¬å¸ï¼Œå› ä¸ºæ­£è§„ä½“é‡å¤§å¯ä»¥å­¦ä¹ åˆ°æ›´å¤šã€‚æœ‰äº›æ—¶å€™ä½ çš„æŠ€æœ¯æˆé•¿ç¼“æ…¢ä¹Ÿæ˜¯å› ä¸ºä½ çš„ä¸åŒé€‰æ‹©è€Œå¯¼è‡´çš„ï¼Œå°å…¬å¸ç¡®å®è¦æ¥è§¦å„ä¸ªç¯å¢ƒï¼Œä½†å¾€å¾€å¦‚æœä½ æ‰€åšçš„ä¸šåŠ¡ä½“é‡ä¸é«˜ï¼Œé‚£ä¹ˆä½ ä¼šç”¨åˆ°çš„æŠ€æœ¯æ ˆå°±ä¼šç›¸å¯¹è¾ƒå°‘ï¼ŒåŒæ—¶ä¹Ÿä¼šæŠ€æœ¯æ ˆç ”ç©¶çš„æ·±åº¦ä¹Ÿä¼šè¾ƒæµ…ã€‚å¤§å…¬å¸ä¸­ç¡®å®æœ‰æ—¶å€™ä½ ä¸éœ€è¦å»å…³å¿ƒä¸€ä¸ªé›†ç¾¤çš„éƒ¨ç½²å’Œç»´æŠ¤ã€ä¸€ä¸ªä¸­é—´ä»¶çš„å¼€å‘ã€å…¨å¥—æœåŠ¡ç›‘æ§ç­‰ç­‰ï¼Œä½†å¦‚æœä½ æ„¿æ„äº†è§£è¿™äº›æŠ€æœ¯åœ¨å†…éƒ¨éƒ½æ˜¯å…¬å¼€çš„ï¼Œä½ ä¼šæ‹¥æœ‰æ— é™çš„æŠ€æœ¯è¥å…»å¯ä»¥è¡¥å……ã€‚è€Œè¿™æœ€ä¸»è¦çš„æ˜¯æå‡è§†é‡å’Œäº‹ä¸šã€‚</p><p><code>é™¤äº†ä¸šåŠ¡ä¸­çš„CRUDå¼€å‘ï¼Œæœ‰äº›æŠ€æœ¯ä½ çœŸçš„å¾ˆéš¾æ¥è§¦åˆ°ï¼</code></p><p>å¯èƒ½å¾ˆå¤šå°ä¼™ä¼´è®¤ä¸ºæŠ€æœ¯å¼€å‘å°±æ˜¯æ‰¿æ¥ä¸‹äº§å“éœ€æ±‚ï¼Œå†™å†™CRUDï¼Œä¸ä¼šçš„ç™¾åº¦ä¸€ä¸‹ï¼Œå°±å®Œäº‹äº†ï¼Œæ€»è§‰å¾—åˆ«äººé—®çš„ä¸œè¥¿åƒå†é€ ç«ç®­ä¸€æ ·ã€‚ä½†åœ¨é«˜ä½“é‡ã€é«˜å¹¶å‘çš„ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œæ¯ä¸€æ¬¡çš„å‹æµ‹ä¼˜åŒ–ï¼Œæ€§èƒ½æå‡ï¼Œéƒ½åƒåœ¨ç ”ç©¶ä¸€é“æ•°å­¦é¢˜ä¸€æ ·ï¼Œåå¤çš„é”¤ç‚¼ï¼Œå‹æ¦¨æ€§èƒ½ã€‚ä¸æ–­çš„æ·±ç©¶ï¼Œæ‰¾åˆ°æœ€åˆé€‚çš„è®¾è®¡ã€‚é™¤äº†è¿™äº›ä¼˜åŒ–æå‡å¤–ï¼Œè¿˜æœ‰é‚£ä¹ˆå¹¿é˜”çš„æŠ€æœ¯ä½“ç³»æ ˆï¼Œéƒ½å¯èƒ½å› ä¸ºä½ åªæ˜¯æ³¨é‡CRUDè€Œè¢«å¿½ç•¥ï¼›å­—èŠ‚ç ç¼–ç¨‹ã€é¢†åŸŸé©±åŠ¨è®¾è®¡æ¶æ„ã€ä»£ç†æ¨¡å¼ä¸­é—´ä»¶å¼€å‘ã€JVMè™šæ‹Ÿæœºå®ç°åŸç†ç­‰ç­‰ã€‚</p><h2 id="äºŒã€å¼€å‘ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#äºŒã€å¼€å‘ç¯å¢ƒ" aria-hidden="true">#</a> äºŒã€å¼€å‘ç¯å¢ƒ</h2>',8),b=n("li",null,"JDK 1.8",-1),g=n("li",null,"Idea + Maven",-1),h=n("li",null,"Spring 4.3.24.RELEASE",-1),f=n("strong",null,"å…¬ä¼—å·",-1),y={href:"https://bugstack.cn/assets/images/qrcode.png",target:"_blank",rel:"noopener noreferrer"},w=n("code",null,"bugstackè™«æ´æ ˆ",-1),_=n("code",null,"æºç ä¸‹è½½",-1),B=n("table",null,[n("thead",null,[n("tr",null,[n("th",null,"å·¥ç¨‹"),n("th",null,"æè¿°")])]),n("tbody",null,[n("tr",null,[n("td",null,"itstack-demo-design-12-00"),n("td",null,"æ¨¡æ‹ŸMyBatiså¼€å‘ä¸­é—´ä»¶ä»£ç†ç±»éƒ¨åˆ†")])])],-1),x=n("h2",{id:"ä¸‰ã€ä»£ç†æ¨¡å¼ä»‹ç»",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ä¸‰ã€ä»£ç†æ¨¡å¼ä»‹ç»","aria-hidden":"true"},"#"),s(" ä¸‰ã€ä»£ç†æ¨¡å¼ä»‹ç»")],-1),D=n("p",null,[n("img",{src:"https://bugstack.cn/assets/images/2020/itstack-demo-design-12-01.png",alt:"ä»£ç†æ¨¡å¼ï¼Œå›¾ç‰‡æ¥è‡ª refactoringguru.cn"})],-1),q={href:"https://refactoringguru.cn/design-patterns/proxy",target:"_blank",rel:"noopener noreferrer"},j=t(`<p>ä»£ç†æ¨¡å¼æœ‰ç‚¹åƒè€å¤§å’Œå°å¼Ÿï¼Œä¹Ÿæœ‰ç‚¹åƒåˆ†é”€å•†ã€‚ä¸»è¦è§£å†³çš„æ˜¯é—®é¢˜æ˜¯ä¸ºæŸäº›èµ„æºçš„è®¿é—®ã€å¯¹è±¡çš„ç±»çš„æ˜“ç”¨æ“ä½œä¸Šæä¾›æ–¹ä¾¿ä½¿ç”¨çš„ä»£ç†æœåŠ¡ã€‚è€Œè¿™ç§è®¾è®¡æ€æƒ³çš„æ¨¡å¼ç»å¸¸ä¼šå‡ºç°åœ¨æˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼Œæˆ–è€…ä½ ç”¨åˆ°è¿‡çš„ç»„ä»¶ä¸­ï¼Œå®ƒä»¬éƒ½æä¾›ç»™ä½ ä¸€ç§éå¸¸ç®€å•æ˜“ç”¨çš„æ–¹å¼æ§åˆ¶åŸæœ¬ä½ éœ€è¦ç¼–å†™å¾ˆå¤šä»£ç çš„è¿›è¡Œä½¿ç”¨çš„æœåŠ¡ç±»ã€‚</p><p>ç±»ä¼¼è¿™æ ·çš„åœºæ™¯å¯ä»¥æƒ³åˆ°ï¼›</p><ol><li>ä½ çš„æ•°æ®åº“è®¿é—®å±‚é¢ç»å¸¸ä¼šæä¾›ä¸€ä¸ªè¾ƒä¸ºåŸºç¡€çš„åº”ç”¨ï¼Œä»¥æ­¤æ¥å‡å°‘åº”ç”¨æœåŠ¡æ‰©å®¹æ—¶ä¸è‡³äºæ•°æ®åº“è¿æ¥æ•°æš´å¢ã€‚</li><li>ä½¿ç”¨è¿‡çš„ä¸€äº›ä¸­é—´ä»¶ä¾‹å¦‚ï¼›RPCæ¡†æ¶ï¼Œåœ¨æ‹¿åˆ°jaråŒ…å¯¹æ¥å£çš„æè¿°åï¼Œä¸­é—´ä»¶ä¼šåœ¨æœåŠ¡å¯åŠ¨çš„æ—¶å€™ç”Ÿæˆå¯¹åº”çš„ä»£ç†ç±»ï¼Œå½“è°ƒç”¨æ¥å£çš„æ—¶å€™ï¼Œå®é™…æ˜¯é€šè¿‡ä»£ç†ç±»å‘å‡ºçš„socketä¿¡æ¯è¿›è¡Œé€šè¿‡ã€‚</li><li>å¦å¤–åƒæˆ‘ä»¬å¸¸ç”¨çš„<code>MyBatis</code>ï¼ŒåŸºæœ¬æ˜¯å®šä¹‰æ¥å£ä½†æ˜¯ä¸éœ€è¦å†™å®ç°ç±»ï¼Œå°±å¯ä»¥å¯¹<code>xml</code>æˆ–è€…è‡ªå®šä¹‰æ³¨è§£é‡Œçš„<code>sql</code>è¯­å¥è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œã€‚</li></ol><h2 id="å››ã€æ¡ˆä¾‹åœºæ™¯æ¨¡æ‹Ÿ" tabindex="-1"><a class="header-anchor" href="#å››ã€æ¡ˆä¾‹åœºæ™¯æ¨¡æ‹Ÿ" aria-hidden="true">#</a> å››ã€æ¡ˆä¾‹åœºæ™¯æ¨¡æ‹Ÿ</h2><p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-12-02.png" alt="åœºæ™¯æ¨¡æ‹Ÿï¼›å®ç°mybatis-springä¸­ä»£ç†ç±»ç”Ÿæˆéƒ¨åˆ†"></p><p><strong>åœ¨æœ¬æ¡ˆä¾‹ä¸­æˆ‘ä»¬æ¨¡æ‹Ÿå®ç°mybatis-springä¸­ä»£ç†ç±»ç”Ÿæˆéƒ¨åˆ†</strong></p><p>å¯¹äºMybatisçš„ä½¿ç”¨ä¸­åªéœ€è¦å®šä¹‰æ¥å£ä¸éœ€è¦å†™å®ç°ç±»å°±å¯ä»¥å®Œæˆå¢åˆ æ”¹æŸ¥æ“ä½œï¼Œæœ‰ç–‘é—®çš„å°ä¼™ä¼´ï¼Œåœ¨æœ¬ç« èŠ‚ä¸­å°±å¯ä»¥å­¦ä¹ åˆ°è¿™éƒ¨åˆ†çŸ¥è¯†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šé€šè¿‡å®ç°ä¸€ä¸ªè¿™æ ·çš„ä»£ç†ç±»äº¤ç»™springç®¡ç†çš„æ ¸å¿ƒè¿‡ç¨‹ï¼Œæ¥è®²è¿°ä»£ç†ç±»æ¨¡å¼ã€‚</p><p>è¿™æ ·çš„æ¡ˆä¾‹åœºæ™¯åœ¨å®é™…çš„ä¸šåŠ¡å¼€å‘ä¸­å…¶å®ä¸å¤šï¼Œå› ä¸ºè¿™æ˜¯å°†è¿™ç§æ€æƒ³è¿ç”¨åœ¨ä¸­é—´ä»¶å¼€å‘ä¸Šï¼Œè€Œå¾ˆå¤šå°ä¼™ä¼´ç»å¸¸æ˜¯åšä¸šåŠ¡å¼€å‘ï¼Œæ‰€ä»¥å¯¹Springçš„beanå®šä¹‰ä»¥åŠæ³¨å†Œå’Œå¯¹ä»£ç†ä»¥åŠåå°„è°ƒç”¨çš„çŸ¥è¯†äº†è§£çš„ç›¸å¯¹è¾ƒå°‘ã€‚ä½†å¯ä»¥é€šè¿‡æœ¬ç« èŠ‚ä½œä¸ºä¸€ä¸ªå…¥é—¨å­¦ä¹ ï¼Œé€æ­¥äº†è§£ã€‚</p><h2 id="äº”ã€ä»£ç†ç±»æ¨¡å¼å®ç°è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#äº”ã€ä»£ç†ç±»æ¨¡å¼å®ç°è¿‡ç¨‹" aria-hidden="true">#</a> äº”ã€ä»£ç†ç±»æ¨¡å¼å®ç°è¿‡ç¨‹</h2><p>æ¥ä¸‹æ¥ä¼šä½¿ç”¨ä»£ç†ç±»æ¨¡å¼æ¥æ¨¡æ‹Ÿå®ç°ä¸€ä¸ªMybatisä¸­å¯¹ç±»çš„ä»£ç†è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯åªéœ€è¦å®šä¹‰æ¥å£ï¼Œå°±å¯ä»¥å…³è”åˆ°æ–¹æ³•æ³¨è§£ä¸­çš„<code>sql</code>è¯­å¥å®Œæˆå¯¹æ•°æ®åº“çš„æ“ä½œã€‚</p><p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€äº›çŸ¥è¯†ç‚¹ï¼›</p><ol><li><code>BeanDefinitionRegistryPostProcessor</code>ï¼Œspringçš„æ¥å£ç±»ç”¨äºå¤„ç†å¯¹beançš„å®šä¹‰æ³¨å†Œã€‚</li><li><code>GenericBeanDefinition</code>ï¼Œå®šä¹‰beançš„ä¿¡æ¯ï¼Œåœ¨mybatis-springä¸­ä½¿ç”¨åˆ°çš„æ˜¯ï¼›<code>ScannedGenericBeanDefinition</code> ç•¥æœ‰ä¸åŒã€‚</li><li><code>FactoryBean</code>ï¼Œç”¨äºå¤„ç†beanå·¥å‚çš„ç±»ï¼Œè¿™ä¸ªç±»éå¸¸è§ã€‚</li></ol><h3 id="_1-å·¥ç¨‹ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>design<span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">00</span>
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â”œâ”€â”€ java
    â”‚   â”‚   â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design
    â”‚   â”‚       â”œâ”€â”€ agent
    â”‚   â”‚       â”‚	â”œâ”€â”€ <span class="token class-name">MapperFactoryBean</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â”‚	â”œâ”€â”€ <span class="token class-name">RegisterBeanFactory</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â”‚	â””â”€â”€ <span class="token class-name">Select</span><span class="token punctuation">.</span>java
    â”‚   â”‚       â””â”€â”€ <span class="token class-name">IUserDao</span><span class="token punctuation">.</span>java
    â”‚   â””â”€â”€ resources	
    â”‚       â””â”€â”€ spring<span class="token operator">-</span>config<span class="token punctuation">.</span>xml
    â””â”€â”€ test
        â””â”€â”€ java
            â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>test
                â””â”€â”€ <span class="token class-name">ApiTest</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä»£ç†æ¨¡å¼ä¸­é—´ä»¶æ¨¡å‹ç»“æ„</strong></p><p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-12-03.png" alt="ä»£ç†æ¨¡å¼ä¸­é—´ä»¶æ¨¡å‹ç»“æ„"></p><ul><li>æ­¤æ¨¡å‹ä¸­æ¶‰åŠçš„ç±»å¹¶ä¸å¤šï¼Œä½†éƒ½æ˜¯æŠ½ç¦»å‡ºæ¥çš„æ ¸å¿ƒå¤„ç†ç±»ã€‚ä¸»è¦çš„äº‹æƒ…å°±æ˜¯å¯¹ç±»çš„ä»£ç†å’Œæ³¨å†Œåˆ°springä¸­ã€‚</li><li>ä¸Šå›¾ä¸­æœ€ä¸Šé¢æ˜¯å…³äºä¸­é—´ä»¶çš„å®ç°éƒ¨åˆ†ï¼Œä¸‹é¢å¯¹åº”çš„æ˜¯åŠŸèƒ½çš„ä½¿ç”¨ã€‚</li></ul><h3 id="_2-ä»£ç å®ç°" tabindex="-1"><a class="header-anchor" href="#_2-ä»£ç å®ç°" aria-hidden="true">#</a> 2. ä»£ç å®ç°</h3><h4 id="_2-1-è‡ªå®šä¹‰æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#_2-1-è‡ªå®šä¹‰æ³¨è§£" aria-hidden="true">#</a> 2.1 è‡ªå®šä¹‰æ³¨è§£</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Select</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>  <span class="token comment">// sqlè¯­å¥</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ¨¡æ‹Ÿmybatis-springä¸­çš„è‡ªå®šä¹‰æ³¨è§£ï¼Œç”¨äºä½¿ç”¨åœ¨æ–¹æ³•å±‚é¢ã€‚</li></ul><h4 id="_2-2-daoå±‚æ¥å£" tabindex="-1"><a class="header-anchor" href="#_2-2-daoå±‚æ¥å£" aria-hidden="true">#</a> 2.2 Daoå±‚æ¥å£</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IUserDao</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select userName from user where id = #{uId}&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span> <span class="token function">queryUserInfo</span><span class="token punctuation">(</span><span class="token class-name">String</span> uId<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™é‡Œå®šä¹‰ä¸€ä¸ªDaoå±‚æ¥å£ï¼Œå¹¶æŠŠè‡ªå®šä¹‰æ³¨è§£æ·»åŠ ä¸Šã€‚è¿™ä¸ä½ ä½¿ç”¨çš„mybatisç»„ä»¶æ˜¯ä¸€æ ·çš„ã€‚</li><li>2.1å’Œ2.2æ˜¯æˆ‘ä»¬çš„å‡†å¤‡å·¥ä½œï¼Œåé¢å¼€å§‹å®ç°ä¸­é—´ä»¶åŠŸèƒ½éƒ¨åˆ†ã€‚</li></ul><h4 id="_2-3-ä»£ç†ç±»å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#_2-3-ä»£ç†ç±»å®šä¹‰" aria-hidden="true">#</a> 2.3 ä»£ç†ç±»å®šä¹‰</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MapperFactoryBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">FactoryBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">MapperFactoryBean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> mapperInterface<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">MapperFactoryBean</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> mapperInterface<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mapperInterface <span class="token operator">=</span> mapperInterface<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">InvocationHandler</span> handler <span class="token operator">=</span> <span class="token punctuation">(</span>proxy<span class="token punctuation">,</span> method<span class="token punctuation">,</span> args<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">Select</span> select <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Select</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;SQLï¼š{}&quot;</span><span class="token punctuation">,</span> select<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;#{uId}&quot;</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;,å°å‚…å“¥,bugstack.cn - æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>mapperInterface<span class="token punctuation">}</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">getObjectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mapperInterface<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¦‚æœä½ æœ‰é˜…è¯»è¿‡mybatisæºç ï¼Œæ˜¯å¯ä»¥çœ‹åˆ°è¿™æ ·çš„ä¸€ä¸ªç±»ï¼›<code>MapperFactoryBean</code>ï¼Œè¿™é‡Œæˆ‘ä»¬ä¹Ÿæ¨¡æ‹Ÿä¸€ä¸ªè¿™æ ·çš„ç±»ï¼Œåœ¨é‡Œé¢å®ç°æˆ‘ä»¬å¯¹ä»£ç†ç±»çš„å®šä¹‰ã€‚</li><li>é€šè¿‡ç»§æ‰¿<code>FactoryBean</code>ï¼Œæä¾›beanå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ–¹æ³•ï¼›<code>T getObject()</code>ã€‚</li><li>åœ¨æ–¹æ³•<code>getObject()</code>ä¸­æä¾›ç±»çš„ä»£ç†ä»¥åŠæ¨¡æ‹Ÿå¯¹sqlè¯­å¥çš„å¤„ç†ï¼Œè¿™é‡ŒåŒ…å«äº†ç”¨æˆ·è°ƒç”¨daoå±‚æ–¹æ³•æ—¶å€™çš„å¤„ç†é€»è¾‘ã€‚</li><li>è¿˜æœ‰æœ€ä¸Šé¢æˆ‘ä»¬æä¾›æ„é€ å‡½æ•°æ¥é€ä¼ éœ€è¦è¢«ä»£ç†ç±»ï¼Œ<code>Class&lt;T&gt; mapperInterface</code>ï¼Œåœ¨mybatisä¸­ä¹Ÿæ˜¯ä½¿ç”¨è¿™æ ·çš„æ–¹å¼è¿›è¡Œé€ä¼ ã€‚</li><li>å¦å¤–<code>getObjectType()</code>æä¾›å¯¹è±¡ç±»å‹åé¦ˆï¼Œä»¥åŠ<code>isSingleton()</code>è¿”å›ç±»æ˜¯å•ä¾‹çš„ã€‚</li></ul><h4 id="_2-4-å°†beanå®šä¹‰æ³¨å†Œåˆ°springå®¹å™¨" tabindex="-1"><a class="header-anchor" href="#_2-4-å°†beanå®šä¹‰æ³¨å†Œåˆ°springå®¹å™¨" aria-hidden="true">#</a> 2.4 å°†Beanå®šä¹‰æ³¨å†Œåˆ°Springå®¹å™¨</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RegisterBeanFactory</span> <span class="token keyword">implements</span> <span class="token class-name">BeanDefinitionRegistryPostProcessor</span> <span class="token punctuation">{</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postProcessBeanDefinitionRegistry</span><span class="token punctuation">(</span><span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        
        <span class="token class-name">GenericBeanDefinition</span> beanDefinition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericBeanDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        beanDefinition<span class="token punctuation">.</span><span class="token function">setBeanClass</span><span class="token punctuation">(</span><span class="token class-name">MapperFactoryBean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        beanDefinition<span class="token punctuation">.</span><span class="token function">setScope</span><span class="token punctuation">(</span><span class="token string">&quot;singleton&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        beanDefinition<span class="token punctuation">.</span><span class="token function">getConstructorArgumentValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addGenericArgumentValue</span><span class="token punctuation">(</span><span class="token class-name">IUserDao</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">BeanDefinitionHolder</span> definitionHolder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BeanDefinitionHolder</span><span class="token punctuation">(</span>beanDefinition<span class="token punctuation">,</span> <span class="token string">&quot;userDao&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BeanDefinitionReaderUtils</span><span class="token punctuation">.</span><span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span>definitionHolder<span class="token punctuation">,</span> registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postProcessBeanFactory</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableListableBeanFactory</span> configurableListableBeanFactory<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token comment">// left intentionally blank</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™é‡Œæˆ‘ä»¬å°†ä»£ç†çš„beanäº¤ç»™springå®¹å™¨ç®¡ç†ï¼Œä¹Ÿå°±å¯ä»¥éå¸¸æ–¹ä¾¿è®©æˆ‘ä»¬å¯ä»¥è·å–åˆ°ä»£ç†çš„beanã€‚è¿™éƒ¨åˆ†æ˜¯springä¸­å…³äºä¸€ä¸ªbeanæ³¨å†Œè¿‡ç¨‹çš„æºç ã€‚</li><li><code>GenericBeanDefinition</code>ï¼Œç”¨äºå®šä¹‰ä¸€ä¸ªbeançš„åŸºæœ¬ä¿¡æ¯<code>setBeanClass(MapperFactoryBean.class);</code>ï¼Œä¹ŸåŒ…æ‹¬å¯ä»¥é€ä¼ ç»™æ„é€ å‡½æ•°ä¿¡æ¯<code>addGenericArgumentValue(IUserDao.class);</code></li><li>æœ€åä½¿ç”¨ <code>BeanDefinitionReaderUtils.registerBeanDefinition</code>ï¼Œè¿›è¡Œbeançš„æ³¨å†Œï¼Œä¹Ÿå°±æ˜¯æ³¨å†Œåˆ°<code>DefaultListableBeanFactory</code>ä¸­ã€‚</li></ul><h4 id="_2-5-é…ç½®æ–‡ä»¶spring-config" tabindex="-1"><a class="header-anchor" href="#_2-5-é…ç½®æ–‡ä»¶spring-config" aria-hidden="true">#</a> 2.5 é…ç½®æ–‡ä»¶spring-config</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">&quot;1.0&quot;</span> encoding<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>beans xmlns<span class="token operator">=</span><span class="token string">&quot;http://www.springframework.org/schema/beans&quot;</span>
       xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
       xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span><span class="token string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span>
       <span class="token keyword">default</span><span class="token operator">-</span>autowire<span class="token operator">=</span><span class="token string">&quot;byName&quot;</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">&quot;userDao&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;org.itstack.demo.design.agent.RegisterBeanFactory&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>beans<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ¥ä¸‹æ¥åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ æˆ‘ä»¬çš„beané…ç½®ï¼Œåœ¨mybatisçš„ä½¿ç”¨ä¸­ä¸€èˆ¬ä¼šé…ç½®æ‰«æçš„daoå±‚åŒ…ï¼Œè¿™æ ·å°±å¯ä»¥å‡å°‘è¿™éƒ¨åˆ†çš„é…ç½®ã€‚</li></ul><h3 id="_3-æµ‹è¯•éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_3-æµ‹è¯•éªŒè¯" aria-hidden="true">#</a> 3. æµ‹è¯•éªŒè¯</h3><h4 id="_3-1-ç¼–å†™æµ‹è¯•ç±»" tabindex="-1"><a class="header-anchor" href="#_3-1-ç¼–å†™æµ‹è¯•ç±»" aria-hidden="true">#</a> 3.1 ç¼–å†™æµ‹è¯•ç±»</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_IUserDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BeanFactory</span> beanFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;spring-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">IUserDao</span> userDao <span class="token operator">=</span> beanFactory<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;userDao&quot;</span><span class="token punctuation">,</span> <span class="token class-name">IUserDao</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> res <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">queryUserInfo</span><span class="token punctuation">(</span><span class="token string">&quot;100001&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœï¼š{}&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æµ‹è¯•çš„è¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œé€šè¿‡åŠ è½½Beanå·¥å‚è·å–æˆ‘ä»¬çš„ä»£ç†ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œä¹‹åè°ƒç”¨æ–¹æ³•è¿”å›ç»“æœã€‚</li><li>é‚£ä¹ˆè¿™ä¸ªè¿‡ç¨‹ä½ å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ˜¯æ²¡æœ‰å¯¹æ¥å£å…ˆä¸€ä¸ªå®ç°ç±»çš„ï¼Œè€Œæ˜¯ä½¿ç”¨ä»£ç†çš„æ–¹å¼ç»™æ¥å£ç”Ÿæˆä¸€ä¸ªå®ç°ç±»ï¼Œå¹¶äº¤ç»™springç®¡ç†ã€‚</li></ul><h4 id="_3-2-æµ‹è¯•ç»“æœ" tabindex="-1"><a class="header-anchor" href="#_3-2-æµ‹è¯•ç»“æœ" aria-hidden="true">#</a> 3.2 æµ‹è¯•ç»“æœ</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">23</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">57.551</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">DEBUG</span> <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>core<span class="token punctuation">.</span>env<span class="token punctuation">.</span></span>StandardEnvironment</span> <span class="token operator">-</span> <span class="token class-name">Adding</span> <span class="token class-name">PropertySource</span> &#39;systemProperties&#39; <span class="token keyword">with</span> <span class="token namespace">lowest</span> search precedence
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token number">23</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">57.858</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">DEBUG</span> <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>c<span class="token punctuation">.</span>s<span class="token punctuation">.</span></span>ClassPathXmlApplicationContext</span> <span class="token operator">-</span> <span class="token class-name">Unable</span> <span class="token keyword">to</span> <span class="token namespace">locate</span> <span class="token class-name">LifecycleProcessor</span> <span class="token keyword">with</span> <span class="token namespace">name</span> &#39;lifecycleProcessor&#39;<span class="token operator">:</span> using <span class="token keyword">default</span> <span class="token punctuation">[</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span>DefaultLifecycleProcessor</span><span class="token annotation punctuation">@7bc1a03d</span><span class="token punctuation">]</span>
<span class="token number">23</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">57.859</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">DEBUG</span> <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>b<span class="token punctuation">.</span>f<span class="token punctuation">.</span>s<span class="token punctuation">.</span></span>DefaultListableBeanFactory</span> <span class="token operator">-</span> <span class="token class-name">Returning</span> cached instance of singleton bean &#39;lifecycleProcessor&#39;
<span class="token number">23</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">57.860</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">DEBUG</span> <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>c<span class="token punctuation">.</span>e<span class="token punctuation">.</span></span>PropertySourcesPropertyResolver</span> <span class="token operator">-</span> <span class="token class-name">Could</span> not find key &#39;spring<span class="token punctuation">.</span>liveBeansView<span class="token punctuation">.</span>mbeanDomain&#39; in any property source
<span class="token number">23</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">57.861</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">DEBUG</span> <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>b<span class="token punctuation">.</span>f<span class="token punctuation">.</span>s<span class="token punctuation">.</span></span>DefaultListableBeanFactory</span> <span class="token operator">-</span> <span class="token class-name">Returning</span> cached instance of singleton bean &#39;userDao&#39;
<span class="token number">23</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">57.915</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>d<span class="token punctuation">.</span>design<span class="token punctuation">.</span>agent<span class="token punctuation">.</span></span>MapperFactoryBean</span> <span class="token operator">-</span> <span class="token constant">SQL</span>ï¼šselect userName from user where id <span class="token operator">=</span> <span class="token number">100001</span>
<span class="token number">23</span><span class="token operator">:</span><span class="token number">21</span><span class="token operator">:</span><span class="token number">57.915</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> æµ‹è¯•ç»“æœï¼š<span class="token number">100001</span><span class="token punctuation">,</span>å°å‚…å“¥<span class="token punctuation">,</span>bugstack<span class="token punctuation">.</span>cn <span class="token operator">-</span> æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»æµ‹è¯•ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æ‰“å°äº†SQLè¯­å¥ï¼Œè¿™éƒ¨åˆ†è¯­å¥æ˜¯ä»è‡ªå®šä¹‰æ³¨è§£ä¸­è·å–çš„ï¼›<code>select userName from user where id = 100001</code>ï¼Œæˆ‘ä»¬åšäº†ç®€å•çš„é€‚é…ã€‚åœ¨mybatisæ¡†æ¶ä¸­ä¼šäº¤ç»™<code>SqlSession</code>çš„å®ç°ç±»è¿›è¡Œé€»è¾‘å¤„ç†è¿”å›æ“ä½œæ•°æ®åº“æ•°æ®</li><li>è€Œè¿™é‡Œæˆ‘ä»¬çš„æµ‹è¯•ç»“æœæ˜¯ä¸€ä¸ªå›ºå®šçš„ï¼Œå¦‚æœä½ æ„¿æ„æ›´åŠ æ·±å…¥çš„ç ”ç©¶å¯ä»¥å°è¯•ä¸æ•°æ®åº“æ“ä½œå±‚è¿›è¡Œå…³è”ï¼Œè®©è¿™ä¸ªæ¡†æ¶å¯ä»¥æ›´åŠ å®Œå–„ã€‚</li></ul><h2 id="å…­ã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#å…­ã€æ€»ç»“" aria-hidden="true">#</a> å…­ã€æ€»ç»“</h2><ul><li>å…³äºè¿™éƒ¨åˆ†ä»£ç†æ¨¡å¼çš„è®²è§£æˆ‘ä»¬é‡‡ç”¨äº†å¼€å‘ä¸€ä¸ªå…³äº<code>mybatis-spring</code>ä¸­é—´ä»¶ä¸­éƒ¨åˆ†æ ¸å¿ƒåŠŸèƒ½æ¥ä½“ç°ä»£ç†æ¨¡å¼çš„å¼ºå¤§ä¹‹å¤„ï¼Œæ‰€ä»¥æ¶‰åŠåˆ°äº†ä¸€äº›å…³äºä»£ç†ç±»çš„åˆ›å»ºä»¥åŠspringä¸­beançš„æ³¨å†Œè¿™äº›çŸ¥è¯†ç‚¹ï¼Œå¯èƒ½åœ¨å¹³å¸¸çš„ä¸šåŠ¡å¼€å‘ä¸­éƒ½æ˜¯å¾ˆå°‘ç”¨åˆ°çš„ï¼Œä½†æ˜¯åœ¨ä¸­é—´ä»¶å¼€å‘ä¸­ç¡®å®éå¸¸å¸¸è§çš„æ“ä½œã€‚</li><li>ä»£ç†æ¨¡å¼é™¤äº†å¼€å‘ä¸­é—´ä»¶å¤–è¿˜å¯ä»¥æ˜¯å¯¹æœåŠ¡çš„åŒ…è£…ï¼Œç‰©è”ç½‘ç»„ä»¶ç­‰ç­‰ï¼Œè®©å¤æ‚çš„å„é¡¹æœåŠ¡å˜ä¸ºè½»é‡çº§è°ƒç”¨ã€ç¼“å­˜ä½¿ç”¨ã€‚ä½ å¯ä»¥ç†è§£ä¸ºä½ å®¶é‡Œçš„ç”µç¯å¼€å…³ï¼Œæˆ‘ä»¬ä¸èƒ½æ“ä½œ220vç”µçº¿çš„äººè‚‰è¿æ¥ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨å¼€å…³ï¼Œé¿å…è§¦ç”µã€‚</li><li>ä»£ç†æ¨¡å¼çš„è®¾è®¡æ–¹å¼å¯ä»¥è®©ä»£ç æ›´åŠ æ•´æ´ã€å¹²å‡€æ˜“äºç»´æŠ¤ï¼Œè™½ç„¶åœ¨è¿™éƒ¨åˆ†å¼€å‘ä¸­é¢å¤–å¢åŠ äº†å¾ˆå¤šç±»ä¹ŸåŒ…æ‹¬äº†è‡ªå·±å¤„ç†beançš„æ³¨å†Œç­‰ï¼Œä½†æ˜¯è¿™æ ·çš„ä¸­é—´ä»¶å¤ç”¨æ€§æé«˜ä¹Ÿæ›´åŠ æ™ºèƒ½ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„æ‰©å±•åˆ°å„ä¸ªæœåŠ¡åº”ç”¨ä¸­ã€‚</li></ul>`,42);function S(F,I){const a=o("ExternalLinkIcon");return c(),l("div",null,[u,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),r,s("åšå®¢ï¼š"),n("a",k,[s("https://bugstack.cn"),e(a)])]),d,m,v,n("ol",null,[b,g,h,n("li",null,[s("æ¶‰åŠå·¥ç¨‹ä¸‰ä¸ªï¼Œå¯ä»¥é€šè¿‡å…³æ³¨"),f,s("ï¼š"),n("a",y,[w,e(a)]),s("ï¼Œå›å¤"),_,s("è·å–(æ‰“å¼€è·å–çš„é“¾æ¥ï¼Œæ‰¾åˆ°åºå·18)")])]),B,x,D,n("ul",null,[n("li",null,[s("å›¾ç‰‡æ¥è‡ªï¼š"),n("a",q,[s("https://refactoringguru.cn/design-patterns/proxy"),e(a)])])]),j])}const C=p(i,[["render",S],["__file","2020-06-16-zhongxue Java shejimoshiã€Šshizhandailimoshiã€‹.html.vue"]]);export{C as default};
