import{_ as s,r as l,o,c as a,a as e,b as n,d as r,e as i}from"./app-3RcBQnkC.js";const c={},d=e("h1",{id:"第06节-模板模式处理抽奖流程",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#第06节-模板模式处理抽奖流程","aria-hidden":"true"},"#"),n(" 第06节：模板模式处理抽奖流程")],-1),h=e("br",null,null,-1),_={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},p=e("blockquote",null,[e("p",null,"沉淀、分享、成长，让自己和他人都能有所收获！")],-1),u={href:"https://gitcode.net/KnowledgePlanet/Lottery/-/tree/210828_xfg_subtractionStock",target:"_blank",rel:"noopener noreferrer"},k=e("li",null,"描述：基于模板设计模式，规范化抽奖执行流程。包括：提取抽象类、编排模板流程、定义抽象方法、执行抽奖策略、扣减中奖库存、包装返回结果等，并基于P3C标准完善本次开发涉及到的代码规范化处理。",-1),m=e("h2",{id:"零、优秀作业",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#零、优秀作业","aria-hidden":"true"},"#"),n(" 零、优秀作业")],-1),f={href:"https://t.zsxq.com/06aUr7EII",target:"_blank",rel:"noopener noreferrer"},b={href:"https://t.zsxq.com/06IqJiqBI",target:"_blank",rel:"noopener noreferrer"},g={href:"https://t.zsxq.com/06AuRNF6E",target:"_blank",rel:"noopener noreferrer"},x={href:"https://t.zsxq.com/06Rj66A6A",target:"_blank",rel:"noopener noreferrer"},v={href:"https://t.zsxq.com/066EaYvrn",target:"_blank",rel:"noopener noreferrer"},q={href:"https://t.zsxq.com/06qjeQfm2",target:"_blank",rel:"noopener noreferrer"},z={href:"https://t.zsxq.com/06YVFU3Nf",target:"_blank",rel:"noopener noreferrer"},w={href:"https://t.zsxq.com/06jeyzn6E",target:"_blank",rel:"noopener noreferrer"},y={href:"https://t.zsxq.com/06Q3vrbIE",target:"_blank",rel:"noopener noreferrer"},E={href:"https://t.zsxq.com/07myBUJQb",target:"_blank",rel:"noopener noreferrer"},C={href:"https://t.zsxq.com/0cbdllIkT",target:"_blank",rel:"noopener noreferrer"},I={href:"https://t.zsxq.com/0dbNP5eNh",target:"_blank",rel:"noopener noreferrer"},j={href:"https://t.zsxq.com/0duCVEyz3",target:"_blank",rel:"noopener noreferrer"},A={href:"https://t.zsxq.com/0dn5PbkgS",target:"_blank",rel:"noopener noreferrer"},B={href:"https://t.zsxq.com/0dUkFrWsY",target:"_blank",rel:"noopener noreferrer"},N={href:"https://t.zsxq.com/0f9OnUVrv",target:"_blank",rel:"noopener noreferrer"},J={href:"https://t.zsxq.com/11meB49dE",target:"_blank",rel:"noopener noreferrer"},V=e("h2",{id:"一、开发日志",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#一、开发日志","aria-hidden":"true"},"#"),n(" 一、开发日志")],-1),D=i(`<li><p>下载安装 IDEA P3C 插件 <code>Alibaba Java Coding Guidelines</code>，统一标准化编码方式。<em>在本次分支涉及到的代码开发中，已调整代码中类、属性、方法对应的注释信息</em></p></li><li><p>定义 Preferences | Editor | File and Code Templates -&gt; File Header</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@description</span>: 
 * <span class="token keyword">@author</span>：小傅哥，微信：fustack
 * <span class="token keyword">@date</span>: $<span class="token punctuation">{</span>DATE<span class="token punctuation">}</span>
 * @Copyright： 公众号：bugstack虫洞栈 | 博客：https://bugstack.cn - 沉淀、分享、成长，让自己和他人都能有所收获！
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>调整表 <code>lottery.strategy_detail</code> 添加 <code>awardSurplusCount</code> 字段，用于记录扣减奖品库存使用数量。</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> strategy_detail <span class="token keyword">add</span> awardSurplusCount <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;奖品剩余库存&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>`,3),S=e("code",null,"模板方法设计模式",-1),L=e("code",null,"DrawExecImpl",-1),P=e("code",null,"AbstractDrawBase",-1),U=e("code",null,"DrawExecImpl",-1),F={href:"https://mp.weixin.qq.com/s/3u1gCJBYLna8qwV9dUgpmA",target:"_blank",rel:"noopener noreferrer"},T=e("h2",{id:"二、模板模式应用",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#二、模板模式应用","aria-hidden":"true"},"#"),n(" 二、模板模式应用")],-1),Y=e("p",null,"本章节最大的目标在于把抽奖流程标准化，需要考虑的一条思路线包括：",-1),Q=e("ol",null,[e("li",null,"根据入参策略ID获取抽奖策略配置"),e("li",null,"校验和处理抽奖策略的数据初始化到内存"),e("li",null,"获取那些被排除掉的抽奖列表，这些奖品可能是已经奖品库存为空，或者因为风控策略不能给这个用户薅羊毛的奖品"),e("li",null,"执行抽奖算法"),e("li",null,"包装中奖结果")],-1),G=e("p",null,"以上这些步骤就是需要在抽奖执行类的方法中需要处理的内容，如果是在一个类的一个方法中，顺序开发这些内容也是可以实现的。但这样的代码实现过程是不易于维护的，也不太方便在各个流程节点扩展其他功能，也会使一个类的代码越来越庞大，因此对于这种可以制定标准流程的功能逻辑，通常使用模板方法模式是非常合适的。接下来我们就来通过这样的设计模式来开发实现下代码逻辑。",-1);function H(R,K){const t=l("ExternalLinkIcon");return o(),a("div",null,[d,e("p",null,[n("作者：小傅哥 "),h,n("博客："),e("a",_,[n("https://bugstack.cn"),r(t)])]),p,e("ul",null,[e("li",null,[n("分支："),e("a",u,[n("210828_xfg_subtractionStock"),r(t)])]),k]),m,e("ul",null,[e("li",null,[e("a",f,[n("第六章模板模式跟着一遍印象加深 @YAMIN"),r(t)])]),e("li",null,[e("a",b,[n("【数据库乐观锁】的方式来控制奖品库存，防止超卖 @拿笔小星"),r(t)])]),e("li",null,[e("a",g,[n("6-8节结构图梳理 @阿羲⭐️"),r(t)])]),e("li",null,[e("a",x,[n("模板模式处理抽奖流程 @一点江南"),r(t)])]),e("li",null,[e("a",v,[n("模板模式处理抽奖流程 @BerserkD"),r(t)])]),e("li",null,[e("a",q,[n("抽奖系统第6节模板模式处理抽奖流程 @巍"),r(t)])]),e("li",null,[e("a",z,[n("模板模式处理抽奖流程 @Geroge Liu"),r(t)])]),e("li",null,[e("a",w,[n("构建活动领取模块，复习路由组件 @Chin"),r(t)])]),e("li",null,[e("a",y,[n("学习策略库表的设计、抽奖算法的实现与抽奖流程的设定 @HL"),r(t)])]),e("li",null,[e("a",E,[n("抽奖过程方法实现 @Jachin"),r(t)])]),e("li",null,[e("a",C,[n("通过两天的学习成功将第五、第六章节跑通并完成了测试，感受最深的是对策略模式和模板模式的进一步了解 @星期一"),r(t)])]),e("li",null,[e("a",I,[n("记录一下 第5部分第06节：部署环境 nacos 踩的坑 @灵幻新隆"),r(t)])]),e("li",null,[e("a",j,[n("增加了一个模板方法模板化处理抽奖流程，使得整个抽奖过程结构清晰 @twinkler"),r(t)])]),e("li",null,[e("a",A,[n("学习进度06节模板模式处理抽奖流程，好的代码就是好的文档的一部分 @learningJ"),r(t)])]),e("li",null,[e("a",B,[n("这里一个map看起来代码也简洁清晰也没有用到if else，所以这里就是这章节的最大收获 @learningJ"),r(t)])]),e("li",null,[e("a",N,[n("模版模式处理抽奖流程，分享自己的学习方法 @theSunlin"),r(t)])]),e("li",null,[e("a",J,[n("第2章~第6章，学习汇总 @CCAT"),r(t)])])]),V,e("ul",null,[D,e("li",null,[e("p",null,[n("【重点】使用"),S,n("优化类 "),L,n(" 抽奖过程方法实现，主要以抽象类 "),P,n(" 编排定义流程，定义抽象方法由类 "),U,n(" 做具体实现的方式进行处理。关于模板模式可以参考下："),e("a",F,[n("重学 Java 设计模式：实战模版模式「模拟爬虫各类电商商品，生成营销推广海报场景」"),r(t)])])])]),T,Y,Q,G])}const O=s(c,[["render",H],["__file","di06jie：mobanmoshichulichoujiangliucheng.html.vue"]]);export{O as default};
