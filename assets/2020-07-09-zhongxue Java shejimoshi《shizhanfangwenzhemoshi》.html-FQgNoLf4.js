import{_ as e,r as o,o as c,c as l,a as n,b as s,d as t,e as p}from"./app-3RcBQnkC.js";const i={},u=n("h1",{id:"é‡å­¦-java-è®¾è®¡æ¨¡å¼-å®æˆ˜è®¿é—®è€…æ¨¡å¼ã€Œæ¨¡æ‹Ÿå®¶é•¿ä¸æ ¡é•¿-å¯¹å­¦ç”Ÿå’Œè€å¸ˆçš„ä¸åŒè§†è§’ä¿¡æ¯çš„è®¿é—®åœºæ™¯ã€",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#é‡å­¦-java-è®¾è®¡æ¨¡å¼-å®æˆ˜è®¿é—®è€…æ¨¡å¼ã€Œæ¨¡æ‹Ÿå®¶é•¿ä¸æ ¡é•¿-å¯¹å­¦ç”Ÿå’Œè€å¸ˆçš„ä¸åŒè§†è§’ä¿¡æ¯çš„è®¿é—®åœºæ™¯ã€","aria-hidden":"true"},"#"),s(" é‡å­¦ Java è®¾è®¡æ¨¡å¼ï¼šå®æˆ˜è®¿é—®è€…æ¨¡å¼ã€Œæ¨¡æ‹Ÿå®¶é•¿ä¸æ ¡é•¿ï¼Œå¯¹å­¦ç”Ÿå’Œè€å¸ˆçš„ä¸åŒè§†è§’ä¿¡æ¯çš„è®¿é—®åœºæ™¯ã€")],-1),k=n("br",null,null,-1),r={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},d=n("blockquote",null,[n("p",null,"æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„")],-1),m=n("iframe",{id:"B-Video",src:"//player.bilibili.com/player.html?aid=811550159&bvid=BV1m34y1h76K&cid=718963215&page=1",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true",width:"100%",height:"480"}," ",-1),v=p('<h2 id="ä¸€ã€å‰è¨€" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å‰è¨€" aria-hidden="true">#</a> ä¸€ã€å‰è¨€</h2><p><code>èƒ½åŠ›ï¼Œæ˜¯ä½ å‰è¡Œçš„æœ€å¤§ä¿éšœ</code></p><p>å¹´é¾„ä¼šä¸æ–­çš„å¢é•¿ï¼Œä½†æ˜¯ä»€ä¹ˆæ‰èƒ½è®©ä½ ä¸æ…Œå¼ ã€‚ä¸€å®šæ˜¯èƒ½åŠ›ï¼Œå³ä½¿æ˜¯åœ¨ä¸€ä¸ªçœ‹ä¼¼è¿˜å¾ˆå®‰ç¨³çš„å·¥ä½œä¸­ä¹Ÿæ˜¯ä¸€æ ·ï¼Œåªæœ‰æ‹¥æœ‰<code>èƒ½ç•™ä¸‹çš„æœ¬äº‹</code>å’Œ<code>è·³å‡ºå»çš„èƒ½åŠ›</code>ï¼Œä½ æ‰ä¼šæ˜¯å®‰ç¨³çš„ã€‚è€Œèƒ½åŠ›çš„æå‡æ˜¯ä¸æ–­çªç ´è‡ªå·±çš„æœªçŸ¥ä¹Ÿå°±æ˜¯æ‹“å±•å®½åº¦ï¼Œä»¥åŠåœ¨ä¸“ä¸šé¢†åŸŸå»ºè®¾ä¸ªäººå½±å“åŠ›ä¹Ÿå°±æ˜¯æ·±åº¦ã€‚å¦‚æœæ—¥å¤æ—¥365å¤©ï¼Œå¤©å¤©æ¬ç –ï¼Œä¸€åˆ‡éƒ½æ²¡æœ‰å˜åŒ–çš„é‡å¤åªèƒ½è®©æ‰‹ä¸Šå¢é•¿ç‚¹è€èŒ§ï¼Œå²æœˆåˆå¹äººç”Ÿè‹¦çŸ­ã€‚</p><p><code>ç«™å¾—é«˜çœ‹çš„è¿œå—ï¼Ÿ</code></p><p>ç«™å¾—é«˜ç¡®å®èƒ½çœ‹å¾—è¿œï¼Œä¹Ÿèƒ½ç»™è‡ªå·±æ›´å¤šçš„è¿½æ±‚ã€‚ä½†ï¼Œç«™çš„é«˜äº†ï¼ŒåŸæœ¬çœ‹çš„æ¸…çš„ä¸œè¥¿å°±å˜å¾—çœ‹ä¸æ¸…äº†ã€‚è§†è§’å’Œé‡ç‚¹çš„ä¸åŒï¼Œä¼šè®©æˆ‘ä»¬æœ‰å¾ˆå¤šä¸åŒçš„é€‰æ‹©ï¼Œè€Œè„šè¸å®åœ°æ˜¯ç»™è‡ªå·±å¥ å®šèƒ½æ”€å‡èµ·æ¥çš„åŸºçŸ³ï¼Œå½“çœŸçš„å¯ä»¥å››å¹³å…«ç¨³çš„èµ°å‘å±±å¤´çš„æ—¶å€™ï¼Œæ‰æ˜¯é€‚åˆçœ‹åˆ°æ›´è¿œçš„æ—¶å€™ã€‚</p><p><code>æ•°å­¦å¥½æ‰èƒ½å­¦ç¼–ç å—</code></p><p>å¾€å¾€å¾ˆå¤šæ—¶å€™å­¦ç¼–ç¨‹çš„åˆå­¦è€…éƒ½ä¼šé—®æ•°å­¦ä¸å¥½èƒ½å­¦ä¼šå—ï¼Ÿå…¶å®å¯ä»¥æƒ³æƒ³é‚£ä¸ºä»€ä¹ˆæ•°å­¦ä¸å¥½å‘¢ï¼Ÿåœ¨è¿™æ¡æ²¡å­¦å¥½çš„è·¯ä¸Šï¼Œä½ ä¸ºå®ƒä»¬ä»˜å‡ºäº†å¤šå°‘æ—¶é—´å‘¢ï¼Ÿå¦‚æœä¸€ä»¶äº‹æƒ…ä½ æ•¢åšåˆ°å’Œå†™è‡ªå·±åå­—ä¸€æ ·ç†Ÿæ‚‰ï¼Œè¿˜çœŸçš„æœ‰éš¾çš„ä¸œè¥¿å—ã€‚ä»å¤§å­¦åˆ°æ¯•ä¸šèƒ½å†™å‡º40ä¸‡è¡Œä»£ç çš„ï¼Œè¿˜èƒ½æ„æ‰¾ä¸åˆ°å·¥ä½œå—ï¼Œæ—¥ç§¯æœˆç´¯ï¼Œæ¯ä¸€å¤©å¹¶æ²¡æœ‰å¤šéš¾ã€‚éš¾çš„ä½ æƒ³ç”¨æœ€åä¸€ä¸ªæœˆçš„æ—¶é—´å­¦å®Œäººå®¶å››å¹´åŠªåŠ›çš„æˆç»©çš„ã€‚å­¦ä¹ ï¼Œè¦è¶æ—©ã€‚</p><h2 id="äºŒã€å¼€å‘ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#äºŒã€å¼€å‘ç¯å¢ƒ" aria-hidden="true">#</a> äºŒã€å¼€å‘ç¯å¢ƒ</h2>',8),b=n("li",null,"JDK 1.8",-1),g=n("li",null,"Idea + Maven",-1),h=n("strong",null,"å…¬ä¼—å·",-1),w={href:"https://bugstack.cn/assets/images/qrcode.png",target:"_blank",rel:"noopener noreferrer"},y=n("code",null,"bugstackè™«æ´æ ˆ",-1),f=n("code",null,"æºç ä¸‹è½½",-1),_=n("table",null,[n("thead",null,[n("tr",null,[n("th",null,"å·¥ç¨‹"),n("th",null,"æè¿°")])]),n("tbody",null,[n("tr",null,[n("td",null,"itstack-demo-design-22-00"),n("td",null,"åœºæ™¯æ¨¡æ‹Ÿå·¥ç¨‹ï¼›æ¨¡æ‹Ÿå­¦ç”Ÿå’Œè€å¸ˆä¿¡æ¯ä¸åŒè§†è§’è®¿é—®")])])],-1),q=n("h2",{id:"ä¸‰ã€è®¿é—®è€…æ¨¡å¼ä»‹ç»",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ä¸‰ã€è®¿é—®è€…æ¨¡å¼ä»‹ç»","aria-hidden":"true"},"#"),s(" ä¸‰ã€è®¿é—®è€…æ¨¡å¼ä»‹ç»")],-1),j=n("p",null,[n("img",{src:"https://bugstack.cn/assets/images/2020/itstack-demo-design-22-01.png",alt:"è®¿é—®è€…æ¨¡å¼ï¼Œå›¾ç‰‡æ¥è‡ª refactoringguru.cn"})],-1),x={href:"https://refactoringguru.cn/design-patterns/visitor",target:"_blank",rel:"noopener noreferrer"},z=p(`<p>è®¿é—®è€…è¦è§£å†³çš„æ ¸å¿ƒäº‹é¡¹æ˜¯ï¼Œåœ¨ä¸€ä¸ªç¨³å®šçš„æ•°æ®ç»“æ„ä¸‹ï¼Œä¾‹å¦‚ç”¨æˆ·ä¿¡æ¯ã€é›‡å‘˜ä¿¡æ¯ç­‰ï¼Œå¢åŠ æ˜“å˜çš„ä¸šåŠ¡è®¿é—®é€»è¾‘ã€‚ä¸ºäº†å¢å¼ºæ‰©å±•æ€§ï¼Œå°†è¿™ä¸¤éƒ¨åˆ†çš„ä¸šåŠ¡è§£è€¦çš„ä¸€ç§è®¾è®¡æ¨¡å¼ã€‚</p><p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-22-02.png" alt="ç¾å¥³åƒå†°æ¿€å‡Œ"></p><p>è¯´ç™½äº†è®¿é—®è€…æ¨¡å¼çš„æ ¸å¿ƒåœ¨äºåŒä¸€ä¸ªäº‹ç‰©ä¸åŒè§†è§’ä¸‹çš„è®¿é—®ä¿¡æ¯ä¸åŒï¼Œæ¯”å¦‚ä¸€ä¸ª<code>ç¾å¥³</code>æ‰‹é‡Œæ‹¿ä¸ª<code>å†°æ¿€å‡Œ</code>ã€‚å°æœ‹å‹ä¼šæ³¨æ„å†°æ¿€å‡Œï¼Œå¤§æœ‹å‹ä¼šæ‰¾è‡ªå·±å–œæ¬¢çš„åœ°æ–¹è§‚æµ‹æ•Œæƒ…ã€‚</p><h2 id="å››ã€æ¡ˆä¾‹åœºæ™¯æ¨¡æ‹Ÿ" tabindex="-1"><a class="header-anchor" href="#å››ã€æ¡ˆä¾‹åœºæ™¯æ¨¡æ‹Ÿ" aria-hidden="true">#</a> å››ã€æ¡ˆä¾‹åœºæ™¯æ¨¡æ‹Ÿ</h2><p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-22-03.png" alt="åœºæ™¯æ¨¡æ‹Ÿï¼›æ ¡å›­ä¸­çš„å­¦ç”Ÿå’Œè€å¸ˆå¯¹äºä¸åŒç”¨æˆ·çš„è®¿é—®è§†è§’"></p><p><strong>åœ¨æœ¬æ¡ˆä¾‹ä¸­æˆ‘ä»¬æ¨¡æ‹Ÿæ ¡å›­ä¸­çš„å­¦ç”Ÿå’Œè€å¸ˆå¯¹äºä¸åŒç”¨æˆ·çš„è®¿é—®è§†è§’</strong></p><p>è¿™ä¸ªæ¡ˆä¾‹åœºæ™¯æˆ‘ä»¬æ¨¡æ‹Ÿæ ¡å›­ä¸­æœ‰å­¦ç”Ÿå’Œè€å¸ˆä¸¤ç§èº«ä»½çš„ç”¨æˆ·ï¼Œé‚£ä¹ˆå¯¹äºå®¶é•¿å’Œæ ¡é•¿å…³å¿ƒçš„è§’åº¦æ¥çœ‹ï¼Œä»–ä»¬çš„è§†è§’æ˜¯ä¸åŒçš„ã€‚å®¶é•¿æ›´å…³å¿ƒå­©å­çš„æˆç»©å’Œè€å¸ˆçš„èƒ½åŠ›ï¼Œæ ¡é•¿æ›´å…³å¿ƒè€å¸ˆæ‰€åœ¨ç­çº§å­¦ç”Ÿçš„äººæ•°å’Œå‡å­¦ç‡{<code>æ­¤å¤„æ¨¡æ‹Ÿçš„</code>}ã€‚</p><p>é‚£ä¹ˆè¿™æ ·<code>å­¦ç”Ÿ</code>å’Œ<code>è€å¸ˆ</code>å°±æ˜¯ä¸€ä¸ªå›ºå®šä¿¡æ¯çš„å†…å®¹ï¼Œè€Œæƒ³è®©ä¸åŒè§†è§’çš„ç”¨æˆ·è·å–å…³å¿ƒçš„ä¿¡æ¯ï¼Œå°±æ¯”è¾ƒé€‚åˆä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼æ¥å®ç°ï¼Œä»è€Œè®©å®ä½“ä¸ä¸šåŠ¡è§£è€¦ï¼Œå¢å¼ºæ‰©å±•æ€§ã€‚<strong>ä½†è§‚å¯Ÿè€…æ¨¡å¼çš„æ•´ä½“ç±»ç»“æ„ç›¸å¯¹å¤æ‚ï¼Œéœ€è¦æ¢³ç†æ¸…æ¥šå†å¼€å‘</strong></p><h2 id="äº”ã€è®¿é—®è€…æ¨¡å¼æ­å»ºå·¥ç¨‹" tabindex="-1"><a class="header-anchor" href="#äº”ã€è®¿é—®è€…æ¨¡å¼æ­å»ºå·¥ç¨‹" aria-hidden="true">#</a> äº”ã€è®¿é—®è€…æ¨¡å¼æ­å»ºå·¥ç¨‹</h2><p>è®¿é—®è€…æ¨¡å¼çš„ç±»ç»“æ„ç›¸å¯¹å…¶ä»–è®¾è®¡æ¨¡å¼æ¥è¯´æ¯”è¾ƒå¤æ‚ï¼Œä½†è¿™æ ·çš„è®¾è®¡æ¨¡å¼åœ¨æˆ‘çœ‹æ¥æ›´åŠ <code>çƒ§æ°”æœ‰é­…åŠ›</code>ï¼Œå®ƒèƒ½é˜”å¼€ä½ å¯¹ä»£ç ç»“æ„çš„æ–°è®¤çŸ¥ï¼Œç”¨è¿™æ ·æ€ç»´ä¸æ–­çš„å»ºè®¾å‡ºæ›´å¥½çš„ä»£ç æ¶æ„ã€‚</p><p>å…³äºè¿™ä¸ªæ¡ˆä¾‹çš„æ ¸å¿ƒé€»è¾‘å®ç°ï¼Œæœ‰ä»¥ä¸‹å‡ ç‚¹ï¼›</p><ol><li>å»ºç«‹ç”¨æˆ·æŠ½è±¡ç±»å’ŒæŠ½è±¡è®¿é—®æ–¹æ³•ï¼Œå†ç”±ä¸åŒçš„ç”¨æˆ·å®ç°ï¼›è€å¸ˆå’Œå­¦ç”Ÿã€‚</li><li>å»ºç«‹è®¿é—®è€…æ¥å£ï¼Œç”¨äºä¸åŒäººå‘˜çš„è®¿é—®æ“ä½œï¼›æ ¡é•¿å’Œå®¶é•¿ã€‚</li><li>æœ€ç»ˆæ˜¯å¯¹æ•°æ®çš„çœ‹æ¿å»ºè®¾ï¼Œç”¨äºå®ç°ä¸åŒè§†è§’çš„è®¿é—®ç»“æœè¾“å‡ºã€‚</li></ol><h3 id="_1-å·¥ç¨‹ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>design<span class="token operator">-</span><span class="token number">22</span><span class="token operator">-</span><span class="token number">00</span>
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â””â”€â”€ java
    â”‚       â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design
    â”‚           â”œâ”€â”€ user
    â”‚           â”‚	  â”œâ”€â”€ impl
    â”‚           â”‚	  â”‚     â”œâ”€â”€ <span class="token class-name">Student</span><span class="token punctuation">.</span>java
    â”‚           â”‚	  â”‚     â””â”€â”€ <span class="token class-name">Teacher</span><span class="token punctuation">.</span>java
    â”‚           â”‚	  â””â”€â”€ <span class="token class-name">User</span><span class="token punctuation">.</span>java   
    â”‚           â”œâ”€â”€ visitor
    â”‚           â”‚	  â”œâ”€â”€ impl
    â”‚           â”‚	  â”‚     â”œâ”€â”€ <span class="token class-name">Parent</span><span class="token punctuation">.</span>java
    â”‚           â”‚	  â”‚     â””â”€â”€ <span class="token class-name">Principal</span><span class="token punctuation">.</span>java
    â”‚           â”‚	  â””â”€â”€ <span class="token class-name">Visitor</span><span class="token punctuation">.</span>java
    â”‚           â””â”€â”€  <span class="token class-name">DataView</span><span class="token punctuation">.</span>java
    â””â”€â”€ test
        â””â”€â”€ java
            â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span>test
                â””â”€â”€ <span class="token class-name">ApiTest</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è®¿é—®è€…æ¨¡å¼æ¨¡å‹ç»“æ„</strong></p><p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-22-04.png" alt="è®¿é—®è€…æ¨¡å¼æ¨¡å‹ç»“æ„"></p><p>ä»¥ä¸Šæ˜¯è§†å›¾å±•ç¤ºäº†ä»£ç çš„æ ¸å¿ƒç»“æ„ï¼Œä¸»è¦åŒ…æ‹¬ä¸åŒè§†è§’ä¸‹çš„ä¸åŒç”¨æˆ·è®¿é—®æ¨¡å‹ã€‚</p><p>åœ¨è¿™é‡Œæœ‰ä¸€ä¸ªå…³é”®çš„ç‚¹éå¸¸é‡è¦ï¼Œä¹Ÿå°±æ˜¯æ•´å¥—è®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼›<code>visitor.visit(this)</code>ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨æ¯ä¸€ä¸ªç”¨æˆ·å®ç°ç±»é‡Œï¼ŒåŒ…æ‹¬ï¼›<code>Student</code>ã€<code>Teacher</code>ã€‚åœ¨ä»¥ä¸‹çš„å®ç°ä¸­å¯ä»¥é‡ç‚¹å…³æ³¨ã€‚</p><h3 id="_2-ä»£ç å®ç°" tabindex="-1"><a class="header-anchor" href="#_2-ä»£ç å®ç°" aria-hidden="true">#</a> 2. ä»£ç å®ç°</h3><h4 id="_2-1-å®šä¹‰ç”¨æˆ·æŠ½è±¡ç±»" tabindex="-1"><a class="header-anchor" href="#_2-1-å®šä¹‰ç”¨æˆ·æŠ½è±¡ç±»" aria-hidden="true">#</a> 2.1 å®šä¹‰ç”¨æˆ·æŠ½è±¡ç±»</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// åŸºç¡€ç”¨æˆ·ä¿¡æ¯</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>      <span class="token comment">// å§“å</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> identity<span class="token punctuation">;</span>  <span class="token comment">// èº«ä»½ï¼›é‡ç‚¹ç­ã€æ™®é€šç­ | ç‰¹çº§æ•™å¸ˆã€æ™®é€šæ•™å¸ˆã€å®ä¹ æ•™å¸ˆ</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> clazz<span class="token punctuation">;</span>     <span class="token comment">// ç­çº§</span>

    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> identity<span class="token punctuation">,</span> <span class="token class-name">String</span> clazz<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>identity <span class="token operator">=</span> identity<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>clazz <span class="token operator">=</span> clazz<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// æ ¸å¿ƒè®¿é—®æ–¹æ³•</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Visitor</span> visitor<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åŸºç¡€ä¿¡æ¯åŒ…æ‹¬ï¼›å§“åã€èº«ä»½ã€ç­çº§ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªä¸šåŠ¡ç”¨æˆ·å±æ€§ç±»ã€‚</li><li>å®šä¹‰æŠ½è±¡æ ¸å¿ƒæ–¹æ³•ï¼Œ<code>abstract void accept(Visitor visitor)</code>ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯ä¸ºäº†è®©åç»­çš„ç”¨æˆ·å…·ä½“å®ç°è€…éƒ½èƒ½æä¾›å‡ºä¸€ä¸ªè®¿é—®æ–¹æ³•ï¼Œå…±å¤–éƒ¨ä½¿ç”¨ã€‚</li></ul><h4 id="_2-2-å®ç°ç”¨æˆ·ä¿¡æ¯-è€å¸ˆå’Œå­¦ç”Ÿ" tabindex="-1"><a class="header-anchor" href="#_2-2-å®ç°ç”¨æˆ·ä¿¡æ¯-è€å¸ˆå’Œå­¦ç”Ÿ" aria-hidden="true">#</a> 2.2 å®ç°ç”¨æˆ·ä¿¡æ¯(è€å¸ˆå’Œå­¦ç”Ÿ)</h4><p><strong>è€å¸ˆç±»</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Teacher</span> <span class="token keyword">extends</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> identity<span class="token punctuation">,</span> <span class="token class-name">String</span> clazz<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> identity<span class="token punctuation">,</span> clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Visitor</span> visitor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        visitor<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// å‡æœ¬ç‡</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">entranceRatio</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setScale</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">.</span><span class="token constant">ROUND_HALF_UP</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å­¦ç”Ÿç±»</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> identity<span class="token punctuation">,</span> <span class="token class-name">String</span> clazz<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> identity<span class="token punctuation">,</span> clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Visitor</span> visitor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        visitor<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">ranking</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™é‡Œå®ç°äº†è€å¸ˆå’Œå­¦ç”Ÿç±»ï¼Œéƒ½æä¾›äº†çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚</li><li>åœ¨<code>accept</code>æ–¹æ³•ä¸­ï¼Œæä¾›äº†æœ¬åœ°å¯¹è±¡çš„è®¿é—®ï¼›<code>visitor.visit(this)</code>ï¼Œè¿™å—éœ€è¦åŠ æ·±ç†è§£ã€‚</li><li>è€å¸ˆå’Œå­¦ç”Ÿç±»åˆéƒ½å•ç‹¬æä¾›äº†å„è‡ªçš„ç‰¹æ€§æ–¹æ³•ï¼›å‡æœ¬ç‡(<code>entranceRatio</code>)ã€æ’å(<code>ranking</code>)ï¼Œç±»ä¼¼è¿™æ ·çš„æ–¹æ³•å¯ä»¥æŒ‰ç…§ä¸šåŠ¡éœ€æ±‚è¿›è¡Œæ‰©å±•ã€‚</li></ul><h4 id="_2-3-å®šä¹‰è®¿é—®æ•°æ®æ¥å£" tabindex="-1"><a class="header-anchor" href="#_2-3-å®šä¹‰è®¿é—®æ•°æ®æ¥å£" aria-hidden="true">#</a> 2.3 å®šä¹‰è®¿é—®æ•°æ®æ¥å£</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Visitor</span> <span class="token punctuation">{</span>

    <span class="token comment">// è®¿é—®å­¦ç”Ÿä¿¡æ¯</span>
    <span class="token keyword">void</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// è®¿é—®è€å¸ˆä¿¡æ¯</span>
    <span class="token keyword">void</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token class-name">Teacher</span> teacher<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è®¿é—®çš„æ¥å£æ¯”è¾ƒç®€å•ï¼Œç›¸åŒçš„æ–¹æ³•åç§°ï¼Œä¸åŒçš„å…¥å‚ç”¨æˆ·ç±»å‹ã€‚</li><li>è®©å…·ä½“çš„è®¿é—®è€…ç±»ï¼Œåœ¨å®ç°æ—¶å¯ä»¥å…³æ³¨æ¯ä¸€ç§ç”¨æˆ·ç±»å‹çš„å…·ä½“è®¿é—®æ•°æ®å¯¹è±¡ï¼Œä¾‹å¦‚ï¼›å‡å­¦ç‡å’Œæ’åã€‚</li></ul><h4 id="_2-4-å®ç°è®¿é—®ç±»å‹-æ ¡é•¿å’Œå®¶é•¿" tabindex="-1"><a class="header-anchor" href="#_2-4-å®ç°è®¿é—®ç±»å‹-æ ¡é•¿å’Œå®¶é•¿" aria-hidden="true">#</a> 2.4 å®ç°è®¿é—®ç±»å‹(æ ¡é•¿å’Œå®¶é•¿)</h4><p><strong>è®¿é—®è€…ï¼›æ ¡é•¿</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Principal</span> <span class="token keyword">implements</span> <span class="token class-name">Visitor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Principal</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;å­¦ç”Ÿä¿¡æ¯ å§“åï¼š{} ç­çº§ï¼š{}&quot;</span><span class="token punctuation">,</span> student<span class="token punctuation">.</span>name<span class="token punctuation">,</span> student<span class="token punctuation">.</span>clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token class-name">Teacher</span> teacher<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;å­¦ç”Ÿä¿¡æ¯ å§“åï¼š{} ç­çº§ï¼š{} å‡å­¦ç‡ï¼š{}&quot;</span><span class="token punctuation">,</span> teacher<span class="token punctuation">.</span>name<span class="token punctuation">,</span> teacher<span class="token punctuation">.</span>clazz<span class="token punctuation">,</span> teacher<span class="token punctuation">.</span><span class="token function">entranceRatio</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è®¿é—®è€…ï¼›å®¶é•¿</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">implements</span> <span class="token class-name">Visitor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Parent</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;å­¦ç”Ÿä¿¡æ¯ å§“åï¼š{} ç­çº§ï¼š{} æ’åï¼š{}&quot;</span><span class="token punctuation">,</span> student<span class="token punctuation">.</span>name<span class="token punctuation">,</span> student<span class="token punctuation">.</span>clazz<span class="token punctuation">,</span> student<span class="token punctuation">.</span><span class="token function">ranking</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token class-name">Teacher</span> teacher<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è€å¸ˆä¿¡æ¯ å§“åï¼š{} ç­çº§ï¼š{} çº§åˆ«ï¼š{}&quot;</span><span class="token punctuation">,</span> teacher<span class="token punctuation">.</span>name<span class="token punctuation">,</span> teacher<span class="token punctuation">.</span>clazz<span class="token punctuation">,</span> teacher<span class="token punctuation">.</span>identity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»¥ä¸Šæ˜¯ä¸¤ä¸ªå…·ä½“çš„è®¿é—®è€…å®ç°ç±»ï¼Œä»–ä»¬éƒ½æœ‰è‡ªå·±çš„è§†è§’éœ€æ±‚ã€‚</li><li>æ ¡é•¿å…³æ³¨ï¼›å­¦ç”Ÿçš„åç§°å’Œç­çº§ï¼Œè€å¸ˆå¯¹è¿™ä¸ªç­çº§çš„å‡å­¦ç‡</li><li>å®¶é•¿å…³æ³¨ï¼›è‡ªå·±å®¶å­©å­çš„æ’åï¼Œè€å¸ˆçš„ç­çº§å’Œæ•™å­¦æ°´å¹³</li></ul><h4 id="_2-5-æ•°æ®çœ‹ç‰ˆ" tabindex="-1"><a class="header-anchor" href="#_2-5-æ•°æ®çœ‹ç‰ˆ" aria-hidden="true">#</a> 2.5 æ•°æ®çœ‹ç‰ˆ</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataView</span> <span class="token punctuation">{</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> userList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">DataView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">&quot;è°¢é£æœº&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;é‡ç‚¹ç­&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ä¸€å¹´ä¸€ç­&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">&quot;windy&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;é‡ç‚¹ç­&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ä¸€å¹´ä¸€ç­&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">&quot;å¤§æ¯›&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;æ™®é€šç­&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;äºŒå¹´ä¸‰ç­&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">&quot;Shing&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;æ™®é€šç­&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ä¸‰å¹´å››ç­&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token string">&quot;BK&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ç‰¹çº§æ•™å¸ˆ&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ä¸€å¹´ä¸€ç­&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token string">&quot;å¨œå¨œGoddess&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ç‰¹çº§æ•™å¸ˆ&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ä¸€å¹´ä¸€ç­&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;æ™®é€šæ•™å¸ˆ&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;äºŒå¹´ä¸‰ç­&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token string">&quot;æ³½ä¸œ&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;å®ä¹ æ•™å¸ˆ&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ä¸‰å¹´å››ç­&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// å±•ç¤º</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Visitor</span> visitor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> userList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            user<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>visitor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é¦–å…ˆåœ¨è¿™ä¸ªç±»ä¸­åˆå§‹åŒ–äº†åŸºæœ¬çš„æ•°æ®ï¼Œå­¦ç”Ÿå’Œè€å¸ˆçš„ä¿¡æ¯ã€‚</li><li>å¹¶æä¾›äº†ä¸€ä¸ªå±•ç¤ºç±»ï¼Œé€šè¿‡ä¼ å…¥ä¸åŒçš„<code>è§‚å¯Ÿè€…(æ ¡é•¿ã€å®¶é•¿)</code>è€Œå·®å¼‚åŒ–çš„æ‰“å°ä¿¡æ¯ã€‚</li></ul><h3 id="_3-æµ‹è¯•éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_3-æµ‹è¯•éªŒè¯" aria-hidden="true">#</a> 3. æµ‹è¯•éªŒè¯</h3><h4 id="_3-1-ç¼–å†™æµ‹è¯•ç±»" tabindex="-1"><a class="header-anchor" href="#_3-1-ç¼–å†™æµ‹è¯•ç±»" aria-hidden="true">#</a> 3.1 ç¼–å†™æµ‹è¯•ç±»</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">DataView</span> dataView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      

    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\\r\\nå®¶é•¿è§†è§’è®¿é—®ï¼š&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dataView<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// å®¶é•¿</span>

    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\\r\\næ ¡é•¿è§†è§’è®¿é—®ï¼š&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dataView<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Principal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// æ ¡é•¿</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»æµ‹è¯•ç±»å¯ä»¥çœ‹åˆ°ï¼Œå®¶é•¿å’Œæ ¡é•¿åˆ†åˆ«æ˜¯ä¸åŒçš„è®¿é—®è§†è§’ã€‚</li></ul><h4 id="_3-2-æµ‹è¯•ç»“æœ" tabindex="-1"><a class="header-anchor" href="#_3-2-æµ‹è¯•ç»“æœ" aria-hidden="true">#</a> 3.2 æµ‹è¯•ç»“æœ</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">23</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">39.726</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> 
å®¶é•¿è§†è§’è®¿é—®ï¼š
<span class="token number">23</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">39.730</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span>visitor<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>Parent</span> <span class="token operator">-</span> å­¦ç”Ÿä¿¡æ¯ å§“åï¼šè°¢é£æœº ç­çº§ï¼šä¸€å¹´ä¸€ç­ æ’åï¼š<span class="token number">62</span>
<span class="token number">23</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">39.730</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span>visitor<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>Parent</span> <span class="token operator">-</span> å­¦ç”Ÿä¿¡æ¯ å§“åï¼šwindy ç­çº§ï¼šä¸€å¹´ä¸€ç­ æ’åï¼š<span class="token number">51</span>
<span class="token number">23</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">39.730</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span>visitor<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>Parent</span> <span class="token operator">-</span> å­¦ç”Ÿä¿¡æ¯ å§“åï¼šå¤§æ¯› ç­çº§ï¼šäºŒå¹´ä¸‰ç­ æ’åï¼š<span class="token number">16</span>
<span class="token number">23</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">39.730</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span>visitor<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>Parent</span> <span class="token operator">-</span> å­¦ç”Ÿä¿¡æ¯ å§“åï¼š<span class="token class-name">Shing</span> ç­çº§ï¼šä¸‰å¹´å››ç­ æ’åï¼š<span class="token number">98</span>
<span class="token number">23</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">39.730</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span>visitor<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>Parent</span> <span class="token operator">-</span> è€å¸ˆä¿¡æ¯ å§“åï¼š<span class="token constant">BK</span> ç­çº§ï¼šä¸€å¹´ä¸€ç­ çº§åˆ«ï¼šç‰¹çº§æ•™å¸ˆ
<span class="token number">23</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">39.730</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span>visitor<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>Parent</span> <span class="token operator">-</span> è€å¸ˆä¿¡æ¯ å§“åï¼šå¨œå¨œ<span class="token class-name">Goddess</span> ç­çº§ï¼šä¸€å¹´ä¸€ç­ çº§åˆ«ï¼šç‰¹çº§æ•™å¸ˆ
<span class="token number">23</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">39.730</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span>visitor<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>Parent</span> <span class="token operator">-</span> è€å¸ˆä¿¡æ¯ å§“åï¼šdangdang ç­çº§ï¼šäºŒå¹´ä¸‰ç­ çº§åˆ«ï¼šæ™®é€šæ•™å¸ˆ
<span class="token number">23</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">39.730</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span>visitor<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>Parent</span> <span class="token operator">-</span> è€å¸ˆä¿¡æ¯ å§“åï¼šæ³½ä¸œ ç­çº§ï¼šä¸‰å¹´å››ç­ çº§åˆ«ï¼šå®ä¹ æ•™å¸ˆ
<span class="token number">23</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">39.730</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design<span class="token punctuation">.</span>test<span class="token punctuation">.</span></span>ApiTest</span> <span class="token operator">-</span> 
æ ¡é•¿è§†è§’è®¿é—®ï¼š
<span class="token number">23</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">39.731</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>d<span class="token punctuation">.</span>design<span class="token punctuation">.</span>visitor<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>Principal</span> <span class="token operator">-</span> å­¦ç”Ÿä¿¡æ¯ å§“åï¼šè°¢é£æœº ç­çº§ï¼šä¸€å¹´ä¸€ç­
<span class="token number">23</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">39.731</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>d<span class="token punctuation">.</span>design<span class="token punctuation">.</span>visitor<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>Principal</span> <span class="token operator">-</span> å­¦ç”Ÿä¿¡æ¯ å§“åï¼šwindy ç­çº§ï¼šä¸€å¹´ä¸€ç­
<span class="token number">23</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">39.731</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>d<span class="token punctuation">.</span>design<span class="token punctuation">.</span>visitor<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>Principal</span> <span class="token operator">-</span> å­¦ç”Ÿä¿¡æ¯ å§“åï¼šå¤§æ¯› ç­çº§ï¼šäºŒå¹´ä¸‰ç­
<span class="token number">23</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">39.731</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>d<span class="token punctuation">.</span>design<span class="token punctuation">.</span>visitor<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>Principal</span> <span class="token operator">-</span> å­¦ç”Ÿä¿¡æ¯ å§“åï¼š<span class="token class-name">Shing</span> ç­çº§ï¼šä¸‰å¹´å››ç­
<span class="token number">23</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">39.733</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>d<span class="token punctuation">.</span>design<span class="token punctuation">.</span>visitor<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>Principal</span> <span class="token operator">-</span> å­¦ç”Ÿä¿¡æ¯ å§“åï¼š<span class="token constant">BK</span> ç­çº§ï¼šä¸€å¹´ä¸€ç­ å‡å­¦ç‡ï¼š<span class="token number">70.62</span>
<span class="token number">23</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">39.733</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>d<span class="token punctuation">.</span>design<span class="token punctuation">.</span>visitor<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>Principal</span> <span class="token operator">-</span> å­¦ç”Ÿä¿¡æ¯ å§“åï¼šå¨œå¨œ<span class="token class-name">Goddess</span> ç­çº§ï¼šä¸€å¹´ä¸€ç­ å‡å­¦ç‡ï¼š<span class="token number">23.15</span>
<span class="token number">23</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">39.734</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>d<span class="token punctuation">.</span>design<span class="token punctuation">.</span>visitor<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>Principal</span> <span class="token operator">-</span> å­¦ç”Ÿä¿¡æ¯ å§“åï¼šdangdang ç­çº§ï¼šäºŒå¹´ä¸‰ç­ å‡å­¦ç‡ï¼š<span class="token number">70.98</span>
<span class="token number">23</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">39.734</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>d<span class="token punctuation">.</span>design<span class="token punctuation">.</span>visitor<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>Principal</span> <span class="token operator">-</span> å­¦ç”Ÿä¿¡æ¯ å§“åï¼šæ³½ä¸œ ç­çº§ï¼šä¸‰å¹´å››ç­ å‡å­¦ç‡ï¼š<span class="token number">90.14</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é€šè¿‡æµ‹è¯•ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œå®¶é•¿å’Œæ ¡é•¿çš„è®¿é—®è§†è§’åŒæ­¥ï¼Œæ•°æ®ä¹Ÿæ˜¯å·®å¼‚åŒ–çš„ã€‚</li><li>å®¶é•¿è§†è§’çœ‹åˆ°å­¦ç”Ÿçš„æ’åï¼›<code>æ’åï¼š62</code>ã€<code>æ’åï¼š51</code>ã€<code>æ’åï¼š16</code>ã€<code>æ’åï¼š98</code>ã€‚</li><li>æ ¡é•¿è§†è§’çœ‹åˆ°ç­çº§å‡å­¦ç‡ï¼›<code>å‡å­¦ç‡ï¼š70.62</code>ã€<code>å‡å­¦ç‡ï¼š23.15</code>ã€<code>å‡å­¦ç‡ï¼š70.98</code>ã€<code>å‡å­¦ç‡ï¼š90.14</code>ã€‚</li><li>é€šè¿‡è¿™æ ·çš„æµ‹è¯•ç»“æœï¼Œå¯ä»¥çœ‹åˆ°è®¿é—®è€…æ¨¡å¼çš„åˆå¿ƒå’Œç»“æœï¼Œåœ¨é€‚åˆçš„åœºæ™¯è¿ç”¨åˆé€‚çš„æ¨¡å¼ï¼Œéå¸¸æœ‰åˆ©äºç¨‹åºå¼€å‘ã€‚</li></ul><h2 id="å…­ã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#å…­ã€æ€»ç»“" aria-hidden="true">#</a> å…­ã€æ€»ç»“</h2><ul><li>ä»ä»¥ä¸Šçš„ä¸šåŠ¡åœºæ™¯ä¸­å¯ä»¥çœ‹åˆ°ï¼Œåœ¨åµŒå…¥è®¿é—®è€…æ¨¡å¼åï¼Œå¯ä»¥è®©æ•´ä¸ªå·¥ç¨‹ç»“æ„å˜å¾—å®¹æ˜“æ·»åŠ å’Œä¿®æ”¹ã€‚ä¹Ÿå°±åšåˆ°äº†ç³»ç»ŸæœåŠ¡ä¹‹é—´çš„è§£è€¦ï¼Œä¸è‡³äºä¸ºäº†ä¸åŒç±»å‹ä¿¡æ¯çš„è®¿é—®è€Œå¢åŠ å¾ˆå¤šå¤šä½™çš„<code>if</code>åˆ¤æ–­æˆ–è€…ç±»çš„å¼ºåˆ¶è½¬æ¢ã€‚ä¹Ÿå°±æ˜¯é€šè¿‡è¿™æ ·çš„è®¾è®¡æ¨¡å¼è€Œè®©ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ã€‚</li><li>å¦å¤–åœ¨å®ç°çš„è¿‡ç¨‹å¯èƒ½ä½ å¯èƒ½ä¹Ÿå‘ç°äº†ï¼Œå®šä¹‰æŠ½è±¡ç±»çš„æ—¶å€™è¿˜éœ€è¦ç­‰å¾…è®¿é—®è€…æ¥å£çš„å®šä¹‰ï¼Œè¿™æ ·çš„è®¾è®¡é¦–å…ˆä»å®ç°ä¸Šä¼šè®©ä»£ç çš„ç»„ç»‡å˜å¾—æœ‰äº›éš¾åº¦ã€‚å¦å¤–ä»è®¾è®¡æ¨¡å¼åŸåˆ™çš„è§’åº¦æ¥çœ‹ï¼Œè¿èƒŒäº†è¿ªç±³ç‰¹åŸåˆ™ï¼Œä¹Ÿå°±æ˜¯æœ€å°‘çŸ¥é“åŸåˆ™ã€‚å› æ­¤åœ¨ä½¿ç”¨ä¸Šä¸€å®šè¦ç¬¦åˆåœºæ™¯çš„è¿ç”¨ï¼Œä»¥åŠæå–è¿™éƒ¨åˆ†è®¾è®¡æ€æƒ³çš„ç²¾é«“ã€‚</li><li>å¥½çš„å­¦ä¹ æ–¹å¼æ‰å¥½æ›´å®¹æ˜“æ¥å—çŸ¥è¯†ï¼Œå­¦ä¹ ç¼–ç¨‹çš„æ›´éœ€è¦çš„ä¸å•å•æ˜¯çœ‹ï¼Œè€Œæ˜¯æ“ä½œã€‚äºŒåå¤šç§è®¾è®¡æ¨¡å¼æ¯ä¸€ç§éƒ½æœ‰è‡ªå·±çš„è®¾è®¡æŠ€å·§ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯å·§å¦™ä¹‹å¤„ï¼Œè¿™äº›å·§å¦™çš„åœ°æ–¹å¾€å¾€æ˜¯è§£å†³å¤æ‚éš¾é¢˜çš„æœ€ä½³è§†è§’ã€‚äº²åŠ›äº²ä¸ºï¼Œæ‰èƒ½ä¸ºæ‰€æ¬²ä¸ºï¼Œä¸ºäº†è‡ªå·±çš„æ¬²æœ›è€ŒåŠªåŠ›ï¼</li></ul>`,49);function S(P,V){const a=o("ExternalLinkIcon");return c(),l("div",null,[u,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),k,s("åšå®¢ï¼š"),n("a",r,[s("https://bugstack.cn"),t(a)])]),d,m,v,n("ol",null,[b,g,n("li",null,[s("æ¶‰åŠå·¥ç¨‹ä¸‰ä¸ªï¼Œå¯ä»¥é€šè¿‡å…³æ³¨"),h,s("ï¼š"),n("a",w,[y,t(a)]),s("ï¼Œå›å¤"),f,s("è·å–(æ‰“å¼€è·å–çš„é“¾æ¥ï¼Œæ‰¾åˆ°åºå·18)")])]),_,q,j,n("ul",null,[n("li",null,[s("å›¾ç‰‡æ¥è‡ªï¼š"),n("a",x,[s("https://refactoringguru.cn/design-patterns/visitor"),t(a)])])]),z])}const F=e(i,[["render",S],["__file","2020-07-09-zhongxue Java shejimoshiã€Šshizhanfangwenzhemoshiã€‹.html.vue"]]);export{F as default};
