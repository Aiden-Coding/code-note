import{_ as t,r as p,o,c,a as n,b as s,d as e,e as l}from"./app-3RcBQnkC.js";const i={},u=n("h1",{id:"ã€Šspring-æ‰‹æ’¸ä¸“æ ã€‹ç¬¬-15-ç« -ä¸‡äººä¹‹æ•Œ-é€šè¿‡æ³¨è§£ç»™å±æ€§æ³¨å…¥é…ç½®å’Œbeanå¯¹è±¡",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ã€Šspring-æ‰‹æ’¸ä¸“æ ã€‹ç¬¬-15-ç« -ä¸‡äººä¹‹æ•Œ-é€šè¿‡æ³¨è§£ç»™å±æ€§æ³¨å…¥é…ç½®å’Œbeanå¯¹è±¡","aria-hidden":"true"},"#"),s(" ã€ŠSpring æ‰‹æ’¸ä¸“æ ã€‹ç¬¬ 15 ç« ï¼šä¸‡äººä¹‹æ•Œï¼Œé€šè¿‡æ³¨è§£ç»™å±æ€§æ³¨å…¥é…ç½®å’ŒBeanå¯¹è±¡")],-1),r=n("br",null,null,-1),k={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},d=n("br",null,null,-1),v={href:"https://mp.weixin.qq.com/s/GNLA10AimmxUSZ0VoDI_xA",target:"_blank",rel:"noopener noreferrer"},m=l(`<blockquote><p>æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„</p></blockquote><h2 id="ä¸€ã€å‰è¨€" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å‰è¨€" aria-hidden="true">#</a> ä¸€ã€å‰è¨€</h2><p><code>å†™ä»£ç ï¼Œå°±æ˜¯ä»èƒ½ç”¨åˆ°å¥½ç”¨çš„ä¸æ–­æŠ˜è…¾ï¼</code></p><p>ä½ å¬è¿‡æ‰°åŠ¨å‡½æ•°å—ï¼Ÿä½ å†™è¿‡æ–æ³¢é‚£å¥‘ï¼ˆFibonacciï¼‰æ•£åˆ—å—ï¼Ÿä½ å®ç°è¿‡æ¢…æ£®æ—‹è½¬ç®—æ³•å—ï¼Ÿ<strong>æ€ä¹ˆ</strong> æ²¡å¬è¿‡è¿™äº›å†™ä¸äº†ä»£ç å—ï¼ä¸ä¼šçš„ï¼Œå³ä½¿æ²¡å¬è¿‡ä½ ä¸€æ ·å¯ä»¥å†™çš„äº†ä»£ç ï¼Œæ¯”å¦‚ä½ å®ç°çš„æ•°æ®åº“è·¯ç”±æ•°æ®æ€»æ˜¯è½åœ¨1åº“1è¡¨å®ƒä¸æ•£åˆ—åˆ†å¸ƒã€ä½ å®ç°çš„æŠ½å¥–ç³»ç»Ÿæ€»æ˜¯æŠŠè¿è¥é…ç½®çš„æœ€å¤§çº¢åŒ…å‘å‡ºå»æé«˜äº†è¿è¥æˆæœ¬ã€ä½ å¼€å‘çš„ç§’æ€ç³»ç»Ÿæ€»æ˜¯åœ¨å¼€å§‹åçš„1ç§’å°±æŒ‚äº†è´§å“æ ¹æœ¬ç»™ä¸å‡ºå»ã€‚</p><p>é™¤äº†ä¸€éƒ¨åˆ†ä»…æŠŠç¼–ç å½“æˆæ¬ç –åº”ä»˜å·¥ä½œå¤–çš„ç¨‹åºå‘˜ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†æ€»æ˜¯åœ¨è¿½æ±‚æè‡´çš„ç å†œã€‚<em>å†™ä»£ç è¿˜èƒ½èµšé’±ï¼ŒçœŸå¼€å¿ƒï¼</em> è¿™æ ·çš„ç å†œæ€»æ˜¯ä¼šè€ƒè™‘ğŸ¤”è¿˜æœ‰æ²¡æœ‰æ›´å¥½çš„å®ç°é€»è¾‘èƒ½è®©ä»£ç ä¸ä»…æ˜¯èƒ½ç”¨ï¼Œè¿˜è¦å¥½ç”¨å‘¢ï¼Ÿå…¶å®è¿™ä¸€ç‚¹çš„è¿½æ±‚åˆ°å®Œæˆï¼Œéœ€è¦å¤§é‡æ‰©å±•æ€§å­¦ä¹ å’Œæ·±åº¦æŒ–æ˜ï¼Œè¿™æ ·ä½ è®¾è®¡å‡ºæ¥çš„ç³»ç»Ÿæ‰æ›´ä½ è€ƒè™‘çš„æ›´åŠ å…¨é¢ï¼Œä¹Ÿèƒ½åº”å¯¹å„ç§å¤æ‚çš„åœºæ™¯ã€‚</p><h2 id="äºŒã€ç›®æ ‡" tabindex="-1"><a class="header-anchor" href="#äºŒã€ç›®æ ‡" aria-hidden="true">#</a> äºŒã€ç›®æ ‡</h2><p>åœ¨ç›®å‰ IOCã€AOP ä¸¤å¤§æ ¸å¿ƒåŠŸèƒ½æ¨¡å—çš„æ”¯æ’‘ä¸‹ï¼Œå®Œå…¨å¯ä»¥ç®¡ç† Bean å¯¹è±¡çš„æ³¨å†Œå’Œè·å–ï¼Œä¸è¿‡è¿™æ ·çš„ä½¿ç”¨æ–¹å¼æ€»æ„Ÿè§‰åƒæ˜¯åˆ€è€•ç«ç§æœ‰ç‚¹éš¾ç”¨ã€‚å› æ­¤åœ¨ä¸Šä¸€ç« èŠ‚æˆ‘ä»¬è§£å†³éœ€è¦æ‰‹åŠ¨é…ç½® <code>Bean</code> å¯¹è±¡åˆ° <code>spring.xml</code> æ–‡ä»¶ä¸­ï¼Œæ”¹ä¸ºå¯ä»¥è‡ªåŠ¨æ‰«æå¸¦æœ‰æ³¨è§£ <code>@Component</code> çš„å¯¹è±¡å®Œæˆè‡ªåŠ¨è£…é…å’Œæ³¨å†Œåˆ° <code>Spring</code> å®¹å™¨çš„æ“ä½œã€‚</p><p>é‚£ä¹ˆåœ¨è‡ªåŠ¨æ‰«æåŒ…æ³¨å†Œ Bean å¯¹è±¡ä¹‹åï¼Œå°±éœ€è¦æŠŠåŸæ¥åœ¨é…ç½®æ–‡ä»¶ä¸­é€šè¿‡ <code>property name=&quot;token&quot;</code> é…ç½®å±æ€§å’ŒBeançš„æ“ä½œï¼Œä¹Ÿæ”¹ä¸ºå¯ä»¥è‡ªåŠ¨æ³¨å…¥ã€‚è¿™å°±åƒæˆ‘ä»¬ä½¿ç”¨ Spring æ¡†æ¶ä¸­ <code>@Autowired</code>ã€<code>@Value</code> æ³¨è§£ä¸€æ ·ï¼Œå®Œæˆæˆ‘ä»¬å¯¹å±æ€§å’Œå¯¹è±¡çš„æ³¨å…¥æ“ä½œã€‚</p><h2 id="ä¸‰ã€æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€æ–¹æ¡ˆ" aria-hidden="true">#</a> ä¸‰ã€æ–¹æ¡ˆ</h2><p>å…¶å®ä»æˆ‘ä»¬åœ¨å®Œæˆ Bean å¯¹è±¡çš„åŸºç¡€åŠŸèƒ½åï¼Œåç»­é™†ç»­æ·»åŠ çš„åŠŸèƒ½éƒ½æ˜¯å›´ç»•ç€ Bean çš„ç”Ÿå‘½å‘¨æœŸè¿›è¡Œçš„ï¼Œæ¯”å¦‚ä¿®æ”¹ Bean çš„å®šä¹‰ BeanFactoryPostProcessorï¼Œå¤„ç† Bean çš„å±æ€§è¦ç”¨åˆ° BeanPostProcessorï¼Œå®Œæˆä¸ªæ€§çš„å±æ€§æ“ä½œåˆ™ä¸“é—¨ç»§æ‰¿ BeanPostProcessor æä¾›æ–°çš„æ¥å£ï¼Œå› ä¸ºè¿™æ ·æ‰èƒ½é€šè¿‡ instanceof åˆ¤æ–­å‡ºå…·æœ‰æ ‡è®°æ€§çš„æ¥å£ã€‚æ‰€ä»¥å…³äº Bean ç­‰ç­‰çš„æ“ä½œï¼Œä»¥åŠç›‘å¬ Awareã€è·å– BeanFactoryï¼Œéƒ½éœ€è¦åœ¨ Bean çš„ç”Ÿå‘½å‘¨æœŸä¸­å®Œæˆã€‚é‚£ä¹ˆæˆ‘ä»¬åœ¨è®¾è®¡å±æ€§å’Œ Bean å¯¹è±¡çš„æ³¨å…¥æ—¶å€™ï¼Œä¹Ÿä¼šç”¨åˆ° BeanPostProcessor æ¥å®Œæˆåœ¨è®¾ç½® Bean å±æ€§ä¹‹å‰ï¼Œå…è®¸ BeanPostProcessor ä¿®æ”¹å±æ€§å€¼ã€‚æ•´ä½“è®¾è®¡ç»“æ„å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://bugstack.cn/assets/images/spring/spring-15-01.png" alt=""></p><ul><li>è¦å¤„ç†è‡ªåŠ¨æ‰«ææ³¨å…¥ï¼ŒåŒ…æ‹¬å±æ€§æ³¨å…¥ã€å¯¹è±¡æ³¨å…¥ï¼Œåˆ™éœ€è¦åœ¨å¯¹è±¡å±æ€§ <code>applyPropertyValues</code> å¡«å……ä¹‹å‰ ï¼ŒæŠŠå±æ€§ä¿¡æ¯å†™å…¥åˆ° PropertyValues çš„é›†åˆä¸­å»ã€‚è¿™ä¸€æ­¥çš„æ“ä½œç›¸å½“äºæ˜¯è§£å†³äº†ä»¥å‰åœ¨ spring.xml é…ç½®å±æ€§çš„è¿‡ç¨‹ã€‚</li><li>è€Œåœ¨å±æ€§çš„è¯»å–ä¸­ï¼Œéœ€è¦ä¾èµ–äºå¯¹ Bean å¯¹è±¡çš„ç±»ä¸­å±æ€§çš„é…ç½®äº†æ³¨è§£çš„æ‰«æï¼Œ<code>field.getAnnotation(Value.class);</code> ä¾æ¬¡æ‹¿å‡ºç¬¦åˆçš„å±æ€§å¹¶å¡«å……ä¸Šç›¸åº”çš„é…ç½®ä¿¡æ¯ã€‚<em>è¿™é‡Œæœ‰ä¸€ç‚¹ ï¼Œå±æ€§çš„é…ç½®ä¿¡æ¯éœ€è¦ä¾èµ–äº BeanFactoryPostProcessor çš„å®ç°ç±» PropertyPlaceholderConfigurerï¼ŒæŠŠå€¼å†™å…¥åˆ° AbstractBeanFactoryçš„embeddedValueResolversé›†åˆä¸­ï¼Œè¿™æ ·æ‰èƒ½åœ¨å±æ€§å¡«å……ä¸­åˆ©ç”¨ beanFactory è·å–ç›¸åº”çš„å±æ€§å€¼</em></li><li>è¿˜æœ‰ä¸€ä¸ªæ˜¯å…³äº @Autowired å¯¹äºå¯¹è±¡çš„æ³¨å…¥ï¼Œå…¶å®è¿™ä¸€ä¸ªå’Œå±æ€§æ³¨å…¥çš„å”¯ä¸€åŒºåˆ«æ˜¯å¯¹äºå¯¹è±¡çš„è·å– <code>beanFactory.getBean(fieldType)</code>ï¼Œå…¶ä»–å°±æ²¡æœ‰ä»€ä¹ˆå·®ä¸€ç‚¹äº†ã€‚</li><li>å½“æ‰€æœ‰çš„å±æ€§è¢«è®¾ç½®åˆ° PropertyValues å®Œæˆä»¥åï¼Œæ¥ä¸‹æ¥å°±åˆ°äº†åˆ›å»ºå¯¹è±¡çš„ä¸‹ä¸€æ­¥ï¼Œå±æ€§å¡«å……ï¼Œè€Œæ­¤æ—¶å°±ä¼šæŠŠæˆ‘ä»¬ä¸€ä¸€è·å–åˆ°çš„é…ç½®å’Œå¯¹è±¡å¡«å……åˆ°å±æ€§ä¸Šï¼Œä¹Ÿå°±å®ç°äº†è‡ªåŠ¨æ³¨å…¥çš„åŠŸèƒ½ã€‚</li></ul><h2 id="å››ã€å®ç°" tabindex="-1"><a class="header-anchor" href="#å››ã€å®ç°" aria-hidden="true">#</a> å››ã€å®ç°</h2><h3 id="_1-å·¥ç¨‹ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>small<span class="token operator">-</span>spring<span class="token operator">-</span>step<span class="token operator">-</span><span class="token number">14</span>
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â””â”€â”€ java
    â”‚       â””â”€â”€ cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>springframework
    â”‚           â”œâ”€â”€ aop
    â”‚           â”‚   â”œâ”€â”€ aspectj
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">AspectJExpressionPointcut</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">AspectJExpressionPointcutAdvisor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ framework 
    â”‚           â”‚   â”‚   â”œâ”€â”€ adapter
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ <span class="token class-name">MethodBeforeAdviceInterceptor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ autoproxy
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ <span class="token class-name">MethodBeforeAdviceInterceptor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AopProxy</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">Cglib2AopProxy</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">JdkDynamicAopProxy</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ProxyFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">ReflectiveMethodInvocation</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">AdvisedSupport</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">Advisor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">BeforeAdvice</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ClassFilter</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">MethodBeforeAdvice</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">MethodMatcher</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">Pointcut</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">PointcutAdvisor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">TargetSource</span><span class="token punctuation">.</span>java
    â”‚           â”œâ”€â”€ beans
    â”‚           â”‚   â”œâ”€â”€ factory  
    â”‚           â”‚   â”‚   â”œâ”€â”€ annotation
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">Autowired</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AutowiredAnnotationBeanPostProcessor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">Qualifier</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ <span class="token class-name">Value</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ config
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AutowireCapableBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanDefinition</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanFactoryPostProcessor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanPostProcessor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanReference</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ConfigurableBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">InstantiationAwareBeanPostProcessor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ <span class="token class-name">SingletonBeanRegistry</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ support
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractAutowireCapableBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractBeanDefinitionReader</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanDefinitionReader</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanDefinitionRegistry</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">CglibSubclassingInstantiationStrategy</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">DefaultListableBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">DefaultSingletonBeanRegistry</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">DisposableBeanAdapter</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">FactoryBeanRegistrySupport</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">InstantiationStrategy</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ <span class="token class-name">SimpleInstantiationStrategy</span><span class="token punctuation">.</span>java  
    â”‚           â”‚   â”‚   â”œâ”€â”€ support
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ <span class="token class-name">XmlBeanDefinitionReader</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">Aware</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanClassLoaderAware</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanFactoryAware</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanNameAware</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ConfigurableListableBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">DisposableBean</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">FactoryBean</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">HierarchicalBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">InitializingBean</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ListableBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">PropertyPlaceholderConfigurer</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">BeansException</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">PropertyValue</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">PropertyValues</span><span class="token punctuation">.</span>java 
    â”‚           â”œâ”€â”€ context
    â”‚           â”‚   â”œâ”€â”€ annotation
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ClassPathBeanDefinitionScanner</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ClassPathScanningCandidateComponentProvider</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">Scope</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ event
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractApplicationEventMulticaster</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationContextEvent</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationEventMulticaster</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ContextClosedEvent</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ContextRefreshedEvent</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">SimpleApplicationEventMulticaster</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ support
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractApplicationContext</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractRefreshableApplicationContext</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractXmlApplicationContext</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationContextAwareProcessor</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationContext</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationContextAware</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationEvent</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationEventPublisher</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationListener</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">ConfigurableApplicationContext</span><span class="token punctuation">.</span>java
    â”‚           â”œâ”€â”€ core<span class="token punctuation">.</span>io
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ClassPathResource</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">DefaultResourceLoader</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">FileSystemResource</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">Resource</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ResourceLoader</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">UrlResource</span><span class="token punctuation">.</span>java
    â”‚           â”œâ”€â”€ stereotype
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">Component</span><span class="token punctuation">.</span>java
    â”‚           â””â”€â”€ utils
    â”‚               â”œâ”€â”€ <span class="token class-name">ClassUtils</span><span class="token punctuation">.</span>java
    â”‚               â””â”€â”€ <span class="token class-name">StringValueResolver</span><span class="token punctuation">.</span>java
    â””â”€â”€ test
        â””â”€â”€ java
            â””â”€â”€ cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test
                â”œâ”€â”€ bean
                â”‚   â”œâ”€â”€ <span class="token class-name">IUserService</span><span class="token punctuation">.</span>java
                â”‚   â””â”€â”€ <span class="token class-name">UserService</span><span class="token punctuation">.</span>java
                â””â”€â”€ <span class="token class-name">ApiTest</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å·¥ç¨‹æºç </strong>ï¼š<code>å…¬ä¼—å·ã€Œbugstackè™«æ´æ ˆã€ï¼Œå›å¤ï¼šSpring ä¸“æ ï¼Œè·å–å®Œæ•´æºç </code></p><p>è‡ªåŠ¨æ‰«ææ³¨å…¥å ä½ç¬¦é…ç½®å’Œå¯¹è±¡çš„ç±»å…³ç³»ï¼Œå¦‚å›¾ 15-2</p><p><img src="https://bugstack.cn/assets/images/spring/spring-15-02.png" alt="å›¾ 15-2"></p><ul><li>åœ¨æ•´ä¸ªç±»å›¾ä¸­ä»¥å›´ç»•å®ç°æ¥å£ InstantiationAwareBeanPostProcessor çš„ç±» AutowiredAnnotationBeanPostProcessor ä½œä¸ºå…¥å£ç‚¹ï¼Œè¢« AbstractAutowireCapableBeanFactoryåˆ›å»º Bean å¯¹è±¡è¿‡ç¨‹ä¸­è°ƒç”¨æ‰«ææ•´ä¸ªç±»çš„å±æ€§é…ç½®ä¸­å«æœ‰è‡ªå®šä¹‰æ³¨è§£ <code>Value</code>ã€<code>Autowired</code>ã€<code>Qualifier</code>ï¼Œçš„å±æ€§å€¼ã€‚</li><li>è¿™é‡Œç¨æœ‰å˜åŠ¨çš„æ˜¯å…³äºå±æ€§å€¼ä¿¡æ¯çš„è·å–ï¼Œåœ¨æ³¨è§£é…ç½®çš„å±æ€§å­—æ®µæ‰«æåˆ°ä¿¡æ¯æ³¨å…¥æ—¶ï¼ŒåŒ…æ‹¬äº†å ä½ç¬¦ä»é…ç½®æ–‡ä»¶è·å–ä¿¡æ¯ä¹ŸåŒ…æ‹¬ Bean å¯¹è±¡ï¼ŒBean å¯¹è±¡å¯ä»¥ç›´æ¥è·å–ï¼Œä½†é…ç½®ä¿¡æ¯éœ€è¦åœ¨ AbstractBeanFactory ä¸­æ·»åŠ æ–°çš„å±æ€§é›†åˆ embeddedValueResolversï¼Œç”± PropertyPlaceholderConfigurer#postProcessBeanFactory è¿›è¡Œæ“ä½œå¡«å……åˆ°å±æ€§é›†åˆä¸­ã€‚</li></ul><h3 id="_2-æŠŠè¯»å–åˆ°å±æ€§å¡«å……åˆ°å®¹å™¨" tabindex="-1"><a class="header-anchor" href="#_2-æŠŠè¯»å–åˆ°å±æ€§å¡«å……åˆ°å®¹å™¨" aria-hidden="true">#</a> 2. æŠŠè¯»å–åˆ°å±æ€§å¡«å……åˆ°å®¹å™¨</h3><p><strong>å®šä¹‰è§£æå­—ç¬¦ä¸²æ¥å£</strong></p><p><strong>cn.bugstack.springframework.util.StringValueResolver</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StringValueResolver</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span> <span class="token function">resolveStringValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> strVal<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ¥å£ StringValueResolver æ˜¯ä¸€ä¸ªè§£æå­—ç¬¦ä¸²æ“ä½œçš„æ¥å£</li></ul><p><strong>å¡«å……å­—ç¬¦ä¸²</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PropertyPlaceholderConfigurer</span> <span class="token keyword">implements</span> <span class="token class-name">BeanFactoryPostProcessor</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postProcessBeanFactory</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableListableBeanFactory</span> beanFactory<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// åŠ è½½å±æ€§æ–‡ä»¶</span>
            <span class="token class-name">DefaultResourceLoader</span> resourceLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultResourceLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Resource</span> resource <span class="token operator">=</span> resourceLoader<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">// ... å ä½ç¬¦æ›¿æ¢å±æ€§å€¼ã€è®¾ç½®å±æ€§å€¼</span>

            <span class="token comment">// å‘å®¹å™¨ä¸­æ·»åŠ å­—ç¬¦ä¸²è§£æå™¨ï¼Œä¾›è§£æ@Valueæ³¨è§£ä½¿ç”¨</span>
            <span class="token class-name">StringValueResolver</span> valueResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PlaceholderResolvingStringValueResolver</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
            beanFactory<span class="token punctuation">.</span><span class="token function">addEmbeddedValueResolver</span><span class="token punctuation">(</span>valueResolver<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BeansException</span><span class="token punctuation">(</span><span class="token string">&quot;Could not load properties&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">PlaceholderResolvingStringValueResolver</span> <span class="token keyword">implements</span> <span class="token class-name">StringValueResolver</span> <span class="token punctuation">{</span>

        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Properties</span> properties<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">PlaceholderResolvingStringValueResolver</span><span class="token punctuation">(</span><span class="token class-name">Properties</span> properties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>properties <span class="token operator">=</span> properties<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">resolveStringValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> strVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">PropertyPlaceholderConfigurer</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resolvePlaceholder</span><span class="token punctuation">(</span>strVal<span class="token punctuation">,</span> properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨è§£æå±æ€§é…ç½®çš„ç±» PropertyPlaceholderConfigurer ä¸­ï¼Œæœ€ä¸»è¦çš„å…¶å®å°±æ˜¯è¿™è¡Œä»£ç çš„æ“ä½œ <code>beanFactory.addEmbeddedValueResolver(valueResolver)</code> è¿™æ˜¯æŠŠå±æ€§å€¼å†™å…¥åˆ°äº† AbstractBeanFactory çš„ embeddedValueResolvers ä¸­ã€‚</li><li>è¿™é‡Œè¯´æ˜ä¸‹ï¼ŒembeddedValueResolvers æ˜¯ AbstractBeanFactory ç±»æ–°å¢åŠ çš„é›†åˆ <code>List&lt;StringValueResolver&gt; embeddedValueResolvers</code> String resolvers to apply e.g. to annotation attribute values</li></ul><h3 id="_3-è‡ªå®šä¹‰å±æ€§æ³¨å…¥æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#_3-è‡ªå®šä¹‰å±æ€§æ³¨å…¥æ³¨è§£" aria-hidden="true">#</a> 3. è‡ªå®šä¹‰å±æ€§æ³¨å…¥æ³¨è§£</h3><p><strong>è‡ªå®šä¹‰æ³¨è§£ï¼ŒAutowiredã€Qualifierã€Value</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">CONSTRUCTOR</span><span class="token punctuation">,</span> <span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">FIELD</span><span class="token punctuation">,</span> <span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Autowired</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">FIELD</span><span class="token punctuation">,</span> <span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">,</span> <span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">PARAMETER</span><span class="token punctuation">,</span> <span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">,</span> <span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">ANNOTATION_TYPE</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Qualifier</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>  

<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">FIELD</span><span class="token punctuation">,</span> <span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">,</span> <span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">PARAMETER</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Value</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * The actual value expression: e.g. &quot;#<span class="token punctuation">{</span>systemProperties.myProp<span class="token punctuation">}</span>&quot;.
     */</span>
    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>3ä¸ªæ³¨è§£åœ¨æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨ Spring ä¹Ÿæ˜¯éå¸¸å¸¸è§çš„ï¼Œæ³¨å…¥å¯¹è±¡ã€æ³¨å…¥å±æ€§ï¼Œè€Œ Qualifier ä¸€èˆ¬ä¸ Autowired é…åˆä½¿ç”¨ã€‚</li></ul><h3 id="_4-æ‰«æè‡ªå®šä¹‰æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#_4-æ‰«æè‡ªå®šä¹‰æ³¨è§£" aria-hidden="true">#</a> 4. æ‰«æè‡ªå®šä¹‰æ³¨è§£</h3><p><strong>cn.bugstack.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AutowiredAnnotationBeanPostProcessor</span> <span class="token keyword">implements</span> <span class="token class-name">InstantiationAwareBeanPostProcessor</span><span class="token punctuation">,</span> <span class="token class-name">BeanFactoryAware</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">ConfigurableListableBeanFactory</span> beanFactory<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanFactory</span><span class="token punctuation">(</span><span class="token class-name">BeanFactory</span> beanFactory<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>beanFactory <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ConfigurableListableBeanFactory</span><span class="token punctuation">)</span> beanFactory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">PropertyValues</span> <span class="token function">postProcessPropertyValues</span><span class="token punctuation">(</span><span class="token class-name">PropertyValues</span> pvs<span class="token punctuation">,</span> <span class="token class-name">Object</span> bean<span class="token punctuation">,</span> <span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token comment">// 1. å¤„ç†æ³¨è§£ @Value</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> bean<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        clazz <span class="token operator">=</span> <span class="token class-name">ClassUtils</span><span class="token punctuation">.</span><span class="token function">isCglibProxyClass</span><span class="token punctuation">(</span>clazz<span class="token punctuation">)</span> <span class="token operator">?</span> clazz<span class="token punctuation">.</span><span class="token function">getSuperclass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> clazz<span class="token punctuation">;</span>

        <span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> declaredFields <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> declaredFields<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Value</span> valueAnnotation <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Value</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> valueAnnotation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> value <span class="token operator">=</span> valueAnnotation<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                value <span class="token operator">=</span> beanFactory<span class="token punctuation">.</span><span class="token function">resolveEmbeddedValue</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">BeanUtil</span><span class="token punctuation">.</span><span class="token function">setFieldValue</span><span class="token punctuation">(</span>bean<span class="token punctuation">,</span> field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 2. å¤„ç†æ³¨è§£ @Autowired</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> declaredFields<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Autowired</span> autowiredAnnotation <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Autowired</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> autowiredAnnotation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> fieldType <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> dependentBeanName <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                <span class="token class-name">Qualifier</span> qualifierAnnotation <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Qualifier</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Object</span> dependentBean <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> qualifierAnnotation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    dependentBeanName <span class="token operator">=</span> qualifierAnnotation<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    dependentBean <span class="token operator">=</span> beanFactory<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>dependentBeanName<span class="token punctuation">,</span> fieldType<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    dependentBean <span class="token operator">=</span> beanFactory<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>fieldType<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">BeanUtil</span><span class="token punctuation">.</span><span class="token function">setFieldValue</span><span class="token punctuation">(</span>bean<span class="token punctuation">,</span> field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dependentBean<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> pvs<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>AutowiredAnnotationBeanPostProcessor æ˜¯å®ç°æ¥å£ InstantiationAwareBeanPostProcessor çš„ä¸€ä¸ªç”¨äºåœ¨ Bean å¯¹è±¡å®ä¾‹åŒ–å®Œæˆåï¼Œè®¾ç½®å±æ€§æ“ä½œå‰çš„å¤„ç†å±æ€§ä¿¡æ¯çš„ç±»å’Œæ“ä½œæ–¹æ³•ã€‚<em>åªæœ‰å®ç°äº† BeanPostProcessor æ¥å£æ‰æœ‰æœºä¼šåœ¨ Bean çš„ç”Ÿå‘½å‘¨æœŸä¸­å¤„ç†åˆå§‹åŒ–ä¿¡æ¯</em></li><li>æ ¸å¿ƒæ–¹æ³• postProcessPropertyValuesï¼Œä¸»è¦ç”¨äºå¤„ç†ç±»å«æœ‰ @Valueã€@Autowired æ³¨è§£çš„å±æ€§ï¼Œè¿›è¡Œå±æ€§ä¿¡æ¯çš„æå–å’Œè®¾ç½®ã€‚</li><li>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹å› ä¸ºæˆ‘ä»¬åœ¨ AbstractAutowireCapableBeanFactory ç±»ä¸­ä½¿ç”¨çš„æ˜¯ CglibSubclassingInstantiationStrategy è¿›è¡Œç±»çš„åˆ›å»ºï¼Œæ‰€ä»¥åœ¨ AutowiredAnnotationBeanPostProcessor#postProcessPropertyValues ä¸­éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸º CGlib åˆ›å»ºå¯¹è±¡ï¼Œå¦åˆ™æ˜¯ä¸èƒ½æ­£ç¡®æ‹¿åˆ°ç±»ä¿¡æ¯çš„ã€‚<code>ClassUtils.isCglibProxyClass(clazz) ? clazz.getSuperclass() : clazz;</code></li></ul><h3 id="_5-å‘beanfactoryä¸­æ³¨å†Œautowiredannotationbeanpostprocessor" tabindex="-1"><a class="header-anchor" href="#_5-å‘beanfactoryä¸­æ³¨å†Œautowiredannotationbeanpostprocessor" aria-hidden="true">#</a> 5. å‘BeanFactoryä¸­æ³¨å†ŒAutowiredAnnotationBeanPostProcessor</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassPathBeanDefinitionScanner</span> <span class="token keyword">extends</span> <span class="token class-name">ClassPathScanningCandidateComponentProvider</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ClassPathBeanDefinitionScanner</span><span class="token punctuation">(</span><span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>registry <span class="token operator">=</span> registry<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doScan</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> basePackages<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> basePackage <span class="token operator">:</span> basePackages<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BeanDefinition</span><span class="token punctuation">&gt;</span></span> candidates <span class="token operator">=</span> <span class="token function">findCandidateComponents</span><span class="token punctuation">(</span>basePackage<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">:</span> candidates<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// è§£æ Bean çš„ä½œç”¨åŸŸ singletonã€prototype</span>
                <span class="token class-name">String</span> beanScope <span class="token operator">=</span> <span class="token function">resolveBeanScope</span><span class="token punctuation">(</span>beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>beanScope<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    beanDefinition<span class="token punctuation">.</span><span class="token function">setScope</span><span class="token punctuation">(</span>beanScope<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                registry<span class="token punctuation">.</span><span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token function">determineBeanName</span><span class="token punctuation">(</span>beanDefinition<span class="token punctuation">)</span><span class="token punctuation">,</span> beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// æ³¨å†Œå¤„ç†æ³¨è§£çš„ BeanPostProcessorï¼ˆ@Autowiredã€@Valueï¼‰</span>
        registry<span class="token punctuation">.</span><span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token string">&quot;cn.bugstack.springframework.context.annotation.internalAutowiredAnnotationProcessor&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">AutowiredAnnotationBeanPostProcessor</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç”±äºAutowiredAnnotationBeanPostProcessorå¹¶æ²¡æœ‰æ ‡æ³¨@Component,æ‰€ä»¥æ˜¯æ— æ³•åœ¨ç±»æ‰«ææ—¶æ³¨å…¥åˆ°beanFactoryä¸­çš„,æ­¤å¤„éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è¿›è¡Œæ³¨å†Œ.</li></ul><h3 id="_6-åœ¨beançš„ç”Ÿå‘½å‘¨æœŸä¸­è°ƒç”¨å±æ€§æ³¨å…¥" tabindex="-1"><a class="header-anchor" href="#_6-åœ¨beançš„ç”Ÿå‘½å‘¨æœŸä¸­è°ƒç”¨å±æ€§æ³¨å…¥" aria-hidden="true">#</a> 6. åœ¨Beançš„ç”Ÿå‘½å‘¨æœŸä¸­è°ƒç”¨å±æ€§æ³¨å…¥</h3><p><strong>cn.bugstack.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractAutowireCapableBeanFactory</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBeanFactory</span> <span class="token keyword">implements</span> <span class="token class-name">AutowireCapableBeanFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">InstantiationStrategy</span> instantiationStrategy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CglibSubclassingInstantiationStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Object</span> <span class="token function">createBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span> bean <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// åˆ¤æ–­æ˜¯å¦è¿”å›ä»£ç† Bean å¯¹è±¡</span>
            bean <span class="token operator">=</span> <span class="token function">resolveBeforeInstantiation</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> bean<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// å®ä¾‹åŒ– Bean</span>
            bean <span class="token operator">=</span> <span class="token function">createBeanInstance</span><span class="token punctuation">(</span>beanDefinition<span class="token punctuation">,</span> beanName<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// åœ¨è®¾ç½® Bean å±æ€§ä¹‹å‰ï¼Œå…è®¸ BeanPostProcessor ä¿®æ”¹å±æ€§å€¼</span>
            <span class="token function">applyBeanPostProcessorsBeforeApplyingPropertyValues</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> bean<span class="token punctuation">,</span> beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ç»™ Bean å¡«å……å±æ€§</span>
            <span class="token function">applyPropertyValues</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> bean<span class="token punctuation">,</span> beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// æ‰§è¡Œ Bean çš„åˆå§‹åŒ–æ–¹æ³•å’Œ BeanPostProcessor çš„å‰ç½®å’Œåç½®å¤„ç†æ–¹æ³•</span>
            bean <span class="token operator">=</span> <span class="token function">initializeBean</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> bean<span class="token punctuation">,</span> beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BeansException</span><span class="token punctuation">(</span><span class="token string">&quot;Instantiation of bean failed&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// æ³¨å†Œå®ç°äº† DisposableBean æ¥å£çš„ Bean å¯¹è±¡</span>
        <span class="token function">registerDisposableBeanIfNecessary</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> bean<span class="token punctuation">,</span> beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// åˆ¤æ–­ SCOPE_SINGLETONã€SCOPE_PROTOTYPE</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>beanDefinition<span class="token punctuation">.</span><span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">registerSingleton</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> bean<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * åœ¨è®¾ç½® Bean å±æ€§ä¹‹å‰ï¼Œå…è®¸ BeanPostProcessor ä¿®æ”¹å±æ€§å€¼
     *
     * <span class="token keyword">@param</span> <span class="token parameter">beanName</span>
     * <span class="token keyword">@param</span> <span class="token parameter">bean</span>
     * <span class="token keyword">@param</span> <span class="token parameter">beanDefinition</span>
     */</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">applyBeanPostProcessorsBeforeApplyingPropertyValues</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">Object</span> bean<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">BeanPostProcessor</span> beanPostProcessor <span class="token operator">:</span> <span class="token function">getBeanPostProcessors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>beanPostProcessor <span class="token keyword">instanceof</span> <span class="token class-name">InstantiationAwareBeanPostProcessor</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">PropertyValues</span> pvs <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">InstantiationAwareBeanPostProcessor</span><span class="token punctuation">)</span> beanPostProcessor<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">postProcessPropertyValues</span><span class="token punctuation">(</span>beanDefinition<span class="token punctuation">.</span><span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bean<span class="token punctuation">,</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> pvs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> propertyValue <span class="token operator">:</span> pvs<span class="token punctuation">.</span><span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        beanDefinition<span class="token punctuation">.</span><span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addPropertyValue</span><span class="token punctuation">(</span>propertyValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>  

    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>AbstractAutowireCapableBeanFactory#createBean æ–¹æ³•ä¸­æœ‰è¿™ä¸€æ¡æ–°å¢åŠ çš„æ–¹æ³•è°ƒç”¨ï¼Œå°±æ˜¯åœ¨<code>è®¾ç½® Bean å±æ€§ä¹‹å‰ï¼Œå…è®¸ BeanPostProcessor ä¿®æ”¹å±æ€§å€¼</code> çš„æ“ä½œ <code>applyBeanPostProcessorsBeforeApplyingPropertyValues</code></li><li>é‚£ä¹ˆè¿™ä¸ª applyBeanPostProcessorsBeforeApplyingPropertyValues æ–¹æ³•ä¸­ï¼Œé¦–å…ˆå°±æ˜¯è·å–å·²ç»æ³¨å…¥çš„ BeanPostProcessor é›†åˆå¹¶ä»ä¸­ç­›é€‰å‡ºç»§æ‰¿æ¥å£ InstantiationAwareBeanPostProcessor çš„å®ç°ç±»ã€‚</li><li>æœ€åå°±æ˜¯è°ƒç”¨ç›¸åº”çš„ postProcessPropertyValues æ–¹æ³•ä»¥åŠå¾ªç¯è®¾ç½®å±æ€§å€¼ä¿¡æ¯ï¼Œ<code>beanDefinition.getPropertyValues().addPropertyValue(propertyValue);</code></li></ul><h2 id="äº”ã€æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#äº”ã€æµ‹è¯•" aria-hidden="true">#</a> äº”ã€æµ‹è¯•</h2><h3 id="_1-äº‹å…ˆå‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#_1-äº‹å…ˆå‡†å¤‡" aria-hidden="true">#</a> 1. äº‹å…ˆå‡†å¤‡</h3><p><strong>é…ç½® Dao</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> hashMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        hashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;10001&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;å°å‚…å“¥ï¼ŒåŒ—äº¬ï¼Œäº¦åº„&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        hashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;10002&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;å…«æ¯æ°´ï¼Œä¸Šæµ·ï¼Œå°–æ²™å’€&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        hashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;10003&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;é˜¿æ¯›ï¼Œå¤©æ´¥ï¼Œä¸œä¸½åŒº&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">queryUserName</span><span class="token punctuation">(</span><span class="token class-name">String</span> uId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hashMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>uId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç»™ç±»é…ç½®ä¸Šä¸€ä¸ªè‡ªåŠ¨æ‰«ææ³¨å†Œ Bean å¯¹è±¡çš„æ³¨è§£ <code>@Component</code>ï¼Œæ¥ä¸‹æ¥ä¼šæŠŠè¿™ä¸ªç±»æ³¨å…¥åˆ° UserService ä¸­ã€‚</li></ul><p><strong>æ³¨è§£æ³¨å…¥åˆ° UserService</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span><span class="token punctuation">(</span><span class="token string">&quot;userService&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token keyword">implements</span> <span class="token class-name">IUserService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${token}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> token<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">queryUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> userDao<span class="token punctuation">.</span><span class="token function">queryUserName</span><span class="token punctuation">(</span><span class="token string">&quot;10001&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;ï¼Œ&quot;</span> <span class="token operator">+</span> token<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>    

    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™é‡ŒåŒ…æ‹¬äº†ä¸¤ç§ç±»å‹çš„æ³¨å…¥ï¼Œä¸€ä¸ªæ˜¯å ä½ç¬¦æ³¨å…¥å±æ€§ä¿¡æ¯ <code> @Value(&quot;\${token}&quot;)</code>ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯æ³¨å…¥å¯¹è±¡ä¿¡æ¯ <code>@Autowired</code></li></ul><h3 id="_2-å±æ€§é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_2-å±æ€§é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> 2. å±æ€§é…ç½®æ–‡ä»¶</h3><p><strong>token.properties</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>token<span class="token operator">=</span><span class="token class-name">RejDlI78hu223Opo983Ds</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>spring.xml</strong></p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
	         http://www.springframework.org/schema/beans/spring-beans.xsd
		 http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.bugstack.springframework.beans.factory.PropertyPlaceholderConfigurer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>location<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classpath:token.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.bugstack.springframework.test.bean<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨ spring.xml ä¸­é…ç½®äº†æ‰«æå±æ€§ä¿¡æ¯å’Œè‡ªåŠ¨æ‰«æåŒ…è·¯å¾„èŒƒå›´ã€‚</li></ul><h3 id="_3-å•å…ƒæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_3-å•å…ƒæµ‹è¯•" aria-hidden="true">#</a> 3. å•å…ƒæµ‹è¯•</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ClassPathXmlApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:spring.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">IUserService</span> userService <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;userService&quot;</span><span class="token punctuation">,</span> <span class="token class-name">IUserService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœï¼š&quot;</span> <span class="token operator">+</span> userService<span class="token punctuation">.</span><span class="token function">queryUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å•å…ƒæµ‹è¯•æ—¶å€™å°±å¯ä»¥å®Œæ•´çš„æµ‹è¯•ä¸€ä¸ªç±»æ³¨å…¥åˆ° Spring å®¹å™¨ï¼ŒåŒæ—¶è¿™ä¸ªå±æ€§ä¿¡æ¯ä¹Ÿå¯ä»¥è¢«è‡ªåŠ¨æ‰«æå¡«å……ä¸Šã€‚</li></ul><p><strong>æµ‹è¯•ç»“æœ</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>æµ‹è¯•ç»“æœï¼šå°å‚…å“¥ï¼ŒåŒ—äº¬ï¼Œäº¦åº„ï¼Œ<span class="token class-name">RejDlI78hu223Opo983Ds</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://bugstack.cn/assets/images/spring/spring-15-03.png" alt=""></p><ul><li>ä»æµ‹è¯•ç»“æœå¯ä»¥çœ‹åˆ°ç°åœ¨æˆ‘ä»¬çš„ä½¿ç”¨æ–¹å¼å·²ç»é€šè¿‡äº†ï¼Œæœ‰è‡ªåŠ¨æ‰«æç±»ï¼Œæœ‰æ³¨è§£æ³¨å…¥å±æ€§ã€‚è¿™ä¸ä½¿ç”¨ Spring æ¡†æ¶è¶Šæ¥è¶Šåƒäº†ã€‚</li></ul><h2 id="å…­ã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#å…­ã€æ€»ç»“" aria-hidden="true">#</a> å…­ã€æ€»ç»“</h2><ul><li>ä»æ•´ä¸ªæ³¨è§£ä¿¡æ¯æ‰«ææ³¨å…¥çš„å®ç°å†…å®¹æ¥çœ‹ï¼Œæˆ‘ä»¬ä¸€ç›´æ˜¯å›´ç»•ç€åœ¨ Bean çš„ç”Ÿå‘½å‘¨æœŸä¸­è¿›è¡Œå¤„ç†ï¼Œå°±åƒ BeanPostProcessor ç”¨äºä¿®æ”¹æ–°å®ä¾‹åŒ– Bean å¯¹è±¡çš„æ‰©å±•ç‚¹ï¼Œæä¾›çš„æ¥å£æ–¹æ³•å¯ä»¥ç”¨äºå¤„ç† Bean å¯¹è±¡å®ä¾‹åŒ–å‰åè¿›è¡Œå¤„ç†æ“ä½œã€‚è€Œæœ‰æ—¶å€™éœ€è¦åšä¸€äº›å·®å¼‚åŒ–çš„æ§åˆ¶ï¼Œæ‰€ä»¥è¿˜éœ€è¦ç»§æ‰¿ BeanPostProcessor æ¥å£ï¼Œå®šä¹‰æ–°çš„æ¥å£ InstantiationAwareBeanPostProcessor è¿™æ ·å°±å¯ä»¥åŒºåˆ†å‡ºä¸åŒæ‰©å±•ç‚¹çš„æ“ä½œäº†ã€‚</li><li>åƒæ˜¯æ¥å£ç”¨ instanceof åˆ¤æ–­ï¼Œæ³¨è§£ç”¨ Field.getAnnotation(Value.class); è·å–ï¼Œéƒ½æ˜¯ç›¸å½“äºåœ¨ç±»ä¸Šåšçš„ä¸€äº›æ ‡è¯†æ€§ä¿¡æ¯ï¼Œä¾¿äºå¯ä»¥ç”¨ä¸€äº›æ–¹æ³•æ‰¾åˆ°è¿™äº›åŠŸèƒ½ç‚¹ï¼Œä»¥ä¾¿è¿›è¡Œå¤„ç†ã€‚æ‰€ä»¥åœ¨æˆ‘ä»¬æ—¥å¸¸å¼€å‘è®¾è®¡çš„ç»„ä»¶ä¸­ï¼Œä¹Ÿå¯ä»¥è¿ç”¨ä¸Šè¿™äº›ç‰¹ç‚¹ã€‚</li><li>å½“ä½ æ€è€ƒæŠŠä½ çš„å®ç°èå…¥åˆ°ä¸€ä¸ªå·²ç»ç»†åˆ†å¥½çš„ Bean ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œä½ ä¼šå‘ç°å®ƒçš„è®¾è®¡æ˜¯å¦‚æ­¤çš„å¥½ï¼Œå¯ä»¥è®©ä½ åœ¨ä»»ä½•åˆå§‹åŒ–çš„æ—¶é—´ç‚¹ä¸Šï¼Œä»»ä½•é¢ä¸Šï¼Œéƒ½èƒ½åšä½ éœ€è¦çš„æ‰©å±•æˆ–è€…æ”¹å˜ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬åšç¨‹åºè®¾è®¡æ—¶è¿½æ±‚çš„çµæ´»æ€§ã€‚</li></ul><h2 id="ä¸ƒã€ä¼˜ç§€ä½œä¸š" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€ä¼˜ç§€ä½œä¸š" aria-hidden="true">#</a> ä¸ƒã€ä¼˜ç§€ä½œä¸š</h2>`,66),b={href:"https://t.zsxq.com/06zV7mA2Z",target:"_blank",rel:"noopener noreferrer"},g={href:"https://t.zsxq.com/06emaAAyf",target:"_blank",rel:"noopener noreferrer"},y={href:"https://t.zsxq.com/06yFieYJu",target:"_blank",rel:"noopener noreferrer"},f={href:"https://t.zsxq.com/08jh9bRRu",target:"_blank",rel:"noopener noreferrer"},h={href:"https://t.zsxq.com/086EpbbNg",target:"_blank",rel:"noopener noreferrer"},w={href:"https://t.zsxq.com/0aOUfSjv1",target:"_blank",rel:"noopener noreferrer"},P={href:"https://t.zsxq.com/0avuEX4HC",target:"_blank",rel:"noopener noreferrer"},B={href:"https://t.zsxq.com/0bH1pwMUE",target:"_blank",rel:"noopener noreferrer"};function A(j,x){const a=p("ExternalLinkIcon");return o(),c("div",null,[u,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),r,s("åšå®¢ï¼š"),n("a",k,[s("https://bugstack.cn"),e(a)]),d,s("åŸæ–‡ï¼š"),n("a",v,[s("https://mp.weixin.qq.com/s/GNLA10AimmxUSZ0VoDI_xA"),e(a)])]),m,n("ul",null,[n("li",null,[n("a",b,[s("åˆ©ç”¨ BeanPostProcessor å®ç°Beanå±æ€§çš„æ³¨è§£æ³¨å…¥"),e(a)])]),n("li",null,[n("a",g,[s("è§£å†³å±æ€§æ³¨å…¥ï¼Œ@Valueå’Œ@Autowiredæ³¨è§£ @Chin"),e(a)])]),n("li",null,[n("a",y,[s("ä½¿ç”¨æ³¨è§£æ¥è¿›è¡Œè‡ªåŠ¨æ³¨å…¥ @W"),e(a)])]),n("li",null,[n("a",f,[s("å°†åŸæ¥åœ¨spring.xmlä¸­é…ç½®beanï¼Œæ”¹ä¸ºåœ¨åœ¨ç±»ä¸Šæ·»åŠ @Componentæ³¨è§£æ‰«æ @liuc"),e(a)])]),n("li",null,[n("a",h,[s("åœ¨å®ç°è‡ªåŠ¨æ‰«æå¸¦ @Component æ³¨è§£çš„å¯¹è±¡è‡ªåŠ¨è£…é…å’Œæ³¨å†Œçš„åŸºç¡€ä¸Šï¼Œé¢å¯ä»¥ä½¿ç”¨ @Autowiredã€@Value æ³¨è§£ï¼Œå®Œæˆå¯¹å±æ€§å’Œå¯¹è±¡çš„æ³¨å…¥æ“ä½œã€‚@æ°´ä¸­ææœˆ"),e(a)])]),n("li",null,[n("a",w,[s("Component-scanå®šä¹‰æ‰«æçš„åŒ… @Liuliuliu"),e(a)])]),n("li",null,[n("a",P,[s("å¯¹è‡ªå®šä¹‰æ³¨è§£çš„ç›¸å…³å±æ€§è¿›è¡Œäº†å›é¡¾ä¸æ•´ç† @åœ¨ä¹æœˆ"),e(a)])]),n("li",null,[n("a",B,[s("æŠŠä»£ç†å¯¹è±¡çš„åˆ›å»ºèå…¥åˆ° Bean çš„ç”Ÿå‘½å‘¨æœŸä¸­ @lucien"),e(a)])])])])}const q=t(i,[["render",A],["__file","2021-08-03-di15zhangï¼šwanrenzhidiï¼ŒtongguozhujiegeishuxingzhurupeizhiheBeanduixiang.html.vue"]]);export{q as default};
