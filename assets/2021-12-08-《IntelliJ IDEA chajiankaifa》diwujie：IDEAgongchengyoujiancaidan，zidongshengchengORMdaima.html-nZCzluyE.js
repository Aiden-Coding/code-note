import{_ as e,r as o,o as c,c as l,a as n,b as s,d as t,e as p}from"./app-3RcBQnkC.js";const i={},u=n("h1",{id:"ç¬¬7èŠ‚-ideaå·¥ç¨‹å³é”®èœå•-è‡ªåŠ¨ç”Ÿæˆormä»£ç ",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ç¬¬7èŠ‚-ideaå·¥ç¨‹å³é”®èœå•-è‡ªåŠ¨ç”Ÿæˆormä»£ç ","aria-hidden":"true"},"#"),s(" ç¬¬7èŠ‚ï¼šIDEAå·¥ç¨‹å³é”®èœå•ï¼Œè‡ªåŠ¨ç”ŸæˆORMä»£ç ")],-1),k=n("br",null,null,-1),r={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},d=n("br",null,null,-1),m={href:"https://mp.weixin.qq.com/s/cO7B0bdzQs3sIhePBDY06w",target:"_blank",rel:"noopener noreferrer"},v=p(`<blockquote><p>æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„</p></blockquote><h2 id="ä¸€ã€å‰è¨€" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å‰è¨€" aria-hidden="true">#</a> ä¸€ã€å‰è¨€</h2><p><code>éƒ½èƒ½ç”¨ï¼Œéƒ½èƒ½å‡‘æ´»ç”¨ï¼</code></p><p>ä¸€ä¸ªä¸œè¥¿å¥½å‡ å¥—ï¼Œä¸ºäº†æ™‹å‡éƒ½æ¥æã€‚æ‹¿äº†æˆç»©å°±è¦è·‘ï¼Œåé¢å…„å¼Ÿå†é‡é€ ï¼</p><p>å‡ å¹´å‰ï¼Œå¤§å®¶å¹¶ä¸æ˜¯è¿™æ ·ï¼Œé‚£æ—¶å€™è¿˜æœ‰å¾ˆå¤šä¸œè¥¿å¯ä»¥åˆ›æ–°ï¼Œä¹±ä¸–å‡ºè‹±é›„æ€»èƒ½åœ¨ä¸€ä¸ªæ–¹å‘æ·±è€•å¹¶åšå‡ºä¸€æ¬¾æ¬¾å¥½ç”¨çš„äº§å“åŠŸèƒ½ã€æ¡†æ¶æœåŠ¡ã€æŠ€æœ¯ç»„ä»¶ç­‰ã€‚ä½†åæ¥å¥½åƒè¿™æ ·çš„æƒ…å†µå¼€å§‹å‡å°‘äº†ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯é‡å¤ã€å¤åˆ»ã€ç…§æ¬ï¼Œæ¢ä¸ªæ–°çš„çš®è‚¤ã€æ¢ä¸ªæ–°çš„æ ·å¼ã€æ¢ä¸ªæ–°çš„åå­—ï¼Œå°±æ˜¯å–å·§çš„æ–°ä¸œè¥¿äº†ã€‚</p><p>æœ‰æ—¶å€™å…¬å¸æˆ–è€…ç»„ç»‡ä¹Ÿåƒå®¶ï¼Œä½†å®¶é‡Œçš„ä¸œè¥¿ä¸€èˆ¬æ˜¯ç ´äº†è¡¥è¡¥ã€åäº†ä¿®ä¿®ï¼Œå®åœ¨ä¸è¡Œå°±æ¢ä¸ªï¼Œä½†æ²¡æœ‰è°çš„å®¶é‡Œå«ç”Ÿé—´ä¸€ä¸ªé©¬æ¡¶ã€å¨æˆ¿ä¸€ä¸ªé©¬æ¡¶ã€å®¢å…ä¸€ä¸ªé©¬æ¡¶ã€å§å®¤ä¸€ä¸ªé©¬æ¡¶çš„ï¼Œè™½ç„¶ä½ çš„æ–°é©¬æ¡¶å¯ä»¥è‡ªåŠ¨å–·æ°´ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨å»ºè®¾ä¸€ä¸ªå¥½çš„äº§å“åŠŸèƒ½æ—¶ï¼Œå°½å¯èƒ½è¦å­¦å­¦é‚£äº›å·²ç»éå¸¸çš„ä¼˜ç§€çš„äº§å“ï¼ŒIDEAã€GitHubã€Mysqlç­‰ç­‰ï¼Œåœ¨IDEAæä¾›äº†æ»¡è¶³ç”¨æˆ·æ‰©å±•åŠŸèƒ½çš„æ’ä»¶å¼€å‘ï¼Œè€Œä¸æ˜¯ä½ è¯´ä¸€ä¸ªä¸œè¥¿æˆ‘æ²¡æœ‰ï¼Œä½ å°±è‡ªå·±é€ ã€‚<em>å…±å»ºä¼šè®©è¿™ä¸ªä¸œè¥¿å˜å¾—æ›´åŠ ä¼˜ç§€ï¼</em></p><h2 id="äºŒã€éœ€æ±‚ç›®çš„" tabindex="-1"><a class="header-anchor" href="#äºŒã€éœ€æ±‚ç›®çš„" aria-hidden="true">#</a> äºŒã€éœ€æ±‚ç›®çš„</h2><p>åœ¨ä¸Šä¸€ç« èŠ‚ä¸­æˆ‘ä»¬é€šè¿‡æ‰©å±•åˆ›å»ºå·¥ç¨‹å‘å¯¼ï¼Œæ·»åŠ æˆ‘ä»¬éœ€è¦åˆ›å»ºDDDå·¥ç¨‹è„šæ‰‹æ¶çš„æ­¥éª¤ï¼Œæœ€ç»ˆæä¾›ä¸€ä¸ªDDDå¼€å‘æ¡†æ¶ã€‚é‚£ä¹ˆåœ¨è¿™ä¸ªDDDå·¥ç¨‹å¼€å‘æ¡†æ¶ä¸­ï¼Œè¿˜ç¼ºå°‘ä¸€éƒ¨åˆ†åŸºäºæ•°æ®åº“è¡¨ä¿¡æ¯è‡ªåŠ¨ç”Ÿæˆå¯¹åº”POã€DAOã€Mapperæ–‡ä»¶çš„åŠŸèƒ½ã€‚</p><p><img src="https://bugstack.cn/images/article/assembly/assembly-211207-5-01.png" alt=""></p><ul><li>é‚£ä¹ˆæœ¬ç« èŠ‚æˆ‘ä»¬å°±æ¥åœ¨å·¥ç¨‹ä¸­æ‰©å±•è¿™éƒ¨åˆ†å†…å®¹ï¼Œå®é™…æ“ä½œçš„æ•ˆæœå°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨å·¥ç¨‹ä¸Šé€šè¿‡é¼ æ ‡å³é”®çš„æ–¹å¼ï¼Œå”¤å‡ºæ·»åŠ ORMä»£ç å—çš„çª—ä½“ï¼Œé€šè¿‡é€‰æ‹©åº“è¡¨çš„æ–¹å¼ï¼Œä½¿ç”¨ freemarker è‡ªåŠ¨ç”Ÿæˆä»£ç ã€‚</li><li>åœ¨ç”Ÿæˆçš„ä»£ç å—ä¸­éœ€è¦å®Œæˆå¯¹æ‰€éœ€è¦åŒ…çš„å¼•å…¥ï¼ŒåŒæ—¶ä¼šä½¿ç”¨åˆ° lombok æ³¨è§£çš„æ–¹å¼æ›¿ä»£POå¯¹è±¡ä¸­çš„getã€setæ–¹æ³•ï¼Œä»¥å‡å°‘ä»£ç é‡é€»è¾‘çš„åˆ›å»ºã€‚</li></ul><h2 id="ä¸‰ã€æ¡ˆä¾‹å¼€å‘" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€æ¡ˆä¾‹å¼€å‘" aria-hidden="true">#</a> ä¸‰ã€æ¡ˆä¾‹å¼€å‘</h2><h3 id="_1-å·¥ç¨‹ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>guide<span class="token operator">-</span>idea<span class="token operator">-</span>plugin<span class="token operator">-</span>orm
â”œâ”€â”€ <span class="token punctuation">.</span>gradle
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â””â”€â”€ java
    â”‚   	â””â”€â”€ cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>guide<span class="token punctuation">.</span>idea<span class="token punctuation">.</span>plugin 
    â”‚       	â”œâ”€â”€ action
    â”‚       	â”‚	â””â”€â”€ <span class="token class-name">CodeGenerateAction</span><span class="token punctuation">.</span>java      
    â”‚       	â”œâ”€â”€ domain
    â”‚       	â”‚	â”œâ”€â”€ model<span class="token punctuation">.</span>vo 
    â”‚       	â”‚	â”‚	â”œâ”€â”€ <span class="token class-name">CodeGenContextVO</span><span class="token punctuation">.</span>java       
    â”‚       	â”‚	â”‚	â””â”€â”€ <span class="token class-name">ORMConfigVO</span><span class="token punctuation">.</span>java       
    â”‚       	â”‚	â””â”€â”€ service   
    â”‚       	â”‚	 	â”œâ”€â”€ impl     
    â”‚       	â”‚	 	â”‚	â””â”€â”€ <span class="token class-name">ProjectGeneratorImpl</span><span class="token punctuation">.</span>java  
    â”‚       	â”‚	 	â”œâ”€â”€ <span class="token class-name">AbstractProjectGenerator</span><span class="token punctuation">.</span>java     
    â”‚       	â”‚	 	â”œâ”€â”€ <span class="token class-name">GeneratorConfig</span><span class="token punctuation">.</span>java      
    â”‚       	â”‚	 	â””â”€â”€ <span class="token class-name">IProjectGenerator</span><span class="token punctuation">.</span>java      
    â”‚       	â”œâ”€â”€ infrastructure
    â”‚       	â”‚	â”œâ”€â”€ data    
    â”‚       	â”‚	â”‚	â”œâ”€â”€ <span class="token class-name">DataSetting</span><span class="token punctuation">.</span>java       
    â”‚       	â”‚	â”‚	â””â”€â”€ <span class="token class-name">DataState</span><span class="token punctuation">.</span>java      
    â”‚       	â”‚	â”œâ”€â”€ po    
    â”‚       	â”‚	â”‚	â”œâ”€â”€ <span class="token class-name">Base</span><span class="token punctuation">.</span>java    
    â”‚       	â”‚	â”‚	â”œâ”€â”€ <span class="token class-name">Column</span><span class="token punctuation">.</span>java 
    â”‚       	â”‚	â”‚	â”œâ”€â”€ <span class="token class-name">Dao</span><span class="token punctuation">.</span>java 
    â”‚       	â”‚	â”‚	â”œâ”€â”€ <span class="token class-name">Field</span><span class="token punctuation">.</span>java 
    â”‚       	â”‚	â”‚	â”œâ”€â”€ <span class="token class-name">Model</span><span class="token punctuation">.</span>java     
    â”‚       	â”‚	â”‚	â””â”€â”€ <span class="token class-name">Table</span><span class="token punctuation">.</span>java       
    â”‚       	â”‚	â””â”€â”€ utils 
    â”‚       	â”‚		â”œâ”€â”€ <span class="token class-name">DBHelper</span><span class="token punctuation">.</span>java     
    â”‚       	â”‚		â””â”€â”€ <span class="token class-name">JavaType</span><span class="token punctuation">.</span>java      
    â”‚       	â”œâ”€â”€ <span class="token keyword">module</span>  
    â”‚       	â”‚	â””â”€â”€ <span class="token class-name">FileChooserComponent</span><span class="token punctuation">.</span>java         
    â”‚       	â””â”€â”€ ui
    â”‚       	 	â”œâ”€â”€ <span class="token class-name">ORMSettingsUI</span><span class="token punctuation">.</span>java  
    â”‚       	 	â””â”€â”€ <span class="token class-name">ORMSettingsUI</span><span class="token punctuation">.</span>form
    â”œâ”€â”€ resources
    â”‚   â”œâ”€â”€ <span class="token constant">META</span><span class="token operator">-</span><span class="token constant">INF</span>
    â”‚   â”‚   â””â”€â”€ plugin<span class="token punctuation">.</span>xml 
    â”‚   â””â”€â”€ template
    â”‚       â”œâ”€â”€ dao<span class="token punctuation">.</span>ftl
    â”‚       â”œâ”€â”€ mapper<span class="token punctuation">.</span>ftl
    â”‚       â””â”€â”€ model<span class="token punctuation">.</span>ftl
    â”œâ”€â”€ build<span class="token punctuation">.</span>gradle  
    â””â”€â”€ gradle<span class="token punctuation">.</span>properties
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æºç è·å–</strong>ï¼š#å…¬ä¼—å·ï¼š<code>bugstackè™«æ´æ ˆ</code> å›å¤ï¼š<code>idea</code> å³å¯ä¸‹è½½å…¨éƒ¨ IDEA æ’ä»¶å¼€å‘æºç </p><p>åœ¨æ­¤ IDEA æ’ä»¶å·¥ç¨‹ä¸­ï¼Œä¸»è¦åˆ†ä¸º5å—åŒºåŸŸï¼š</p><ul><li>actionï¼šç”¨äºæä¾›èœå•æ ï¼Œè¿™ä¸ªèœå•çš„ä½ç½®åœ¨ plugin.xml ä¸­é…ç½®ï¼Œæˆ‘ä»¬æŠŠå®ƒé…ç½®åˆ°å·¥ç¨‹é¼ æ ‡å³é”®å‡ºç°çš„åˆ—è¡¨ä¸Šã€‚<em>è¿™æ ·å¯ä»¥æ›´åŠ æ–¹ä¾¿çš„è®©æˆ‘ä»¬é€‰å–å·¥ç¨‹ï¼Œä»¥åŠåœ¨è¿™ä¸ªå·¥ç¨‹ä¸‹æ·»åŠ ç”Ÿæˆçš„ä»£ç ç‰‡æ®µ</em></li><li>domainï¼šé¢†åŸŸæœåŠ¡å±‚ï¼Œå…¶å®ä½ ç›´æ¥å†™ä¸€ä¸ªServiceåŒ…ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªä¸è¿‡æœ€è¿‘ä½œè€…å°å‚…å“¥æ›´å–œæ¬¢ä½¿ç”¨DDDçš„æ€æƒ³å’Œç»“æ„æ¥åˆ›å»ºä»£ç å®ç°åŠŸèƒ½é€»è¾‘ã€‚</li><li>infrastructureï¼šåŸºç¡€å±‚ï¼Œæä¾›æ•°æ®åœ¨å·¥ç¨‹ä¸‹çš„å­˜æ”¾ï¼Œæ¯ä¸€ä¸ªå·¥ç¨‹å³é”®éƒ½æœ‰è‡ªå·±çš„é…ç½®å­˜å‚¨é»˜è®¤ä¿¡æ¯ï¼Œæ–¹ä¾¿ä¸‹æ¬¡æ‰“å¼€çš„æ—¶å€™å¯ä»¥è¯»å–åˆ°è¿™éƒ¨åˆ†å†…å®¹ã€‚åŒæ—¶è¿™ä¸€å±‚è¿˜æä¾›äº†ç”¨äºå¤„ç†æ•°æ®åº“æ“ä½œçš„ç±»ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦ä»æ•°æ®åº“ä¸­è¯»å–å‡ºè¡¨çš„ä¿¡æ¯ã€å­—æ®µã€æ³¨é‡Šï¼Œç”¨äºåˆ›å»ºPOã€DAOã€Mapperä½¿ç”¨ã€‚</li><li>moduleï¼šæ¨¡å—å±‚ï¼Œè¿™é‡Œæä¾›äº†ä¸€ä¸ªç”¨äºé€‰æ‹©æ–‡ä»¶è·¯å¾„çš„ç»„ä»¶ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨å·¥ç¨‹ä¸Šé¼ æ ‡å³é”®åå‡ºæ¥çš„çª—ä½“ä¸­ï¼Œç‚¹å‡»æ¨¡å—é€‰æ‹©å¯¹åº”çš„è¦ç”Ÿæˆä»£ç çš„ä½ç½®è·¯å¾„ã€‚</li><li>uiï¼šæä¾›é…ç½®é¢æ¿ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ä»£ç å·¥ç¨‹ä¸Šé¼ æ ‡å³é”®å¼¹å‡ºæ¥çš„é¢æ¿ï¼Œè¿™ä¸ªé¢æ¿é…ç½®åç”¨äºç”ŸæˆORMä»£ç ã€‚</li></ul><h3 id="_2-æ‹–æ‹½swingé¢æ¿" tabindex="-1"><a class="header-anchor" href="#_2-æ‹–æ‹½swingé¢æ¿" aria-hidden="true">#</a> 2. æ‹–æ‹½Swingé¢æ¿</h3><p><strong>ORMSettingsUI</strong>ï¼šå’±ä»¬å…ˆæŠŠç”¨äºåˆ›å»ºä»£ç é…ç½®çš„é¢æ¿åˆ›å»ºå‡ºæ¥ï¼Œæœ‰äº†ç”»é¢ï¼Œå°±å¥½è¿›å…¥äº†ã€‚</p><p><img src="https://bugstack.cn/images/article/assembly/assembly-211207-5-02.png" alt=""></p><ul><li>é¢æ¿åŒ…æ‹¬ç”Ÿæˆ POã€DAOã€XML çš„ä»£ç è·¯å¾„ï¼Œä»¥åŠé…ç½®æ•°æ®åº“å’Œé€‰æ‹©è¡¨çš„å†…å®¹ã€‚</li><li>æ“ä½œè¿‡ç¨‹å°±æ˜¯åœ¨ä½ é…ç½®å¥½äº†è¿™äº›åŸºæœ¬ä¿¡æ¯åï¼Œå°±å¯ä»¥é€‰æ‹©æŸ¥è¯¢è¡¨åï¼Œå¹¶é€‰æ‹©å¥½ä½ è¦ç»™å“ªå‡ ä¸ªè¡¨ç”Ÿæˆå¯¹åº”çš„ORMä»£ç äº†ã€‚</li></ul><h3 id="_3-é…ç½®é¼ æ ‡å³é”®å¼¹çª—" tabindex="-1"><a class="header-anchor" href="#_3-é…ç½®é¼ æ ‡å³é”®å¼¹çª—" aria-hidden="true">#</a> 3. é…ç½®é¼ æ ‡å³é”®å¼¹çª—</h3><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª Action å®ç°ç±»ï¼Œé€šè¿‡ <code>New -&gt; Plugin DevKit -&gt; Action</code></p><p><img src="https://bugstack.cn/images/article/assembly/assembly-211207-5-03.png" alt=""></p><p><strong>cn.bugstack.guide.idea.plugin.action.CodeGenerateAction</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span>: å°å‚…å“¥ï¼Œå¾®ä¿¡ï¼šfustack
 * <span class="token keyword">@github</span>: https://github.com/fuzhengwei
 * @Copyright: å…¬ä¼—å·ï¼šbugstackè™«æ´æ ˆ | åšå®¢ï¼šhttps://bugstack.cn - æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CodeGenerateAction</span> <span class="token keyword">extends</span> <span class="token class-name">AnAction</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">IProjectGenerator</span> projectGenerator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProjectGeneratorImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">actionPerformed</span><span class="token punctuation">(</span><span class="token class-name">AnActionEvent</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Project</span> project <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">getRequiredData</span><span class="token punctuation">(</span><span class="token class-name">CommonDataKeys</span><span class="token punctuation">.</span><span class="token constant">PROJECT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ShowSettingsUtil</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">editConfigurable</span><span class="token punctuation">(</span>project<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ORMSettingsUI</span><span class="token punctuation">(</span>project<span class="token punctuation">,</span> projectGenerator<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™æ˜¯ä¸€ä¸ªå³é”®èœå•çš„å…¥å£ï¼Œé€šè¿‡è¿™ä¸ªå…¥å£æ‰èƒ½å»æ‰“å¼€æˆ‘ä»¬è‡ªå·±çš„UIçª—ä½“ï¼Œè¿™ä¸ªUIçª—ä½“å°±æ˜¯æˆ‘ä»¬ä¸Šé¢æ‹–æ‹½å‡ºæ¥çš„é…ç½®é¢æ¿ï¼ŒORMSettingsUI</li><li>æ¥ä¸‹æ¥æˆ‘ä»¬è¿˜éœ€è¦æŠŠè¿™ä¸ª Action é…ç½®åˆ° plugin.xml æ–‡ä»¶ä¸­ï¼Œæ‰èƒ½è¢«å³é”®èœå•åˆ›å»ºå‡ºæ¥ã€‚<em>å¼€å‘ä»£ç çš„æ—¶å€™ä¹Ÿæ˜¯è¿™æ ·ä¸€ä¸ªæµç¨‹ï¼Œä½ æ€»è¦ä»ä¸€ä¸ªç‚¹å¼€å§‹ï¼Œæœ‰äº†æŠ“æ‰‹æ‰å¥½æŠ“ä¸‹å»</em></li></ul><p><strong>plugin.xml é…ç½®</strong></p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>actions</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- Add your actions here --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CodeGenerateAction<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.bugstack.guide.idea.plugin.action.CodeGenerateAction<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ORMCodeGenerate - å°å‚…å“¥<span class="token punctuation">&quot;</span></span> <span class="token attr-name">description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Code Generate ORM<span class="token punctuation">&quot;</span></span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/icons/logo.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>add-to-group</span> <span class="token attr-name">group-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ProjectViewPopupMenu<span class="token punctuation">&quot;</span></span> <span class="token attr-name">anchor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>last<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>action</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>actions</span><span class="token punctuation">&gt;</span></span>
ea-plugin&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,29),g=n("li",null,[s("æŠŠæˆ‘ä»¬çš„ Action å®ç°ç±»é…ç½®åˆ° xml ä¸­ï¼ŒåŒæ—¶ä½ è¿˜è¦é…ç½®å®ƒåº”è¯¥å‡ºç°çš„ä½ç½®ï¼Œæ¯”å¦‚ä½ éœ€è¦æŠŠè¿™ä¸ªèœå•æ·»åŠ åˆ°å·¥ç¨‹åˆ›å»ºä¸­ "),n("code",null,"ProjectViewPopupMenu"),s(" ä»¥åŠä½ç½®ä¿¡æ¯ "),n("code",null,'anchor="last"')],-1),b=n("code",null,"16*16",-1),h={href:"https://www.iconfont.cn/",target:"_blank",rel:"noopener noreferrer"},f=p(`<h3 id="_4-ç»™çª—ä½“æ·»åŠ åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#_4-ç»™çª—ä½“æ·»åŠ åŠŸèƒ½" aria-hidden="true">#</a> 4. ç»™çª—ä½“æ·»åŠ åŠŸèƒ½</h3><p>è¿™ä¸€æ­¥å…¶å®å¹²çš„å°±æ˜¯æ³¨å…¥çµé­‚çš„äº‹æƒ…ï¼Œè®©çª—ä½“æ´»èµ·æ¥ã€‚ç»™è¾“å…¥æ¡†æ·»åŠ å†…å®¹ã€ç»™æŒ‰é’®æ·»åŠ äº‹ä»¶ã€ç»™ç¡®è®¤æŒ‰é’®å¢åŠ ä¸Šç”Ÿæˆåˆ›å»ºORMä»£ç å—çš„ä¸Šä¸‹æ–‡ã€‚<em>æ–‡ç« çš„æè¿°å°½å¯èƒ½ä¼šåå‘äºæ ¸å¿ƒä»£ç çš„è®²è§£ï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒæºç </em></p><p>æ¥ä¸‹æ¥è¿™éƒ¨åˆ†å†…å®¹ä¼šåœ¨ ORMSettingsUI ç±»ä¸­<strong>åå¤æ‘©æ“¦</strong>ï¼Œç›´åˆ°è¡¥å…¨æ‰€æœ‰åŠŸèƒ½ã€‚</p><h4 id="_4-1-é€‰æ‹©æ¡†äº‹ä»¶" tabindex="-1"><a class="header-anchor" href="#_4-1-é€‰æ‹©æ¡†äº‹ä»¶" aria-hidden="true">#</a> 4.1 é€‰æ‹©æ¡†äº‹ä»¶</h4><p><img src="https://bugstack.cn/images/article/assembly/assembly-211207-5-04.png" alt=""></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// é€‰æ‹©POç”Ÿæˆç›®å½•</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>poButton<span class="token punctuation">.</span><span class="token function">addActionListener</span><span class="token punctuation">(</span>e <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    <span class="token class-name">FileChooserComponent</span> component <span class="token operator">=</span> <span class="token class-name">FileChooserComponent</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>project<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">VirtualFile</span> baseDir <span class="token operator">=</span> project<span class="token punctuation">.</span><span class="token function">getBaseDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">VirtualFile</span> virtualFile <span class="token operator">=</span> component<span class="token punctuation">.</span><span class="token function">showFolderSelectionDialog</span><span class="token punctuation">(</span><span class="token string">&quot;é€‰æ‹©POç”Ÿæˆç›®å½•&quot;</span><span class="token punctuation">,</span> baseDir<span class="token punctuation">,</span> baseDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> virtualFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ORMSettingsUI</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>poPath<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>virtualFile<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿˜è®°å¾—æˆ‘ä»¬æåˆ°çš„<code>æ‹–æ‹½Swingé¢æ¿</code>å—ï¼Œé‚£ä¹ˆè¿™ä¸ªæ·»åŠ äº‹ä»¶çš„æ­¥éª¤å°±æ˜¯ç»™ä½ çš„ PO ç›®å½•æ·»åŠ ä¸€ä¸ªäº‹ä»¶ï¼Œå…è®¸æˆ‘ä»¬å¯ä»¥è‡ªå·±é€‰æ‹©å‡ºè¦æŠŠå¯¹åº”POçš„ä»£ç ç”Ÿæˆåˆ°å“ªä¸ªç›®å½•ç»“æ„ä¸‹ã€‚</li><li>å…³äºdaoã€xmléƒ½æ˜¯ç±»ä¼¼æ“ä½œï¼Œè¿™é‡Œå°±ä¸åœ¨æ¼”ç¤ºäº†ã€‚</li></ul><h4 id="_4-2-æ•°æ®è¡¨äº‹ä»¶" tabindex="-1"><a class="header-anchor" href="#_4-2-æ•°æ®è¡¨äº‹ä»¶" aria-hidden="true">#</a> 4.2 æ•°æ®è¡¨äº‹ä»¶</h4><p><img src="https://bugstack.cn/images/article/assembly/assembly-211207-5-05.png" alt=""></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">this</span><span class="token punctuation">.</span>selectButton<span class="token punctuation">.</span><span class="token function">addActionListener</span><span class="token punctuation">(</span>e <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">DBHelper</span> dbHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DBHelper</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>host<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>port<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>password<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>database<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> tableList <span class="token operator">=</span> dbHelper<span class="token punctuation">.</span><span class="token function">getAllTableName</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>database<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> title <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;è¡¨å&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>tableList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tableList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> tableList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        table1<span class="token punctuation">.</span><span class="token function">setModel</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DefaultTableModel</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> title<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TableColumn</span> tc <span class="token operator">=</span> table1<span class="token punctuation">.</span><span class="token function">getColumnModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getColumn</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tc<span class="token punctuation">.</span><span class="token function">setCellEditor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DefaultCellEditor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JCheckBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tc<span class="token punctuation">.</span><span class="token function">setCellEditor</span><span class="token punctuation">(</span>table1<span class="token punctuation">.</span><span class="token function">getDefaultEditor</span><span class="token punctuation">(</span><span class="token class-name">Boolean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tc<span class="token punctuation">.</span><span class="token function">setCellRenderer</span><span class="token punctuation">(</span>table1<span class="token punctuation">.</span><span class="token function">getDefaultRenderer</span><span class="token punctuation">(</span><span class="token class-name">Boolean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tc<span class="token punctuation">.</span><span class="token function">setMaxWidth</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Messages</span><span class="token punctuation">.</span><span class="token function">showWarningDialog</span><span class="token punctuation">(</span>project<span class="token punctuation">,</span> <span class="token string">&quot;æ•°æ®åº“è¿æ¥é”™è¯¯,è¯·æ£€æŸ¥é…ç½®.&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Warning&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™ä¸€æ­¥æ“ä½œæ ¸å¿ƒæµç¨‹å°±åœ¨äºæŠŠä½ éœ€è¦ç”ŸæˆORMçš„ä»£ç çš„è¡¨ç»™æ‹‰å‡ºæ¥ï¼Œåªè¦æŠŠè¡¨é€‰æ‹©ä¸Šï¼Œæ‰èƒ½æ ¹æ®è¡¨ç”ŸæˆPOã€DAOã€Mapperï¼Œå…¶å®ä½ ç”¨çš„å…¶ä»–ä¸€äº›è‡ªåŠ¨ç”Ÿæˆä»£ç æ¡†æ¶ä¹Ÿæ˜¯è¿™ä¹ˆå¹²çš„ã€‚</li><li>å¦å¤–ä½ çš„å»ºè¡¨æœ€å¥½è§„èŒƒï¼Œæ¯”å¦‚æœ‰è¡¨æ³¨é‡Šã€æœ‰å­—æ®µæ³¨é‡Šã€å­—æ®µçš„è®¾è®¡éµå®ˆä¸‹åˆ’çº¿å’Œå°å†™å­—æ¯ï¼Œè¿™æ ·ä¼šæ›´åŠ å®¹æ˜“åˆ›å»ºå‡ºå¥½çœ‹çš„ä»£ç ã€‚</li></ul><h4 id="_4-3-ç»„è£…ç”Ÿæˆä»£ç ä¸Šä¸‹æ–‡" tabindex="-1"><a class="header-anchor" href="#_4-3-ç»„è£…ç”Ÿæˆä»£ç ä¸Šä¸‹æ–‡" aria-hidden="true">#</a> 4.3 ç»„è£…ç”Ÿæˆä»£ç ä¸Šä¸‹æ–‡</h4><p>å½“æˆ‘ä»¬ç‚¹å‡»é…ç½®çª—ä½“çš„ <strong>OK</strong> æŒ‰é’®æ—¶å€™ï¼Œè¦å¹²å•¥ï¼Œå¯¹å–½ï¼Œæˆ‘ä»¬è¦åˆ›å»ºå‡ºä»£ç ç‰‡æ®µäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™éœ€è¦åœ¨é‡å†™çš„ <code>apply</code> ä¸­å®Œæˆæ­¤é¡¹æ“ä½œã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// é“¾æ¥DB</span>
    <span class="token class-name">DBHelper</span> dbHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DBHelper</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token function">getHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token function">getPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span><span class="token function">getDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// ç»„è£…ä»£ç ç”Ÿäº§ä¸Šä¸‹æ–‡</span>
    <span class="token class-name">CodeGenContextVO</span> codeGenContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CodeGenContextVO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    codeGenContext<span class="token punctuation">.</span><span class="token function">setModelPackage</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token function">getPoPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;/po/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    codeGenContext<span class="token punctuation">.</span><span class="token function">setDaoPackage</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token function">getDaoPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;/dao/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    codeGenContext<span class="token punctuation">.</span><span class="token function">setMapperDir</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token function">getXmlPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;/mapper/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Table</span><span class="token punctuation">&gt;</span></span> tables <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> tableNames <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">getTableNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> tableName <span class="token operator">:</span> tableNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        tables<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>dbHelper<span class="token punctuation">.</span><span class="token function">getTable</span><span class="token punctuation">(</span>tableName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    codeGenContext<span class="token punctuation">.</span><span class="token function">setTables</span><span class="token punctuation">(</span>tables<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// ç”Ÿæˆä»£ç </span>
    projectGenerator<span class="token punctuation">.</span><span class="token function">generation</span><span class="token punctuation">(</span>project<span class="token punctuation">,</span> codeGenContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨ apply ä¸­çš„æ ¸å¿ƒä»£ç ä¸»è¦å°±æ˜¯ä½¿ç”¨ DBHelper æ•°æ®æ“ä½œå·¥å…·è·å–åˆ°å¯¹åº”çš„åº“ä¸‹é“¾æ¥ä¿¡æ¯ï¼ŒåŒæ—¶æŠŠé€‰æ‹©çš„å·çš„è¡¨åˆ›å»ºå‡ºç”¨äºç”Ÿæˆä»£ç ç±»çš„å‚æ•°ï¼Œæ¯”å¦‚ï¼›ç±»çš„åç§°ã€å­—æ®µåç§°ã€æ³¨é‡Šåç§°ç­‰ã€‚</li><li>æœ€åå°±æ˜¯è°ƒç”¨ç”Ÿæˆä»£ç çš„æœåŠ¡äº†ï¼Œ<code>projectGenerator.generation(project, codeGenContext);</code> è¿™ä¸€éƒ¨åˆ†å°±æ˜¯åœ¨æˆ‘ä»¬é¢†åŸŸæœåŠ¡ domain ä¸­å®ç°çš„ã€‚</li></ul><h3 id="_5-ä»£ç ç”Ÿæˆé¢†åŸŸæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_5-ä»£ç ç”Ÿæˆé¢†åŸŸæœåŠ¡" aria-hidden="true">#</a> 5. ä»£ç ç”Ÿæˆé¢†åŸŸæœåŠ¡</h3><p><img src="https://bugstack.cn/images/article/assembly/assembly-211207-5-06.png" alt=""></p><ul><li>ç”¨äºåˆ›å»ºPOã€DAOã€Mapperçš„ä»£ç å—çš„ä»£ç ä¸»è¦æ˜¯è¿™é‡Œå®ç°çš„ï¼Œæ ¸å¿ƒåœ¨äºæä¾›äº†ä¸€ä¸ªæŠ½è±¡ç±»ä»¥åŠå¯¹åº”çš„å®ç°ç±»ï¼Œå› ä¸ºå¤„ç†ä»£ç ç”Ÿæˆéœ€è¦ä½¿ç”¨åˆ° freemarker æ‰€ä»¥å°±åœ¨æŠ½è±¡ç±»é‡ŒåŒ…è£…äº†ä¸‹ï¼Œè¿™æ ·å¯ä»¥å…å»å®ç°ç±»ä¸­è¿˜éœ€è¦å…³å¿ƒè¿™éƒ¨åˆ†é€»è¾‘ã€‚</li></ul><p><strong>ProjectGeneratorImpl ç”Ÿæˆä»£ç </strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">generateORM</span><span class="token punctuation">(</span><span class="token class-name">Project</span> project<span class="token punctuation">,</span> <span class="token class-name">CodeGenContextVO</span> codeGenContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Table</span><span class="token punctuation">&gt;</span></span> tables <span class="token operator">=</span> codeGenContext<span class="token punctuation">.</span><span class="token function">getTables</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Table</span> table <span class="token operator">:</span> tables<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Column</span><span class="token punctuation">&gt;</span></span> columns <span class="token operator">=</span> table<span class="token punctuation">.</span><span class="token function">getColumns</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Field</span><span class="token punctuation">&gt;</span></span> fields <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Column</span> column <span class="token operator">:</span> columns<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Field</span> field <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Field</span><span class="token punctuation">(</span>column<span class="token punctuation">.</span><span class="token function">getComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">JavaType</span><span class="token punctuation">.</span><span class="token function">convertType</span><span class="token punctuation">(</span>column<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> column<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            field<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>column<span class="token punctuation">.</span><span class="token function">isId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            fields<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>field<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// ç”ŸæˆPO</span>
        <span class="token class-name">Model</span> model <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Model</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span><span class="token function">getComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> codeGenContext<span class="token punctuation">.</span><span class="token function">getModelPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token class-name">CaseFormat</span><span class="token punctuation">.</span><span class="token constant">UPPER_UNDERSCORE</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token class-name">CaseFormat</span><span class="token punctuation">.</span><span class="token constant">UPPER_CAMEL</span><span class="token punctuation">,</span> table<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> table<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fields<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">writeFile</span><span class="token punctuation">(</span>project<span class="token punctuation">,</span> codeGenContext<span class="token punctuation">.</span><span class="token function">getModelPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> model<span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;.java&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;domain/orm/model.ftl&quot;</span><span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// ç”ŸæˆDAO</span>
        <span class="token class-name">Dao</span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dao</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span><span class="token function">getComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> codeGenContext<span class="token punctuation">.</span><span class="token function">getDaoPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;I&quot;</span> <span class="token operator">+</span> <span class="token class-name">CaseFormat</span><span class="token punctuation">.</span><span class="token constant">UPPER_UNDERSCORE</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token class-name">CaseFormat</span><span class="token punctuation">.</span><span class="token constant">UPPER_CAMEL</span><span class="token punctuation">,</span> table<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;Dao&quot;</span><span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">writeFile</span><span class="token punctuation">(</span>project<span class="token punctuation">,</span> codeGenContext<span class="token punctuation">.</span><span class="token function">getDaoPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dao<span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;.java&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;domain/orm/dao.ftl&quot;</span><span class="token punctuation">,</span> dao<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// ç”ŸæˆMapper</span>
        <span class="token function">writeFile</span><span class="token punctuation">(</span>project<span class="token punctuation">,</span> codeGenContext<span class="token punctuation">.</span><span class="token function">getMapperDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dao<span class="token punctuation">.</span><span class="token function">getModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;Mapper.xml&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;domain/orm/mapper.ftl&quot;</span><span class="token punctuation">,</span> dao<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åˆ›å»ºä»£ç çš„è¿‡ç¨‹å°±æ¯”è¾ƒç®€å•äº†ï¼Œé€šè¿‡å¾ªç¯æå–å‡ºæ¥çš„è¡¨ä¿¡æ¯ï¼Œæ˜ å°„æˆå¯¹åº”çš„ç±»å’Œå±æ€§ä»¥åŠæ³¨é‡Šï¼Œå†ä½¿ç”¨ resources ä¸‹çš„ ftl æ–‡ä»¶åˆ›å»ºå‡ºå¯¹åº”çš„ç±»å’Œxmlé…ç½®æ–‡ä»¶å°±å¯ä»¥äº†ã€‚</li><li>å¦‚æœä½ è¿˜éœ€è¦ç”Ÿæˆèµ·æ¥ä»£ç ç‰‡æ®µæˆ–è€…åˆ›å»ºè°ƒç”¨ä¸€äº›å¸¸ç”¨çš„ç»„ä»¶ï¼Œä¹Ÿæ˜¯å¯ä»¥é€šè¿‡è¿™æ ·çš„æ–¹å¼è¿›è¡Œå®ç°çš„ã€‚</li></ul><h2 id="å››ã€æµ‹è¯•éªŒè¯" tabindex="-1"><a class="header-anchor" href="#å››ã€æµ‹è¯•éªŒè¯" aria-hidden="true">#</a> å››ã€æµ‹è¯•éªŒè¯</h2><ul><li>ç‚¹å‡» <code>Plugin</code> å¯åŠ¨ IDEA æ’ä»¶ï¼Œä¹‹ååœ¨å·¥ç¨‹å³é”®å¦‚ä¸‹ï¼š</li></ul><p><strong>1. é¼ æ ‡å³é”®ï¼Œé€‰æ‹©èœå•</strong></p><p><img src="https://bugstack.cn/images/article/assembly/assembly-211207-5-07.png" alt=""></p><p><strong>2. é…ç½®é¡µé¢ï¼Œé…ç½®ä¿¡æ¯</strong></p><p><img src="https://bugstack.cn/images/article/assembly/assembly-211207-5-08.png" alt=""></p><p><strong>3. è‡ªåŠ¨åˆ›å»ºï¼Œç”Ÿæˆä»£ç </strong></p><p><img src="https://bugstack.cn/images/article/assembly/assembly-211207-5-09.png" alt=""></p><ul><li>å¥½äº†ï¼Œé€‰æ‹©ä»£ç å—å°±è¿™ä¹ˆå—–çš„åˆ›å»ºäº†å‡ºæ¥ï¼Œæ˜¯ä¸æ˜¯éå¸¸æ–¹ä¾¿ï¼Œè€Œä¸”å¯ä»¥æ»¡è¶³ä½ åœ¨ä»»ä½•æ—¶å€™çš„æŠŠæ–°çš„åº“è¡¨ä»£ç è¡¥å……è¿›æ¥ï¼Œå‡å°‘äº†æ‰‹æ•²CRUDæ“ä½œã€‚</li></ul><h2 id="äº”ã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#äº”ã€æ€»ç»“" aria-hidden="true">#</a> äº”ã€æ€»ç»“</h2><ul><li>æœ¬ç« èŠ‚å°å‚…å“¥å¸¦ç€ä½ åˆåœ¨ IDEA DDD æ’ä»¶ç”Ÿæˆå·¥ç¨‹çš„ç»“æ„ä¸‹ï¼Œåˆå®Œå–„äº†ä¸€æ­¥ç”ŸæˆORMä»£ç ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºå·¥ç¨‹å‘å¯¼ä¸­æ·»åŠ ç”ŸæˆORMä»£ç çš„æ­¥éª¤ã€‚è€Œåœ¨å·¥ç¨‹ä¸‹åˆ›å»ºORMçš„æ–¹å¼å¯ä»¥å½“åšæ˜¯å¯¹è„šæ‰‹æ¶å·¥ç¨‹çš„è¡¥å……ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„éœ€æ±‚ã€‚</li><li>æ­¤å¤–åœ¨ IDEA æ’ä»¶å¼€å‘çš„ç³»åˆ—å†…å®¹ä¸­æˆ‘ä»¬æ˜¯ä¸æ–­çš„å°è¯•ä½¿ç”¨æ–°çš„æ–¹å¼å®Œå–„ä¸åŒçš„åŠŸèƒ½ç‚¹ï¼Œå¦‚æœä½ éœ€è¦å¼€å‘ä¸€ä¸ªå®Œæ•´çš„æ’ä»¶é‚£ä¹ˆå¯ä»¥ç»“åˆè¿™äº›åŠŸèƒ½ä¸€èµ·æ¥å¼€å‘ä½ çš„éœ€æ±‚ã€‚</li><li>æ’ä»¶å¼€å‘ä¸­è¿˜æ˜¯æœ‰å¾ˆå¤šçš„å†…å®¹éœ€è¦äº†è§£å’Œå­¦ä¹ çš„ï¼ŒåŒæ—¶ä¹Ÿè¦æ³¨æ„ä¸€äº›ä»£ç å®ç°ç»†èŠ‚ï¼Œä¾‹å¦‚æˆ‘ä»¬æœ¬ç« èŠ‚ä¸­çš„æ•°æ®ä¿å­˜æ˜¯åœ¨ä¸€ä¸ªä»€ä¹ˆç»´åº¦ï¼Œæ˜¯IDEAå¼€å‘å·¥å…·ç»´åº¦ï¼Œè¿˜æ˜¯åœ¨IDEAä¸­çš„å·¥ç¨‹ç»´åº¦ï¼Œè¿™äº›æ˜¯æœ‰åŒºåˆ«ã€‚<em>æ¯”å¦‚ä½ çš„ä¸åŒå·¥ç¨‹ï¼Œæ˜¯ä¸éœ€è¦ä¿å­˜åŒä¸€ä»½é…ç½®çš„</em></li></ul>`,32);function w(y,j){const a=o("ExternalLinkIcon");return c(),l("div",null,[u,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),k,s("åšå®¢ï¼š"),n("a",r,[s("https://bugstack.cn"),t(a)]),d,s("åŸæ–‡ï¼š"),n("a",m,[s("https://mp.weixin.qq.com/s/cO7B0bdzQs3sIhePBDY06w"),t(a)])]),v,n("ul",null,[g,n("li",null,[s("å¦å¤–ä¸ºäº†è®©æ’ä»¶çœ‹ä¸Šå»æ›´åŠ é«˜å¤§ä¸Šè¿˜ç¾è§‚é€‚åˆå¹ç‰›ï¼Œé‚£ä¹ˆè¿˜éœ€è¦é…ç½® iconï¼Œè¿™ä¸ªä½ç½®é…ç½®ä¸€ä¸ª"),b,s("çš„å›¾ç‰‡ï¼Œå›¾ç‰‡å¯ä»¥ä» "),n("a",h,[s("iconfont"),t(a)]),s(" è¿›è¡Œä¸‹è½½ã€‚")])]),f])}const x=e(i,[["render",w],["__file","2021-12-08-ã€ŠIntelliJ IDEA chajiankaifaã€‹diwujieï¼šIDEAgongchengyoujiancaidanï¼ŒzidongshengchengORMdaima.html.vue"]]);export{x as default};
