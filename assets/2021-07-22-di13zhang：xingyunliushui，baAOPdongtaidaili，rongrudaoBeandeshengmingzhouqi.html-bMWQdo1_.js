import{_ as t,r as p,o as c,c as o,a as n,b as s,d as e,e as i}from"./app-3RcBQnkC.js";const l={},u=n("h1",{id:"ã€Šspring-æ‰‹æ’¸ä¸“æ ã€‹ç¬¬-13-ç« -è¡Œäº‘æµæ°´-æŠŠaopåŠ¨æ€ä»£ç†-èå…¥åˆ°beançš„ç”Ÿå‘½å‘¨æœŸ",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ã€Šspring-æ‰‹æ’¸ä¸“æ ã€‹ç¬¬-13-ç« -è¡Œäº‘æµæ°´-æŠŠaopåŠ¨æ€ä»£ç†-èå…¥åˆ°beançš„ç”Ÿå‘½å‘¨æœŸ","aria-hidden":"true"},"#"),s(" ã€ŠSpring æ‰‹æ’¸ä¸“æ ã€‹ç¬¬ 13 ç« ï¼šè¡Œäº‘æµæ°´ï¼ŒæŠŠAOPåŠ¨æ€ä»£ç†ï¼Œèå…¥åˆ°Beançš„ç”Ÿå‘½å‘¨æœŸ")],-1),r=n("br",null,null,-1),d={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},k=n("br",null,null,-1),v={href:"https://mp.weixin.qq.com/s/BFYJLNzVO8NxjmeCUzmLyg",target:"_blank",rel:"noopener noreferrer"},m=i(`<blockquote><p>æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„</p></blockquote><h2 id="ä¸€ã€å‰è¨€" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å‰è¨€" aria-hidden="true">#</a> ä¸€ã€å‰è¨€</h2><p><code>å˜å°å­ï¼Œè¿™ç‰‡ä»£ç æ°´å¤ªæ·±ä½ æŠŠæ¡ä¸ä½ï¼</code></p><p>åœ¨ç”µè§†å‰§ã€Šæ¥šæ±‰ä¼ å¥‡ã€‹ä¸­æœ‰è¿™ä¹ˆä¸€æ®µåˆ˜é‚¦ä¸éŸ©ä¿¡çš„é¥®é…’å¯¹è¯ï¼Œåˆ˜é‚¦é—®éŸ©ä¿¡æˆ‘é‚£ä¸ª<code>æ›¹å‚</code>è¯»è¿‡ä¹¦è§è¿‡ä¸–é¢èƒ½å¸¦å¤šå°‘å…µï¼ŒéŸ©ä¿¡è¯´èƒ½å¸¦ä¸€ä¸‡äº”ï¼Œåˆè¡¥å……è¯´ä¸€ä¸‡äº”éƒ½åƒåŠ›ã€‚åˆ˜é‚¦åˆä¸€ä¸€è¯´å‡º<code>æ¨Šå“™</code>ã€<code>å¢ç»¾</code>ã€<code>å‘¨å‹ƒ</code>ï¼ŒéŸ©ä¿¡ç¬‘ç€è¯´ä¸è¶³2ä¸‡ï¼Œè„‘å­ä¸è¡Œã€‚è¿™æ—¶å€™åˆ˜é‚¦æœ‰ç‚¹æŒ‚ä¸ä½è„¸äº†ï¼Œé—®ï¼šé‚£æˆ‘å‘¢ï¼Œæˆ‘èƒ½å¸¦å¤šå°‘å…µã€‚éŸ©ä¿¡è¯´ï¼Œä½ èƒ½å¸¦åä¸‡ã€‚åˆ˜é‚¦ä¸€çœ‹æ¯”ä»–ä»¬éƒ½å¤šï¼Œå•Šï¼Œè¿˜è¡Œã€‚è½¬å¤´ä¸€æƒ³å°±é—®éŸ©ä¿¡é‚£ä½ å‘¢ï¼Œä½ èƒ½å¸¦å¤šå°‘å…µã€‚éŸ©ä¿¡å–å¤šäº†ï¼Œè¯´å•Šï¼Œæˆ‘ï¼Œæˆ‘å¤šå¤šç›Šå–„ã€‚è¿™æ—¶å€™åˆ˜é‚¦æ¼äº†é¢†å¯¼åŠ²ä¸Šæ¥äº†ï¼Œé—®ï¼šé‚£æˆ‘ä¸ºä»€ä¹ˆèƒ½ç®¡ç€ä½ ï¼Œä½ ç»™æˆ‘è¯´ï¼Œè¯´å‘€ï¼</p><hr><p>è¿™åƒä¸åƒä½ é¢†å¯¼é—®ä½ ï¼Œä½ èƒ½å†™å¤šå°‘ä»£ç ã€æ­å¤šå°‘æ¡†æ¶ã€æ¥å¤šå°‘é¡¹ç›®ã€‚å¯èƒ½å¾ˆå¤§ä¸€éƒ¨åˆ†æ²¡ç»å†å¤ªå¤šçš„æ–°äººç å†œï¼Œä»…ä»…æ˜¯èƒ½å®Œæˆä¸€äº›ç®€å•çš„åŠŸèƒ½æ¨¡å—å¼€å‘ï¼Œè€Œæ²¡æœ‰åŠæ³•é©¾é©­æ•´ä¸ªé¡¹ç›®çš„æ¶‰åŠåˆ°çš„æ‰€æœ‰å·¥ç¨‹ï¼Œä¹Ÿä¸èƒ½ä¸ºé¡¹ç›®æç‚¼å‡ºä¸€äº›å¯å¤ç”¨çš„é€šç”¨æ€§ç»„ä»¶æ¨¡å—ã€‚åœ¨åˆçº§ç å†œçš„å¿ƒé‡Œï¼Œæ¥ä¸€ç‚¹éœ€æ±‚è¿˜å¥½ï¼Œä½†æ²¡æœ‰äººå¸¦çš„æ—¶å€™å®Œå…¨æ¥ä¸€ä¸ªè¾ƒå¤§å‹é¡¹ç›®å°±ä¼šæ¯”è¾ƒæ…Œäº†ï¼Œä¸çŸ¥é“è¿™é‡Œæœ‰æ²¡æœ‰å‘ï¼Œè‡ªå·±ä¹ŸæŠŠæ¡ä½ä¸ã€‚<em>è¿™äº›ä»£ç ä¸€å—å—çš„å¸¦ç€èƒ½å†™ï¼Œä½†æ˜¯éƒ½å¼„åˆ°ä¸€å—ï¼Œå°±å¤ªéš¾äº†ï¼</em></p><p>åœ¨ä»£ç å¼€å‘æˆé•¿çš„è¿™æ¡è·¯ä¸Šï¼Œè¦ç»å†CRUDã€ERPæŸ¥æ•°æ®ã€æ¥å£åŒ…è£…ã€åŠŸèƒ½å¼€å‘ã€æœåŠ¡æ•´åˆã€ç³»ç»Ÿå»ºè®¾ç­‰ï¼Œä¸€ç›´åˆ°ç‹¬ç«‹å¸¦äººæ‰¿æ‹…è¾ƒå¤§å‹é¡¹ç›®çš„æ­å»ºã€‚è¿™ä¸€è¿‡ç¨‹éœ€è¦ä½ èƒ½æœ‰å¤§é‡çš„ç¼–å†™ä»£ç ç»éªŒç§¯ç´¯å’Œå¤æ‚é—®é¢˜çš„å¤„ç†æ‰‹æ®µï¼Œä¹‹åæ‰èƒ½ä¸€æ®µæ®µçš„æŠŠçœ‹ä¼¼ç‹¬ç«‹çš„æ¨¡å—åè€…ä»£ç ç‰‡æ®µç»„è£…æˆä¸€ä¸ªè¾ƒå¤§å‹èƒ½è·‘èµ·æ¥çš„é¡¹ç›®ã€‚å°±åƒ Spring çš„å¼€å‘è¿‡ç¨‹ä¸€æ ·ï¼Œæˆ‘ä»¬æ€»æ˜¯ä¸æ–­åœ¨æ·»åŠ æ–°çš„åŠŸèƒ½ç‰‡æ®µï¼Œæœ€ååˆæŠŠæŠ€æœ¯å®ç°ä¸Spring å®¹å™¨æ•´åˆï¼Œè®©ä½¿ç”¨æ–¹å¯ä»¥æ›´ç®€å•çš„è¿ç”¨ Spring æä¾›çš„èƒ½åŠ›ã€‚</p><h2 id="äºŒã€ç›®æ ‡" tabindex="-1"><a class="header-anchor" href="#äºŒã€ç›®æ ‡" aria-hidden="true">#</a> äºŒã€ç›®æ ‡</h2><p>åœ¨ä¸Šä¸€ç« èŠ‚æˆ‘ä»¬é€šè¿‡åŸºäº Proxy.newProxyInstance ä»£ç†æ“ä½œä¸­å¤„ç†æ–¹æ³•åŒ¹é…å’Œæ–¹æ³•æ‹¦æˆªï¼Œå¯¹åŒ¹é…çš„å¯¹è±¡è¿›è¡Œè‡ªå®šä¹‰çš„å¤„ç†æ“ä½œã€‚å¹¶æŠŠè¿™æ ·çš„æŠ€æœ¯æ ¸å¿ƒå†…å®¹æ‹†è§£åˆ° Spring ä¸­ï¼Œç”¨äºå®ç° AOP éƒ¨åˆ†ï¼Œé€šè¿‡æ‹†åˆ†ååŸºæœ¬å¯ä»¥æ˜ç¡®å„ä¸ªç±»çš„èŒè´£ï¼ŒåŒ…æ‹¬ä½ çš„ä»£ç†ç›®æ ‡å¯¹è±¡å±æ€§ã€æ‹¦æˆªå™¨å±æ€§ã€æ–¹æ³•åŒ¹é…å±æ€§ï¼Œä»¥åŠä¸¤ç§ä¸åŒçš„ä»£ç†æ“ä½œ JDK å’Œ CGlib çš„æ–¹å¼ã€‚</p><p>å†æœ‰äº†ä¸€ä¸ª AOP æ ¸å¿ƒåŠŸèƒ½çš„å®ç°åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å•å…ƒæµ‹è¯•çš„æ–¹å¼è¿›è¡ŒéªŒè¯åˆ‡é¢åŠŸèƒ½å¯¹æ–¹æ³•è¿›è¡Œæ‹¦æˆªï¼Œä½†å¦‚æœè¿™æ˜¯ä¸€ä¸ªé¢å‘ç”¨æˆ·ä½¿ç”¨çš„åŠŸèƒ½ï¼Œå°±ä¸å¤ªå¯èƒ½è®©ç”¨æˆ·è¿™ä¹ˆå¤æ‚ä¸”æ²¡æœ‰ä¸ Spring ç»“åˆçš„æ–¹å¼å•ç‹¬ä½¿ç”¨ AOPï¼Œè™½ç„¶å¯ä»¥æ»¡è¶³éœ€æ±‚ï¼Œä½†ä½¿ç”¨ä¸Šè¿˜æ˜¯è¿‡å»åˆ†æ•£ã€‚</p><p>å› æ­¤æˆ‘ä»¬éœ€è¦åœ¨æœ¬ç« èŠ‚å®Œæˆ AOP æ ¸å¿ƒåŠŸèƒ½ä¸ Spring æ¡†æ¶çš„æ•´åˆï¼Œæœ€ç»ˆèƒ½é€šè¿‡åœ¨ Spring é…ç½®çš„æ–¹å¼å®Œæˆåˆ‡é¢çš„æ“ä½œã€‚</p><h2 id="ä¸‰ã€æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€æ–¹æ¡ˆ" aria-hidden="true">#</a> ä¸‰ã€æ–¹æ¡ˆ</h2><p>å…¶å®åœ¨æœ‰äº†AOPçš„æ ¸å¿ƒåŠŸèƒ½å®ç°åï¼ŒæŠŠè¿™éƒ¨åˆ†åŠŸèƒ½æœåŠ¡èå…¥åˆ° Spring å…¶å®ä¹Ÿä¸éš¾ï¼Œåªä¸è¿‡è¦è§£å†³å‡ ä¸ªé—®é¢˜ï¼ŒåŒ…æ‹¬ï¼šæ€ä¹ˆå€Ÿç€ BeanPostProcessor æŠŠåŠ¨æ€ä»£ç†èå…¥åˆ° Bean çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œä»¥åŠå¦‚ä½•ç»„è£…å„é¡¹åˆ‡ç‚¹ã€æ‹¦æˆªã€å‰ç½®çš„åŠŸèƒ½å’Œé€‚é…å¯¹åº”çš„ä»£ç†å™¨ã€‚æ•´ä½“è®¾è®¡ç»“æ„å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://bugstack.cn/assets/images/spring/spring-13-01.png" alt=""></p><ul><li>ä¸ºäº†å¯ä»¥è®©å¯¹è±¡åˆ›å»ºè¿‡ç¨‹ä¸­ï¼Œèƒ½æŠŠxmlä¸­é…ç½®çš„ä»£ç†å¯¹è±¡ä¹Ÿå°±æ˜¯åˆ‡é¢çš„ä¸€äº›ç±»å¯¹è±¡å®ä¾‹åŒ–ï¼Œå°±éœ€è¦ç”¨åˆ° BeanPostProcessor æä¾›çš„æ–¹æ³•ï¼Œå› ä¸ºè¿™ä¸ªç±»çš„ä¸­çš„æ–¹æ³•å¯ä»¥åˆ†åˆ«ä½œç”¨ä¸ Bean å¯¹è±¡æ‰§è¡Œåˆå§‹åŒ–å‰åä¿®æ”¹ Bean çš„å¯¹è±¡çš„æ‰©å±•ä¿¡æ¯ã€‚ä½†è¿™é‡Œéœ€è¦é›†åˆäº BeanPostProcessor å®ç°æ–°çš„æ¥å£å’Œå®ç°ç±»ï¼Œè¿™æ ·æ‰èƒ½å®šå‘è·å–å¯¹åº”çš„ç±»ä¿¡æ¯ã€‚</li><li>ä½†å› ä¸ºåˆ›å»ºçš„æ˜¯ä»£ç†å¯¹è±¡ä¸æ˜¯ä¹‹å‰æµç¨‹é‡Œçš„æ™®é€šå¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å‰ç½®äºå…¶ä»–å¯¹è±¡çš„åˆ›å»ºï¼Œæ‰€ä»¥åœ¨å®é™…å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦åœ¨ AbstractAutowireCapableBeanFactory#createBean ä¼˜å…ˆå®Œæˆ Bean å¯¹è±¡çš„åˆ¤æ–­ï¼Œæ˜¯å¦éœ€è¦ä»£ç†ï¼Œæœ‰åˆ™ç›´æ¥è¿”å›ä»£ç†å¯¹è±¡ã€‚<em>åœ¨Springçš„æºç ä¸­ä¼šæœ‰ createBean å’Œ doCreateBean çš„æ–¹æ³•æ‹†åˆ†</em></li><li>è¿™é‡Œè¿˜åŒ…æ‹¬è¦è§£å†³æ–¹æ³•æ‹¦æˆªå™¨çš„å…·ä½“åŠŸèƒ½ï¼Œæä¾›ä¸€äº› BeforeAdviceã€AfterAdvice çš„å®ç°ï¼Œè®©ç”¨æˆ·å¯ä»¥æ›´ç®€åŒ–çš„ä½¿ç”¨åˆ‡é¢åŠŸèƒ½ã€‚é™¤æ­¤ä¹‹å¤–è¿˜åŒ…æ‹¬éœ€è¦åŒ…è£…åˆ‡é¢è¡¨è¾¾å¼ä»¥åŠæ‹¦æˆªæ–¹æ³•çš„æ•´åˆï¼Œä»¥åŠæä¾›ä¸åŒç±»å‹çš„ä»£ç†æ–¹å¼çš„ä»£ç†å·¥å‚ï¼Œæ¥åŒ…è£…æˆ‘ä»¬çš„åˆ‡é¢æœåŠ¡ã€‚</li></ul><h2 id="å››ã€å®ç°" tabindex="-1"><a class="header-anchor" href="#å››ã€å®ç°" aria-hidden="true">#</a> å››ã€å®ç°</h2><h3 id="_1-å·¥ç¨‹ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>small<span class="token operator">-</span>spring<span class="token operator">-</span>step<span class="token operator">-</span><span class="token number">12</span>
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â””â”€â”€ java
    â”‚       â””â”€â”€ cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>springframework
    â”‚           â”œâ”€â”€ aop
    â”‚           â”‚   â”œâ”€â”€ aspectj
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">AspectJExpressionPointcut</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">AspectJExpressionPointcutAdvisor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ framework 
    â”‚           â”‚   â”‚   â”œâ”€â”€ adapter
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ <span class="token class-name">MethodBeforeAdviceInterceptor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ autoproxy
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ <span class="token class-name">DefaultAdvisorAutoProxyCreator</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AopProxy</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">Cglib2AopProxy</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">JdkDynamicAopProxy</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ProxyFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">ReflectiveMethodInvocation</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">AdvisedSupport</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">Advisor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">BeforeAdvice</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ClassFilter</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">MethodBeforeAdvice</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">MethodMatcher</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">Pointcut</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">PointcutAdvisor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">TargetSource</span><span class="token punctuation">.</span>java
    â”‚           â”œâ”€â”€ beans
    â”‚           â”‚   â”œâ”€â”€ factory
    â”‚           â”‚   â”‚   â”œâ”€â”€ config
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AutowireCapableBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanDefinition</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanFactoryPostProcessor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanPostProcessor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanReference</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ConfigurableBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">InstantiationAwareBeanPostProcessor</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ <span class="token class-name">SingletonBeanRegistry</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ support
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractAutowireCapableBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractBeanDefinitionReader</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanDefinitionReader</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanDefinitionRegistry</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">CglibSubclassingInstantiationStrategy</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">DefaultListableBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">DefaultSingletonBeanRegistry</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">DisposableBeanAdapter</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">FactoryBeanRegistrySupport</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">InstantiationStrategy</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ <span class="token class-name">SimpleInstantiationStrategy</span><span class="token punctuation">.</span>java  
    â”‚           â”‚   â”‚   â”œâ”€â”€ support
    â”‚           â”‚   â”‚   â”‚   â””â”€â”€ <span class="token class-name">XmlBeanDefinitionReader</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">Aware</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanClassLoaderAware</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanFactoryAware</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">BeanNameAware</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ConfigurableListableBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">DisposableBean</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">FactoryBean</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">HierarchicalBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">InitializingBean</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">ListableBeanFactory</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">BeansException</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">PropertyValue</span><span class="token punctuation">.</span>java
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">PropertyValues</span><span class="token punctuation">.</span>java 
    â”‚           â”œâ”€â”€ context
    â”‚           â”‚   â”œâ”€â”€ event
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractApplicationEventMulticaster</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationContextEvent</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationEventMulticaster</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ContextClosedEvent</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ContextRefreshedEvent</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">SimpleApplicationEventMulticaster</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ support
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractApplicationContext</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractRefreshableApplicationContext</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">AbstractXmlApplicationContext</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationContextAwareProcessor</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”‚   â””â”€â”€ <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationContext</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationContextAware</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationEvent</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationEventPublisher</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ApplicationListener</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">ConfigurableApplicationContext</span><span class="token punctuation">.</span>java
    â”‚           â”œâ”€â”€ core<span class="token punctuation">.</span>io
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ClassPathResource</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">DefaultResourceLoader</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">FileSystemResource</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">Resource</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â”œâ”€â”€ <span class="token class-name">ResourceLoader</span><span class="token punctuation">.</span>java 
    â”‚           â”‚   â””â”€â”€ <span class="token class-name">UrlResource</span><span class="token punctuation">.</span>java
    â”‚           â””â”€â”€ utils
    â”‚               â””â”€â”€ <span class="token class-name">ClassUtils</span><span class="token punctuation">.</span>java
    â””â”€â”€ test
        â””â”€â”€ java
            â””â”€â”€ cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test
                â”œâ”€â”€ bean
                â”‚   â”œâ”€â”€ <span class="token class-name">IUserService</span><span class="token punctuation">.</span>java
                â”‚   â”œâ”€â”€ <span class="token class-name">UserService</span><span class="token punctuation">.</span>java
                â”‚   â””â”€â”€ <span class="token class-name">UserServiceInterceptor</span><span class="token punctuation">.</span>java
                â””â”€â”€ <span class="token class-name">ApiTest</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å·¥ç¨‹æºç </strong>ï¼š<code>å…¬ä¼—å·ã€Œbugstackè™«æ´æ ˆã€ï¼Œå›å¤ï¼šSpring ä¸“æ ï¼Œè·å–å®Œæ•´æºç </code></p><p>AOP åŠ¨æ€ä»£ç†èå…¥åˆ°Beançš„ç”Ÿå‘½å‘¨æœŸä¸­ç±»å…³ç³»ï¼Œå¦‚å›¾ 13-2</p><p><img src="https://bugstack.cn/assets/images/spring/spring-13-02.png" alt="å›¾ 13-2"></p><ul><li>æ•´ä¸ªç±»å…³ç³»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä»¥ BeanPostProcessor æ¥å£å®ç°ç»§æ‰¿çš„ InstantiationAwareBeanPostProcessor æ¥å£åï¼Œåšäº†ä¸€ä¸ªè‡ªåŠ¨ä»£ç†åˆ›å»ºçš„ç±» DefaultAdvisorAutoProxyCreatorï¼Œè¿™ä¸ªç±»çš„å°±æ˜¯ç”¨äºå¤„ç†æ•´ä¸ª AOP ä»£ç†èå…¥åˆ° Bean ç”Ÿå‘½å‘¨æœŸä¸­çš„æ ¸å¿ƒç±»ã€‚</li><li>DefaultAdvisorAutoProxyCreator ä¼šä¾èµ–äºæ‹¦æˆªå™¨ã€ä»£ç†å·¥å‚å’ŒPointcutä¸Advisorçš„åŒ…è£…æœåŠ¡ AspectJExpressionPointcutAdvisorï¼Œç”±å®ƒæä¾›åˆ‡é¢ã€æ‹¦æˆªæ–¹æ³•å’Œè¡¨è¾¾å¼ã€‚</li><li>Spring çš„ AOP æŠŠ Advice ç»†åŒ–äº† BeforeAdviceã€AfterAdviceã€AfterReturningAdviceã€ThrowsAdviceï¼Œç›®å‰æˆ‘ä»¬åšçš„æµ‹è¯•æ¡ˆä¾‹ä¸­åªç”¨åˆ°äº† BeforeAdviceï¼Œè¿™éƒ¨åˆ†å¯ä»¥å¯¹ç…§ Spring çš„æºç è¿›è¡Œè¡¥å……æµ‹è¯•ã€‚</li></ul><h3 id="_2-å®šä¹‰adviceæ‹¦æˆªå™¨é“¾" tabindex="-1"><a class="header-anchor" href="#_2-å®šä¹‰adviceæ‹¦æˆªå™¨é“¾" aria-hidden="true">#</a> 2. å®šä¹‰Adviceæ‹¦æˆªå™¨é“¾</h3><p><strong>cn.bugstack.springframework.aop.BeforeAdvice</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeforeAdvice</span> <span class="token keyword">extends</span> <span class="token class-name">Advice</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>cn.bugstack.springframework.aop.MethodBeforeAdvice</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MethodBeforeAdvice</span> <span class="token keyword">extends</span> <span class="token class-name">BeforeAdvice</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * Callback before a given method is invoked.
     *
     * <span class="token keyword">@param</span> <span class="token parameter">method</span> method being invoked
     * <span class="token keyword">@param</span> <span class="token parameter">args</span>   arguments to the method
     * <span class="token keyword">@param</span> <span class="token parameter">target</span> target of the method invocation. May be <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">&gt;</span></span><span class="token code-section"><span class="token line"><span class="token code language-java"><span class="token keyword">null</span></span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">&gt;</span></span>.
     * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Throwable</span></span> if this object wishes to abort the call.
     *                   Any exception thrown will be returned to the caller if it&#39;s
     *                   allowed by the method signature. Otherwise the exception
     *                   will be wrapped as a runtime exception.
     */</span>
    <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> <span class="token class-name">Object</span> target<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨ Spring æ¡†æ¶ä¸­ï¼ŒAdvice éƒ½æ˜¯é€šè¿‡æ–¹æ³•æ‹¦æˆªå™¨ MethodInterceptor å®ç°çš„ã€‚ç¯ç»• Advice ç±»ä¼¼ä¸€ä¸ªæ‹¦æˆªå™¨çš„é“¾è·¯ï¼ŒBefore Adviceã€After adviceç­‰ï¼Œä¸è¿‡æš‚æ—¶æˆ‘ä»¬éœ€è¦é‚£ä¹ˆå¤šå°±åªå®šä¹‰äº†ä¸€ä¸ª MethodBeforeAdvice çš„æ¥å£å®šä¹‰ã€‚</li></ul><h3 id="_3-å®šä¹‰-advisor-è®¿é—®è€…" tabindex="-1"><a class="header-anchor" href="#_3-å®šä¹‰-advisor-è®¿é—®è€…" aria-hidden="true">#</a> 3. å®šä¹‰ Advisor è®¿é—®è€…</h3><p><strong>cn.bugstack.springframework.aop.Advisor</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Advisor</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * Return the advice part of this aspect. An advice may be an
     * interceptor, a before advice, a throws advice, etc.
     * <span class="token keyword">@return</span> the advice that should apply if the pointcut matches
     * <span class="token keyword">@see</span> <span class="token reference"><span class="token namespace">org<span class="token punctuation">.</span>aopalliance<span class="token punctuation">.</span>intercept<span class="token punctuation">.</span></span><span class="token class-name">MethodInterceptor</span></span>
     * <span class="token keyword">@see</span> <span class="token reference"><span class="token class-name">BeforeAdvice</span></span>
     */</span>
    <span class="token class-name">Advice</span> <span class="token function">getAdvice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>cn.bugstack.springframework.aop.PointcutAdvisor</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PointcutAdvisor</span> <span class="token keyword">extends</span> <span class="token class-name">Advisor</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * Get the Pointcut that drives this advisor.
     */</span>
    <span class="token class-name">Pointcut</span> <span class="token function">getPointcut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>PointcutAdvisor æ‰¿æ‹…äº† Pointcut å’Œ Advice çš„ç»„åˆï¼ŒPointcut ç”¨äºè·å– JoinPointï¼Œè€Œ Advice å†³å®šäº JoinPoint æ‰§è¡Œä»€ä¹ˆæ“ä½œã€‚</li></ul><p><strong>cn.bugstack.springframework.aop.aspectj.AspectJExpressionPointcutAdvisor</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AspectJExpressionPointcutAdvisor</span> <span class="token keyword">implements</span> <span class="token class-name">PointcutAdvisor</span> <span class="token punctuation">{</span>

    <span class="token comment">// åˆ‡é¢</span>
    <span class="token keyword">private</span> <span class="token class-name">AspectJExpressionPointcut</span> pointcut<span class="token punctuation">;</span>
    <span class="token comment">// å…·ä½“çš„æ‹¦æˆªæ–¹æ³•</span>
    <span class="token keyword">private</span> <span class="token class-name">Advice</span> advice<span class="token punctuation">;</span>
    <span class="token comment">// è¡¨è¾¾å¼</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> expression<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setExpression</span><span class="token punctuation">(</span><span class="token class-name">String</span> expression<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>expression <span class="token operator">=</span> expression<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Pointcut</span> <span class="token function">getPointcut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> pointcut<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            pointcut <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AspectJExpressionPointcut</span><span class="token punctuation">(</span>expression<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> pointcut<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Advice</span> <span class="token function">getAdvice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> advice<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAdvice</span><span class="token punctuation">(</span><span class="token class-name">Advice</span> advice<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>advice <span class="token operator">=</span> advice<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>AspectJExpressionPointcutAdvisor å®ç°äº† PointcutAdvisor æ¥å£ï¼ŒæŠŠåˆ‡é¢ pointcutã€æ‹¦æˆªæ–¹æ³• advice å’Œå…·ä½“çš„æ‹¦æˆªè¡¨è¾¾å¼åŒ…è£…åœ¨ä¸€èµ·ã€‚è¿™æ ·å°±å¯ä»¥åœ¨ xml çš„é…ç½®ä¸­å®šä¹‰ä¸€ä¸ª pointcutAdvisor åˆ‡é¢æ‹¦æˆªå™¨äº†ã€‚</li></ul><h3 id="_4-æ–¹æ³•æ‹¦æˆªå™¨" tabindex="-1"><a class="header-anchor" href="#_4-æ–¹æ³•æ‹¦æˆªå™¨" aria-hidden="true">#</a> 4. æ–¹æ³•æ‹¦æˆªå™¨</h3><p><strong>cn.bugstack.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MethodBeforeAdviceInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">MethodInterceptor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">MethodBeforeAdvice</span> advice<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">MethodBeforeAdviceInterceptor</span><span class="token punctuation">(</span><span class="token class-name">MethodBeforeAdvice</span> advice<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>advice <span class="token operator">=</span> advice<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">MethodBeforeAdvice</span> <span class="token function">getAdvice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> advice<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAdvice</span><span class="token punctuation">(</span><span class="token class-name">MethodBeforeAdvice</span> advice<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>advice <span class="token operator">=</span> advice<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">MethodInvocation</span> methodInvocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>advice<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span>methodInvocation<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> methodInvocation<span class="token punctuation">.</span><span class="token function">getArguments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> methodInvocation<span class="token punctuation">.</span><span class="token function">getThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> methodInvocation<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>MethodBeforeAdviceInterceptor å®ç°äº† MethodInterceptor æ¥å£ï¼Œåœ¨ invoke æ–¹æ³•ä¸­è°ƒç”¨ advice ä¸­çš„ before æ–¹æ³•ï¼Œä¼ å…¥å¯¹åº”çš„å‚æ•°ä¿¡æ¯ã€‚</li><li>è€Œè¿™ä¸ª advice.before åˆ™æ˜¯ç”¨äºè‡ªå·±å®ç° MethodBeforeAdvice æ¥å£ååšçš„ç›¸åº”å¤„ç†ã€‚<em>å…¶å®å¯ä»¥çœ‹åˆ°å…·ä½“çš„ MethodInterceptor å®ç°ç±»ï¼Œå…¶å®å’Œæˆ‘ä»¬ä¹‹å‰åšçš„æµ‹è¯•æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ç°åœ¨äº¤ç»™äº† Spring æ¥å¤„ç†</em></li></ul><h3 id="_5-ä»£ç†å·¥å‚" tabindex="-1"><a class="header-anchor" href="#_5-ä»£ç†å·¥å‚" aria-hidden="true">#</a> 5. ä»£ç†å·¥å‚</h3><p><strong>cn.bugstack.springframework.aop.framework.ProxyFactory</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">AdvisedSupport</span> advisedSupport<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token class-name">AdvisedSupport</span> advisedSupport<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>advisedSupport <span class="token operator">=</span> advisedSupport<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">createAopProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">AopProxy</span> <span class="token function">createAopProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>advisedSupport<span class="token punctuation">.</span><span class="token function">isProxyTargetClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Cglib2AopProxy</span><span class="token punctuation">(</span>advisedSupport<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">JdkDynamicAopProxy</span><span class="token punctuation">(</span>advisedSupport<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å…¶å®è¿™ä¸ªä»£ç†å·¥å‚ä¸»è¦è§£å†³çš„æ˜¯å…³äº JDK å’Œ Cglib ä¸¤ç§ä»£ç†çš„é€‰æ‹©é—®é¢˜ï¼Œæœ‰äº†ä»£ç†å·¥å‚å°±å¯ä»¥æŒ‰ç…§ä¸åŒçš„åˆ›å»ºéœ€æ±‚è¿›è¡Œæ§åˆ¶ã€‚</li></ul><h3 id="_6-èå…¥beanç”Ÿå‘½å‘¨æœŸçš„è‡ªåŠ¨ä»£ç†åˆ›å»ºè€…" tabindex="-1"><a class="header-anchor" href="#_6-èå…¥beanç”Ÿå‘½å‘¨æœŸçš„è‡ªåŠ¨ä»£ç†åˆ›å»ºè€…" aria-hidden="true">#</a> 6. èå…¥Beanç”Ÿå‘½å‘¨æœŸçš„è‡ªåŠ¨ä»£ç†åˆ›å»ºè€…</h3><p><strong>cn.bugstack.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DefaultAdvisorAutoProxyCreator</span> <span class="token keyword">implements</span> <span class="token class-name">InstantiationAwareBeanPostProcessor</span><span class="token punctuation">,</span> <span class="token class-name">BeanFactoryAware</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">DefaultListableBeanFactory</span> beanFactory<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanFactory</span><span class="token punctuation">(</span><span class="token class-name">BeanFactory</span> beanFactory<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>beanFactory <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">DefaultListableBeanFactory</span><span class="token punctuation">)</span> beanFactory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">postProcessBeforeInstantiation</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> beanClass<span class="token punctuation">,</span> <span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isInfrastructureClass</span><span class="token punctuation">(</span>beanClass<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AspectJExpressionPointcutAdvisor</span><span class="token punctuation">&gt;</span></span> advisors <span class="token operator">=</span> beanFactory<span class="token punctuation">.</span><span class="token function">getBeansOfType</span><span class="token punctuation">(</span><span class="token class-name">AspectJExpressionPointcutAdvisor</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">AspectJExpressionPointcutAdvisor</span> advisor <span class="token operator">:</span> advisors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">ClassFilter</span> classFilter <span class="token operator">=</span> advisor<span class="token punctuation">.</span><span class="token function">getPointcut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>classFilter<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>beanClass<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>

            <span class="token class-name">AdvisedSupport</span> advisedSupport <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AdvisedSupport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">TargetSource</span> targetSource <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                targetSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TargetSource</span><span class="token punctuation">(</span>beanClass<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            advisedSupport<span class="token punctuation">.</span><span class="token function">setTargetSource</span><span class="token punctuation">(</span>targetSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
            advisedSupport<span class="token punctuation">.</span><span class="token function">setMethodInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MethodInterceptor</span><span class="token punctuation">)</span> advisor<span class="token punctuation">.</span><span class="token function">getAdvice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            advisedSupport<span class="token punctuation">.</span><span class="token function">setMethodMatcher</span><span class="token punctuation">(</span>advisor<span class="token punctuation">.</span><span class="token function">getPointcut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethodMatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            advisedSupport<span class="token punctuation">.</span><span class="token function">setProxyTargetClass</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span>advisedSupport<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™ä¸ª DefaultAdvisorAutoProxyCreator ç±»çš„ä¸»è¦æ ¸å¿ƒå®ç°åœ¨äº postProcessBeforeInstantiation æ–¹æ³•ä¸­ï¼Œä»é€šè¿‡ beanFactory.getBeansOfType è·å– AspectJExpressionPointcutAdvisor å¼€å§‹ã€‚</li><li>è·å–äº† advisors ä»¥åå°±å¯ä»¥éå†ç›¸åº”çš„ AspectJExpressionPointcutAdvisor å¡«å……å¯¹åº”çš„å±æ€§ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šç›®æ ‡å¯¹è±¡ã€æ‹¦æˆªæ–¹æ³•ã€åŒ¹é…å™¨ï¼Œä¹‹åè¿”å›ä»£ç†å¯¹è±¡å³å¯ã€‚</li><li>é‚£ä¹ˆç°åœ¨è°ƒç”¨æ–¹è·å–åˆ°çš„è¿™ä¸ª Bean å¯¹è±¡å°±æ˜¯ä¸€ä¸ªå·²ç»è¢«åˆ‡é¢æ³¨å…¥çš„å¯¹è±¡äº†ï¼Œå½“è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œåˆ™ä¼šè¢«æŒ‰éœ€æ‹¦æˆªï¼Œå¤„ç†ç”¨æˆ·éœ€è¦çš„ä¿¡æ¯ã€‚</li></ul><h3 id="_7-èå…¥åˆ°beançš„ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#_7-èå…¥åˆ°beançš„ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> 7. èå…¥åˆ°Beançš„ç”Ÿå‘½å‘¨æœŸ</h3><p><strong>cn.bugstack.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractAutowireCapableBeanFactory</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBeanFactory</span> <span class="token keyword">implements</span> <span class="token class-name">AutowireCapableBeanFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">InstantiationStrategy</span> instantiationStrategy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CglibSubclassingInstantiationStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Object</span> <span class="token function">createBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span> bean <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// åˆ¤æ–­æ˜¯å¦è¿”å›ä»£ç† Bean å¯¹è±¡</span>
            bean <span class="token operator">=</span> <span class="token function">resolveBeforeInstantiation</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> bean<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            bean <span class="token operator">=</span> <span class="token function">createBeanInstance</span><span class="token punctuation">(</span>beanDefinition<span class="token punctuation">,</span> beanName<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ç»™ bean å¡«å……å±æ€§</span>
            <span class="token function">applyPropertyValues</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> bean<span class="token punctuation">,</span> beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// æ‰§è¡Œ Bean çš„åˆå§‹åŒ–æ–¹æ³•å’Œ BeanPostProcessor çš„å‰ç½®å’Œåç½®å¤„ç†æ–¹æ³•</span>
            bean <span class="token operator">=</span> <span class="token function">initializeBean</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> bean<span class="token punctuation">,</span> beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BeansException</span><span class="token punctuation">(</span><span class="token string">&quot;Instantiation of bean failed.&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// æ³¨å†Œå®ç°äº† DisposableBean æ¥å£çš„ Bean å¯¹è±¡</span>
        <span class="token function">registerDisposableBeanIfNecessary</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> bean<span class="token punctuation">,</span> beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// åˆ¤æ–­ SCOPE_SINGLETONï¼ŒSCOPE_PROTOTYPE</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>beanDefinition<span class="token punctuation">.</span><span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">registerSingleton</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> bean<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token class-name">Object</span> <span class="token function">resolveBeforeInstantiation</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span> bean <span class="token operator">=</span> <span class="token function">applyBeanPostProcessorBeforeInstantiation</span><span class="token punctuation">(</span>beanDefinition<span class="token punctuation">.</span><span class="token function">getBeanClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            bean <span class="token operator">=</span> <span class="token function">applyBeanPostProcessorAfterInitialization</span><span class="token punctuation">(</span>bean<span class="token punctuation">,</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> bean<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// æ³¨æ„ï¼Œæ­¤æ–¹æ³•ä¸ºæ–°å¢æ–¹æ³•ï¼Œä¸ â€œapplyBeanPostProcessorBeforeInitializationâ€ æ˜¯ä¸¤ä¸ªæ–¹æ³•</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">applyBeanPostProcessorBeforeInstantiation</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> beanClass<span class="token punctuation">,</span> <span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">BeanPostProcessor</span> processor <span class="token operator">:</span> <span class="token function">getBeanPostProcessors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>processor <span class="token keyword">instanceof</span> <span class="token class-name">InstantiationAwareBeanPostProcessor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Object</span> result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">InstantiationAwareBeanPostProcessor</span><span class="token punctuation">)</span>processor<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">postProcessBeforeInstantiation</span><span class="token punctuation">(</span>beanClass<span class="token punctuation">,</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> result<span class="token punctuation">)</span> <span class="token keyword">return</span> result<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å› ä¸ºåˆ›å»ºçš„æ˜¯ä»£ç†å¯¹è±¡ä¸æ˜¯ä¹‹å‰æµç¨‹é‡Œçš„æ™®é€šå¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å‰ç½®äºå…¶ä»–å¯¹è±¡çš„åˆ›å»ºï¼Œå³éœ€è¦åœ¨ AbstractAutowireCapableBeanFactory#createBean ä¼˜å…ˆå®Œæˆ Bean å¯¹è±¡çš„åˆ¤æ–­ï¼Œæ˜¯å¦éœ€è¦ä»£ç†ï¼Œæœ‰åˆ™ç›´æ¥è¿”å›ä»£ç†å¯¹è±¡ã€‚</li></ul><h2 id="äº”ã€æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#äº”ã€æµ‹è¯•" aria-hidden="true">#</a> äº”ã€æµ‹è¯•</h2><h3 id="_1-äº‹å…ˆå‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#_1-äº‹å…ˆå‡†å¤‡" aria-hidden="true">#</a> 1. äº‹å…ˆå‡†å¤‡</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token keyword">implements</span> <span class="token class-name">IUserService</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">queryUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">&quot;å°å‚…å“¥ï¼Œ100001ï¼Œæ·±åœ³&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">String</span> userName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">&quot;æ³¨å†Œç”¨æˆ·ï¼š&quot;</span> <span class="token operator">+</span> userName <span class="token operator">+</span> <span class="token string">&quot; successï¼&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨ UserService ä¸­æä¾›äº†2ä¸ªä¸åŒæ–¹æ³•ï¼Œå¦å¤–ä½ è¿˜å¯ä»¥å¢åŠ æ–°çš„ç±»æ¥åŠ å…¥æµ‹è¯•ã€‚åé¢æˆ‘ä»¬çš„æµ‹è¯•è¿‡ç¨‹ï¼Œä¼šç»™è¿™ä¸ªä¸¤ä¸ªæ–¹æ³•æ·»åŠ æˆ‘ä»¬çš„æ‹¦æˆªå¤„ç†ï¼Œæ‰“å°æ–¹æ³•æ‰§è¡Œè€—æ—¶ã€‚</li></ul><h3 id="_2-è‡ªå®šä¹‰æ‹¦æˆªæ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_2-è‡ªå®šä¹‰æ‹¦æˆªæ–¹æ³•" aria-hidden="true">#</a> 2. è‡ªå®šä¹‰æ‹¦æˆªæ–¹æ³•</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceBeforeAdvice</span> <span class="token keyword">implements</span> <span class="token class-name">MethodBeforeAdvice</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> <span class="token class-name">Object</span> target<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‹¦æˆªæ–¹æ³•ï¼š&quot;</span> <span class="token operator">+</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä¸ä¸Šä¸€ç« èŠ‚çš„æ‹¦æˆªæ–¹æ³•ç›¸æ¯”ï¼Œæˆ‘ä»¬ä¸åœ¨æ˜¯å®ç° MethodInterceptor æ¥å£ï¼Œè€Œæ˜¯å®ç° MethodBeforeAdvice ç¯ç»•æ‹¦æˆªã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥è·å–åˆ°æ–¹æ³•çš„ä¸€äº›ä¿¡æ¯ï¼Œå¦‚æœè¿˜å¼€å‘äº†å®ƒçš„ MethodAfterAdvice åˆ™å¯ä»¥ä¸¤ä¸ªæ¥å£ä¸€èµ·å®ç°ã€‚</li></ul><h3 id="_3-spring-xml-é…ç½®-aop" tabindex="-1"><a class="header-anchor" href="#_3-spring-xml-é…ç½®-aop" aria-hidden="true">#</a> 3. spring.xml é…ç½® AOP</h3><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.bugstack.springframework.test.bean.UserService<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.bugstack.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beforeAdvice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.bugstack.springframework.test.bean.UserServiceBeforeAdvice<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>methodInterceptor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.bugstack.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>advice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beforeAdvice<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointcutAdvisor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.bugstack.springframework.aop.aspectj.AspectJExpressionPointcutAdvisor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>expression<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* cn.bugstack.springframework.test.bean.IUserService.*(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>advice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>methodInterceptor<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™å›å†ä½¿ç”¨ AOP å°±å¯ä»¥åƒ Spring ä¸­ä¸€æ ·ï¼Œé€šè¿‡åœ¨ xml ä¸­é…ç½®å³å¯ã€‚å› ä¸ºæˆ‘ä»¬å·²ç»æŠŠ AOP çš„åŠŸèƒ½èåˆåˆ° Bean çš„ç”Ÿå‘½å‘¨æœŸé‡Œå»äº†ï¼Œä½ çš„æ–°å¢æ‹¦æˆªæ–¹æ³•éƒ½ä¼šè¢«è‡ªåŠ¨å¤„ç†ã€‚</li></ul><h3 id="_4-å•å…ƒæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_4-å•å…ƒæµ‹è¯•" aria-hidden="true">#</a> 4. å•å…ƒæµ‹è¯•</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_aop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ClassPathXmlApplicationContext</span> applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:spring.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">IUserService</span> userService <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;userService&quot;</span><span class="token punctuation">,</span> <span class="token class-name">IUserService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•ç»“æœï¼š&quot;</span> <span class="token operator">+</span> userService<span class="token punctuation">.</span><span class="token function">queryUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨å•å…ƒæµ‹è¯•ä¸­ä½ åªéœ€è¦æŒ‰ç…§æ­£å¸¸è·å–å’Œä½¿ç”¨ Bean å¯¹è±¡å³å¯ï¼Œä¸è¿‡è¿™ä¸ªæ—¶å€™å¦‚æœè¢«åˆ‡é¢æ‹¦æˆªäº†ï¼Œé‚£ä¹ˆå…¶å®ä½ è·å–åˆ°çš„å°±æ˜¯å¯¹åº”çš„ä»£ç†å¯¹è±¡é‡Œé¢çš„å¤„ç†æ“ä½œäº†ã€‚</li></ul><p><strong>æµ‹è¯•ç»“æœ</strong></p><p><img src="https://bugstack.cn/assets/images/spring/spring-13-03.png" alt=""></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>æ‹¦æˆªæ–¹æ³•ï¼šqueryUserInfo
æµ‹è¯•ç»“æœï¼šå°å‚…å“¥ï¼Œ<span class="token number">100001</span>ï¼Œæ·±åœ³

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é€šè¿‡æµ‹è¯•ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å·²ç»è®©æ‹¦æˆªæ–¹æ³•ç”Ÿæ•ˆäº†ï¼Œä¹Ÿä¸éœ€è¦è‡ªå·±æ‰‹åŠ¨å¤„ç†åˆ‡é¢ã€æ‹¦æˆªæ–¹æ³•ç­‰å†…å®¹ã€‚<em>æˆªå›¾ä¸Šå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæ—¶å€™çš„ IUserService å°±æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡</em></li></ul><h2 id="å…­ã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#å…­ã€æ€»ç»“" aria-hidden="true">#</a> å…­ã€æ€»ç»“</h2><ul><li>æœ¬ç« èŠ‚å®ç° AOP åŠŸèƒ½çš„å¤–åœ¨ä½“ç°ä¸»è¦æ˜¯æŠŠä»¥å‰è‡ªå·±åœ¨å•å…ƒæµ‹è¯•ä¸­çš„åˆ‡é¢æ‹¦æˆªï¼Œäº¤ç»™ Spring çš„ xml é…ç½®äº†ï¼Œä¹Ÿå°±ä¸éœ€è¦è‡ªå·±æ‰‹åŠ¨å¤„ç†äº†ã€‚é‚£ä¹ˆè¿™é‡Œæœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„çŸ¥è¯†ç‚¹ï¼Œå°±æ˜¯æŠŠç›¸åº”çš„åŠŸèƒ½å¦‚ä½•ä¸ Spring çš„ Bean ç”Ÿå‘½å‘¨æœŸç»“åˆèµ·æ¥ï¼Œæœ¬ç« èŠ‚ç”¨åˆ°çš„ BeanPostProcessorï¼Œå› ä¸ºå®ƒå¯ä»¥è§£å†³åœ¨ Bean å¯¹è±¡æ‰§è¡Œåˆå§‹åŒ–æ–¹æ³•ä¹‹å‰ï¼Œç”¨äºä¿®æ”¹æ–°å®ä¾‹åŒ– Bean å¯¹è±¡çš„æ‰©å±•ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå°±å¯ä»¥å¤„ç†è‡ªå·±çš„ AOP ä»£ç†å¯¹è±¡é€»è¾‘äº†ã€‚</li><li>ä¸€ä¸ªåŠŸèƒ½çš„å®ç°å¾€å¾€åŒ…æ‹¬æ ¸å¿ƒéƒ¨åˆ†ã€ç»„è£…éƒ¨åˆ†ã€é“¾æ¥éƒ¨åˆ†ï¼Œä¸ºäº†è¿™äº›å„è‡ªèŒè´£çš„åˆ†å·¥ï¼Œåˆ™éœ€è¦åˆ›å»ºæ¥å£å’Œç±»ï¼Œç”±ä¸åŒå…³ç³»çš„ç»§æ‰¿ã€å®ç°è¿›è¡Œç»„è£…ã€‚åªæœ‰æ˜ç¡®äº†å„ä¸ªèŒè´£åˆ†å·¥ï¼Œæ‰å¥½çµæ´»çš„æ‰©å±•ç›¸åº”çš„åŠŸèƒ½é€»è¾‘ï¼Œå¦åˆ™å¾ˆéš¾é©¾é©­å¤§å‹ç³»ç»Ÿçš„å¼€å‘å’Œå»ºè®¾ï¼Œä¹Ÿå°±æ˜¯é‚£ç§ä¸å¥½æŠŠæ¡çš„æ„Ÿè§‰ã€‚</li><li>ç›®å‰æˆ‘ä»¬å®ç°çš„ AOP ä¸ Spring æºç ä¸­çš„æ ¸å¿ƒé€»è¾‘æ˜¯ç±»ä¼¼çš„ï¼Œä½†æ›´ä¼šåç®€å•ä¸€äº›ï¼Œä¹Ÿä¸ä¼šè€ƒè™‘æ›´å¤šçš„å¤æ‚åœºæ™¯é‡åˆ°çš„é—®é¢˜ï¼ŒåŒ…æ‹¬æ˜¯å¦æœ‰æ„é€ å‡½æ•°ã€æ˜¯å¦ä¸ºä»£ç†ä¸­çš„åˆ‡é¢ç­‰ã€‚å…¶å®ä¹Ÿå¯ä»¥çœ‹å‡ºåªè¦æ˜¯ Java ä¸­çš„ä¸€äº›ç‰¹æ€§ï¼Œéƒ½éœ€è¦åœ¨çœŸå®ä½¿ç”¨çš„ Spring ä¸­è¿›è¡Œå®Œæ•´çš„å®ç°ï¼Œå¦åˆ™åœ¨ä½¿ç”¨è¿™äº›åŠŸèƒ½çš„æ—¶å€™å°±ä¼šé‡åˆ°å„ç§é—®é¢˜ã€‚</li></ul><h2 id="ä¸ƒã€ä¼˜ç§€ä½œä¸š" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€ä¼˜ç§€ä½œä¸š" aria-hidden="true">#</a> ä¸ƒã€ä¼˜ç§€ä½œä¸š</h2>`,73),b={href:"https://t.zsxq.com/05B2vRvzr",target:"_blank",rel:"noopener noreferrer"},g={href:"https://t.zsxq.com/06Ybq3fE2",target:"_blank",rel:"noopener noreferrer"},h={href:"https://t.zsxq.com/081HcrZMA",target:"_blank",rel:"noopener noreferrer"},f={href:"https://t.zsxq.com/08jTKRDFD",target:"_blank",rel:"noopener noreferrer"},y={href:"https://t.zsxq.com/08tlg2pKA",target:"_blank",rel:"noopener noreferrer"},w={href:"https://t.zsxq.com/0aMY674Df",target:"_blank",rel:"noopener noreferrer"},A={href:"https://t.zsxq.com/0bs96PAkO",target:"_blank",rel:"noopener noreferrer"};function x(j,B){const a=p("ExternalLinkIcon");return c(),o("div",null,[u,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),r,s("åšå®¢ï¼š"),n("a",d,[s("https://bugstack.cn"),e(a)]),k,s("åŸæ–‡ï¼š"),n("a",v,[s("https://mp.weixin.qq.com/s/BFYJLNzVO8NxjmeCUzmLyg"),e(a)])]),m,n("ul",null,[n("li",null,[n("a",b,[s("å®šä¹‰ Adviceé€šçŸ¥ æ‹¦æˆªå™¨é“¾ @Ray"),e(a)])]),n("li",null,[n("a",g,[s("å·²ç»é€šè¿‡ä¸€äº›åŒ…è£…ç±»å°†åˆ‡ç‚¹ä¿¡æ¯è¿›è¡ŒåŒ…è£…ï¼Œä½¿ç”¨jdkå’Œcglibè¿›è¡ŒåŠ¨æ€ä»£ç† @W"),e(a)])]),n("li",null,[n("a",h,[s("å€Ÿç€ BeanPostProcessorï¼ˆè¯¥æ¥å£çš„å®ç°ç±»æä¾›çš„æ–¹æ³•å¯ä»¥ä½œç”¨äºBeanå¯¹è±¡æ‰§è¡Œåˆå§‹åŒ–å‰åï¼Œä¿®æ”¹Beanå¯¹è±¡çš„æ‰©å±•ä¿¡æ¯ï¼‰ æŠŠåŠ¨æ€ä»£ç†èå…¥åˆ° Bean çš„ç”Ÿå‘½å‘¨æœŸä¸­ @liuc"),e(a)])]),n("li",null,[n("a",f,[s("æŠŠ AOP èå…¥åˆ° Bean çš„ç”Ÿå‘½å‘¨æœŸä¸­ã€‚@Homage"),e(a)])]),n("li",null,[n("a",y,[s("æ•´åˆ AOP æ ¸å¿ƒåŠŸèƒ½åˆ° Spring æ¡†æ¶ï¼Œè¾¾åˆ°å¯ä»¥é€šè¿‡ Spring é…ç½®çš„æ–¹å¼å®Œæˆåˆ‡é¢æ“ä½œã€‚@æ°´ä¸­ææœˆ"),e(a)])]),n("li",null,[n("a",w,[s("AOPèå…¥Beanç”Ÿå‘½å‘¨æœŸ @åœ¨ä¹æœˆ"),e(a)])]),n("li",null,[n("a",A,[s("è¿‡æ‰«æåŒ…æ¥è·å–æ‰€æœ‰ä½¿ç”¨æ³¨è§£çš„ bean @lucien"),e(a)])])])])}const S=t(l,[["render",x],["__file","2021-07-22-di13zhangï¼šxingyunliushuiï¼ŒbaAOPdongtaidailiï¼ŒrongrudaoBeandeshengmingzhouqi.html.vue"]]);export{S as default};
