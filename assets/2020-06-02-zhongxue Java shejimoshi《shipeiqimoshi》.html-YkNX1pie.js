import{_ as p,r as c,o,c as i,a as n,b as s,d as t,e}from"./app-3RcBQnkC.js";const l={},u=n("h1",{id:"é‡å­¦-java-è®¾è®¡æ¨¡å¼-å®æˆ˜é€‚é…å™¨æ¨¡å¼ã€Œä»å¤šä¸ªmqæ¶ˆæ¯ä½“ä¸­-æŠ½å–æŒ‡å®šå­—æ®µå€¼åœºæ™¯ã€",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#é‡å­¦-java-è®¾è®¡æ¨¡å¼-å®æˆ˜é€‚é…å™¨æ¨¡å¼ã€Œä»å¤šä¸ªmqæ¶ˆæ¯ä½“ä¸­-æŠ½å–æŒ‡å®šå­—æ®µå€¼åœºæ™¯ã€","aria-hidden":"true"},"#"),s(" é‡å­¦ Java è®¾è®¡æ¨¡å¼ï¼šå®æˆ˜é€‚é…å™¨æ¨¡å¼ã€Œä»å¤šä¸ªMQæ¶ˆæ¯ä½“ä¸­ï¼ŒæŠ½å–æŒ‡å®šå­—æ®µå€¼åœºæ™¯ã€")],-1),r=n("br",null,null,-1),d={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},k=n("blockquote",null,[n("p",null,"æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„")],-1),v=n("iframe",{id:"B-Video",src:"//player.bilibili.com/player.html?aid=682825574&bvid=BV1pS4y1K7YH&cid=565112237&page=1",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true",width:"100%",height:"480"}," ",-1),m=e('<h2 id="ä¸€ã€å‰è¨€" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å‰è¨€" aria-hidden="true">#</a> ä¸€ã€å‰è¨€</h2><p><code>æ“¦å±å±çº¸80%çš„é¢ç§¯éƒ½æ˜¯ä¿æŠ¤æ‰‹çš„ï¼</code></p><p>å·¥ä½œåˆ°3å¹´å·¦å³å¾ˆå¤§ä¸€éƒ¨åˆ†ç¨‹åºå‘˜éƒ½æƒ³æå‡è‡ªå·±çš„æŠ€æœ¯æ ˆï¼Œå¼€å§‹å°è¯•å»é˜…è¯»ä¸€äº›æºç ï¼Œä¾‹å¦‚<code>Spring</code>ã€<code>Mybaits</code>ã€<code>Dubbo</code>ç­‰ï¼Œä½†è¯»ç€è¯»ç€å‘ç°è¶Šæ¥è¶Šéš¾æ‡‚ï¼Œä¸€ä¼šä»è¿™è¿‡æ¥ä¸€ä¼šè·‘åˆ°é‚£å»ã€‚ç”šè‡³æ€€ç–‘è‡ªå·±æŠ€æœ¯å¤ªå·®ï¼Œæ…¢æ…¢ä¹Ÿå°±ä¸æ„¿æ„å†è§¦ç¢°è¿™éƒ¨åˆ†çŸ¥è¯†ã€‚</p><p>è€Œè¿™ä¸»è¦çš„åŸå› æ˜¯ä¸€ä¸ªæ¡†æ¶éšç€æ—¶é—´çš„å‘å±•ï¼Œå®ƒçš„å¤æ‚ç¨‹åº¦æ˜¯è¶Šæ¥è¶Šé«˜çš„ï¼Œä»æœ€å¼€å§‹åªæœ‰ä¸€ä¸ªéå¸¸æ ¸å¿ƒçš„ç‚¹åˆ°æœ€åå¼€ææ•£å¶ã€‚è¿™å°±åƒä½ è‡ªå·±å¼€å‘çš„ä¸šåŠ¡ä»£ç æˆ–è€…æŸä¸ªç»„ä»¶ä¸€æ ·ï¼Œæœ€å¼€å§‹çš„é‚£éƒ¨åˆ†æ ¸å¿ƒä»£ç ä¹Ÿè®¸åªèƒ½å åˆ°20%ï¼Œè€Œå…¶ä»–å¤§éƒ¨åˆ†ä»£ç éƒ½æ˜¯ä¸ºäº†ä¿è¯æ ¸å¿ƒæµç¨‹èƒ½æ­£å¸¸è¿è¡Œçš„ã€‚æ‰€ä»¥è¿™ä¹Ÿæ˜¯ä½ è¯»æºç è´¹åŠ²çš„ä¸€éƒ¨åˆ†åŸå› ã€‚</p><p><code>æ¡†æ¶ä¸­ç”¨åˆ°äº†è®¾è®¡æ¨¡å¼å—ï¼Ÿ</code></p><p>æ¡†æ¶ä¸­ä¸ä»…ç”¨åˆ°è®¾è®¡æ¨¡å¼è¿˜ç”¨äº†å¾ˆå¤šï¼Œè€Œä¸”æœ‰äº›æ—¶å€™æ ¹æœ¬ä¸æ˜¯ä¸€ä¸ªæ¨¡å¼çš„å•ç‹¬ä½¿ç”¨ï¼Œè€Œæ˜¯å¤šç§è®¾è®¡æ¨¡å¼çš„ç»¼åˆè¿ç”¨ã€‚ä¸å¤§éƒ¨åˆ†å°ä¼™ä¼´å¹³æ—¶å¼€å‘çš„CRUDå¯å°±ä¸ä¸€æ ·äº†ï¼Œå¦‚æœéƒ½æ˜¯ifè¯­å¥ä»ä¸Šåˆ°ä¸‹ï¼Œä¹Ÿå°±ç®—å¾—ä¸ä¸Šä»€ä¹ˆæ¡†æ¶äº†ã€‚å°±åƒä½ åˆ°Springçš„æºç ä¸­æœå…³é”®å­—<code>Adapter</code>ï¼Œå°±ä¼šå‡ºç°å¾ˆå¤šå®ç°ç±»ï¼Œä¾‹å¦‚ï¼›<code>UserCredentialsDataSourceAdapter</code>ã€‚è€Œè¿™ç§è®¾è®¡æ¨¡å¼å°±æ˜¯æˆ‘ä»¬æœ¬æ–‡è¦ä»‹ç»çš„é€‚é…å™¨æ¨¡å¼ã€‚</p><p><code>é€‚é…å™¨åœ¨ç”Ÿæ´»é‡Œéšå¤„å¯è§</code></p><p>å¦‚æœæåˆ°åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­å°±å¾ˆå¤šé€‚é…å™¨çš„å­˜åœ¨ä½ ä¼šæƒ³åˆ°ä»€ä¹ˆï¼Ÿåœ¨æ²¡æœ‰çœ‹åæ–‡ä¹‹å‰å¯ä»¥å…ˆæ€è€ƒä¸‹ã€‚</p><h2 id="äºŒã€å¼€å‘ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#äºŒã€å¼€å‘ç¯å¢ƒ" aria-hidden="true">#</a> äºŒã€å¼€å‘ç¯å¢ƒ</h2>',9),b=n("li",null,"JDK 1.8",-1),g=n("li",null,"Idea + Maven",-1),h=n("strong",null,"å…¬ä¼—å·",-1),q={href:"https://bugstack.cn/assets/images/qrcode.png",target:"_blank",rel:"noopener noreferrer"},f=n("code",null,"bugstackè™«æ´æ ˆ",-1),y=n("code",null,"æºç ä¸‹è½½",-1),_=e('<table><thead><tr><th>å·¥ç¨‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>itstack-demo-design-6-00</td><td>åœºæ™¯æ¨¡æ‹Ÿå·¥ç¨‹ï¼›æ¨¡æ‹Ÿå¤šä¸ªMQæ¶ˆæ¯ä½“</td></tr><tr><td>itstack-demo-design-6-01</td><td>ä½¿ç”¨ä¸€å¨ä»£ç å®ç°ä¸šåŠ¡éœ€æ±‚</td></tr><tr><td>itstack-demo-design-6-02</td><td>é€šè¿‡è®¾è®¡æ¨¡å¼ä¼˜åŒ–æ”¹é€ ä»£ç ï¼Œäº§ç”Ÿå¯¹æ¯”æ€§ä»è€Œå­¦ä¹ </td></tr></tbody></table><h2 id="ä¸‰ã€é€‚é…å™¨æ¨¡å¼ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€é€‚é…å™¨æ¨¡å¼ä»‹ç»" aria-hidden="true">#</a> ä¸‰ã€é€‚é…å™¨æ¨¡å¼ä»‹ç»</h2><p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-6-01.png" alt="é€‚é…å™¨æ¨¡å¼ï¼Œå›¾ç‰‡æ¥è‡ª refactoringguru.cn"></p>',3),w={href:"https://refactoringguru.cn/design-patterns/adapter",target:"_blank",rel:"noopener noreferrer"},S=e(`<p>é€‚é…å™¨æ¨¡å¼çš„ä¸»è¦ä½œç”¨å°±æ˜¯æŠŠåŸæœ¬ä¸å…¼å®¹çš„æ¥å£ï¼Œé€šè¿‡é€‚é…ä¿®æ”¹åšåˆ°ç»Ÿä¸€ã€‚ä½¿å¾—ç”¨æˆ·æ–¹ä¾¿ä½¿ç”¨ï¼Œå°±åƒæˆ‘ä»¬æåˆ°çš„ä¸‡èƒ½å……ã€æ•°æ®çº¿ã€MACç¬”è®°æœ¬çš„è½¬æ¢å¤´ã€å‡ºå›½æ—…æ¸¸ä¹°ä¸ªæ’åº§ç­‰ç­‰ï¼Œä»–ä»¬éƒ½æ˜¯ä¸ºäº†é€‚é…å„ç§ä¸åŒçš„<code>å£</code>ï¼Œåšçš„å…¼å®¹ã€‚ã€‚</p><p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-6-02.png" alt="ä¸‡èƒ½å……ã€æ•°æ®çº¿"></p><p><strong>é™¤äº†æˆ‘ä»¬ç”Ÿæ´»ä¸­å‡ºç°çš„å„ç§é€‚é…çš„åœºæ™¯ï¼Œé‚£ä¹ˆåœ¨ä¸šåŠ¡å¼€å‘ä¸­å‘¢ï¼Ÿ</strong></p><p>åœ¨ä¸šåŠ¡å¼€å‘ä¸­æˆ‘ä»¬ä¼šç»å¸¸çš„éœ€è¦åšä¸åŒæ¥å£çš„å…¼å®¹ï¼Œå°¤å…¶æ˜¯ä¸­å°æœåŠ¡ï¼Œä¸­å°éœ€è¦æŠŠå„ä¸ªä¸šåŠ¡çº¿çš„å„ç§ç±»å‹æœåŠ¡åšç»Ÿä¸€åŒ…è£…ï¼Œå†å¯¹å¤–æä¾›æ¥å£è¿›è¡Œä½¿ç”¨ã€‚è€Œè¿™åœ¨æˆ‘ä»¬å¹³å¸¸çš„å¼€å‘ä¸­ä¹Ÿæ˜¯éå¸¸å¸¸è§çš„ã€‚</p><h2 id="å››ã€æ¡ˆä¾‹åœºæ™¯æ¨¡æ‹Ÿ" tabindex="-1"><a class="header-anchor" href="#å››ã€æ¡ˆä¾‹åœºæ™¯æ¨¡æ‹Ÿ" aria-hidden="true">#</a> å››ã€æ¡ˆä¾‹åœºæ™¯æ¨¡æ‹Ÿ</h2><p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-6-03.png" alt="åœºæ™¯æ¨¡æ‹Ÿï¼›æ¥æ”¶å¤šç±»å‹MQæ¶ˆæ¯"></p><p>éšç€å…¬å¸çš„ä¸šåŠ¡çš„ä¸æ–­å‘å±•ï¼Œå½“åŸºç¡€çš„ç³»ç»Ÿé€æ­¥æˆå‹ä»¥åã€‚ä¸šåŠ¡è¿è¥å°±éœ€è¦å¼€å§‹åšç”¨æˆ·çš„æ‹‰æ–°å’Œä¿ƒæ´»ï¼Œä»è€Œä¿éšœ<code>DAU</code>çš„å¢é€Ÿä»¥åŠæœ€ç»ˆ<code>ROI</code>è½¬æ¢ã€‚</p><p>è€Œè¿™æ—¶å€™å°±ä¼šéœ€è¦åšä¸€äº›è¥é”€ç³»ç»Ÿï¼Œå¤§éƒ¨åˆ†å¸¸è§çš„éƒ½æ˜¯è£‚å˜ã€æ‹‰å®¢ï¼Œä¾‹å¦‚ï¼›ä½ é‚€è¯·ä¸€ä¸ªç”¨æˆ·å¼€æˆ·ã€æˆ–è€…é‚€è¯·ä¸€ä¸ªç”¨æˆ·ä¸‹å•ï¼Œé‚£ä¹ˆå¹³å°å°±ä¼šç»™ä½ è¿”åˆ©ï¼Œå¤šé‚€å¤šå¾—ã€‚åŒæ—¶éšç€æ‹‰æ–°çš„é‡è¶Šæ¥è¶Šå¤šå¼€å§‹è®¾ç½®æ¯æœˆä¸‹å•éƒ½ä¼šç»™é¦–å•å¥–åŠ±ï¼Œç­‰ç­‰ï¼Œå„ç§è¥é”€åœºæ™¯ã€‚</p><p>é‚£ä¹ˆè¿™ä¸ªæ—¶å€™åšè¿™æ ·ä¸€ä¸ªç³»ç»Ÿå°±ä¼šæ¥æ”¶å„ç§å„æ ·çš„MQæ¶ˆæ¯æˆ–è€…æ¥å£ï¼Œå¦‚æœä¸€ä¸ªä¸ªçš„å»å¼€å‘ï¼Œå°±ä¼šè€—è´¹å¾ˆå¤§çš„æˆæœ¬ï¼ŒåŒæ—¶å¯¹äºåæœŸçš„æ‹“å±•ä¹Ÿæœ‰ä¸€å®šçš„éš¾åº¦ã€‚æ­¤æ—¶å°±ä¼šå¸Œæœ›æœ‰ä¸€ä¸ªç³»ç»Ÿå¯ä»¥é…ç½®ä¸€ä¸‹å°±æŠŠå¤–éƒ¨çš„MQæ¥å…¥è¿›è¡Œï¼Œè¿™äº›MQå°±åƒä¸Šé¢æåˆ°çš„å¯èƒ½æ˜¯ä¸€äº›æ³¨å†Œå¼€æˆ·æ¶ˆæ¯ã€å•†å“ä¸‹å•æ¶ˆæ¯ç­‰ç­‰ã€‚</p><p>è€Œé€‚é…å™¨çš„æ€æƒ³æ–¹å¼ä¹Ÿæ°æ°å¯ä»¥è¿ç”¨åˆ°è¿™é‡Œï¼Œå¹¶ä¸”æˆ‘æƒ³å¼ºè°ƒä¸€ä¸‹ï¼Œé€‚é…å™¨ä¸åªæ˜¯å¯ä»¥é€‚é…æ¥å£å¾€å¾€è¿˜å¯ä»¥é€‚é…ä¸€äº›å±æ€§ä¿¡æ¯ã€‚</p><h3 id="_1-åœºæ™¯æ¨¡æ‹Ÿå·¥ç¨‹" tabindex="-1"><a class="header-anchor" href="#_1-åœºæ™¯æ¨¡æ‹Ÿå·¥ç¨‹" aria-hidden="true">#</a> 1. åœºæ™¯æ¨¡æ‹Ÿå·¥ç¨‹</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>design<span class="token operator">-</span><span class="token number">6</span><span class="token operator">-</span><span class="token number">00</span>
â””â”€â”€ src
    â””â”€â”€ main
        â””â”€â”€ java
            â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design
                â”œâ”€â”€ mq
                â”‚   â”œâ”€â”€ create_account<span class="token punctuation">.</span>java
                â”‚   â”œâ”€â”€ <span class="token class-name">OrderMq</span><span class="token punctuation">.</span>java
                â”‚   â””â”€â”€ <span class="token class-name">POPOrderDelivered</span><span class="token punctuation">.</span>java
                â””â”€â”€ service
                    â”œâ”€â”€ <span class="token class-name">OrderServicejava</span>
                    â””â”€â”€ <span class="token class-name">POPOrderService</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™é‡Œæ¨¡æ‹Ÿäº†ä¸‰ä¸ªä¸åŒç±»å‹çš„MQæ¶ˆæ¯ï¼Œè€Œåœ¨æ¶ˆæ¯ä½“ä¸­éƒ½æœ‰ä¸€äº›å¿…è¦çš„å­—æ®µï¼Œæ¯”å¦‚ï¼›ç”¨æˆ·IDã€æ—¶é—´ã€ä¸šåŠ¡IDï¼Œä½†æ˜¯æ¯ä¸ªMQçš„å­—æ®µå±æ€§å¹¶ä¸ä¸€æ ·ã€‚å°±åƒç”¨æˆ·IDåœ¨ä¸åŒçš„MQé‡Œä¹Ÿæœ‰ä¸åŒçš„å­—æ®µï¼šuIdã€userIdç­‰ã€‚</li><li>åŒæ—¶è¿˜æä¾›äº†ä¸¤ä¸ªä¸åŒç±»å‹çš„æ¥å£ï¼Œä¸€ä¸ªç”¨äºæŸ¥è¯¢å†…éƒ¨è®¢å•è®¢å•ä¸‹å•æ•°é‡ï¼Œä¸€ä¸ªç”¨äºæŸ¥è¯¢ç¬¬ä¸‰æ–¹æ˜¯å¦é¦–å•ã€‚</li><li>åé¢ä¼šæŠŠè¿™äº›ä¸åŒç±»å‹çš„MQå’Œæ¥å£åšé€‚é…å…¼å®¹ã€‚</li></ul><h3 id="_2-åœºæ™¯ç®€è¿°" tabindex="-1"><a class="header-anchor" href="#_2-åœºæ™¯ç®€è¿°" aria-hidden="true">#</a> 2. åœºæ™¯ç®€è¿°</h3><h4 id="_1-1-æ³¨å†Œå¼€æˆ·mq" tabindex="-1"><a class="header-anchor" href="#_1-1-æ³¨å†Œå¼€æˆ·mq" aria-hidden="true">#</a> 1.1 æ³¨å†Œå¼€æˆ·MQ</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> create_account <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> number<span class="token punctuation">;</span>      <span class="token comment">// å¼€æˆ·ç¼–å·</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>     <span class="token comment">// å¼€æˆ·åœ°</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> accountDate<span class="token punctuation">;</span>   <span class="token comment">// å¼€æˆ·æ—¶é—´</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> desc<span class="token punctuation">;</span>        <span class="token comment">// å¼€æˆ·æè¿°</span>

    <span class="token comment">// ... get/set     </span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-2-å†…éƒ¨è®¢å•mq" tabindex="-1"><a class="header-anchor" href="#_1-2-å†…éƒ¨è®¢å•mq" aria-hidden="true">#</a> 1.2 å†…éƒ¨è®¢å•MQ</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderMq</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> uid<span class="token punctuation">;</span>           <span class="token comment">// ç”¨æˆ·ID</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> sku<span class="token punctuation">;</span>           <span class="token comment">// å•†å“</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> orderId<span class="token punctuation">;</span>       <span class="token comment">// è®¢å•ID</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> createOrderTime<span class="token punctuation">;</span> <span class="token comment">// ä¸‹å•æ—¶é—´     </span>

    <span class="token comment">// ... get/set      </span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-3-ç¬¬ä¸‰æ–¹è®¢å•mq" tabindex="-1"><a class="header-anchor" href="#_1-3-ç¬¬ä¸‰æ–¹è®¢å•mq" aria-hidden="true">#</a> 1.3 ç¬¬ä¸‰æ–¹è®¢å•MQ</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">POPOrderDelivered</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> uId<span class="token punctuation">;</span>     <span class="token comment">// ç”¨æˆ·ID</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> orderId<span class="token punctuation">;</span> <span class="token comment">// è®¢å•å·</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> orderTime<span class="token punctuation">;</span> <span class="token comment">// ä¸‹å•æ—¶é—´</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> sku<span class="token punctuation">;</span>       <span class="token comment">// å•†å“</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> skuName<span class="token punctuation">;</span>   <span class="token comment">// å•†å“åç§°</span>
    <span class="token keyword">private</span> <span class="token class-name">BigDecimal</span> decimal<span class="token punctuation">;</span> <span class="token comment">// é‡‘é¢</span>

    <span class="token comment">// ... get/set      </span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-4-æŸ¥è¯¢ç”¨æˆ·å†…éƒ¨ä¸‹å•æ•°é‡æ¥å£" tabindex="-1"><a class="header-anchor" href="#_1-4-æŸ¥è¯¢ç”¨æˆ·å†…éƒ¨ä¸‹å•æ•°é‡æ¥å£" aria-hidden="true">#</a> 1.4 æŸ¥è¯¢ç”¨æˆ·å†…éƒ¨ä¸‹å•æ•°é‡æ¥å£</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">POPOrderService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">queryUserOrderCount</span><span class="token punctuation">(</span><span class="token class-name">String</span> userId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è‡ªè¥å•†å®¶ï¼ŒæŸ¥è¯¢ç”¨æˆ·çš„è®¢å•æ˜¯å¦ä¸ºé¦–å•ï¼š{}&quot;</span><span class="token punctuation">,</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">10L</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-5-æŸ¥è¯¢ç”¨æˆ·ç¬¬ä¸‰æ–¹ä¸‹å•é¦–å•æ¥å£" tabindex="-1"><a class="header-anchor" href="#_1-5-æŸ¥è¯¢ç”¨æˆ·ç¬¬ä¸‰æ–¹ä¸‹å•é¦–å•æ¥å£" aria-hidden="true">#</a> 1.5 æŸ¥è¯¢ç”¨æˆ·ç¬¬ä¸‰æ–¹ä¸‹å•é¦–å•æ¥å£</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">POPOrderService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">POPOrderService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isFirstOrder</span><span class="token punctuation">(</span><span class="token class-name">String</span> uId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;POPå•†å®¶ï¼ŒæŸ¥è¯¢ç”¨æˆ·çš„è®¢å•æ˜¯å¦ä¸ºé¦–å•ï¼š{}&quot;</span><span class="token punctuation">,</span> uId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»¥ä¸Šè¿™å‡ é¡¹å°±æ˜¯ä¸åŒçš„MQä»¥åŠä¸åŒçš„æ¥å£çš„ä¸€ä¸ªä½“ç°ï¼Œåé¢æˆ‘ä»¬å°†ä½¿ç”¨è¿™æ ·çš„MQæ¶ˆæ¯å’Œæ¥å£ï¼Œç»™å®ƒä»¬åšç›¸åº”çš„é€‚é…ã€‚</li></ul><h2 id="äº”ã€ç”¨ä¸€å¨å¨ä»£ç å®ç°" tabindex="-1"><a class="header-anchor" href="#äº”ã€ç”¨ä¸€å¨å¨ä»£ç å®ç°" aria-hidden="true">#</a> äº”ã€ç”¨ä¸€å¨å¨ä»£ç å®ç°</h2><p><code>å…¶å®å¤§éƒ¨åˆ†æ—¶å€™æ¥MQæ¶ˆæ¯éƒ½æ˜¯åˆ›å»ºä¸€ä¸ªç±»ç”¨äºæ¶ˆè´¹ï¼Œé€šè¿‡è½¬æ¢ä»–çš„MQæ¶ˆæ¯å±æ€§ç»™è‡ªå·±çš„æ–¹æ³•ã€‚</code></p><p>æˆ‘ä»¬æ¥ä¸‹æ¥ä¹Ÿæ˜¯å…ˆä½“ç°ä¸€ä¸‹è¿™ç§æ–¹å¼çš„å®ç°æ¨¡æ‹Ÿï¼Œä½†æ˜¯è¿™æ ·çš„å®ç°æœ‰ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜å°±æ˜¯ï¼Œå½“MQæ¶ˆæ¯è¶Šæ¥è¶Šå¤šåï¼Œç”šè‡³å‡ åå‡ ç™¾ä»¥åï¼Œä½ ä½œä¸ºä¸­å°è¦æ€ä¹ˆä¼˜åŒ–å‘¢ï¼Ÿ</p><h3 id="_1-å·¥ç¨‹ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>design<span class="token operator">-</span><span class="token number">6</span><span class="token operator">-</span><span class="token number">01</span>
â””â”€â”€ src
    â””â”€â”€ main
        â””â”€â”€ java
            â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design
                â””â”€â”€ create_accountMqService<span class="token punctuation">.</span>java
                â””â”€â”€ <span class="token class-name">OrderMqService</span><span class="token punctuation">.</span>java
                â””â”€â”€ <span class="token class-name">POPOrderDeliveredService</span><span class="token punctuation">.</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç›®å‰éœ€è¦æ¥æ”¶ä¸‰ä¸ªMQæ¶ˆæ¯ï¼Œæ‰€æœ‰å°±æœ‰äº†ä¸‰ä¸ªå¯¹åº”çš„ç±»ï¼Œå’Œæˆ‘ä»¬å¹³æ—¶çš„ä»£ç å‡ ä¹ä¸€æ ·ã€‚å¦‚æœä½ çš„MQé‡ä¸å¤šï¼Œè¿™æ ·çš„å†™æ³•ä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯éšç€æ•°é‡çš„å¢åŠ ï¼Œå°±éœ€è¦è€ƒè™‘ç”¨ä¸€äº›è®¾è®¡æ¨¡å¼æ¥è§£å†³ã€‚</li></ul><h3 id="_2-mqæ¥æ”¶æ¶ˆæ¯å®ç°" tabindex="-1"><a class="header-anchor" href="#_2-mqæ¥æ”¶æ¶ˆæ¯å®ç°" aria-hidden="true">#</a> 2. Mqæ¥æ”¶æ¶ˆæ¯å®ç°</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> create_accountMqService <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        create_account mq <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> create_account<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        mq<span class="token punctuation">.</span><span class="token function">getNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mq<span class="token punctuation">.</span><span class="token function">getAccountDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ... å¤„ç†è‡ªå·±çš„ä¸šåŠ¡</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä¸‰ç»„MQçš„æ¶ˆæ¯éƒ½æ˜¯ä¸€æ ·æ¨¡æ‹Ÿä½¿ç”¨ï¼Œå°±ä¸ä¸€ä¸€å±•ç¤ºäº†ã€‚å¯ä»¥è·å–æºç åå­¦ä¹ ã€‚</li></ul><h2 id="å…­ã€é€‚é…å™¨æ¨¡å¼é‡æ„ä»£ç " tabindex="-1"><a class="header-anchor" href="#å…­ã€é€‚é…å™¨æ¨¡å¼é‡æ„ä»£ç " aria-hidden="true">#</a> å…­ã€é€‚é…å™¨æ¨¡å¼é‡æ„ä»£ç </h2><p><code>æ¥ä¸‹æ¥ä½¿ç”¨é€‚é…å™¨æ¨¡å¼æ¥è¿›è¡Œä»£ç ä¼˜åŒ–ï¼Œä¹Ÿç®—æ˜¯ä¸€æ¬¡å¾ˆå°çš„é‡æ„ã€‚</code></p><p>é€‚é…å™¨æ¨¡å¼è¦è§£å†³çš„ä¸»è¦é—®é¢˜å°±æ˜¯å¤šç§å·®å¼‚åŒ–ç±»å‹çš„æ¥å£åšç»Ÿä¸€è¾“å‡ºï¼Œè¿™åœ¨æˆ‘ä»¬å­¦ä¹ å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ä¹Ÿæœ‰æ‰€æåˆ°ä¸åŒç§ç±»çš„å¥–å“å¤„ç†ï¼Œå…¶å®é‚£ä¹Ÿæ˜¯é€‚é…å™¨çš„åº”ç”¨ã€‚</p><p>åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬è¿˜ä¼šå†å¦å¤–ä½“ç°å‡ºä¸€ä¸ªå¤šç§MQæ¥æ”¶ï¼Œä½¿ç”¨MQçš„åœºæ™¯ã€‚æ¥æŠŠä¸åŒç±»å‹çš„æ¶ˆæ¯åšç»Ÿä¸€çš„å¤„ç†ï¼Œä¾¿äºå‡å°‘åç»­å¯¹MQæ¥æ”¶ã€‚</p><p>åœ¨è¿™é‡Œå¦‚æœä½ ä¹‹å‰æ²¡è¦å¼€å‘è¿‡æ¥æ”¶MQæ¶ˆæ¯ï¼Œå¯èƒ½å¬ä¸Šå»ä¼šæœ‰äº›ä¸ç†è§£è¿™æ ·çš„åœºæ™¯ã€‚å¯¹æ­¤ï¼Œæˆ‘ä¸ªäººå»ºè®®å…ˆäº†è§£ä¸‹MQã€‚å¦å¤–å°±ç®—ä¸äº†è§£ä¹Ÿæ²¡å…³ç³»ï¼Œä¸ä¼šå½±å“å¯¹æ€è·¯çš„ä½“ä¼šã€‚</p><p>å†è€…ï¼Œæœ¬æ–‡æ‰€å±•ç¤ºçš„MQå…¼å®¹çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯å¤„ç†é€‚é…ä¸åŒçš„ç±»å‹å­—æ®µã€‚è€Œå¦‚æœæˆ‘ä»¬æ¥æ”¶MQåï¼Œåœ¨é…ç½®ä¸åŒçš„æ¶ˆè´¹ç±»æ—¶ï¼Œå¦‚æœä¸å¸Œæœ›ä¸€ä¸ªä¸ªå¼€å‘ç±»ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ä»£ç†ç±»çš„æ–¹å¼è¿›è¡Œå¤„ç†ã€‚</p><h3 id="_1-å·¥ç¨‹ç»“æ„-1" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„-1" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>itstack<span class="token operator">-</span>demo<span class="token operator">-</span>design<span class="token operator">-</span><span class="token number">6</span><span class="token operator">-</span><span class="token number">02</span>
â””â”€â”€ src
    â””â”€â”€ main
        â””â”€â”€ java
            â””â”€â”€ org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>design
                â”œâ”€â”€ impl
                â”‚   â”œâ”€â”€ <span class="token class-name">InsideOrderService</span><span class="token punctuation">.</span>java
                â”‚   â””â”€â”€ <span class="token class-name">POPOrderAdapterServiceImpl</span><span class="token punctuation">.</span>java
                â”œâ”€â”€ <span class="token class-name">MQAdapter</span><span class="token punctuation">,</span>java
                â”œâ”€â”€ <span class="token class-name">OrderAdapterService</span><span class="token punctuation">,</span>java
                â””â”€â”€ <span class="token class-name">RebateInfo</span><span class="token punctuation">,</span>java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>é€‚é…å™¨æ¨¡å‹ç»“æ„</strong></p><p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-6-04.png" alt="é€‚é…å™¨æ¨¡å‹ç»“æ„"></p><ul><li>è¿™é‡ŒåŒ…æ‹¬äº†ä¸¤ä¸ªç±»å‹çš„é€‚é…ï¼›æ¥å£é€‚é…ã€MQé€‚é…ã€‚ä¹‹æ‰€ä»¥ä¸åªæ˜¯æ¨¡æ‹Ÿæ¥å£é€‚é…ï¼Œå› ä¸ºå¾ˆå¤šæ—¶å€™å¤§å®¶éƒ½å¾ˆå¸¸è§äº†ï¼Œæ‰€ä»¥æŠŠé€‚é…çš„æ€æƒ³æ¢ä¸€ä¸‹åˆ°MQæ¶ˆæ¯ä½“ä¸Šï¼Œå¢åŠ å¤§å®¶å¤šè®¾è®¡æ¨¡å¼çš„è®¤çŸ¥ã€‚</li><li><strong>å…ˆæ˜¯åšMQé€‚é…</strong>ï¼Œæ¥æ”¶å„ç§å„æ ·çš„MQæ¶ˆæ¯ã€‚å½“ä¸šåŠ¡å‘å±•çš„å¾ˆå¿«ï¼Œéœ€è¦å¯¹ä¸‹å•ç”¨æˆ·é¦–å•æ‰ç»™å¥–åŠ±ï¼Œåœ¨è¿™æ ·çš„åœºæ™¯ä¸‹å†å¢åŠ å¯¹<strong>æ¥å£çš„é€‚é…</strong>æ“ä½œã€‚</li></ul><h3 id="_2-ä»£ç å®ç°-mqæ¶ˆæ¯é€‚é…" tabindex="-1"><a class="header-anchor" href="#_2-ä»£ç å®ç°-mqæ¶ˆæ¯é€‚é…" aria-hidden="true">#</a> 2. ä»£ç å®ç°(MQæ¶ˆæ¯é€‚é…)</h3><h4 id="_2-1-ç»Ÿä¸€çš„mqæ¶ˆæ¯ä½“" tabindex="-1"><a class="header-anchor" href="#_2-1-ç»Ÿä¸€çš„mqæ¶ˆæ¯ä½“" aria-hidden="true">#</a> 2.1 ç»Ÿä¸€çš„MQæ¶ˆæ¯ä½“</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RebateInfo</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> userId<span class="token punctuation">;</span>  <span class="token comment">// ç”¨æˆ·ID</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> bizId<span class="token punctuation">;</span>   <span class="token comment">// ä¸šåŠ¡ID</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> bizTime<span class="token punctuation">;</span>   <span class="token comment">// ä¸šåŠ¡æ—¶é—´</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> desc<span class="token punctuation">;</span>    <span class="token comment">// ä¸šåŠ¡æè¿°</span>
    
    <span class="token comment">// ... get/set</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>MQæ¶ˆæ¯ä¸­ä¼šæœ‰å¤šç§å¤šæ ·çš„ç±»å‹å±æ€§ï¼Œè™½ç„¶ä»–ä»¬éƒ½æœ‰åŒæ ·çš„å€¼æä¾›ç»™ä½¿ç”¨æ–¹ï¼Œä½†æ˜¯å¦‚æœéƒ½è¿™æ ·æ¥å…¥é‚£ä¹ˆå½“MQæ¶ˆæ¯ç‰¹åˆ«å¤šæ—¶å€™å°±ä¼šå¾ˆéº»çƒ¦ã€‚</li><li>æ‰€ä»¥åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­æˆ‘ä»¬å®šä¹‰äº†é€šç”¨çš„MQæ¶ˆæ¯ä½“ï¼Œåç»­æŠŠæ‰€æœ‰æ¥å…¥è¿›æ¥çš„æ¶ˆæ¯è¿›è¡Œç»Ÿä¸€çš„å¤„ç†ã€‚</li></ul><h4 id="_2-2-mqæ¶ˆæ¯ä½“é€‚é…ç±»" tabindex="-1"><a class="header-anchor" href="#_2-2-mqæ¶ˆæ¯ä½“é€‚é…ç±»" aria-hidden="true">#</a> 2.2 MQæ¶ˆæ¯ä½“é€‚é…ç±»</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MQAdapter</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">RebateInfo</span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">String</span> strJson<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> link<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchMethodException</span><span class="token punctuation">,</span> <span class="token class-name">InvocationTargetException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalAccessException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>strJson<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span> link<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">RebateInfo</span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">Map</span> obj<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> link<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchMethodException</span><span class="token punctuation">,</span> <span class="token class-name">InvocationTargetException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalAccessException</span> <span class="token punctuation">{</span>
        <span class="token class-name">RebateInfo</span> rebateInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RebateInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> key <span class="token operator">:</span> link<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Object</span> val <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>link<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">RebateInfo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span> <span class="token operator">+</span> key<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> key<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>rebateInfo<span class="token punctuation">,</span> val<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> rebateInfo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¿™ä¸ªç±»é‡Œçš„æ–¹æ³•éå¸¸é‡è¦ï¼Œä¸»è¦ç”¨äºæŠŠä¸åŒç±»å‹MQç§çš„å„ç§å±æ€§ï¼Œæ˜ å°„æˆæˆ‘ä»¬éœ€è¦çš„å±æ€§å¹¶è¿”å›ã€‚å°±åƒä¸€ä¸ªå±æ€§ä¸­æœ‰<code>ç”¨æˆ·ID;uId</code>ï¼Œæ˜ å°„åˆ°æˆ‘ä»¬éœ€è¦çš„ï¼›<code>userId</code>ï¼Œåšç»Ÿä¸€å¤„ç†ã€‚</li><li>è€Œåœ¨è¿™ä¸ªå¤„ç†è¿‡ç¨‹ä¸­éœ€è¦æŠŠæ˜ å°„ç®¡ç†ä¼ é€’ç»™<code>Map&lt;String, String&gt; link</code>ï¼Œä¹Ÿå°±æ˜¯å‡†ç¡®çš„æè¿°äº†ï¼Œå½“å‰MQä¸­æŸä¸ªå±æ€§åç§°ï¼Œæ˜ å°„ä¸ºæˆ‘ä»¬çš„æŸä¸ªå±æ€§åç§°ã€‚</li><li>æœ€ç»ˆå› ä¸ºæˆ‘ä»¬æ¥æ”¶åˆ°çš„<code>mq</code>æ¶ˆæ¯åŸºæœ¬éƒ½æ˜¯<code>json</code>æ ¼å¼ï¼Œå¯ä»¥è½¬æ¢ä¸ºMAPç»“æ„ã€‚æœ€åä½¿ç”¨åå°„è°ƒç”¨çš„æ–¹å¼ç»™æˆ‘ä»¬çš„ç±»å‹èµ‹å€¼ã€‚</li></ul><h4 id="_2-3-æµ‹è¯•é€‚é…ç±»" tabindex="-1"><a class="header-anchor" href="#_2-3-æµ‹è¯•é€‚é…ç±»" aria-hidden="true">#</a> 2.3 æµ‹è¯•é€‚é…ç±»</h4><h5 id="_2-3-1-ç¼–å†™å•å…ƒæµ‹è¯•ç±»" tabindex="-1"><a class="header-anchor" href="#_2-3-1-ç¼–å†™å•å…ƒæµ‹è¯•ç±»" aria-hidden="true">#</a> 2.3.1 ç¼–å†™å•å…ƒæµ‹è¯•ç±»</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_MQAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchMethodException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalAccessException</span><span class="token punctuation">,</span> <span class="token class-name">InvocationTargetException</span> <span class="token punctuation">{</span>
    create_account create_account <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">create_account</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    create_account<span class="token punctuation">.</span><span class="token function">setNumber</span><span class="token punctuation">(</span><span class="token string">&quot;100001&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    create_account<span class="token punctuation">.</span><span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token string">&quot;æ²³åŒ—çœ.å»ŠåŠå¸‚.å¹¿é˜³åŒº.å¤§å­¦é‡ŒèŒä¸šæŠ€æœ¯å­¦é™¢&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    create_account<span class="token punctuation">.</span><span class="token function">setAccountDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    create_account<span class="token punctuation">.</span><span class="token function">setDesc</span><span class="token punctuation">(</span><span class="token string">&quot;åœ¨æ ¡å¼€æˆ·&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          

    <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> link01 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    link01<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    link01<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;bizId&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    link01<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;bizTime&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;accountDate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    link01<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;desc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;desc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">RebateInfo</span> rebateInfo01 <span class="token operator">=</span> <span class="token class-name">MQAdapter</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>create_account<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> link01<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;mq.create_account(é€‚é…å‰)&quot;</span> <span class="token operator">+</span> create_account<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;mq.create_account(é€‚é…å)&quot;</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>rebateInfo01<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">OrderMq</span> orderMq <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderMq</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    orderMq<span class="token punctuation">.</span><span class="token function">setUid</span><span class="token punctuation">(</span><span class="token string">&quot;100001&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    orderMq<span class="token punctuation">.</span><span class="token function">setSku</span><span class="token punctuation">(</span><span class="token string">&quot;10928092093111123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    orderMq<span class="token punctuation">.</span><span class="token function">setOrderId</span><span class="token punctuation">(</span><span class="token string">&quot;100000890193847111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    orderMq<span class="token punctuation">.</span><span class="token function">setCreateOrderTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

    <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> link02 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    link02<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;uid&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    link02<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;bizId&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;orderId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    link02<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;bizTime&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;createOrderTime&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">RebateInfo</span> rebateInfo02 <span class="token operator">=</span> <span class="token class-name">MQAdapter</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>orderMq<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> link02<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;mq.orderMq(é€‚é…å‰)&quot;</span> <span class="token operator">+</span> orderMq<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;mq.orderMq(é€‚é…å)&quot;</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>rebateInfo02<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨è¿™é‡Œæˆ‘ä»¬åˆ†åˆ«æ¨¡æ‹Ÿä¼ å…¥äº†ä¸¤ä¸ªä¸åŒçš„MQæ¶ˆæ¯ï¼Œå¹¶è®¾ç½®å­—æ®µçš„æ˜ å°„å…³ç³»ã€‚</li><li>ç­‰çœŸçš„ä¸šåŠ¡åœºæ™¯å¼€å‘ä¸­ï¼Œå°±å¯ä»¥é…è¿™ç§æ˜ å°„é…ç½®å…³ç³»äº¤ç»™é…ç½®æ–‡ä»¶æˆ–è€…æ•°æ®åº“åå°é…ç½®ï¼Œå‡å°‘ç¼–ç ã€‚</li></ul><h5 id="_2-3-2-æµ‹è¯•ç»“æœ" tabindex="-1"><a class="header-anchor" href="#_2-3-2-æµ‹è¯•ç»“æœ" aria-hidden="true">#</a> 2.3.2 æµ‹è¯•ç»“æœ</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>mq<span class="token punctuation">.</span><span class="token function">create_account</span><span class="token punctuation">(</span>é€‚é…å‰<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token string">&quot;accountDate&quot;</span><span class="token operator">:</span><span class="token number">1591024816000</span><span class="token punctuation">,</span><span class="token string">&quot;address&quot;</span><span class="token operator">:</span><span class="token string">&quot;æ²³åŒ—çœ.å»ŠåŠå¸‚.å¹¿é˜³åŒº.å¤§å­¦é‡ŒèŒä¸šæŠ€æœ¯å­¦é™¢&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;desc&quot;</span><span class="token operator">:</span><span class="token string">&quot;åœ¨æ ¡å¼€æˆ·&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;number&quot;</span><span class="token operator">:</span><span class="token string">&quot;100001&quot;</span><span class="token punctuation">}</span>
mq<span class="token punctuation">.</span><span class="token function">create_account</span><span class="token punctuation">(</span>é€‚é…å<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token string">&quot;bizId&quot;</span><span class="token operator">:</span><span class="token string">&quot;100001&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bizTime&quot;</span><span class="token operator">:</span><span class="token number">1591077840669</span><span class="token punctuation">,</span><span class="token string">&quot;desc&quot;</span><span class="token operator">:</span><span class="token string">&quot;åœ¨æ ¡å¼€æˆ·&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;userId&quot;</span><span class="token operator">:</span><span class="token string">&quot;100001&quot;</span><span class="token punctuation">}</span>

mq<span class="token punctuation">.</span><span class="token function">orderMq</span><span class="token punctuation">(</span>é€‚é…å‰<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token string">&quot;createOrderTime&quot;</span><span class="token operator">:</span><span class="token number">1591024816000</span><span class="token punctuation">,</span><span class="token string">&quot;orderId&quot;</span><span class="token operator">:</span><span class="token string">&quot;100000890193847111&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;sku&quot;</span><span class="token operator">:</span><span class="token string">&quot;10928092093111123&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;uid&quot;</span><span class="token operator">:</span><span class="token string">&quot;100001&quot;</span><span class="token punctuation">}</span>
mq<span class="token punctuation">.</span><span class="token function">orderMq</span><span class="token punctuation">(</span>é€‚é…å<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token string">&quot;bizId&quot;</span><span class="token operator">:</span><span class="token string">&quot;100000890193847111&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bizTime&quot;</span><span class="token operator">:</span><span class="token number">1591077840669</span><span class="token punctuation">,</span><span class="token string">&quot;userId&quot;</span><span class="token operator">:</span><span class="token string">&quot;100001&quot;</span><span class="token punctuation">}</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼ŒåŒæ ·çš„å­—æ®µå€¼åœ¨åšäº†é€‚é…å‰ååˆ†åˆ«æœ‰ç»Ÿä¸€çš„å­—æ®µå±æ€§ï¼Œè¿›è¡Œå¤„ç†ã€‚è¿™æ ·ä¸šåŠ¡å¼€å‘ä¸­ä¹Ÿå°±éå¸¸ç®€å•äº†ã€‚</li><li>å¦å¤–æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„åœ°æ–¹ï¼Œåœ¨å®é™…ä¸šåŠ¡å¼€å‘ä¸­ï¼Œé™¤äº†åå°„çš„ä½¿ç”¨å¤–ï¼Œè¿˜å¯ä»¥åŠ å…¥<strong>ä»£ç†ç±»</strong>æŠŠæ˜ å°„çš„é…ç½®äº¤ç»™å®ƒã€‚è¿™æ ·å°±å¯ä»¥ä¸éœ€è¦æ¯ä¸€ä¸ªmqéƒ½æ‰‹åŠ¨åˆ›å»ºç±»äº†ã€‚</li></ul><h3 id="_3-ä»£ç å®ç°-æ¥å£ä½¿ç”¨é€‚é…" tabindex="-1"><a class="header-anchor" href="#_3-ä»£ç å®ç°-æ¥å£ä½¿ç”¨é€‚é…" aria-hidden="true">#</a> 3. ä»£ç å®ç°(æ¥å£ä½¿ç”¨é€‚é…)</h3><p>å°±åƒæˆ‘ä»¬å‰é¢æåˆ°éšç€ä¸šåŠ¡çš„å‘å±•ï¼Œè¥é”€æ´»åŠ¨æœ¬èº«è¦ä¿®æ”¹ï¼Œä¸èƒ½åªæ˜¯æ¥äº†MQå°±å‘å¥–åŠ±ã€‚å› ä¸ºæ­¤æ—¶å·²ç»æ‹‰æ–°çš„è¶Šæ¥è¶Šå¤šäº†ï¼Œéœ€è¦åšä¸€äº›é™åˆ¶ã€‚</p><p>å› ä¸ºå¢åŠ äº†åªæœ‰é¦–å•ç”¨æˆ·æ‰ç»™å¥–åŠ±ï¼Œä¹Ÿå°±æ˜¯ä½ ä¸€å¹´æˆ–è€…æ–°äººæˆ–è€…ä¸€ä¸ªæœˆçš„ç¬¬ä¸€å•æ‰ç»™ä½ å¥–åŠ±ï¼Œè€Œä¸æ˜¯ä½ ä¹‹å‰æ¯ä¸€æ¬¡ä¸‹å•éƒ½ç»™å¥–åŠ±ã€‚</p><p>é‚£ä¹ˆå°±éœ€è¦å¯¹æ­¤ç§æ–¹å¼è¿›è¡Œé™åˆ¶ï¼Œè€Œæ­¤æ—¶MQä¸­å¹¶æ²¡æœ‰åˆ¤æ–­é¦–å•çš„å±æ€§ã€‚åªèƒ½é€šè¿‡æ¥å£è¿›è¡ŒæŸ¥è¯¢ï¼Œè€Œæ‹¿åˆ°çš„æ¥å£å¦‚ä¸‹ï¼›</p><table><thead><tr><th>æ¥å£</th><th>æè¿°</th></tr></thead><tbody><tr><td>org.itstack.demo.design.service.OrderService.queryUserOrderCount(String userId)</td><td>å‡ºå‚longï¼ŒæŸ¥è¯¢è®¢å•æ•°é‡</td></tr><tr><td>org.itstack.demo.design.service.OrderService.POPOrderService.isFirstOrder(String uId)</td><td>å‡ºå‚booleanï¼Œåˆ¤æ–­æ˜¯å¦é¦–å•</td></tr></tbody></table><ul><li>ä¸¤ä¸ªæ¥å£çš„åˆ¤æ–­é€»è¾‘å’Œä½¿ç”¨æ–¹å¼éƒ½ä¸åŒï¼Œä¸åŒçš„æ¥å£æä¾›æ–¹ï¼Œä¹Ÿæœ‰ä¸åŒçš„å‡ºå‚ã€‚ä¸€ä¸ªæ˜¯ç›´æ¥åˆ¤æ–­æ˜¯å¦é¦–å•ï¼Œå¦å¤–ä¸€ä¸ªéœ€è¦æ ¹æ®è®¢å•æ•°é‡åˆ¤æ–­ã€‚</li><li>å› æ­¤è¿™é‡Œéœ€è¦ä½¿ç”¨åˆ°é€‚é…å™¨çš„æ¨¡å¼æ¥å®ç°ï¼Œå½“ç„¶å¦‚æœä½ å»ç¼–å†™ifè¯­å¥ä¹Ÿæ˜¯å¯ä»¥å®ç°çš„ï¼Œä½†æ˜¯æˆ‘ä»¬ç»å¸¸ä¼šæåˆ°è¿™æ ·çš„ä»£ç å¾ˆéš¾ç»´æŠ¤ã€‚</li></ul><h4 id="_3-1-å®šä¹‰ç»Ÿä¸€é€‚é…æ¥å£" tabindex="-1"><a class="header-anchor" href="#_3-1-å®šä¹‰ç»Ÿä¸€é€‚é…æ¥å£" aria-hidden="true">#</a> 3.1 å®šä¹‰ç»Ÿä¸€é€‚é…æ¥å£</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OrderAdapterService</span> <span class="token punctuation">{</span>

    <span class="token keyword">boolean</span> <span class="token function">isFirst</span><span class="token punctuation">(</span><span class="token class-name">String</span> uId<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åé¢çš„å®ç°ç±»éƒ½éœ€è¦å®Œæˆæ­¤æ¥å£ï¼Œå¹¶æŠŠå…·ä½“çš„é€»è¾‘åŒ…è£…åˆ°æŒ‡å®šçš„ç±»ä¸­ï¼Œæ»¡è¶³å•ä¸€èŒè´£ã€‚</li></ul><h4 id="_3-2-åˆ†åˆ«å®ç°ä¸¤ä¸ªä¸åŒçš„æ¥å£" tabindex="-1"><a class="header-anchor" href="#_3-2-åˆ†åˆ«å®ç°ä¸¤ä¸ªä¸åŒçš„æ¥å£" aria-hidden="true">#</a> 3.2 åˆ†åˆ«å®ç°ä¸¤ä¸ªä¸åŒçš„æ¥å£</h4><p><strong>å†…éƒ¨å•†å“æ¥å£</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InsideOrderService</span> <span class="token keyword">implements</span> <span class="token class-name">OrderAdapterService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">OrderService</span> orderService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isFirst</span><span class="token punctuation">(</span><span class="token class-name">String</span> uId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> orderService<span class="token punctuation">.</span><span class="token function">queryUserOrderCount</span><span class="token punctuation">(</span>uId<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç¬¬ä¸‰æ–¹å•†å“æ¥å£</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">POPOrderAdapterServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">OrderAdapterService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">POPOrderService</span> popOrderService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">POPOrderService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isFirst</span><span class="token punctuation">(</span><span class="token class-name">String</span> uId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> popOrderService<span class="token punctuation">.</span><span class="token function">isFirstOrder</span><span class="token punctuation">(</span>uId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨è¿™ä¸¤ä¸ªæ¥å£ä¸­éƒ½å®ç°äº†å„è‡ªçš„åˆ¤æ–­æ–¹å¼ï¼Œå°¤å…¶åƒæ˜¯æä¾›è®¢å•æ•°é‡çš„æ¥å£ï¼Œéœ€è¦è‡ªå·±åˆ¤æ–­å½“å‰æ¥åˆ°mqæ—¶è®¢å•æ•°é‡æ˜¯å¦<code>&lt;= 1</code>ï¼Œä»¥æ­¤åˆ¤æ–­æ˜¯å¦ä¸ºé¦–å•ã€‚</li></ul><h4 id="_3-3-æµ‹è¯•é€‚é…ç±»" tabindex="-1"><a class="header-anchor" href="#_3-3-æµ‹è¯•é€‚é…ç±»" aria-hidden="true">#</a> 3.3 æµ‹è¯•é€‚é…ç±»</h4><h5 id="_3-3-1-ç¼–å†™å•å…ƒæµ‹è¯•ç±»" tabindex="-1"><a class="header-anchor" href="#_3-3-1-ç¼–å†™å•å…ƒæµ‹è¯•ç±»" aria-hidden="true">#</a> 3.3.1 ç¼–å†™å•å…ƒæµ‹è¯•ç±»</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test_itfAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">OrderAdapterService</span> popOrderAdapterService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">POPOrderAdapterServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;åˆ¤æ–­é¦–å•ï¼Œæ¥å£é€‚é…(POP)ï¼š&quot;</span> <span class="token operator">+</span> popOrderAdapterService<span class="token punctuation">.</span><span class="token function">isFirst</span><span class="token punctuation">(</span><span class="token string">&quot;100001&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   

    <span class="token class-name">OrderAdapterService</span> insideOrderService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InsideOrderService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;åˆ¤æ–­é¦–å•ï¼Œæ¥å£é€‚é…(è‡ªè¥)ï¼š&quot;</span> <span class="token operator">+</span> insideOrderService<span class="token punctuation">.</span><span class="token function">isFirst</span><span class="token punctuation">(</span><span class="token string">&quot;100001&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-3-2-æµ‹è¯•ç»“æœ" tabindex="-1"><a class="header-anchor" href="#_3-3-2-æµ‹è¯•ç»“æœ" aria-hidden="true">#</a> 3.3.2 æµ‹è¯•ç»“æœ</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token number">23</span><span class="token operator">:</span><span class="token number">25</span><span class="token operator">:</span><span class="token number">47.076</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>d<span class="token punctuation">.</span>design<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span>POPOrderService</span> <span class="token operator">-</span> <span class="token constant">POP</span>å•†å®¶ï¼ŒæŸ¥è¯¢ç”¨æˆ·çš„è®¢å•æ˜¯å¦ä¸ºé¦–å•ï¼š<span class="token number">100001</span>
åˆ¤æ–­é¦–å•ï¼Œæ¥å£é€‚é…<span class="token punctuation">(</span><span class="token constant">POP</span><span class="token punctuation">)</span>ï¼š<span class="token boolean">true</span>
<span class="token number">23</span><span class="token operator">:</span><span class="token number">25</span><span class="token operator">:</span><span class="token number">47.079</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">INFO</span>  <span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>i<span class="token punctuation">.</span>d<span class="token punctuation">.</span>design<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span>POPOrderService</span> <span class="token operator">-</span> è‡ªè¥å•†å®¶ï¼ŒæŸ¥è¯¢ç”¨æˆ·çš„è®¢å•æ˜¯å¦ä¸ºé¦–å•ï¼š<span class="token number">100001</span>
åˆ¤æ–­é¦–å•ï¼Œæ¥å£é€‚é…<span class="token punctuation">(</span>è‡ªè¥<span class="token punctuation">)</span>ï¼š<span class="token boolean">false</span>

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»æµ‹è¯•ç»“æœä¸Šæ¥çœ‹ï¼Œæ­¤æ—¶å·²ç»çš„æ¥å£å·²ç»åšäº†ç»Ÿä¸€çš„åŒ…è£…ï¼Œå¤–éƒ¨ä½¿ç”¨æ—¶å€™å°±ä¸éœ€è¦å…³å¿ƒå†…éƒ¨çš„å…·ä½“é€»è¾‘äº†ã€‚è€Œä¸”åœ¨è°ƒç”¨çš„æ—¶å€™åªéœ€è¦ä¼ å…¥ç»Ÿä¸€çš„å‚æ•°å³å¯ï¼Œè¿™æ ·å°±æ»¡è¶³äº†é€‚é…çš„ä½œç”¨ã€‚</li></ul><h2 id="ä¸ƒã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€æ€»ç»“" aria-hidden="true">#</a> ä¸ƒã€æ€»ç»“</h2><ul><li>ä»ä¸Šæ–‡å¯ä»¥çœ‹åˆ°ä¸ä½¿ç”¨é€‚é…å™¨æ¨¡å¼è¿™äº›åŠŸèƒ½åŒæ ·å¯ä»¥å®ç°ï¼Œä½†æ˜¯ä½¿ç”¨äº†é€‚é…å™¨æ¨¡å¼å°±å¯ä»¥è®©ä»£ç ï¼šå¹²å‡€æ•´æ´æ˜“äºç»´æŠ¤ã€å‡å°‘å¤§é‡é‡å¤çš„åˆ¤æ–­å’Œä½¿ç”¨ã€è®©ä»£ç æ›´åŠ æ˜“äºç»´æŠ¤å’Œæ‹“å±•ã€‚</li><li>å°¤å…¶æ˜¯æˆ‘ä»¬å¯¹MQè¿™æ ·çš„å¤šç§æ¶ˆæ¯ä½“ä¸­ä¸åŒå±æ€§åŒç±»çš„å€¼ï¼Œè¿›è¡Œé€‚é…å†åŠ ä¸Šä»£ç†ç±»ï¼Œå°±å¯ä»¥ä½¿ç”¨ç®€å•çš„é…ç½®æ–¹å¼æ¥å…¥å¯¹æ–¹æä¾›çš„MQæ¶ˆæ¯ï¼Œè€Œä¸éœ€è¦å¤§é‡é‡å¤çš„å¼€å‘ã€‚éå¸¸åˆ©äºæ‹“å±•ã€‚</li><li>è®¾è®¡æ¨¡å¼çš„å­¦ä¹ è¿‡ç¨‹å¯èƒ½ä¼šåœ¨ä¸€äº›ç« èŠ‚ä¸­æ¶‰åŠåˆ°å…¶ä»–è®¾è®¡æ¨¡å¼çš„ä½“ç°ï¼Œåªä¸è¿‡ä¸ä¼šé‡ç‚¹è®²è§£ï¼Œé¿å…å–§å®¾å¤ºä¸»ã€‚ä½†åœ¨å®é™…çš„ä½¿ç”¨ä¸­ï¼Œå¾€å¾€å¾ˆå¤šè®¾è®¡æ¨¡å¼æ˜¯ç»¼åˆä½¿ç”¨çš„ï¼Œå¹¶ä¸ä¼šå•ä¸€å‡ºç°ã€‚</li></ul>`,82);function M(O,j){const a=c("ExternalLinkIcon");return o(),i("div",null,[u,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),r,s("åšå®¢ï¼š"),n("a",d,[s("https://bugstack.cn"),t(a)])]),k,v,m,n("ol",null,[b,g,n("li",null,[s("æ¶‰åŠå·¥ç¨‹ä¸‰ä¸ªï¼Œå¯ä»¥é€šè¿‡å…³æ³¨"),h,s("ï¼š"),n("a",q,[f,t(a)]),s("ï¼Œå›å¤"),y,s("è·å–(æ‰“å¼€è·å–çš„é“¾æ¥ï¼Œæ‰¾åˆ°åºå·18)")])]),_,n("ul",null,[n("li",null,[s("å›¾ç‰‡æ¥è‡ªï¼š"),n("a",w,[s("https://refactoringguru.cn/design-patterns/adapter"),t(a)])])]),S])}const x=p(l,[["render",M],["__file","2020-06-02-zhongxue Java shejimoshiã€Šshipeiqimoshiã€‹.html.vue"]]);export{x as default};
