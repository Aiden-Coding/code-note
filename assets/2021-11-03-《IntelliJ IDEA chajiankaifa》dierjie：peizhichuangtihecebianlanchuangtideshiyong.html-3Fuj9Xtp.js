import{_ as t,r as p,o,c,a as n,b as s,d as e,e as l}from"./app-3RcBQnkC.js";const i={},u=n("h1",{id:"ç¬¬4èŠ‚-é…ç½®çª—ä½“å’Œä¾§è¾¹æ çª—ä½“çš„ä½¿ç”¨",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ç¬¬4èŠ‚-é…ç½®çª—ä½“å’Œä¾§è¾¹æ çª—ä½“çš„ä½¿ç”¨","aria-hidden":"true"},"#"),s(" ç¬¬4èŠ‚ï¼šé…ç½®çª—ä½“å’Œä¾§è¾¹æ çª—ä½“çš„ä½¿ç”¨")],-1),r=n("br",null,null,-1),d={href:"https://bugstack.cn",target:"_blank",rel:"noopener noreferrer"},k=n("br",null,null,-1),v={href:"https://mp.weixin.qq.com/s/R8qvoSNyedVM95Ty8sbhgg",target:"_blank",rel:"noopener noreferrer"},m=l(`<blockquote><p>æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„</p></blockquote><h2 id="ä¸€ã€è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€è¯´æ˜" aria-hidden="true">#</a> ä¸€ã€è¯´æ˜</h2><p><code>æ–¹å‘ä¸å¯¹ï¼ŒåŠªåŠ›ç™½è´¹ï¼</code></p><p>æ€»æœ‰äººæ‹¿åˆ°äº§å“çš„éœ€æ±‚ï¼Œå°±ç€æ€¥å¼€å¹²ï¼Œåæ­£ä¹Ÿæ‡’çš„æƒ³å¼€å‘ä¸­ä¼šå‘ç”Ÿå•¥ï¼Œä¸Šçº¿åå¤šå°‘äººä½¿ç”¨ï¼Œç®¡å®ƒä¸‰ä¸ƒäºŒåä¸€å…ˆå †èµ·æ¥ä»£ç çœ‹ä¸€çœ‹ï¼Œåæ­£èƒ½è·‘å°±è¡Œï¼Œæ— è®ºä»£ç è¿˜æ˜¯ä½ ï¼</p><p>å…¶å®å¾ˆå¤šæ—¶å€™åœ¨ç¼–å†™ä»£ç å‰ï¼Œæ‰€éœ€è¦åšçš„æŠ€æœ¯è°ƒç ”ã€æ¶æ„è®¾è®¡ã€æ¨¡å—åˆ†å±‚ã€æ•°æ®ç»“æ„ã€è¯¦ç»†åˆ†æã€æ–¹æ¡ˆè¯„å®¡ç­‰ï¼Œä¸<code>ä¸‰ä¸ƒäºŒåä¸€é‚£å®¶ä¼™</code>å¯¹æ¯”èµ·æ¥ï¼Œå¥½åƒéƒ½ä¼šæ˜¾å¾—æœ‰ç‚¹æ…¢ã€‚ä½†è¿™ä¸ªçœ‹ä¸Šå»æ…¢çš„è¿‡ç¨‹ï¼Œå´èƒ½è§£å†³ä»¥åå¾ˆå¤šå¸¸è§å’Œéº»çƒ¦çš„é—®é¢˜ï¼Œæ¯”å¦‚äº§å“éœ€æ±‚è¿­ä»£ã€ä¸šåŠ¡æµç¨‹å˜æ›´ã€ä»£ç é€»è¾‘æ›´æ”¹ã€çº¿ä¸Šå¼‚å¸¸æ’æŸ¥ã€‚è™½ç„¶çœ‹ç€æ…¢ï¼Œä½†è¿™ä¸ªç§¯åŸºæ ‘æœ¬çš„è¿‡ç¨‹å°±åƒæ‰“åœ°åŸºä¸€æ ·ï¼Œæ€»å¾—æœ‰ä¸€ä¸ªç¨³å®šçš„æ ¹åŸºï¼Œæ‰èƒ½ç›–å¥½æ•´æ ‹å¤§æ¥¼ã€‚<strong>ä¸‡ä¸ˆé«˜æ¥¼å¹³åœ°èµ·ï¼Œå‹¿åœ¨æµ®æ²™ç­‘é«˜å°</strong></p><h2 id="äºŒã€éœ€æ±‚ç›®çš„" tabindex="-1"><a class="header-anchor" href="#äºŒã€éœ€æ±‚ç›®çš„" aria-hidden="true">#</a> äºŒã€éœ€æ±‚ç›®çš„</h2><p>å¦‚æœä½ éœ€è¦å¼€å‘ä¸€ä¸ªè‡ªå®šä¹‰åŠŸèƒ½çš„æ’ä»¶ï¼Œæ— è®ºæ˜¯å¤„ç†ä»£ç ã€è¾…åŠ©ORMç”Ÿæˆã€æ—¥å¿—ä¿¡æ¯è®°å½•ç­‰ï¼Œéƒ½ä¼šéœ€è¦è¿›è¡Œä¸€ä¸ªæ’ä»¶çš„åŠŸèƒ½é…ç½®è¿›è¡Œåˆå§‹åŒ–æ“ä½œä»¥åŠæŠŠå¯¹åº”åŠŸèƒ½å±•ç¤ºåˆ°æ•´ä¸ª IDEA çª—ä½“ä¸­çš„å³è¾¹æ æˆ–è€…ä¸‹è¾¹æ ä¸­ï¼Œè¿™æ ·æ‰èƒ½æ»¡è¶³ä¸€ä¸ªæ’ä»¶çš„åŸºæœ¬éœ€æ±‚ã€‚</p><p>é‚£ä¹ˆè¿™æ ·å°±éœ€è¦åœ¨ IDEA çª—ä½“ <code>File -&gt; Settings</code> ä¸­æ‰©å±•è‡ªå·±çš„é…ç½®çª—ä½“ï¼Œä»¥åŠå¼€å‘è‡ªå·±éœ€è¦çš„ ToolWindow åµŒå…¥åˆ° IDEA ä¸­(å·¦ä¾§ã€å³ä¾§ã€ä¸‹ä¾§)ï¼Œè¿™é‡Œçª—ä½“çš„å¼€å‘éœ€è¦ç”¨åˆ° Swing ä½†ç›®å‰åœ¨ IDEA ä¸­å¼€å‘è¿™æ ·çš„åŠŸèƒ½åªéœ€è¦æ‹–æ‹½çª—ä½“å°±å¯ä»¥ï¼Œè¿˜æ˜¯è›®å®¹æ˜“çš„ã€‚</p><p>é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬ä»¥ä¸€ä¸ªåœ¨ IDEA ä¸­æ‘¸é±¼çœ‹ä¹¦çš„åœºæ™¯ä¸ºæ¡ˆä¾‹ï¼Œå­¦ä¹ é…ç½®çª—ä½“å’Œé˜…è¯»çª—ä½“çš„åŠŸèƒ½å®ç°ã€‚</p><h2 id="ä¸‰ã€æ¡ˆä¾‹å¼€å‘" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€æ¡ˆä¾‹å¼€å‘" aria-hidden="true">#</a> ä¸‰ã€æ¡ˆä¾‹å¼€å‘</h2><h3 id="_1-å·¥ç¨‹ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_1-å·¥ç¨‹ç»“æ„" aria-hidden="true">#</a> 1. å·¥ç¨‹ç»“æ„</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>guide<span class="token operator">-</span>idea<span class="token operator">-</span>plugin<span class="token operator">-</span>tool<span class="token operator">-</span>window
â”œâ”€â”€ <span class="token punctuation">.</span>gradle
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚   â””â”€â”€ java
    â”‚   	â””â”€â”€ cn<span class="token punctuation">.</span>bugstack<span class="token punctuation">.</span>guide<span class="token punctuation">.</span>idea<span class="token punctuation">.</span>plugin 
    â”‚       	â””â”€â”€ factory
    â”‚       	â”‚	â”œâ”€â”€ <span class="token class-name">ReadFactory</span><span class="token punctuation">.</span>java 
    â”‚       	â”‚	â””â”€â”€ <span class="token class-name">SettingFactory</span><span class="token punctuation">.</span>java
    â”‚       	â””â”€â”€ ui
    â”‚       	â”‚	â”œâ”€â”€ <span class="token class-name">ReadUI</span><span class="token punctuation">.</span>java 
    â”‚       	â”‚	â”œâ”€â”€ <span class="token class-name">ReadUI</span><span class="token punctuation">.</span>form
    â”‚       	â”‚	â”œâ”€â”€ <span class="token class-name">SettingUI</span><span class="token punctuation">.</span>java  
    â”‚       	â”‚	â””â”€â”€ <span class="token class-name">SettingUI</span><span class="token punctuation">.</span>form
    â”‚       	â””â”€â”€ <span class="token class-name">Config</span>    
    â”œâ”€â”€ resources
    â”‚   â””â”€â”€ <span class="token constant">META</span><span class="token operator">-</span><span class="token constant">INF</span>
    â”‚       â””â”€â”€ plugin<span class="token punctuation">.</span>xml 
    â”œâ”€â”€ build<span class="token punctuation">.</span>gradle  
    â””â”€â”€ gradle<span class="token punctuation">.</span>properties
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>æºç è·å–</strong>ï¼š#å…¬ä¼—å·ï¼š<code>bugstackè™«æ´æ ˆ</code> å›å¤ï¼š<code>idea</code> å³å¯ä¸‹è½½å…¨éƒ¨ IDEA æ’ä»¶å¼€å‘æºç </li></ul><p>æ­¤å·¥ç¨‹ä¸»è¦æ¶‰åŠä¸¤éƒ¨åˆ†ï¼Œåœ¨factoryä¸­ä¸€ä¸ªæ˜¯é…ç½®çª—ä½“ã€ä¸€ä¸ªæ˜¯é˜…è¯»çª—ä½“ï¼Œä¸ä¹‹å¯¹åº”çš„ä¸¤ç»„UIçš„å®ç°ã€‚æœ€å factory ç±»çš„å®ç°éƒ½ä¼šé…ç½®åˆ° plugin.xml ä¸­è¿›è¡Œä½¿ç”¨ï¼ŒåŒæ—¶ä¹Ÿæ˜¯åœ¨ plugin.xml ä¸­æ§åˆ¶çª—ä½“ä½ç½®å’Œå›¾æ ‡ã€‚</p><h3 id="_2-åˆ›å»º-ui-çª—ä½“" tabindex="-1"><a class="header-anchor" href="#_2-åˆ›å»º-ui-çª—ä½“" aria-hidden="true">#</a> 2. åˆ›å»º UI çª—ä½“</h3><h4 id="_2-1-åˆ›å»ºæ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_2-1-åˆ›å»ºæ–¹å¼" aria-hidden="true">#</a> 2.1 åˆ›å»ºæ–¹å¼</h4><p><strong>New -&gt; Swing UI Designer -&gt; GUI Form</strong></p><p><img src="https://bugstack.cn/images/article/assembly/assembly-211103-01.png" alt=""></p><ul><li>åœ¨ Java ä¸­åˆ›å»ºçª—ä½“çš„æ–¹å¼ä¸»è¦æœ‰ AWTã€Swingã€JavaFxï¼Œç”±äº IDEA ä½¿ç”¨ Swing å¼€å‘ï¼Œæ‰€ä»¥è¿™é‡Œåˆ›å»º Swing çª—ä½“çš„å…¼å®¹æ€§ä¼šæ›´å¥½ã€‚</li><li>é‚£ä¹ˆè¿™é‡Œ Swing çª—ä½“çš„åˆ›å»ºå¯ä»¥æ˜¯è‡ªå·±æ‰‹å†™çª—ä½“ç»“æ„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¯è§†åŒ–æ‹–æ‹½çš„ GUI Form å¦‚æœä½ çš„çª—ä½“ä¸å¤æ‚ï¼Œå…¶å®æ‹–æ‹½çš„æ–¹å¼å°±å¯ä»¥æ»¡è¶³ä½¿ç”¨ã€‚</li></ul><h4 id="_2-2-é…ç½®é¡µçª—ä½“" tabindex="-1"><a class="header-anchor" href="#_2-2-é…ç½®é¡µçª—ä½“" aria-hidden="true">#</a> 2.2 é…ç½®é¡µçª—ä½“</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SettingUI</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">JPanel</span> mainPanel<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">JPanel</span> settingPanel<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">JLabel</span> urlLabel<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">JTextField</span> urlTextField<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">JButton</span> urlBtn<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SettingUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ç»™æŒ‰é’®æ·»åŠ ä¸€ä¸ªé€‰æ‹©æ–‡ä»¶çš„äº‹ä»¶</span>
        urlBtn<span class="token punctuation">.</span><span class="token function">addActionListener</span><span class="token punctuation">(</span>e <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">JFileChooser</span> fileChooser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JFileChooser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            fileChooser<span class="token punctuation">.</span><span class="token function">setFileSelectionMode</span><span class="token punctuation">(</span><span class="token class-name">JFileChooser</span><span class="token punctuation">.</span><span class="token constant">FILES_ONLY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            fileChooser<span class="token punctuation">.</span><span class="token function">showOpenDialog</span><span class="token punctuation">(</span>settingPanel<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">File</span> file <span class="token operator">=</span> fileChooser<span class="token punctuation">.</span><span class="token function">getSelectedFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            urlTextField<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">JComponent</span> <span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mainPanel<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">JTextField</span> <span class="token function">getUrlTextField</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> urlTextField<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://bugstack.cn/images/article/assembly/assembly-211103-02.png" alt=""></p><ul><li>é…ç½®é¡µçª—ä½“ä¸»è¦æä¾›æ–‡ç« è·¯å¾„çš„é€‰æ‹©ï¼Œè¿™é‡Œéœ€è¦ç”¨åˆ°çš„æ ‡ç­¾åŒ…æ‹¬ï¼šJLabelã€JTextFieldã€JButton</li><li>åœ¨ä½¿ç”¨ GUI Form åˆ›å»ºå®Œçª—ä½“åï¼Œå°±ä¼šå‡ºç°è¿™æ ·ä¸€ä¸ªå¯è§†åŒ–çš„é¡µé¢ï¼Œå³ä¾§å¯ä»¥æŠŠå„ç±»æ ‡ç­¾æ‹–åˆ°ä¸­é—´çš„é¢æ¿ä¸­ï¼Œå·¦ä¾§è¿›è¡Œè®¾ç½®å±•ç¤ºåç§°å’Œå±æ€§åç§°ã€‚</li><li>æœ€ç»ˆè¿™é‡Œçš„ä»£ç æ ‡ç­¾ä»£ç ä¼šå±•ç¤ºåˆ° <code>SettingUI.java</code> ä¸­ï¼Œè€Œæ¸²æŸ“å†…å®¹ä¼šè¢«éšè—ï¼Œè¿™æ ·çš„æ–¹å¼ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿æ§åˆ¶ä¸€äº›è‡ªå®šä¹‰å†…å®¹çš„æ·»åŠ ï¼Œä¾‹å¦‚äº‹ä»¶å’Œæ–°çª—ä½“ç­‰</li><li>å¦å¤–åœ¨ <code>SettingUI.java</code> ä¸­ï¼Œè¿˜éœ€è¦åœ¨æ„é€ å‡½æ•°æ·»åŠ ä¸€ä¸ªæŒ‰é’®äº‹ä»¶ï¼Œç”¨äºæ‰“å¼€æ–‡ä»¶é€‰æ‹©å™¨ï¼ŒæŠŠæˆ‘ä»¬éœ€è¦æ‰“å¼€çš„æ–‡ä»¶ï¼Œè®¾ç½®åˆ° <code>urlTextField</code> ä¸­ã€‚</li></ul><h4 id="_2-3-é˜…è¯»é¡µçª—ä½“" tabindex="-1"><a class="header-anchor" href="#_2-3-é˜…è¯»é¡µçª—ä½“" aria-hidden="true">#</a> 2.3 é˜…è¯»é¡µçª—ä½“</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReadUI</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">JPanel</span> mainPanel<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">JTextPane</span> textContent<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">JComponent</span> <span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mainPanel<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">JTextPane</span> <span class="token function">getTextContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> textContent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://bugstack.cn/images/article/assembly/assembly-211103-03.png" alt=""></p><ul><li>åœ¨çª—ä½“åˆ›å»ºå’Œé…ç½®é¡µçª—ä½“æ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿæ˜¯é€šè¿‡æ‹–æ‹½åˆ°é¢æ¿ä¸­ï¼Œç”¨äºå±•ç¤ºè·¯å¾„æ–‡ä»¶å†…å®¹ã€‚</li><li>ä½ å¯ä»¥é€‚å½“çš„æ·»åŠ ä¸€äº›å…¶ä»–æŒ‰é’®è¿›å»ï¼Œæ¯”å¦‚ç¿»é¡µé˜…è¯»ã€æ»šåŠ¨æ¡ã€å­—æ•°å±•ç¤ºç­‰ã€‚</li></ul><h3 id="_3-toolwindow-å·¥å…·æ¡†" tabindex="-1"><a class="header-anchor" href="#_3-toolwindow-å·¥å…·æ¡†" aria-hidden="true">#</a> 3. ToolWindow å·¥å…·æ¡†</h3><p>ä¸ºäº†æŠŠæˆ‘ä»¬è‡ªå·±å®ç°çš„<code>é˜…è¯»çª—ä½“</code>æ”¾åˆ°æ•´ä¸ª IDEA å³ä¾§ä¾§è¾¹æ ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå®ç°äº† <code>ToolWindowFactory</code> çš„æ¥å£ï¼Œå¹¶æŠŠå®ç°ç±»é…ç½®åˆ° plugin.xml ä¸­</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReadFactory</span> <span class="token keyword">implements</span> <span class="token class-name">ToolWindowFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">ReadUI</span> readUI <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReadUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createToolWindowContent</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NotNull</span> <span class="token class-name">Project</span> project<span class="token punctuation">,</span> <span class="token annotation punctuation">@NotNull</span> <span class="token class-name">ToolWindow</span> toolWindow<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// è·å–å†…å®¹å·¥å‚çš„å®ä¾‹</span>
        <span class="token class-name">ContentFactory</span> contentFactory <span class="token operator">=</span> <span class="token class-name">ContentFactory</span><span class="token punctuation">.</span><span class="token constant">SERVICE</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å– ToolWindow æ˜¾ç¤ºçš„å†…å®¹</span>
        <span class="token class-name">Content</span> content <span class="token operator">=</span> contentFactory<span class="token punctuation">.</span><span class="token function">createContent</span><span class="token punctuation">(</span>readUI<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è®¾ç½® ToolWindow æ˜¾ç¤ºçš„å†…å®¹</span>
        toolWindow<span class="token punctuation">.</span><span class="token function">getContentManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addContent</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å…¨å±€ä½¿ç”¨</span>
        <span class="token class-name">Config</span><span class="token punctuation">.</span>readUI <span class="token operator">=</span> readUI<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ¥å£æ–¹æ³• <code>ToolWindowFactory#createToolWindowContent</code> æ˜¯éœ€è¦è‡ªå·±å·¥å…·æ¡†ç±»å®ç°çš„æ–¹æ³•ï¼Œåœ¨è¿™ä¸ª <code>createToolWindowContent</code> æ–¹æ³•ä¸­æŠŠè‡ªå·±çš„çª—ä½“ <code>ReadUI</code> å®ä¾‹åŒ–åå¡«å……è¿›å»å³å¯ã€‚</li><li>æ·»åŠ çª—ä½“çš„è¡¥åŠ©ä¸»è¦ä¾èµ–äº <code>ContentFactory.SERVICE.getInstance()</code> åˆ›å»ºå‡º ContentFactory å¹¶æœ€ç»ˆä½¿ç”¨ toolWindow æ·»åŠ çª—ä½“æ˜¾ç¤º UI å³å¯ã€‚</li><li>è¿™é‡Œæˆ‘ä»¬é¢å¤–çš„è¿˜æ·»åŠ äº†ä¸€ä¸ªå…¨å±€å±æ€§ <code>Config.readUI</code> è¿™æ˜¯ä¸ºäº†åç»­å¯ä»¥åœ¨é…ç½®çª—ä½“ä¸­ä½¿ç”¨è¿™ä¸ª UI è¿›è¡Œè®¾ç½®æ–‡ä»¶å†…å®¹ã€‚</li></ul><h3 id="_4-configurable-é…ç½®æ¡†" tabindex="-1"><a class="header-anchor" href="#_4-configurable-é…ç½®æ¡†" aria-hidden="true">#</a> 4. Configurable é…ç½®æ¡†</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SettingFactory</span> <span class="token keyword">implements</span> <span class="token class-name">SearchableConfigurable</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">SettingUI</span> settingUI <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SettingUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token annotation punctuation">@NotNull</span> <span class="token class-name">String</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;test.id&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token annotation punctuation">@Nls</span><span class="token punctuation">(</span>capitalization <span class="token operator">=</span> <span class="token class-name">Nls<span class="token punctuation">.</span>Capitalization<span class="token punctuation">.</span>Title</span><span class="token punctuation">)</span> <span class="token class-name">String</span> <span class="token function">getDisplayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;test-config&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">JComponent</span> <span class="token function">createComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> settingUI<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isModified</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ConfigurationException</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> settingUI<span class="token punctuation">.</span><span class="token function">getUrlTextField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è®¾ç½®æ–‡æœ¬ä¿¡æ¯</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">RandomAccessFile</span> randomAccessFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RandomAccessFile</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token string">&quot;r&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            randomAccessFile<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> readSize <span class="token operator">=</span> randomAccessFile<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> copy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>readSize<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> copy<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> readSize<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>copy<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// è®¾ç½®å†…å®¹</span>
            <span class="token class-name">Config</span><span class="token punctuation">.</span>readUI<span class="token punctuation">.</span><span class="token function">getTextContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ignore<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å®ç°è‡ª SearchableConfigurable æ¥å£çš„æ–¹æ³•æ¯”è¾ƒå¤šï¼ŒåŒ…æ‹¬ï¼šgetIdã€getDisplayNameã€<code>createComponent</code>ã€isModifiedã€<code>apply</code> è¿™äº›é‡Œé¢ç”¨äºå†™é€»è¾‘å®ç°çš„ä¸»è¦æ˜¯ <code>createComponent</code> å’Œ <code>apply</code></li><li>createComponent æ–¹æ³•ä¸»è¦æ˜¯æŠŠæˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„ UI é¢æ¿æä¾›ç»™ JComponent</li><li>apply æ˜¯ä¸€ä¸ªäº‹ä»¶ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»å®Œæˆé…ç½®çš„ OKã€å®Œæˆï¼Œæ—¶å€™å°±ä¼šè§¦å‘åˆ°è¿™ä¸ªæ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­æˆ‘ä»¬æ‹¿åˆ°æ–‡ä»¶çš„ URL åœ°å€ä½¿ç”¨ <code>RandomAccessFile</code> è¿›è¡Œè¯»å–è§£ææ–‡ä»¶ï¼Œå¹¶æœ€ç»ˆæŠŠæ–‡ä»¶å†…å®¹å±•ç¤ºåˆ°é˜…è¯»çª—ä½“ä¸­ <code>Config.readUI.getTextContent().setText(str);</code></li></ul><h3 id="_5-é…ç½®-plugin-xml" tabindex="-1"><a class="header-anchor" href="#_5-é…ç½®-plugin-xml" aria-hidden="true">#</a> 5. é…ç½® plugin.xml</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token operator">&lt;</span>extensions defaultExtensionNs<span class="token operator">=</span><span class="token string">&quot;com.intellij&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token class-name">Add</span> your extensions here <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> é…ç½® <span class="token class-name">File</span> <span class="token operator">-&gt;</span> <span class="token class-name">Settings</span> <span class="token operator">-&gt;</span> <span class="token class-name">Tools</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>projectConfigurable groupId<span class="token operator">=</span><span class="token string">&quot;tools&quot;</span> displayName<span class="token operator">=</span><span class="token string">&quot;My Test Config&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;test.id&quot;</span>
                         instance<span class="token operator">=</span><span class="token string">&quot;cn.bugstack.guide.idea.plugin.factory.SettingFactory&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                         
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> çª—ä½“ <span class="token punctuation">(</span><span class="token constant">IDEA</span> ç•Œé¢å³ä¾§<span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>toolWindow id<span class="token operator">=</span><span class="token string">&quot;Read-Book&quot;</span> secondary<span class="token operator">=</span><span class="token string">&quot;false&quot;</span> anchor<span class="token operator">=</span><span class="token string">&quot;right&quot;</span> icon<span class="token operator">=</span><span class="token string">&quot;/icons/logo.png&quot;</span>
                factoryClass<span class="token operator">=</span><span class="token string">&quot;cn.bugstack.guide.idea.plugin.factory.ReadFactory&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>extensions<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æœ¬æ¬¡åœ¨ plugin.xml ä¸­çš„ä¸»è¦é…ç½®å†…å®¹å°±æ˜¯ projectConfigurable å’Œ toolWindowï¼Œå¦å¤–åœ¨ toolWindow ä¸­è¿˜æ·»åŠ äº†ä¸€ä¸ª icon çš„ logoï¼Œé…ç½®å®Œæˆåå°±å¯ä»¥åœ¨ IDEA é¡µé¢å±•ç¤ºå‡ºæˆ‘ä»¬çš„è‡ªå·±æ·»åŠ çš„çª—ä½“äº†ã€‚</li></ul><h2 id="å››ã€æ’ä»¶æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#å››ã€æ’ä»¶æµ‹è¯•" aria-hidden="true">#</a> å››ã€æ’ä»¶æµ‹è¯•</h2><ul><li>é€šè¿‡ Plugin å¯åŠ¨æ’ä»¶ï¼Œè¿™ä¸ªæ—¶å€™ä¼šæ‰“å¼€ä¸€ä¸ªæ–°çš„ IDEA çª—ä½“ï¼Œåœ¨è¿™ä¸ªæ–°çª—ä½“ä¸­å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ·»åŠ çš„åŠŸèƒ½äº†ã€‚</li></ul><p><strong>é…ç½®æ–‡ä»¶è·¯å¾„</strong></p><p><img src="https://bugstack.cn/images/article/assembly/assembly-211103-04.png" alt=""></p><ul><li>ç‚¹å‡»é€‰æ‹©æŒ‰é’®ï¼Œé€‰æ‹©ä½ çš„æ–‡ä»¶ä½ç½®ï¼Œé€‰æ‹©åç‚¹å‡» OK</li></ul><p><strong>æŸ¥çœ‹å±•ç¤ºæ–‡ä»¶</strong></p><p><img src="https://bugstack.cn/images/article/assembly/assembly-211103-05.png" alt=""></p><ul><li>ç¡®è®¤å¥½æ–‡ä»¶è·¯å¾„åï¼Œå°±å¯ä»¥å†å³ä¾§æ çœ‹åˆ°è‡ªå·±çš„æ–‡ä»¶å±•ç¤ºå†…å®¹äº†ã€‚<em>æ˜¯ä¸æ˜¯åœ¨æ‰©å±•äº›ï¼Œå°±é€‚åˆä½ æ‘¸é±¼äº†ï¼ï¼Ÿ</em></li></ul><h2 id="äº”ã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#äº”ã€æ€»ç»“" aria-hidden="true">#</a> äº”ã€æ€»ç»“</h2><ul><li>å­¦ä¹ è‡ªå®šä¹‰å¼€å‘UIï¼ŒæŠŠUIå¡«å……åˆ°éœ€è¦æ”¾ç½®çš„ IDEA çª—ä½“ä½ç½®ï¼Œå¹¶åœ¨çª—ä½“ä¸­æ·»åŠ åŠŸèƒ½çš„æµç¨‹æ­¥éª¤ï¼Œå…¶å®ä¸»è¦åŒ…æ‹¬ä¸‰æ–¹é¢ï¼šSwing UIã€Factory å®ç°ç±»ã€plugin é…ç½®ã€‚</li><li>åœ¨ plugin é…ç½®ä¸­ï¼Œä¸»è¦åŒ…æ‹¬å¦‚çª—ä½“IDã€ä½ç½®ã€iconå›¾æ ‡ã€å¯¹åº”çš„å®ç°ç±»ï¼Œå¦‚æœä¸æ·»åŠ è¿™äº›æ˜¯ä¸èƒ½æ­£å¸¸å±•ç¤ºçª—ä½“ä¿¡æ¯çš„ã€‚</li><li>å¦å¤–å¯ä»¥ä»¥è¿™ä¸ªæ¡ˆä¾‹ä¸ºåŸºç¡€ï¼Œæ·»åŠ è‡ªå·±æƒ³å®Œæˆçš„åŠŸèƒ½ï¼Œæ¯”å¦‚è®©è¿™ä¸ªæ‘¸é±¼çœ‹ä¹¦çš„åŠŸèƒ½æ›´åŠ å®Œå–„ï¼Œå¯ä»¥æ”¯æŒä¸åŒç±»å‹çš„æ–‡ä»¶ï¼Œç”šè‡³å¯ä»¥æ˜¯ PDF çš„é˜…è¯»ï¼Œä»¥åŠä½ æƒ³çœ‹çš„ä¹¦ç±ã€‚</li></ul>`,47);function b(g,h){const a=p("ExternalLinkIcon");return o(),c("div",null,[u,n("p",null,[s("ä½œè€…ï¼šå°å‚…å“¥ "),r,s("åšå®¢ï¼š"),n("a",d,[s("https://bugstack.cn"),e(a)]),k,s("åŸæ–‡ï¼š"),n("a",v,[s("https://mp.weixin.qq.com/s/R8qvoSNyedVM95Ty8sbhgg"),e(a)])]),m])}const w=t(i,[["render",b],["__file","2021-11-03-ã€ŠIntelliJ IDEA chajiankaifaã€‹dierjieï¼špeizhichuangtihecebianlanchuangtideshiyong.html.vue"]]);export{w as default};
