---
title: 第5节：公众号发送验证码鉴权登录
pay: https://t.zsxq.com/10sh5hUmt
---

# 《ChatGPT 微服务应用体系构建》 - chatgpt-api 第5节：公众号发送验证码鉴权登录

作者：小傅哥
<br/>博客：[https://bugstack.cn](https://bugstack.cn)

>沉淀、分享、成长，让自己和他人都能有所收获！😄

- **本章难度**：★★★★☆
- **本章重点**：基于 DDD 架构，设计鉴权、微信公众号、OpenAI三个服务模块的功能实现，完成对公众号的对接下发验证码，以及提供接口登录鉴权和下发Token，再到OpenAI使用Token验证鉴权信息。
- **课程视频**：[https://t.zsxq.com/10GlIL0ue](https://t.zsxq.com/10GlIL0ue)

**版权说明**：©本项目与星球签约合作，受[《中华人民共和国著作权法实施条例》](http://www.gov.cn/zhengce/2020-12/26/content_5573623.htm) 版权法保护，禁止任何理由和任何方式公开(public)源码、资料、视频等内容到Github、Gitee等，违反可追究进一步的法律行动。

作者：小傅哥
<br/>博客：[https://bugstack.cn](https://bugstack.cn)

>沉淀、分享、成长，让自己和他人都能有所收获！😄

## 一、本章诉求

本章的核心点在于登录鉴权，鉴权通过后才允许对 ChatGPT 的使用。一般一个软件服务，都会包括3大块；登录、支付、服务，只提供服务叫开源、提供服务和登录叫吸粉、三个都提供就商业变现。

所以当你有明确的商业变现模式后，你就可以把用户引导到一个确定的地方进行登录。比如小傅哥带着大家搞的本章节就是把用户引入到公众号进行登录，这样用户也就关注了你的公众号。好，那么本章节我们做一下这样的开发，让以后此类需求的伙伴，可以学到对应的解决方案和实现途径。

## 二、流程设计

公众号分为个人和企业，企业的公众号功能更完整，可以简单的通过用户扫码的方式进行登录，因为扫码的时候可以涵盖请求连接上的信息。但个人公众号是不允许这样的做的，所以个人公众号一般有2个方式；
- A - 通过网页的浏览器指纹组件库，生成唯一ID，并在网页轮训公众号服务接口判断 ID 是否写入，并引导用户把 ID 通过公众号回复。这样就可以做到自动登录/解锁了。
- B - 验证码方式，让用户在公众号回复指定数字，获取一个验证码，此时验证码写入内存/缓存中。并引导用户拿到验证码在网页登录页面输入，输入后由前端页面调用服务端接口校验验证码。此时校验后可以拿到一个 Token 授权使用。

<div align="center">
    <img src="https://bugstack.cn/images/article/project/chatgpt/chatgpt-api-05-01.png?raw=true" width="750px">
</div>

- 如图，就是用户整个登录到授权通过的旅程，目前本章节主要来实现微信公众号的鉴权接口服务端部分，下一节来对接前端UI。
- 如果，你有企业公众号，也可以修改为扫码登录方式下发 Token 体验会更好。就不用用户在输入一次验证码了。